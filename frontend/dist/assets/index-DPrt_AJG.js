import{d as e,c as t,t as i,i as n,a as r,S as o,F as a,b as l,e as d,m as s,f as c,s as u,M as v,g as h,h as g,j as p,u as _,o as m,k as b,r as f}from"./vendor-BEJxU4kO.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const y="_app_17rx3_15",w="_header_17rx3_21",x="_headerTitle_17rx3_31",S="_userInfo_17rx3_41",k="_logoutButton_17rx3_48",$="_orgSwitcher_17rx3_62",C="_orgName_17rx3_77",j="_container_17rx3_84",L="_sidebar_17rx3_90",T="_active_17rx3_123",E="_sidebarHeader_17rx3_129",P="_loading_17rx3_163",I="_pageList_17rx3_169",z="_sidebarFooter_17rx3_175",R="_pageItem_17rx3_192",N="_main_17rx3_222",D="_error_17rx3_230",B="_welcome_17rx3_238",A="_createForm_17rx3_254",O="_editor_17rx3_262",F="_editorHeader_17rx3_268",W="_editorStatus_17rx3_277",U="_unsavedIndicator_17rx3_285",G="_savingIndicator_17rx3_290",M="_savedIndicator_17rx3_296",J="_titleInput_17rx3_310",H="_editorActions_17rx3_321",q="_createButton_17rx3_327",V="_sidebarActions_17rx3_349",Y="_nodeIcon_17rx3_368",K="_welcomeActions_17rx3_373",Q="_nodeContent_17rx3_379",X="_editorContent_17rx3_386",Z="_databaseView_17rx3_395",ee="_databaseHeader_17rx3_403",te="_viewToggle_17rx3_410",ie="_sidebarNodeWrapper_17rx3_431",ne="_childList_17rx3_437",re="_pageTitleText_17rx3_443",oe="_expandIcon_17rx3_449",ae="_expanded_17rx3_462",le="_hidden_17rx3_466",de="_breadcrumbs_17rx3_470",se="_breadcrumbItem_17rx3_480",ce="_breadcrumbSeparator_17rx3_489",ue="_contentInput_17rx3_493",ve="_historyPanel_17rx3_512",he="_historyList_17rx3_527",ge="_historyItem_17rx3_534",pe="_historyMeta_17rx3_551",_e="_historyDate_17rx3_558",me="_historyHash_17rx3_562",be="_historyMessage_17rx3_569";var fe=i("<ul>"),ye=i("<li><div><span>‚ñ∂</span><span></span><span>");function we(e){const[i,v]=t(!0),h=e=>{e.stopPropagation(),v(!i())};return g=ye(),p=g.firstChild,_=p.firstChild,m=_.nextSibling,b=m.nextSibling,p.$$click=()=>e.onSelect(e.node),_.$$click=h,n(m,()=>"database"===e.node.type?"üìä":"üìÑ"),n(b,()=>e.node.title),n(g,r(o,{get when(){var t;return s(()=>!!i())()&&(null==(t=e.node.children)?void 0:t.length)},get children(){var t=fe();return n(t,r(a,{get each(){return e.node.children},children:t=>r(we,{node:t,get selectedId(){return e.selectedId},get onSelect(){return e.onSelect},get depth(){return e.depth+1}})})),l(()=>d(t,ne)),t}}),null),l(t=>{var n,r=ie,o=R,a={[`${T}`]:e.selectedId===e.node.id},l=12*e.depth+8+"px",s=oe,v={[`${ae}`]:i(),[`${le}`]:!(null==(n=e.node.children)?void 0:n.length)},h=Y,f=re;return r!==t.e&&d(g,t.e=r),o!==t.t&&d(p,t.t=o),t.a=c(p,a,t.a),l!==t.o&&u(p,"padding-left",t.o=l),s!==t.i&&d(_,t.i=s),t.n=c(_,v,t.n),h!==t.s&&d(m,t.s=h),f!==t.h&&d(b,t.h=f),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),g;var g,p,_,m,b}e(["click"]);const xe="_preview_3gc71_1";var Se=i('<div role=region aria-label="Markdown preview">');const ke=new v({html:!0,linkify:!0,typographer:!0}),$e=ke.renderer.rules.image||function(e,t,i,n,r){return r.renderToken(e,t,i)};function Ce(e){return t=Se(),l(i=>{var n=xe,r=ke.render(e.content,{orgId:e.orgId});return n!==i.e&&d(t,i.e=n),r!==i.t&&(t.innerHTML=i.t=r),i},{e:void 0,t:void 0}),t;var t}ke.renderer.rules.image=(e,t,i,n,r)=>{const o=e[t],a=o.attrIndex("src"),l=o.attrs,d=null==n?void 0:n.orgId;if(l&&a>=0&&d){let e=l[a][1];if(e.startsWith("assets/")){const t=e.split("/");t.length>=2&&(e=`/assets/${d}/${t.slice(1).join("/")}`,l[a][1]=e)}}return $e(e,t,i,n,r)};const je="_container_x612v_1",Le="_tableWrapper_x612v_10",Te="_table_x612v_10",Ee="_headerRow_x612v_25",Pe="_headerCell_x612v_33",Ie="_row_x612v_46",ze="_cell_x612v_55",Re="_editing_x612v_69",Ne="_cellContent_x612v_74",De="_editContainer_x612v_82",Be="_input_x612v_88",Ae="_editActions_x612v_105",Oe="_saveBtn_x612v_110",Fe="_cancelBtn_x612v_111",We="_actionsCell_x612v_132",Ue="_deleteBtn_x612v_140",Ge="_addBtn_x612v_155",Me="_newRow_x612v_171",Je="_required_x612v_180",He="_empty_x612v_186",qe="_loadMore_x612v_193";var Ve=i("<input type=checkbox>"),Ye=i("<select><option value>--"),Ke=i("<option>"),Qe=i("<input type=number>"),Xe=i("<input type=date>"),Ze=i("<input type=text>"),et=i("<tr><td><button>+"),tt=i("<div>No records. Click + to add one."),it=i("<div><button>Load More"),nt=i("<div><div><table><thead><tr><th>Actions</th></tr></thead><tbody>"),rt=i("<span>*"),ot=i("<th>"),at=i('<button title="Delete record">‚úï'),lt=i("<tr><td>"),dt=i("<div><div><button>‚úì</button><button>‚úï"),st=i("<td>"),ct=i("<div>");function ut(e){const[i,s]=t(null),[u,v]=t(""),[h,g]=t({}),p=e=>{v(e)},_=()=>{e.onAddRecord&&Object.keys(h()).length>0&&(e.onAddRecord(h()),g({}))},m=(t,i)=>{const n=((t,i)=>{const n=e.columns.find(e=>e.id===i);return n?t.data[n.name]??"":""})(t,i.id);switch(i.type){case"checkbox":return n?"‚úì":"";case"select":case"multi_select":case"number":default:return String(n);case"date":return n?new Date(n).toLocaleDateString():""}},b=(e,t)=>{switch(e.type){case"checkbox":return(u=Ve()).addEventListener("change",e=>p(String(e.target.checked))),l(()=>d(u,Be)),l(()=>u.checked=Boolean(t)),u;case"select":return(c=Ye()).firstChild,c.addEventListener("change",e=>p(e.target.value)),c.value=t,n(c,r(a,{get each(){return e.options??[]},children:e=>{return(t=Ke()).value=e,n(t,e),t;var t}}),null),l(()=>d(c,Be)),c;case"number":return(s=Qe()).$$input=e=>p(e.target.value),s.value=t,l(()=>d(s,Be)),s;case"date":return(o=Xe()).$$input=e=>p(e.target.value),o.value=t,l(()=>d(o,Be)),o;default:return(i=Ze()).$$input=e=>p(e.target.value),i.value=t,l(()=>d(i,Be)),i}var i,o,s,c,u};return f=nt(),y=f.firstChild,w=y.firstChild,x=w.firstChild,S=x.firstChild,k=S.firstChild,$=x.nextSibling,n(S,r(a,{get each(){return e.columns},children:e=>{return t=ot(),n(t,()=>e.name,null),n(t,r(o,{get when(){return e.required},get children(){var e=rt();return l(()=>d(e,Je)),e}}),null),l(()=>d(t,Pe)),t;var t}}),null),n($,r(a,{get each(){return e.records},children:t=>{return h=lt(),g=h.firstChild,n(g,r(o,{get when(){return e.onDeleteRecord},get children(){var i=at();return i.$$click=()=>{var i;return null==(i=e.onDeleteRecord)?void 0:i.call(e,t.id)},l(()=>d(i,Ue)),i}})),n(h,r(a,{get each(){return e.columns},children:a=>{const h=()=>{var e,n;return(null==(e=i())?void 0:e.recordId)===t.id&&(null==(n=i())?void 0:n.columnId)===a.id};return(g=st()).$$click=()=>((t,i)=>{var n;const r=e.columns.find(e=>e.id===i),o=(null==(n=e.records.find(e=>e.id===t))?void 0:n.data[(null==r?void 0:r.name)??""])??"";s({recordId:t,columnId:i}),v(String(o))})(t.id,a.id),n(g,r(o,{get when(){return h()},get fallback(){return e=ct(),n(e,()=>m(t,a)),l(()=>d(e,Ne)),e;var e},get children(){var i=dt(),r=i.firstChild,o=r.firstChild,c=o.nextSibling;return n(i,()=>b(a,u()),r),o.$$click=()=>((t,i)=>{const n=e.columns.find(e=>e.id===i);if(!n||!e.onUpdateRecord)return;const r=e.records.find(e=>e.id===t);if(!r)return;const o={...r.data};o[n.name]=u(),e.onUpdateRecord(t,o),s(null)})(t.id,a.id),c.$$click=()=>s(null),l(e=>{var t=De,n=Ae,a=Oe,l=Fe;return t!==e.e&&d(i,e.e=t),n!==e.t&&d(r,e.t=n),a!==e.a&&d(o,e.a=a),l!==e.o&&d(c,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),i}})),l(e=>{var t=ze,i={[`${Re}`]:h()};return t!==e.e&&d(g,e.e=t),e.t=c(g,i,e.t),e},{e:void 0,t:void 0}),g;var g}}),null),l(e=>{var t=Ie,i=We;return t!==e.e&&d(h,e.e=t),i!==e.t&&d(g,e.t=i),e},{e:void 0,t:void 0}),h;var h,g}}),null),n($,r(o,{get when(){return e.onAddRecord},get children(){var t=et(),i=t.firstChild,o=i.firstChild;return o.$$click=_,n(t,r(a,{get each(){return e.columns},children:e=>{return t=st(),n(t,()=>b(e,String(h()[e.name]??""))),l(()=>d(t,ze)),t;var t}}),null),l(e=>{var n=Me,r=We,a=Ge;return n!==e.e&&d(t,e.e=n),r!==e.t&&d(i,e.t=r),a!==e.a&&d(o,e.a=a),e},{e:void 0,t:void 0,a:void 0}),t}}),null),n(f,r(o,{get when(){return 0===e.records.length},get children(){var e=tt();return l(()=>d(e,He)),e}}),null),n(f,r(o,{get when(){return e.hasMore},get children(){var t=it();return t.firstChild.$$click=()=>{var t;return null==(t=e.onLoadMore)?void 0:t.call(e)},l(()=>d(t,qe)),t}}),null),l(e=>{var t=je,i=Le,n=Te,r=Ee,o=Pe;return t!==e.e&&d(f,e.e=t),i!==e.t&&d(y,e.t=i),n!==e.a&&d(w,e.a=n),r!==e.o&&d(S,e.o=r),o!==e.i&&d(k,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),f;var f,y,w,x,S,k,$}e(["input","click"]);const vt="_grid_xvgf8_1",ht="_card_xvgf8_8",gt="_cardHeader_xvgf8_21",pt="_deleteBtn_xvgf8_29",_t="_cardBody_xvgf8_42",mt="_field_xvgf8_48",bt="_fieldName_xvgf8_53",ft="_fieldValue_xvgf8_60";var yt=i("<div>"),wt=i("<div><div><strong></strong><button>√ó</button></div><div>"),xt=i("<div><span>:</span><span>");function St(e){return t=yt(),n(t,r(a,{get each(){return e.records},children:t=>{return i=wt(),o=i.firstChild,s=o.firstChild,c=s.nextSibling,u=o.nextSibling,n(s,()=>String((e.columns[0]?t.data[e.columns[0].name]:null)||"Untitled")),c.$$click=()=>e.onDeleteRecord(t.id),n(u,r(a,{get each(){return e.columns.slice(1,4)},children:e=>{return i=xt(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,n(r,()=>e.name,o),n(a,()=>String(t.data[e.name]||"-")),l(e=>{var t=mt,n=bt,o=ft;return t!==e.e&&d(i,e.e=t),n!==e.t&&d(r,e.t=n),o!==e.a&&d(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),i;var i,r,o,a}})),l(e=>{var t=ht,n=gt,r=pt,a=_t;return t!==e.e&&d(i,e.e=t),n!==e.t&&d(o,e.t=n),r!==e.a&&d(c,e.a=r),a!==e.o&&d(u,e.o=a),e},{e:void 0,t:void 0,a:void 0,o:void 0}),i;var i,o,s,c,u}})),l(()=>d(t,vt)),t;var t}e(["click"]);const kt="_gallery_lpkrc_1",$t="_card_lpkrc_8",Ct="_imageContainer_lpkrc_26",jt="_image_lpkrc_26",Lt="_imagePlaceholder_lpkrc_42",Tt="_cardContent_lpkrc_47",Et="_cardHeader_lpkrc_51",Pt="_deleteBtn_lpkrc_58",It="_cardBody_lpkrc_74",zt="_field_lpkrc_78",Rt="_fieldName_lpkrc_86",Nt="_fieldValue_lpkrc_92";var Dt=i("<div>"),Bt=i("<div><div><div><strong></strong><button>‚úï</button></div><div>"),At=i("<img>"),Ot=i("<div>No Image"),Ft=i("<div><span>:</span><span>");function Wt(e){return t=Dt(),n(t,r(a,{get each(){return e.records},children:t=>{const i=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return s=Bt(),c=s.firstChild,u=c.firstChild,v=u.firstChild,g=v.nextSibling,p=u.nextSibling,n(s,r(o,{when:i,children:i=>{return a=Dt(),n(a,r(o,{get when(){return t.data[i().name]},get fallback(){return e=Ot(),l(()=>d(e,Lt)),e;var e},get children(){var n=At();return l(r=>{var o=String(t.data[i().name]),a=String((e.columns[0]?t.data[e.columns[0].name]:null)||"Record"),l=jt;return o!==r.e&&h(n,"src",r.e=o),a!==r.t&&h(n,"alt",r.t=a),l!==r.a&&d(n,r.a=l),r},{e:void 0,t:void 0,a:void 0}),n}})),l(()=>d(a,Ct)),a;var a}}),c),n(v,()=>String((e.columns[0]?t.data[e.columns[0].name]:null)||"Untitled")),g.$$click=()=>e.onDeleteRecord(t.id),n(p,r(a,{get each(){return e.columns.slice(1,3)},children:e=>{return i=Ft(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,n(r,()=>e.name,o),n(a,()=>String(t.data[e.name]||"-")),l(e=>{var t=zt,n=Rt,o=Nt;return t!==e.e&&d(i,e.e=t),n!==e.t&&d(r,e.t=n),o!==e.a&&d(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),i;var i,r,o,a}})),l(e=>{var t=$t,i=Tt,n=Et,r=Pt,o=It;return t!==e.e&&d(s,e.e=t),i!==e.t&&d(c,e.t=i),n!==e.a&&d(u,e.a=n),r!==e.o&&d(g,e.o=r),o!==e.i&&d(p,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s;var s,c,u,v,g,p}})),l(()=>d(t,kt)),t;var t}e(["click"]);const Ut="_board_1et8f_1",Gt="_noGroup_1et8f_7",Mt="_columns_1et8f_16",Jt="_column_1et8f_16",Ht="_columnHeader_1et8f_32",qt="_columnName_1et8f_39",Vt="_columnCount_1et8f_47",Yt="_cards_1et8f_56",Kt="_card_1et8f_56",Qt="_cardHeader_1et8f_76",Xt="_deleteBtn_1et8f_90",Zt="_cardBody_1et8f_104",ei="_field_1et8f_108",ti="_fieldName_1et8f_114",ii="_fieldValue_1et8f_119";var ni=i("<div>"),ri=i('<div>Add a "select" column to group by status.'),oi=i("<div><div><span></span><span></span></div><div>"),ai=i("<div><div><strong></strong><button>√ó</button></div><div>"),li=i("<div><span>:</span><span>");function di(e){const t=()=>e.columns.find(e=>"select"===e.type||"multi_select"===e.type),i=g(()=>{const i=t();if(!i)return[{name:"All Records",records:e.records}];const n=i.options||[],r={};return n.forEach(e=>{r[e]={name:e,records:[]}}),r.__none__={name:"No "+i.name,records:[]},e.records.forEach(e=>{const t=e.data[i.name];if(t&&"string"==typeof t&&n.includes(t)){const i=r[t];i&&i.records.push(e)}else{const t=r.__none__;t&&t.records.push(e)}}),Object.values(r).filter(e=>e.records.length>0||n.includes(e.name))});return s=ni(),n(s,r(o,{get when(){return t()},get fallback(){return e=ri(),l(()=>d(e,Gt)),e;var e},get children(){var o=ni();return n(o,r(a,{get each(){return i()},children:i=>{return o=oi(),s=o.firstChild,c=s.firstChild,u=c.nextSibling,v=s.nextSibling,n(c,()=>i.name),n(u,()=>i.records.length),n(v,r(a,{get each(){return i.records},children:i=>{return o=ai(),s=o.firstChild,c=s.firstChild,u=c.nextSibling,v=s.nextSibling,n(c,()=>String((e.columns[0]?i.data[e.columns[0].name]:null)||"Untitled")),u.$$click=()=>e.onDeleteRecord(i.id),n(v,r(a,{get each(){return e.columns.slice(1,4).filter(e=>{var i;return e.id!==(null==(i=t())?void 0:i.id)})},children:e=>{return t=li(),r=t.firstChild,o=r.firstChild,a=r.nextSibling,n(r,()=>e.name,o),n(a,()=>String(i.data[e.name]||"-")),l(e=>{var i=ei,n=ti,o=ii;return i!==e.e&&d(t,e.e=i),n!==e.t&&d(r,e.t=n),o!==e.a&&d(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),t;var t,r,o,a}})),l(e=>{var t=Kt,i=Qt,n=Xt,r=Zt;return t!==e.e&&d(o,e.e=t),i!==e.t&&d(s,e.t=i),n!==e.a&&d(u,e.a=n),r!==e.o&&d(v,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),o;var o,s,c,u,v}})),l(e=>{var t=Jt,i=Ht,n=qt,r=Vt,a=Yt;return t!==e.e&&d(o,e.e=t),i!==e.t&&d(s,e.t=i),n!==e.a&&d(c,e.a=n),r!==e.o&&d(u,e.o=r),a!==e.i&&d(v,e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,s,c,u,v}})),l(()=>d(o,Mt)),o}})),l(()=>d(s,Ut)),s;var s}e(["click"]);const si="_settings_4iycv_1",ci="_header_4iycv_7",ui="_closeButton_4iycv_16",vi="_section_4iycv_28",hi="_table_4iycv_38",gi="_roleSelect_4iycv_56",pi="_error_4iycv_62",_i="_success_4iycv_70",mi="_tabs_4iycv_79",bi="_activeTab_4iycv_101",fi="_settingsForm_4iycv_106",yi="_formItem_4iycv_113",wi="_checkboxLabel_4iycv_133",xi="_saveButton_4iycv_146",Si="_hint_4iycv_165",ki="_inviteSection_4iycv_171",$i="_inviteForm_4iycv_175",Ci="_formGroup_4iycv_186",ji="_addRemoteSection_4iycv_217",Li="_actions_4iycv_229",Ti="_smallButton_4iycv_234",Ei="_deleteButtonSmall_4iycv_248";var Pi=i("<button>Git Sync"),Ii=i("<div>"),zi=i("<table><thead><tr><th>Name</th><th>Email</th><th>Role</th></tr></thead><tbody>"),Ri=i("<h4>Pending Invitations"),Ni=i("<table><thead><tr><th>Email</th><th>Role</th><th>Sent</th></tr></thead><tbody>"),Di=i('<div><form><h4>Invite new member</h4><div><input type=email placeholder="Email address"required><select><option value=admin>Admin</option><option value=editor>Editor</option><option value=viewer>Viewer</option></select><button type=submit>Invite'),Bi=i("<section><h3>Members"),Ai=i("<section><h3>Personal Settings</h3><form><div><label>Theme</label><select><option value=light>Light</option><option value=dark>Dark</option><option value=system>System</option></select></div><div><label>Language</label><select><option value=en>English</option><option value=fr>French</option><option value=de>German</option><option value=es>Spanish</option></select></div><div><label><input type=checkbox>Enable notifications for this workspace</label></div><button type=submit>Save Changes"),Oi=i('<form><div><label>Organization Name</label><input type=text disabled title="Rename is not supported yet"></div><div><label><input type=checkbox>Allow public access (Read-only)</label></div><div><label>Allowed Email Domains (comma separated)</label><input type=text placeholder="example.com, company.org"><p>Users with these email domains can join automatically.</p></div><button type=submit>Save Workspace Settings'),Fi=i("<section><h3>Workspace Settings"),Wi=i("<table><thead><tr><th>Name</th><th>URL</th><th>Last Sync</th><th>Actions</th></tr></thead><tbody>"),Ui=i("<section><h3>Git Synchronization</h3><p>Synchronize your workspace data with an external Git repository.</p><div><h4>Add New Remote</h4><form><div><label>Remote Name</label><input type=text placeholder=origin required></div><div><label>Repository URL</label><input type=url placeholder=https://github.com/user/repo.git required></div><div><label>Personal Access Token (optional)</label><input type=password placeholder=ghp_...><p>Used for authentication when pushing.</p></div><button type=submit>Add Remote"),Gi=i("<div><header><h2>Settings</h2><button>&times;</button></header><div><button>Members</button><button>Personal</button><button>Workspace"),Mi=i("<p>Only admins can view member list."),Ji=i("<select><option value=admin>Admin</option><option value=editor>Editor</option><option value=viewer>Viewer"),Hi=i("<tr><td></td><td></td><td>"),qi=i("<p>Only admins can modify workspace settings."),Vi=i("<tr><td></td><td></td><td></td><td><button>Push</button><button>Remove");function Yi(e){const[i,c]=t("members"),[u,v]=t([]),[h,g]=t([]),[_,m]=t([]),[b,f]=t("origin"),[y,w]=t(""),[x,S]=t(""),[k,$]=t(""),[C,j]=t("viewer"),[L,T]=t("light"),[E,P]=t("en"),[I,z]=t(!0);p(()=>{var t,i;T((null==(t=e.user.settings)?void 0:t.theme)||"light"),P((null==(i=e.user.settings)?void 0:i.language)||"en")});const[R,N]=t(""),[D,B]=t(!1),[A,O]=t(""),[F,W]=t(!1),[U,G]=t(null),[M,J]=t(null),H=async(t,i={})=>{var n;let r=t;t.startsWith("/api/")&&!t.startsWith("/api/auth/")&&(r=`/api/${e.user.organization_id}${t.substring(4)}`);const o=await fetch(r,{...i,headers:{...i.headers,Authorization:`Bearer ${e.token}`}});if(!o.ok){const e=await o.json();throw new Error((null==(n=e.error)?void 0:n.message)||e.error||"Request failed")}return o},q=async()=>{var t,n,r,o,a,l,d;try{W(!0),G(null);const s=[];if("members"===i()&&"admin"===e.user.role&&(s.push(H("/api/users")),s.push(H("/api/invitations"))),"workspace"===i()&&s.push(H("/api/settings/organization")),"sync"===i()&&"admin"===e.user.role&&s.push(H("/api/settings/git/remotes")),0===s.length)return;const c=await Promise.all(s);if("members"===i()&&"admin"===e.user.role){const e=await c[0].json(),i=await c[1].json();v((null==(t=e.users)?void 0:t.filter(Boolean))||[]),g((null==(n=i.invitations)?void 0:n.filter(Boolean))||[])}if("workspace"===i()){const e=await c[c.length-1].json();N(e.name),B((null==(r=e.settings)?void 0:r.public_access)||!1),O((null==(a=null==(o=e.settings)?void 0:o.allowed_domains)?void 0:a.join(", "))||"")}if("sync"===i()&&"admin"===e.user.role){const e=await c[c.length-1].json();m(e.remotes||[])}const u=null==(l=e.user.memberships)?void 0:l.find(t=>t.organization_id===e.user.organization_id);u&&z((null==(d=u.settings)?void 0:d.notifications)??!0)}catch(s){G("Failed to load settings: "+s)}finally{W(!1)}};p(()=>{q()});const V=async e=>{if(e.preventDefault(),k())try{W(!0),await H("/api/invitations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:k(),role:C()})}),$(""),J("Invitation sent successfully"),q()}catch(t){G("Failed to send invitation: "+t)}finally{W(!1)}},Y=async e=>{e.preventDefault();try{W(!0),G(null),J(null);const e={theme:L(),language:E()},t={notifications:I()};await Promise.all([H("/api/auth/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:e})}),H("/api/settings/membership",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:t})})]),J("Personal settings saved successfully")}catch(t){G("Failed to save settings: "+t)}finally{W(!1)}},K=async e=>{e.preventDefault();try{W(!0),G(null),J(null);const e={public_access:D(),allowed_domains:A()?A().split(",").map(e=>e.trim()):[]};await H("/api/settings/organization",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:e})}),J("Workspace settings saved successfully")}catch(t){G("Failed to save workspace settings: "+t)}finally{W(!1)}},Q=async e=>{e.preventDefault();try{W(!0),G(null),await H("/api/settings/git/remotes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:b(),url:y(),token:x(),type:"custom",auth_type:x()?"token":"none"})}),J("Remote added"),w(""),S(""),q()}catch(t){G("Failed to add remote: "+t)}finally{W(!1)}};return X=Gi(),Z=X.firstChild,ee=Z.firstChild.nextSibling,te=Z.nextSibling,ie=te.firstChild,ne=ie.nextSibling,re=ne.nextSibling,ee.$$click=()=>e.onClose(),ie.$$click=()=>c("members"),ne.$$click=()=>c("personal"),re.$$click=()=>c("workspace"),n(te,r(o,{get when(){return"admin"===e.user.role},get children(){var e=Pi();return e.$$click=()=>c("sync"),l(()=>d(e,"sync"===i()?bi:"")),e}}),null),n(X,r(o,{get when(){return U()},get children(){var e=Ii();return n(e,U),l(()=>d(e,pi)),e}}),null),n(X,r(o,{get when(){return M()},get children(){var e=Ii();return n(e,M),l(()=>d(e,_i)),e}}),null),n(X,r(o,{get when(){return"members"===i()},get children(){var t=Bi();return t.firstChild,n(t,r(o,{get when(){return"admin"===e.user.role},get fallback(){return Mi()},get children(){return[(p=zi(),_=p.firstChild.nextSibling,n(_,r(a,{get each(){return u()},children:t=>{return i=Hi(),a=i.firstChild,s=a.nextSibling,c=s.nextSibling,n(a,()=>t.name),n(s,()=>t.email),n(c,r(o,{get when(){return t.id!==e.user.id},get fallback(){return t.role},get children(){var e=Ji();return e.addEventListener("change",e=>(async(e,t)=>{try{W(!0),await H("/api/users/role",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e,role:t})}),J("Role updated"),q()}catch(i){G("Failed to update role: "+i)}finally{W(!1)}})(t.id,e.target.value)),l(()=>d(e,gi)),l(()=>e.value=t.role),e}})),i;var i,a,s,c}})),l(()=>d(p,hi)),p),(t=Di(),i=t.firstChild,s=i.firstChild.nextSibling,c=s.firstChild,v=c.nextSibling,g=v.nextSibling,i.addEventListener("submit",V),c.$$input=e=>$(e.target.value),v.addEventListener("change",e=>j(e.target.value)),n(t,r(o,{get when(){return h().length>0},get children(){return[Ri(),(e=Ni(),t=e.firstChild.nextSibling,n(t,r(a,{get each(){return h()},children:e=>{return t=Hi(),i=t.firstChild,r=i.nextSibling,o=r.nextSibling,n(i,()=>e.email),n(r,()=>e.role),n(o,()=>new Date(e.created).toLocaleDateString()),t;var t,i,r,o}})),l(()=>d(e,hi)),e)];var e,t}}),null),l(e=>{var n=ki,r=$i,o=Ci,a=F();return n!==e.e&&d(t,e.e=n),r!==e.t&&d(i,e.t=r),o!==e.a&&d(s,e.a=o),a!==e.o&&(g.disabled=e.o=a),e},{e:void 0,t:void 0,a:void 0,o:void 0}),l(()=>c.value=k()),l(()=>v.value=C()),t)];var t,i,s,c,v,g,p,_}}),null),l(()=>d(t,vi)),t}}),null),n(X,r(o,{get when(){return"personal"===i()},get children(){var e=Ai(),t=e.firstChild.nextSibling,i=t.firstChild,n=i.firstChild.nextSibling,r=i.nextSibling,o=r.firstChild.nextSibling,a=r.nextSibling,s=a.firstChild,c=s.firstChild,u=a.nextSibling;return t.addEventListener("submit",Y),n.addEventListener("change",e=>T(e.target.value)),o.addEventListener("change",e=>P(e.target.value)),c.addEventListener("change",e=>z(e.currentTarget.checked)),l(n=>{var o=vi,l=fi,c=yi,v=yi,h=yi,g=wi,p=xi,_=F();return o!==n.e&&d(e,n.e=o),l!==n.t&&d(t,n.t=l),c!==n.a&&d(i,n.a=c),v!==n.o&&d(r,n.o=v),h!==n.i&&d(a,n.i=h),g!==n.n&&d(s,n.n=g),p!==n.s&&d(u,n.s=p),_!==n.h&&(u.disabled=n.h=_),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),l(()=>n.value=L()),l(()=>o.value=E()),l(()=>c.checked=I()),e}}),null),n(X,r(o,{get when(){return"workspace"===i()},get children(){var t=Fi();return t.firstChild,n(t,r(o,{get when(){return"admin"===e.user.role},get fallback(){return qi()},get children(){var e=Oi(),t=e.firstChild,i=t.firstChild.nextSibling,n=t.nextSibling,r=n.firstChild,o=r.firstChild,a=n.nextSibling,s=a.firstChild.nextSibling,c=s.nextSibling,u=a.nextSibling;return e.addEventListener("submit",K),i.$$input=e=>N(e.target.value),o.addEventListener("change",e=>B(e.currentTarget.checked)),s.$$input=e=>O(e.target.value),l(i=>{var o=fi,l=yi,s=yi,v=wi,h=yi,g=Si,p=xi,_=F();return o!==i.e&&d(e,i.e=o),l!==i.t&&d(t,i.t=l),s!==i.a&&d(n,i.a=s),v!==i.o&&d(r,i.o=v),h!==i.i&&d(a,i.i=h),g!==i.n&&d(c,i.n=g),p!==i.s&&d(u,i.s=p),_!==i.h&&(u.disabled=i.h=_),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),l(()=>i.value=R()),l(()=>o.checked=D()),l(()=>s.value=A()),e}}),null),l(()=>d(t,vi)),t}}),null),n(X,r(o,{get when(){return"sync"===i()},get children(){var e=Ui(),t=e.firstChild.nextSibling,i=t.nextSibling,c=i.firstChild.nextSibling,u=c.firstChild,v=u.firstChild.nextSibling,h=u.nextSibling,g=h.firstChild.nextSibling,p=h.nextSibling,m=p.firstChild.nextSibling,k=m.nextSibling,$=p.nextSibling;return n(e,r(o,{get when(){return _().length>0},get children(){var e=Wi(),t=e.firstChild.nextSibling;return n(t,r(a,{get each(){return _()},children:e=>{return i=Vi(),r=i.firstChild,o=r.nextSibling,a=o.nextSibling,c=a.nextSibling,u=c.firstChild,v=u.nextSibling,n(r,()=>e.name),n(o,()=>e.url),n(a,(t=s(()=>!!e.last_sync),()=>t()?new Date(e.last_sync).toLocaleString():"Never")),u.$$click=()=>(async e=>{try{W(!0),G(null),J(null),await H(`/api/settings/git/remotes/${e}/push`,{method:"POST"}),J("Push successful"),q()}catch(t){G("Push failed: "+t)}finally{W(!1)}})(e.id),v.$$click=()=>(async e=>{if(confirm("Are you sure you want to remove this remote?"))try{W(!0),G(null),await H(`/api/settings/git/remotes/${e}`,{method:"DELETE"}),J("Remote removed"),q()}catch(t){G("Failed to remove remote: "+t)}finally{W(!1)}})(e.id),l(e=>{var t=Li,i=F(),n=Ti,r=F(),o=Ei;return t!==e.e&&d(c,e.e=t),i!==e.t&&(u.disabled=e.t=i),n!==e.a&&d(u,e.a=n),r!==e.o&&(v.disabled=e.o=r),o!==e.i&&d(v,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),i;var t,i,r,o,a,c,u,v}})),l(()=>d(e,hi)),e}}),i),c.addEventListener("submit",Q),v.$$input=e=>f(e.target.value),g.$$input=e=>w(e.target.value),m.$$input=e=>S(e.target.value),l(n=>{var r=vi,o=Si,a=ji,l=fi,s=yi,v=yi,g=yi,_=Si,m=xi,b=F();return r!==n.e&&d(e,n.e=r),o!==n.t&&d(t,n.t=o),a!==n.a&&d(i,n.a=a),l!==n.o&&d(c,n.o=l),s!==n.i&&d(u,n.i=s),v!==n.n&&d(h,n.n=v),g!==n.s&&d(p,n.s=g),_!==n.h&&d(k,n.h=_),m!==n.r&&d($,n.r=m),b!==n.d&&($.disabled=n.d=b),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),l(()=>v.value=b()),l(()=>g.value=y()),l(()=>m.value=x()),e}}),null),l(e=>{var t=si,n=ci,r=ui,o=mi,a="members"===i()?bi:"",l="personal"===i()?bi:"",s="workspace"===i()?bi:"";return t!==e.e&&d(X,e.e=t),n!==e.t&&d(Z,e.t=n),r!==e.a&&d(ee,e.a=r),o!==e.o&&d(te,e.o=o),a!==e.i&&d(ie,e.i=a),l!==e.n&&d(ne,e.n=l),s!==e.s&&d(re,e.s=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),X;var X,Z,ee,te,ie,ne,re}e(["click","input"]);const Ki="_overlay_s4zcj_1",Qi="_modal_s4zcj_15",Xi="_header_s4zcj_36",Zi="_content_s4zcj_51",en="_step_s4zcj_55",tn="_formGroup_s4zcj_61",nn="_hint_s4zcj_86",rn="_illustration_s4zcj_92",on="_primaryButton_s4zcj_98",an="_secondaryButton_s4zcj_121",ln="_actions_s4zcj_136",dn="_error_s4zcj_152",sn="_footer_s4zcj_161",cn="_progress_s4zcj_167",un="_dot_s4zcj_172",vn="_active_s4zcj_179",hn="_gitForm_s4zcj_184";var gn=i("<div>"),pn=i("<div><h3>Confirm Workspace Name</h3><div><label>Workspace Name</label><input type=text disabled><p>This is derived from your registration name.</p></div><button>Next: Invite Team"),_n=i("<div><h3>Team Collaboration</h3><p>You can invite your team members now or later in settings.</p><div>üë•</div><button>Next: Git Sync"),mn=i("<div><h3>Advanced Sync (Optional)</h3><p>Keep your data safe by synchronizing with a private Git repository.</p><form><div><label>GitHub/GitLab Repository URL</label><input type=url placeholder=https://github.com/user/repo.git></div><div><label>Personal Access Token</label><input type=password placeholder=ghp_...></div><div><button type=button>Skip for now</button><button type=submit>"),bn=i("<div><div><header><h2>Welcome to mddb!</h2><p>Let's get your workspace ready.</p></header><div></div><div><div><div></div><div></div><div>");function fn(e){const[i,a]=t(_(()=>{var t;return(null==(t=e.user.onboarding)?void 0:t.step)||"name"})),[s,u]=t(!1),[v,h]=t(null),[g,p]=t(_(()=>{var t,i;return(null==(i=null==(t=e.user.memberships)?void 0:t[0])?void 0:i.organization_name)||""})),[m,b]=t(""),[f,y]=t(""),w=async(t,i={})=>{let n=t;t.startsWith("/api/")&&!t.startsWith("/api/auth/")&&(n=`/api/${e.user.organization_id}${t.substring(4)}`);return await fetch(n,{...i,headers:{...i.headers,Authorization:`Bearer ${e.token}`}})},x=async(t,i=!1)=>{try{u(!0),h(null);if(!(await w("/api/onboarding",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({state:{completed:i,step:t,updated_at:(new Date).toISOString()}})})).ok)throw new Error("Failed to update onboarding state");i?e.onComplete():a(t)}catch(n){h("Error: "+n)}finally{u(!1)}},S=()=>{x("done",!0)},k=async e=>{e.preventDefault();try{u(!0);if(!(await w("/api/settings/git/remotes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"origin",url:m(),token:f(),type:"custom",auth_type:f()?"token":"none"})})).ok)throw new Error("Failed to setup git remote");x("done",!0)}catch(t){h("Git setup failed: "+t)}finally{u(!1)}};return $=bn(),C=$.firstChild,j=C.firstChild,L=j.nextSibling,T=L.nextSibling,E=T.firstChild,P=E.firstChild,I=P.nextSibling,z=I.nextSibling,n(C,r(o,{get when(){return v()},get children(){var e=gn();return n(e,v),l(()=>d(e,dn)),e}}),L),n(L,r(o,{get when(){return"name"===i()},get children(){var e=pn(),t=e.firstChild.nextSibling,i=t.firstChild.nextSibling,n=i.nextSibling,r=t.nextSibling;return i.$$input=e=>p(e.target.value),r.$$click=()=>x("members"),l(i=>{var o=en,a=tn,l=nn,s=on;return o!==i.e&&d(e,i.e=o),a!==i.t&&d(t,i.t=a),l!==i.a&&d(n,i.a=l),s!==i.o&&d(r,i.o=s),i},{e:void 0,t:void 0,a:void 0,o:void 0}),l(()=>i.value=g()),e}}),null),n(L,r(o,{get when(){return"members"===i()},get children(){var e=_n(),t=e.firstChild.nextSibling.nextSibling,i=t.nextSibling;return i.$$click=()=>x("git"),l(n=>{var r=en,o=rn,a=on;return r!==n.e&&d(e,n.e=r),o!==n.t&&d(t,n.t=o),a!==n.a&&d(i,n.a=a),n},{e:void 0,t:void 0,a:void 0}),e}}),null),n(L,r(o,{get when(){return"git"===i()},get children(){var e=mn(),t=e.firstChild.nextSibling.nextSibling,i=t.firstChild,r=i.firstChild.nextSibling,o=i.nextSibling,a=o.firstChild.nextSibling,c=o.nextSibling,u=c.firstChild,v=u.nextSibling;return t.addEventListener("submit",k),r.$$input=e=>b(e.target.value),a.$$input=e=>y(e.target.value),u.$$click=S,n(v,()=>s()?"Saving...":"Setup & Finish"),l(n=>{var r=en,a=hn,l=tn,h=tn,g=ln,p=an,_=on,b=!m()||s();return r!==n.e&&d(e,n.e=r),a!==n.t&&d(t,n.t=a),l!==n.a&&d(i,n.a=l),h!==n.o&&d(o,n.o=h),g!==n.i&&d(c,n.i=g),p!==n.n&&d(u,n.n=p),_!==n.s&&d(v,n.s=_),b!==n.h&&(v.disabled=n.h=b),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),l(()=>r.value=m()),l(()=>a.value=f()),e}}),null),l(e=>{var t=Ki,n=Qi,r=Xi,o=Zi,a=sn,l=cn,s={[un]:!0,[vn]:"name"===i()},u={[un]:!0,[vn]:"members"===i()},v={[un]:!0,[vn]:"git"===i()};return t!==e.e&&d($,e.e=t),n!==e.t&&d(C,e.t=n),r!==e.a&&d(j,e.a=r),o!==e.o&&d(L,e.o=o),a!==e.i&&d(T,e.i=a),l!==e.n&&d(E,e.n=l),e.s=c(P,s,e.s),e.h=c(I,u,e.h),e.r=c(z,v,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),$;var $,C,j,L,T,E,P,I,z}e(["input","click"]);const yn="_authContainer_2kal9_1",wn="_authForm_2kal9_9",xn="_formGroup_2kal9_25",Sn="_error_2kal9_63",kn="_toggle_2kal9_72",$n="_authFooter_2kal9_94",Cn="_oauthSection_2kal9_112",jn="_divider_2kal9_116",Ln="_oauthButtons_2kal9_135",Tn="_googleButton_2kal9_141",En="_microsoftButton_2kal9_142";var Pn=i("<div><label for=name>Name</label><input id=name name=name type=text required autocomplete=name>"),In=i("<div><form><h2></h2><div><label for=email>Email</label><input id=email name=email type=email required autocomplete=email></div><div><label for=password>Password</label><input id=password name=password type=password required></div><button type=submit></button><div><div><span>or</span></div><div><a href=/api/auth/oauth/google>Login with Google</a><a href=/api/auth/oauth/microsoft>Login with Microsoft</a></div></div><p><button type=button></button></p><div><a href=/privacy>Privacy Policy"),zn=i("<div>");function Rn(e){const[i,a]=t(!1),[c,u]=t(""),[v,g]=t(""),[p,_]=t(""),[m,b]=t(null),[f,y]=t(!1),w=async t=>{var n;t.preventDefault(),b(null),y(!0);const r=i()?"/api/auth/register":"/api/auth/login",o=i()?{email:c(),password:v(),name:p()}:{email:c(),password:v()};try{const t=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),i=await t.json();if(!t.ok){return void b((null==(n=i.error)?void 0:n.message)||"Authentication failed")}i.token&&i.user?e.onLogin(i.token,i.user):b("Invalid response from server")}catch(a){b("An error occurred. Please try again.")}finally{y(!1)}};return k=In(),$=k.firstChild,C=$.firstChild,j=C.nextSibling,L=j.firstChild.nextSibling,T=j.nextSibling,E=T.firstChild.nextSibling,P=T.nextSibling,I=P.nextSibling,z=I.firstChild,R=z.nextSibling,N=R.firstChild,D=N.nextSibling,B=I.nextSibling,A=B.firstChild,O=B.nextSibling,F=O.firstChild,$.addEventListener("submit",w),n(C,()=>i()?"Create Account":"Login to mddb"),n($,(x=s(()=>!!m()),()=>{return x()&&(e=zn(),n(e,m),l(()=>d(e,Sn)),e);var e}),j),n($,r(o,{get when(){return i()},get children(){var e=Pn(),t=e.firstChild.nextSibling;return t.$$input=e=>_(e.target.value),l(()=>d(e,xn)),l(()=>t.value=p()),e}}),j),L.$$input=e=>u(e.target.value),E.$$input=e=>g(e.target.value),n(P,(S=s(()=>!!f()),()=>S()?"Please wait...":i()?"Register":"Login")),n(B,()=>i()?"Already have an account?":"Don't have an account?",A),A.$$click=()=>a(!i()),n(A,()=>i()?"Login":"Register"),F.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},l(e=>{var t=yn,n=wn,r=xn,o=xn,a=i()?"new-password":"current-password",l=f(),s=Cn,c=jn,u=Ln,v=Tn,g=En,p=kn,_=$n;return t!==e.e&&d(k,e.e=t),n!==e.t&&d($,e.t=n),r!==e.a&&d(j,e.a=r),o!==e.o&&d(T,e.o=o),a!==e.i&&h(E,"autocomplete",e.i=a),l!==e.n&&(P.disabled=e.n=l),s!==e.s&&d(I,e.s=s),c!==e.h&&d(z,e.h=c),u!==e.r&&d(R,e.r=u),v!==e.d&&d(N,e.d=v),g!==e.l&&d(D,e.l=g),p!==e.u&&d(B,e.u=p),_!==e.c&&d(O,e.c=_),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0}),l(()=>L.value=c()),l(()=>E.value=v()),k;var x,S,k,$,C,j,L,T,E,P,I,z,R,N,D,B,A,O,F}e(["input","click"]);const Nn="_container_1lj5r_1",Dn="_content_1lj5r_10",Bn="_header_1lj5r_20",An="_section_1lj5r_37",On="_footer_1lj5r_51",Fn="_backButton_1lj5r_59";var Wn=i("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and databases are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function Un(){return e=Wn(),t=e.firstChild,i=t.firstChild,n=i.nextSibling,r=n.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(c=s.firstChild).$$click=()=>window.history.back(),l(l=>{var u=Nn,v=Dn,h=Bn,g=An,p=An,_=An,m=An,b=On,f=Fn;return u!==l.e&&d(e,l.e=u),v!==l.t&&d(t,l.t=v),h!==l.a&&d(i,l.a=h),g!==l.o&&d(n,l.o=g),p!==l.i&&d(r,l.i=p),_!==l.n&&d(o,l.n=_),m!==l.s&&d(a,l.s=m),b!==l.h&&d(s,l.h=b),f!==l.r&&d(c,l.r=f),l},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,i,n,r,o,a,s,c}e(["click"]);const Gn="_container_1lj5r_1",Mn="_content_1lj5r_10",Jn="_header_1lj5r_20",Hn="_section_1lj5r_37",qn="_footer_1lj5r_51",Vn="_backButton_1lj5r_59";var Yn=i("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, databases, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the ‚ÄúContent‚Äù) and the trademarks, service marks, and logos contained therein (the ‚ÄúMarks‚Äù) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function Kn(){return e=Yn(),t=e.firstChild,i=t.firstChild,n=i.nextSibling,r=n.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,c=s.nextSibling,(u=c.firstChild).$$click=()=>window.history.back(),l(l=>{var v=Gn,h=Mn,g=Jn,p=Hn,_=Hn,m=Hn,b=Hn,f=Hn,y=qn,w=Vn;return v!==l.e&&d(e,l.e=v),h!==l.t&&d(t,l.t=h),g!==l.a&&d(i,l.a=g),p!==l.o&&d(n,l.o=p),_!==l.i&&d(r,l.i=_),m!==l.n&&d(o,l.n=m),b!==l.s&&d(a,l.s=b),f!==l.h&&d(s,l.h=f),y!==l.r&&d(c,l.r=y),w!==l.d&&d(u,l.d=w),l},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,i,n,r,o,a,s,c,u}e(["click"]);var Qn=i("<select>"),Xn=i("<span>"),Zn=i("<p>Loading..."),er=i("<nav>"),tr=i("<div>"),ir=i("<span>‚óè Unsaved"),nr=i("<span>‚ü≥ Saving..."),rr=i("<span>‚úì Saved"),or=i("<li>No history available"),ar=i("<div><h3>Version History</h3><ul>"),lr=i('<div><textarea placeholder="Write your content in markdown...">'),dr=i("<div><div><h3>Database Records</h3><div><button>Table</button><button>Grid</button><button>Gallery</button><button>Board"),sr=i("<div><div><input type=text placeholder=Title><div></div><div><button></button><button></button><button>Delete</button></div></div><div>"),cr=i('<div><header><div><h1>mddb</h1><p>A seamless markdown-based document and database system</p></div><div><span> (<!>)</span><button>Logout</button></div></header><div><aside><div><h2>Workspace</h2><div><button title="Workspace Settings">‚öô</button><button title="New Page">+P</button><button title="New Database">+D</button></div></div><ul></ul><div><a href=/privacy>Privacy Policy</a><span style="margin:0 0.5rem;color:#ccc">|</span><a href=/terms>Terms</a></div></aside><main>'),ur=i("<option>"),vr=i("<span>/"),hr=i("<div><h2>Welcome to mddb</h2><p>Select a node from the sidebar or create a new one to get started.</p><div><input type=text placeholder=Title><div><button>Create Page</button><button>Create Database"),gr=i("<li><div><span></span><span></span></div><div>");const pr=e=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");function _r(){const[e,i]=t(null),[u,v]=t(localStorage.getItem("mddb_token")),[h,g]=t([]),[_,f]=t([]),[R,Y]=t(null),[ie,ne]=t(!1),[re,oe]=t(!1),[ae,le]=t(!1),[fe,ye]=t("table"),[xe,Se]=t(""),[ke,$e]=t(""),[je,Le]=t(!1),[Te,Ee]=t(null),[Pe,Ie]=t(!1),[ze,Re]=t("idle"),[Ne,De]=t(!1),[Be,Ae]=t([]),[Oe,Fe]=t(!1),We=async(t,i={})=>{var n;let r=t;if(t.startsWith("/api/")&&!t.startsWith("/api/auth/")&&!t.startsWith("/api/health")){const i=null==(n=e())?void 0:n.organization_id;i&&(r=`/api/${i}${t.substring(4)}`)}const o={...i.headers,Authorization:`Bearer ${u()}`},a=await fetch(r,{...i,headers:o});if(401===a.status)throw Ue(),new Error("Session expired");return a},Ue=()=>{localStorage.removeItem("mddb_token"),v(null),i(null),window.history.pushState(null,"","/")},Ge=(e,t)=>{localStorage.setItem("mddb_token",e),v(e),i(t)};async function Me(e,t=!0){try{Le(!0);const i=await We("/api/auth/switch-org",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:e})}),n=await i.json();Ge(n.token,n.user),Y(null),t&&window.history.pushState(null,"","/"),await qe()}catch(i){throw Ee("Failed to switch organization: "+i),i}finally{Le(!1)}}const Je=function(e,t){let i=null;return(...n)=>{null!==i&&clearTimeout(i),i=setTimeout(()=>{e(...n),i=null},t)}}(async()=>{var t;const i=R();if(i&&Pe())try{Re("saving"),await We(`/api/pages/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:xe(),content:ke()})}),Ie(!1),Re("saved");const n=pr(xe()),r=null==(t=e())?void 0:t.organization_id;if(r){const e=window.location.pathname,t=`/${r}/${i}${n?"-"+n:""}`;e!==t&&window.history.replaceState(null,"",t)}setTimeout(()=>{"saved"===ze()&&Re("idle")},2e3)}catch(n){Ee("Auto-save failed: "+n),Re("idle")}},2e3);p(()=>{const t=new URLSearchParams(window.location.search).get("token");t&&(localStorage.setItem("mddb_token",t),v(t),window.history.replaceState({},document.title,window.location.pathname));const n=u(),r=e();if(n&&!r){(async()=>{try{const e=await We("/api/auth/me");if(e.ok){const t=await e.json();i(t)}}catch(e){console.error("Failed to load user",e)}})()}});const He=async()=>{var t,i,n;const r=window.location.pathname;if("/privacy"===r)return oe(!0),void le(!1);if("/terms"===r)return le(!0),void oe(!1);oe(!1),le(!1);const o=r.match(/^\/([^/]+)\/(\d+)(?:-.*)?$/);if(o){const r=o[1],l=o[2];if(e()&&(null==(t=e())?void 0:t.organization_id)!==r)try{if(!(null==(n=null==(i=e())?void 0:i.memberships)?void 0:n.some(e=>e.organization_id===r)))return void Ee(`You do not have access to organization ${r}`);await Me(r,!1)}catch(a){return}return void(l!==R()&&Ve(l,!1))}Y(null),Se(""),$e("")};async function qe(){var e;try{Le(!0);const t=await We("/api/nodes"),i=await t.json();g((null==(e=i.nodes)?void 0:e.filter(Boolean))||[]),Ee(null)}catch(t){Ee("Failed to load nodes: "+t)}finally{Le(!1)}}async function Ve(t,i=!0){var n;try{Le(!0),De(!1);const r=await We(`/api/nodes/${t}`);if(!r.ok)throw new Error("Node not found");const o=await r.json();Y(o.id),Se(o.title),$e(o.content||""),Ie(!1),Re("idle"),Ee(null);const a=pr(o.title),l=null==(n=e())?void 0:n.organization_id;if(l){const e=`/${l}/${o.id}${a?"-"+a:""}`;i?window.location.pathname!==e&&window.history.pushState(null,"",e):window.location.pathname!==e&&window.history.replaceState(null,"",e)}if("database"===o.type||"hybrid"===o.type){const e=await We(`/api/databases/${t}/records?offset=0&limit=50`),i=(await e.json()).records||[];f(i),Fe(50===i.length)}else f([]),Fe(!1)}catch(r){Ee("Failed to load node: "+r)}finally{Le(!1)}}async function Ye(e="document"){if(xe().trim())try{Le(!0);const t=await We("/api/nodes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:xe(),type:e})}),i=await t.json();await qe(),Ve(i.id),Se(""),$e(""),Ie(!1),Re("idle"),Ee(null)}catch(t){Ee("Failed to create node: "+t)}finally{Le(!1)}else Ee("Title is required")}async function Ke(){const e=R();if(e)try{Le(!0),await We(`/api/pages/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:xe(),content:ke()})}),await qe(),Ie(!1),Re("idle"),Ee(null);const t=pr(xe()),i=window.location.pathname,n=`/${e}${t?"-"+t:""}`;i!==n&&window.history.replaceState(null,"",n)}catch(t){Ee("Failed to save node: "+t)}finally{Le(!1)}}async function Qe(){const e=R();if(e&&confirm("Are you sure you want to delete this node?"))try{Le(!0),await We(`/api/pages/${e}`,{method:"DELETE"}),await qe(),Y(null),Se(""),$e(""),Ie(!1),Re("idle"),Ee(null),window.history.pushState(null,"","/")}catch(t){Ee("Failed to delete node: "+t)}finally{Le(!1)}}m(()=>{window.addEventListener("popstate",He),b(()=>window.removeEventListener("popstate",He))}),p(()=>{e()?(qe(),He()):He()});const Xe=e=>{Ve(e.id)};async function Ze(e){const t=R();if(t)try{Le(!0);if(!(await We(`/api/databases/${t}/records`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})})).ok)return void Ee("Failed to create record");Ve(t),Ee(null)}catch(i){Ee("Failed to add record: "+i)}finally{Le(!1)}}async function et(e){const t=R();if(t&&confirm("Delete this record?"))try{Le(!0),await We(`/api/databases/${t}/records/${e}`,{method:"DELETE"}),Ve(t),Ee(null)}catch(i){Ee("Failed to delete record: "+i)}finally{Le(!1)}}async function tt(){const e=R();if(e&&!je())try{Le(!0);const t=_().length,i=await We(`/api/databases/${e}/records?offset=${t}&limit=50`),n=(await i.json()).records||[];f([..._(),...n]),Fe(50===n.length)}catch(t){Ee("Failed to load more records: "+t)}finally{Le(!1)}}return r(o,{get when(){return!re()},get fallback(){return r(Un,{})},get children(){return r(o,{get when(){return!ae()},get fallback(){return r(Kn,{})},get children(){return r(o,{get when(){return e()},get fallback(){return r(Rn,{onLogin:Ge})},get children(){return[r(o,{get when(){var t,i;return s(()=>{var t;return"admin"===(null==(t=e())?void 0:t.role)})()&&!(null==(i=null==(t=e())?void 0:t.onboarding)?void 0:i.completed)},get children(){return r(fn,{get user(){return e()},get token(){return u()},onComplete:()=>{(async()=>{const e=await We("/api/auth/me");if(e.ok){const t=await e.json();i(t)}})()}})}}),(()=>{var t=cr(),i=t.firstChild,v=i.firstChild,g=v.nextSibling,p=g.firstChild,m=p.firstChild,b=m.nextSibling;b.nextSibling;var f=p.nextSibling,re=i.nextSibling,oe=re.firstChild,ae=oe.firstChild,le=ae.firstChild.nextSibling,Re=le.firstChild,Fe=Re.nextSibling,Ge=Fe.nextSibling,He=ae.nextSibling,qe=He.nextSibling,Ve=qe.firstChild,it=Ve.nextSibling.nextSibling,nt=oe.nextSibling;return n(g,r(o,{get when(){var t,i;return((null==(i=null==(t=e())?void 0:t.memberships)?void 0:i.length)??0)>1},get children(){var t=Qn();return t.addEventListener("change",e=>Me(e.target.value)),n(t,r(a,{get each(){var t;return null==(t=e())?void 0:t.memberships},children:e=>{return t=ur(),n(t,()=>e.organization_name||e.organization_id),l(()=>t.value=e.organization_id),t;var t}})),l(()=>d(t,$)),l(()=>{var i;return t.value=null==(i=e())?void 0:i.organization_id}),t}}),p),n(g,r(o,{get when(){var t,i;return 1===(null==(i=null==(t=e())?void 0:t.memberships)?void 0:i.length)},get children(){var t=Xn();return n(t,()=>{var t,i,n;return(null==(n=null==(i=null==(t=e())?void 0:t.memberships)?void 0:i[0])?void 0:n.organization_name)||"My Org"}),l(()=>d(t,C)),t}}),p),n(p,()=>{var t;return null==(t=e())?void 0:t.name},m),n(p,()=>{var t;return null==(t=e())?void 0:t.role},b),f.$$click=Ue,Re.$$click=()=>{ne(!0),Y(null)},Fe.$$click=()=>{ne(!1),Ye("document")},Ge.$$click=()=>{ne(!1),Ye("database")},n(oe,r(o,{get when(){return s(()=>!!je())()&&0===h().length},fallback:null,get children(){var e=Zn();return l(()=>d(e,P)),e}}),He),n(He,r(a,{get each(){return h()},children:e=>r(we,{node:e,get selectedId(){return R()},onSelect:Xe,depth:0})})),Ve.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},it.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/terms"),window.dispatchEvent(new PopStateEvent("popstate"))},n(nt,r(o,{get when(){return s(()=>!(!ie()||!e()))()&&u()},get children(){return r(Yi,{get user(){return e()},get token(){return u()},onClose:()=>ne(!1)})}}),null),n(nt,r(o,{get when(){return!ie()},get children(){return[r(o,{get when(){return R()},get children(){var e=er();return n(e,r(a,{get each(){return(e=>{if(!e)return[];const t=[],i=(e,n)=>{for(const r of e){if(r.id===n)return t.push(r),!0;if(r.children&&i(r.children,n))return t.unshift(r),!0}return!1};return i(h(),e),t})(R())},children:(e,t)=>{return[r(o,{get when(){return t()>0},get children(){var e=vr();return l(()=>d(e,ce)),e}}),(i=Xn(),i.$$click=()=>Xe(e),n(i,()=>e.title),l(()=>d(i,se)),i)];var i}})),l(()=>d(e,de)),e}}),r(o,{get when(){return Te()},fallback:null,get children(){var e=tr();return n(e,Te),l(()=>d(e,D)),e}}),r(o,{get when(){return R()},get fallback(){return e=hr(),t=e.firstChild.nextSibling.nextSibling,i=t.firstChild,n=i.nextSibling,r=n.firstChild,o=r.nextSibling,i.$$input=e=>Se(e.target.value),r.$$click=()=>Ye("document"),o.$$click=()=>Ye("database"),l(a=>{var l=B,s=A,c=J,u=K,v=q,h=q;return l!==a.e&&d(e,a.e=l),s!==a.t&&d(t,a.t=s),c!==a.a&&d(i,a.a=c),u!==a.o&&d(n,a.o=u),v!==a.i&&d(r,a.i=v),h!==a.n&&d(o,a.n=h),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),l(()=>i.value=xe()),e;var e,t,i,n,r,o},get children(){var t=sr(),i=t.firstChild,s=i.firstChild,u=s.nextSibling,v=u.nextSibling,g=v.firstChild,p=g.nextSibling,m=p.nextSibling,b=i.nextSibling;return s.$$input=e=>{Se(e.target.value),Ie(!0),Je()},n(u,r(o,{get when(){return Pe()},get children(){var e=ir();return l(()=>d(e,U)),e}}),null),n(u,r(o,{get when(){return"saving"===ze()},get children(){var e=nr();return l(()=>d(e,G)),e}}),null),n(u,r(o,{get when(){return"saved"===ze()},get children(){var e=rr();return l(()=>d(e,M)),e}}),null),g.$$click=()=>{const e=R();e&&async function(e){var t;if(Ne())De(!1);else try{Le(!0);const i=await We(`/api/pages/${e}/history`),n=await i.json();Ae((null==(t=n.history)?void 0:t.filter(Boolean))||[]),De(!0)}catch(i){Ee("Failed to load history: "+i)}finally{Le(!1)}}(e)},n(g,()=>Ne()?"Hide History":"History"),p.$$click=Ke,n(p,()=>je()?"Saving...":"Save"),m.$$click=Qe,n(t,r(o,{get when(){return Ne()},get children(){var e=ar(),t=e.firstChild.nextSibling;return n(t,r(a,{get each(){return Be()},children:e=>{return t=gr(),i=t.firstChild,r=i.firstChild,o=r.nextSibling,a=i.nextSibling,t.$$click=()=>{const t=R();t&&async function(e,t){if(confirm("This will replace current editor content with the selected version. Unsaved changes will be lost. Continue?"))try{Le(!0);const i=await We(`/api/pages/${e}/history/${t}`),n=await i.json();$e(n.content),Ie(!0),De(!1)}catch(i){Ee("Failed to load version: "+i)}finally{Le(!1)}}(t,e.hash)},n(r,()=>new Date(e.timestamp).toLocaleString()),n(o,()=>e.hash.substring(0,7)),n(a,()=>e.message),l(e=>{var n=ge,l=pe,s=_e,c=me,u=be;return n!==e.e&&d(t,e.e=n),l!==e.t&&d(i,e.t=l),s!==e.a&&d(r,e.a=s),c!==e.o&&d(o,e.o=c),u!==e.i&&d(a,e.i=u),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t;var t,i,r,o,a}}),null),n(t,r(o,{get when(){return 0===Be().length},get children(){var e=or();return l(()=>d(e,ge)),e}}),null),l(i=>{var n=ve,r=he;return n!==i.e&&d(e,i.e=n),r!==i.t&&d(t,i.t=r),i},{e:void 0,t:void 0}),e}}),b),n(b,r(o,{get when(){var e;return"database"!==(null==(e=h().find(e=>e.id===R()))?void 0:e.type)},get children(){var t=lr(),i=t.firstChild;return i.$$input=e=>{$e(e.target.value),Ie(!0),Je()},n(t,r(Ce,{get content(){return ke()},get orgId(){var t;return null==(t=e())?void 0:t.organization_id}}),null),l(e=>{var n=X,r=ue;return n!==e.e&&d(t,e.e=n),r!==e.t&&d(i,e.t=r),e},{e:void 0,t:void 0}),l(()=>i.value=ke()),t}}),null),n(b,r(o,{get when(){var e;return"document"!==(null==(e=h().find(e=>e.id===R()))?void 0:e.type)},get children(){var e=dr(),t=e.firstChild,i=t.firstChild.nextSibling,a=i.firstChild,s=a.nextSibling,u=s.nextSibling,v=u.nextSibling;return a.$$click=()=>ye("table"),s.$$click=()=>ye("grid"),u.$$click=()=>ye("gallery"),v.$$click=()=>ye("board"),n(e,r(o,{get when(){return"table"===fe()},get children(){return r(ut,{get databaseId(){return R()||""},get columns(){var e;return(null==(e=h().find(e=>e.id===R()))?void 0:e.columns)||[]},get records(){return _()},onAddRecord:Ze,onDeleteRecord:et,onLoadMore:tt,get hasMore(){return Oe()}})}}),null),n(e,r(o,{get when(){return"grid"===fe()},get children(){return r(St,{get records(){return _()},get columns(){var e;return(null==(e=h().find(e=>e.id===R()))?void 0:e.columns)||[]},onDeleteRecord:et})}}),null),n(e,r(o,{get when(){return"gallery"===fe()},get children(){return r(Wt,{get records(){return _()},get columns(){var e;return(null==(e=h().find(e=>e.id===R()))?void 0:e.columns)||[]},onDeleteRecord:et})}}),null),n(e,r(o,{get when(){return"board"===fe()},get children(){return r(di,{get records(){return _()},get columns(){var e;return(null==(e=h().find(e=>e.id===R()))?void 0:e.columns)||[]},onDeleteRecord:et})}}),null),l(n=>{var r=Z,o=ee,l=te,h={[`${T}`]:"table"===fe()},g={[`${T}`]:"grid"===fe()},p={[`${T}`]:"gallery"===fe()},_={[`${T}`]:"board"===fe()};return r!==n.e&&d(e,n.e=r),o!==n.t&&d(t,n.t=o),l!==n.a&&d(i,n.a=l),n.o=c(a,h,n.o),n.i=c(s,g,n.i),n.n=c(u,p,n.n),n.s=c(v,_,n.s),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),l(e=>{var n=O,r=F,o=J,a=W,l=H,c=je(),h=je(),_=je(),f=Q;return n!==e.e&&d(t,e.e=n),r!==e.t&&d(i,e.t=r),o!==e.a&&d(s,e.a=o),a!==e.o&&d(u,e.o=a),l!==e.i&&d(v,e.i=l),c!==e.n&&(g.disabled=e.n=c),h!==e.s&&(p.disabled=e.s=h),_!==e.h&&(m.disabled=e.h=_),f!==e.r&&d(b,e.r=f),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),l(()=>s.value=xe()),t}})]}}),null),l(e=>{var n=y,r=w,o=x,a=S,l=k,s=j,c=L,u=E,h=V,p=I,_=z,m=N;return n!==e.e&&d(t,e.e=n),r!==e.t&&d(i,e.t=r),o!==e.a&&d(v,e.a=o),a!==e.o&&d(g,e.o=a),l!==e.i&&d(f,e.i=l),s!==e.n&&d(re,e.n=s),c!==e.s&&d(oe,e.s=c),u!==e.h&&d(ae,e.h=u),h!==e.r&&d(le,e.r=h),p!==e.d&&d(He,e.d=p),_!==e.l&&d(qe,e.l=_),m!==e.u&&d(nt,e.u=m),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),t})()]}})}})}})}e(["click","input"]);const mr=document.getElementById("app");mr&&f(()=>r(_r,{}),mr);
