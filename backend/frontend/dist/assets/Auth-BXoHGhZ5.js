import{a as t,c as e,q as a,x as i,s as l,v as r,d as n,S as s,F as o,z as u,w as h,n as d}from"./vendor-DpNS6KG6.js";import{u as v,A as c,c as p,O as g,a as _,b as f}from"./index-4a7egvSb.js";import"./editor-vendor-CwXjZW82.js";const m="_authContainer_1ksl8_1",b="_authForm_1ksl8_9",w="_formGroup_1ksl8_24",y="_error_1ksl8_62",x="_toggle_1ksl8_72",k="_authFooter_1ksl8_87",C="_oauthSection_1ksl8_104",B="_divider_1ksl8_108",A="_oauthButtons_1ksl8_127",S="_oauthIcon_1ksl8_133",F="_googleButton_1ksl8_140",M="_microsoftButton_1ksl8_141",z="_githubButton_1ksl8_142",$="_oauthButton_1ksl8_127";var V=h('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),H=h('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),q=h('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),K=h("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),W=h("<div><div><span></span></div><div>"),j=h("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),E=h("<div>"),G=h("<a>");const P={[f]:function(){return t=V(),l(()=>u(t,"class",S)),t;var t},[_]:function(){return t=H(),l(()=>u(t,"class",S)),t;var t},[g]:function(){return t=q(),l(()=>u(t,"class",S)),t;var t}},I={[f]:{style:F,labelKey:"auth.loginWithGoogle"},[_]:{style:M,labelKey:"auth.loginWithMicrosoft"},[g]:{style:z,labelKey:"auth.loginWithGitHub"}};const L=p((t,e)=>fetch(t,e));function D(h){const{t:d}=v(),[p]=t(()=>L.auth.listProviders().then(t=>t.providers)),[g,_]=e(!1),[f,S]=e(""),[F,M]=e(""),[z,V]=e(""),[H,q]=e(null),[D,O]=e(!1),T=async t=>{t.preventDefault(),q(null),O(!0);try{const t=g()?await L.auth.register({email:f(),password:F(),name:z()}):await L.auth.login({email:f(),password:F()});t.token&&t.user?h.onLogin(t.token,t.user):q("Invalid response from server")}catch(e){q(e instanceof c?e.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{O(!1)}};return X=j(),Y=X.firstChild,Z=Y.firstChild,tt=Z.nextSibling,et=tt.firstChild,at=et.nextSibling,it=tt.nextSibling,lt=it.firstChild,rt=lt.nextSibling,nt=it.nextSibling,st=nt.nextSibling,ot=st.firstChild,ut=st.nextSibling,ht=ut.firstChild,Y.addEventListener("submit",T),a(Z,(U=i(()=>!!g()),()=>U()?d("auth.createAccount"):d("auth.loginTitle"))),a(Y,(J=i(()=>!!H()),()=>{return J()&&(t=E(),a(t,H),l(()=>r(t,y)),t);var t}),tt),a(Y,n(s,{get when(){return g()},get children(){var t=K(),e=t.firstChild,i=e.nextSibling;return a(e,()=>d("auth.name")),i.$$input=t=>V(t.target.value),l(()=>r(t,w)),l(()=>i.value=z()),t}}),tt),a(et,()=>d("auth.email")),at.$$input=t=>S(t.target.value),a(lt,()=>d("auth.password")),rt.$$input=t=>M(t.target.value),a(nt,(N=i(()=>!!D()),()=>N()?d("auth.pleaseWait"):i(()=>!!g())()?d("auth.register"):d("auth.login"))),a(Y,n(s,{get when(){return(p()??[]).length>0},get children(){var t=W(),e=t.firstChild,i=e.firstChild,s=e.nextSibling;return a(i,()=>d("auth.or")),a(s,n(o,{get each(){return p()},children:t=>{const e=function(t){const e=I[t];return e?{style:e.style,label:e.labelKey}:{style:$,label:t.charAt(0).toUpperCase()+t.slice(1)}}(t),i=t in I,s=P[t];return o=G(),u(o,"href",`/api/auth/oauth/${t}`),a(o,s&&n(s,{}),null),a(o,()=>i?d(e.label):e.label,null),l(()=>r(o,e.style)),o;var o}})),l(a=>{var i=C,l=B,n=A;return i!==a.e&&r(t,a.e=i),l!==a.t&&r(e,a.t=l),n!==a.a&&r(s,a.a=n),a},{e:void 0,t:void 0,a:void 0}),t}}),st),a(st,(Q=i(()=>!!g()),()=>Q()?d("auth.alreadyHaveAccount"):d("auth.dontHaveAccount")),ot),ot.$$click=()=>_(!g()),a(ot,(R=i(()=>!!g()),()=>R()?d("auth.login"):d("auth.register"))),a(ht,()=>d("app.privacyPolicy")),l(t=>{var e=m,a=b,i=w,l=w,n=g()?"new-password":"current-password",s=D(),o=x,h=k;return e!==t.e&&r(X,t.e=e),a!==t.t&&r(Y,t.t=a),i!==t.a&&r(tt,t.a=i),l!==t.o&&r(it,t.o=l),n!==t.i&&u(rt,"autocomplete",t.i=n),s!==t.n&&(nt.disabled=t.n=s),o!==t.s&&r(st,t.s=o),h!==t.h&&r(ut,t.h=h),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),l(()=>at.value=f()),l(()=>rt.value=F()),X;var U,J,N,Q,R,X,Y,Z,tt,et,at,it,lt,rt,nt,st,ot,ut,ht}d(["input","click"]);export{D as default};
