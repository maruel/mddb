import{u as e,c as t,a as n,b as i,d as r,t as o,e as a,r as s,f as l,g as d,h as c,o as u,i as g,S as h,j as v,k as p,s as _,F as f,m,l as b,n as w,p as k,q as y,M as $,v as S,w as C,x,E as z,y as I,z as L,A as T,B as E,C as R,D as O,G as P,H as M,I as D,J as B,K as N,L as W,N as j,O as A,P as q,Q as F,R as U,T as H,U as V,V as G,W as Y,X as K,Y as J,Z as Q,_ as X,$ as Z,a0 as ee,a1 as te,a2 as ne,a3 as ie,a4 as re}from"./vendor-CJxKTJ52.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const oe={},ae=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in oe)return;oe[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};async function se(e){const t=await((e,t,n)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>ae(()=>import("./de-BM2kPbGL.js"),[]),"./dictionaries/en.ts":()=>ae(()=>import("./en-CDqwZt-a.js"),[]),"./dictionaries/es.ts":()=>ae(()=>import("./es-BfB7HQt5.js"),[]),"./dictionaries/fr.ts":()=>ae(()=>import("./fr-cCZR70fs.js"),[])}),`./dictionaries/${e}.ts`,3);return l(t.dict)}const le=a(),de=e=>{const[a,l]=t(e.initialLocale||"en"),[d]=n(a,se),c=o(d,s),u=e=>{const t=`errors.${e}`,n=c(t);return n&&n!==t?n:c("errors.unknown")||"An error occurred"},g=i(()=>({locale:a,setLocale:l,t:c,translateError:u}));return r(le.Provider,{get value(){return g()},get children(){return e.children}})};function ce(){const t=e(le);if(!t)throw new Error("useI18n must be used within I18nProvider");return t}const ue="_sidebarNodeWrapper_i1nam_1",ge="_childList_i1nam_2",he="_pageItem_i1nam_13",ve="_active_i1nam_28",pe="_nodeIcon_i1nam_34",_e="_pageTitleText_i1nam_41",fe="_expandIcon_i1nam_49",me="_hidden_i1nam_67",be="_loading_i1nam_67",we="_expanded_i1nam_72",ke="_contextMenu_i1nam_95",ye="_contextMenuItem_i1nam_107",$e="_contextMenuDivider_i1nam_124",Se="_hoverDeleteButton_i1nam_131";var Ce=k("<div><button>üìÑ </button><button>üìä </button><div></div><button>üïê "),xe=k("<ul>"),ze=k("<li><div><span></span><span></span><span></span><button>üóë");function Ie(e){const{t:n}=ce(),[i,o]=t(0===e.depth),[a,s]=t(!1),[l,d]=t({x:0,y:0}),[k,y]=t(null),[$,S]=t(!1),[C,x]=c({}),z=()=>{const t=e.prefetchedChildren?.[e.node.id];if(t)return t;const n=k();return null!==n?n:[]},I=()=>{const t=k();if(null!==t)return t.length>0;const n=e.prefetchedChildren?.[e.node.id];return n?n.length>0:!0===e.node.has_children};u(()=>{const t=()=>{s(!1)};if(document.addEventListener("click",t),I()&&e.onFetchChildren){const t=e.prefetchedChildren?.[e.node.id];t?(y(t),L(t)):null===k()&&(async()=>{if(e.onFetchChildren&&null===k()&&!$()){S(!0);try{const t=await e.onFetchChildren(e.node.id);y(t),L(t)}catch(t){console.error("Failed to load children:",t),y([])}finally{S(!1)}}})()}return()=>document.removeEventListener("click",t)});const L=t=>{if(e.onFetchChildren)for(const n of t)C[n.id]||!0!==n.has_children||e.onFetchChildren(n.id).then(e=>{x(n.id,e)}).catch(()=>{})},T=async e=>{e.stopPropagation(),o(!i())},E=e=>{e.preventDefault(),e.stopPropagation(),d({x:e.clientX,y:e.clientY}),s(!0)};return R=ze(),O=R.firstChild,P=O.firstChild,M=P.nextSibling,D=M.nextSibling,B=D.nextSibling,O.$$contextmenu=E,O.$$click=()=>e.onSelect(e.node),P.$$click=T,g(P,()=>$()?"‚óã":"‚ñ∂"),g(M,()=>e.node.has_table&&!e.node.has_page?"üìä":"üìÑ"),g(D,()=>e.node.title),B.$$click=t=>{t.stopPropagation(),e.onDeleteNode?.(e.node.id)},g(R,r(h,{get when(){return a()},get children(){var t=Ce(),i=t.firstChild;i.firstChild;var r=i.nextSibling;r.firstChild;var o=r.nextSibling,a=o.nextSibling;return a.firstChild,t.$$click=e=>e.stopPropagation(),i.$$click=()=>{e.onCreateChildPage(e.node.id),s(!1)},g(i,()=>n("app.createSubPage"),null),r.$$click=()=>{e.onCreateChildTable(e.node.id),s(!1)},g(r,()=>n("app.createSubTable"),null),a.$$click=()=>{e.onShowHistory?.(e.node.id),s(!1)},g(a,()=>n("editor.history"),null),v(e=>{var n=ke,s=`${l().x}px`,d=`${l().y}px`,c=ye,u=ye,g=$e,h=ye;return n!==e.e&&p(t,e.e=n),s!==e.t&&_(t,"left",e.t=s),d!==e.a&&_(t,"top",e.a=d),c!==e.o&&p(i,e.o=c),u!==e.i&&p(r,e.i=u),g!==e.n&&p(o,e.n=g),h!==e.s&&p(a,e.s=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}}),null),g(R,r(h,{get when(){return m(()=>!!i())()&&z().length>0},get children(){var t=xe();return g(t,r(f,{get each(){return z()},children:t=>r(Ie,{node:t,get selectedId(){return e.selectedId},get onSelect(){return e.onSelect},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},get depth(){return e.depth+1},prefetchedChildren:C})})),v(()=>p(t,ge)),t}}),null),v(t=>{var r=ue,o=`sidebar-node-${e.node.id}`,a=he,s={[`${ve}`]:e.selectedId===e.node.id},l=12*e.depth+8+"px",d=fe,c={[`${we}`]:i(),[`${me}`]:!I(),[`${be}`]:$()},u=`expand-icon-${e.node.id}`,g=pe,h=_e,v=Se,f=n("common.delete")||"Delete";return r!==t.e&&p(R,t.e=r),o!==t.t&&b(R,"data-testid",t.t=o),a!==t.a&&p(O,t.a=a),t.o=w(O,s,t.o),l!==t.i&&_(O,"padding-left",t.i=l),d!==t.n&&p(P,t.n=d),t.s=w(P,c,t.s),u!==t.h&&b(P,"data-testid",t.h=u),g!==t.r&&p(M,t.r=g),h!==t.d&&p(D,t.d=h),v!==t.l&&p(B,t.l=v),f!==t.u&&b(B,"title",t.u=f),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),R;var R,O,P,M,D,B}d(["click","contextmenu"]);const Le="_sidebar_bms3i_1",Te="_sidebarHeader_bms3i_9",Ee="_loading_bms3i_42",Re="_pageList_bms3i_48",Oe="_sidebarFooter_bms3i_55",Pe="_sidebarActions_bms3i_71",Me="_mobileOpen_bms3i_106";var De=k("<p>"),Be=k('<aside><div><h2></h2><div><button>+P</button><button>+D</button></div></div><ul></ul><div><a href=/privacy></a><span style="margin:0 0.5rem;color:#ccc">|</span><a href=/terms>');function Ne(e){const{t:t}=ce();return n=Be(),i=n.firstChild,o=i.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,d=i.nextSibling,c=d.nextSibling,u=c.firstChild,_=u.nextSibling.nextSibling,g(o,()=>t("app.workspace")),y(s,"click",e.onCreatePage),y(l,"click",e.onCreateTable),g(n,r(h,{get when(){return m(()=>!!e.loading)()&&0===e.nodes.length},fallback:null,get children(){var e=De();return g(e,()=>t("common.loading")),v(()=>p(e,Ee)),e}}),d),g(d,r(f,{get each(){return e.nodes},children:t=>r(Ie,{node:t,get selectedId(){return e.selectedNodeId},get onSelect(){return e.onSelectNode},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},depth:0})})),u.$$click=t=>{t.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()},g(u,()=>t("app.privacyPolicy")),_.$$click=t=>{t.preventDefault(),window.history.pushState(null,"","/terms"),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()},g(_,()=>t("app.terms")),v(r=>{var o=`${Le} ${e.isOpen?Me:""}`,u=Te,g=Pe,h=t("app.newPage")||"New Page",v=t("app.newTable")||"New Table",_=Re,f=Oe;return o!==r.e&&p(n,r.e=o),u!==r.t&&p(i,r.t=u),g!==r.a&&p(a,r.a=g),h!==r.o&&b(s,"title",r.o=h),v!==r.i&&b(l,"title",r.i=v),_!==r.n&&p(d,r.n=_),f!==r.s&&p(c,r.s=f),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),n;var n,i,o,a,s,l,d,c,u,_}d(["click"]);const We="_editorContainer_1ckdz_3",je="_editorToolbar_1ckdz_12",Ae="_modeToggle_1ckdz_22",qe="_modeButton_1ckdz_29",Fe="_active_1ckdz_44",Ue="_formattingButtons_1ckdz_50",He="_formatButton_1ckdz_56",Ve="_isActive_1ckdz_77",Ge="_separator_1ckdz_82",Ye="_prosemirrorEditor_1ckdz_90",Ke="_markdownEditor_1ckdz_303",Je="_hidden_1ckdz_322";var Qe=k('<div><button title="Bold (Ctrl+B)">B</button><button title="Italic (Ctrl+I)">I</button><button title="Code (Ctrl+`)">&lt;/></button><span></span><button title="Heading 1">H1</button><button title="Heading 2">H2</button><button title="Heading 3">H3</button><span></span><button title="Bullet List">‚Ä¢</button><button title="Numbered List">1.</button><button title=Quote>"</button><button title="Code Block">{ }'),Xe=k("<div><div><div><button data-testid=editor-mode-visual></button><button data-testid=editor-mode-markdown></button></div></div><div data-testid=wysiwyg-editor></div><textarea data-testid=markdown-editor>");const Ze=new $({...S.nodes,bullet_list(e,t){e.renderList(t,"  ",()=>"- ")}},S.marks);function et(){const e=Y.concat(K,J);e.push(q(/^\s*>\s$/,T.nodes.blockquote)),e.push(q(/^\s*([-*])\s$/,T.nodes.bullet_list)),e.push(q(/^(\d+)\.\s$/,T.nodes.ordered_list,e=>({order:+(e[1]??1)}),(e,t)=>t.childCount+t.attrs.order===+(e[1]??1))),e.push(F(/^```$/,T.nodes.code_block));for(let t=1;t<=6;t++){const n=new RegExp(`^(#{${t}})\\s$`);e.push(F(n,T.nodes.heading,{level:t}))}return U({rules:e})}function tt(){const e={};return e["Mod-z"]=Q,e["Mod-y"]=X,e["Mod-Shift-z"]=X,e["Mod-b"]=L(T.marks.strong),e["Mod-i"]=L(T.marks.em),e["Mod-`"]=L(T.marks.code),e.Enter=H(T.nodes.list_item),e.Tab=V(T.nodes.list_item),e["Shift-Tab"]=G(T.nodes.list_item),N(e)}function nt(e){const{t:n}=ce(),[i,o]=t("wysiwyg"),[a,s]=t(e.content);let l,d,c=e.pageId,_=e.content;const[f,m]=t(!1),[w,k]=t(!1),[y,$]=t(!1),[S,q]=t(null),[F,U]=t(!1),[H,V]=t(!1),[G,Y]=t(!1),[K,J]=t(!1),Q=t=>{const n=function(e,t){if(!t)return e;let n=e.replace(/\]\(assets\//g,`](/assets/${t}/`);return n=n.replace(/src="assets\//g,`src="/assets/${t}/`),n}(t,e.orgId);return D.parse(n)},X=t=>function(e,t){if(!t)return e;const n=new RegExp(`/assets/${t}/`,"g");return e.replace(n,"assets/")}(Ze.serialize(t),e.orgId),ee=()=>{if(!d)return;const{state:e}=d,{from:t,$from:n,to:i,empty:r}=e.selection,o=r?e.storedMarks||n.marks():[];m(void 0!==T.marks.strong.isInSet(o)||e.doc.rangeHasMark(t,i,T.marks.strong)),k(void 0!==T.marks.em.isInSet(o)||e.doc.rangeHasMark(t,i,T.marks.em)),$(void 0!==T.marks.code.isInSet(o)||e.doc.rangeHasMark(t,i,T.marks.code));const a=n.node(n.depth);a.type===T.nodes.heading?q(a.attrs.level):q(null),J(a.type===T.nodes.code_block);let s=!1,l=!1,c=!1;for(let d=n.depth;d>0;d--){const e=n.node(d);e.type===T.nodes.bullet_list&&(s=!0),e.type===T.nodes.ordered_list&&(l=!0),e.type===T.nodes.blockquote&&(c=!0)}U(s),V(l),Y(c)},te=e=>B.create({doc:e,plugins:[et(),tt(),N(Z),W(),j({color:"var(--c-primary)",width:2}),A()]});u(()=>{if(!l)return;const t=Q(e.content);if(!t)return;const n=te(t);d=new z(l,{state:n,editable:()=>!e.readOnly,dispatchTransaction(t){if(!d)return;const n=d.state.apply(t);if(d.updateState(n),t.docChanged){const t=X(n.doc);s(t),_=t,e.onChange(t)}ee()}}),ee()}),C(()=>{d?.destroy()}),x(I(()=>[e.pageId,e.content],([e,t])=>{if((e!==c||t!==_)&&(c=e,_=t,s(t),o("wysiwyg"),d)){const e=Q(t);if(e){const t=te(e);d.updateState(t)}}},{defer:!0}));const ne=()=>{if(d){const e=Q(a());if(e){const t=te(e);d.updateState(t),ee()}}o("wysiwyg")},ie=()=>{if(d){const e=X(d.state.doc);s(e)}o("markdown")},re=()=>{d&&(L(T.marks.strong)(d.state,d.dispatch),d.focus())},oe=()=>{d&&(L(T.marks.em)(d.state,d.dispatch),d.focus())},ae=()=>{d&&(L(T.marks.code)(d.state,d.dispatch),d.focus())},se=e=>{if(!d)return;const{state:t,dispatch:n}=d;S()===e?E(T.nodes.paragraph)(t,n):E(T.nodes.heading,{level:e})(t,n),d.focus()},le=()=>{if(!d)return;const{state:e,dispatch:t}=d;F()?R(e,t):O(T.nodes.bullet_list)(e,t),d.focus()},de=()=>{if(!d)return;const{state:e,dispatch:t}=d;H()?R(e,t):O(T.nodes.ordered_list)(e,t),d.focus()},ue=()=>{if(!d)return;const{state:e,dispatch:t}=d;G()?R(e,t):P(T.nodes.blockquote)(e,t),d.focus()},ge=()=>{if(!d)return;const{state:e,dispatch:t}=d;K()?E(T.nodes.paragraph)(e,t):E(T.nodes.code_block)(e,t),d.focus()},he=e=>e?`${qe} ${Fe}`:qe,ve=e=>e?`${He} ${Ve}`:He;return(()=>{var t=Xe(),o=t.firstChild,d=o.firstChild,c=d.firstChild,u=c.nextSibling,m=o.nextSibling,k=m.nextSibling;c.$$click=ne,g(c,()=>n("editor.wysiwygMode")||"Visual"),u.$$click=ie,g(u,()=>n("editor.markdownMode")||"Markdown"),g(o,r(h,{get when(){return"wysiwyg"===i()},get children(){var e=Qe(),t=e.firstChild,n=t.nextSibling,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,d=l.nextSibling,c=d.nextSibling,u=c.nextSibling,g=u.nextSibling;return t.$$click=re,n.$$click=oe,i.$$click=ae,o.$$click=()=>se(1),a.$$click=()=>se(2),s.$$click=()=>se(3),d.$$click=le,c.$$click=de,u.$$click=ue,g.$$click=ge,v(h=>{var v=Ue,_=ve(f()),m=ve(w()),b=ve(y()),k=Ge,$=ve(1===S()),C=ve(2===S()),x=ve(3===S()),z=Ge,I=ve(F()),L=ve(H()),T=ve(G()),E=ve(K());return v!==h.e&&p(e,h.e=v),_!==h.t&&p(t,h.t=_),m!==h.a&&p(n,h.a=m),b!==h.o&&p(i,h.o=b),k!==h.i&&p(r,h.i=k),$!==h.n&&p(o,h.n=$),C!==h.s&&p(a,h.s=C),x!==h.h&&p(s,h.h=x),z!==h.r&&p(l,h.r=z),I!==h.d&&p(d,h.d=I),L!==h.l&&p(c,h.l=L),T!==h.u&&p(u,h.u=T),E!==h.c&&p(g,h.c=E),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0}),e}}),null);return"function"==typeof l?M(l,m):l=m,k.$$input=t=>{return n=t.target.value,s(n),_=n,void e.onChange(n);var n},v(r=>{var a=We,s=je,l=Ae,g=he("wysiwyg"===i()),h=n("editor.wysiwygMode")||"Visual",v=he("markdown"===i()),_=n("editor.markdownMode")||"Markdown",f="wysiwyg"===i()?Ye:`${Ye} ${Je}`,w="markdown"===i()?Ke:`${Ke} ${Je}`,y=e.placeholder||n("editor.contentPlaceholder")||"Write markdown...",$=e.readOnly;return a!==r.e&&p(t,r.e=a),s!==r.t&&p(o,r.t=s),l!==r.a&&p(d,r.a=l),g!==r.o&&p(c,r.o=g),h!==r.i&&b(c,"title",r.i=h),v!==r.n&&p(u,r.n=v),_!==r.s&&b(u,"title",r.s=_),f!==r.h&&p(m,r.h=f),w!==r.r&&p(k,r.r=w),y!==r.d&&b(k,"placeholder",r.d=y),$!==r.l&&(k.readOnly=r.l=$),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),v(()=>k.value=a()),t})()}d(["click","input"]);const it="select",rt="owner",ot="admin",at="google",st="microsoft",lt="github",dt="_container_1fe2r_1",ct="_tableWrapper_1fe2r_10",ut="_table_1fe2r_10",gt="_headerRow_1fe2r_24",ht="_headerCell_1fe2r_32",vt="_row_1fe2r_44",pt="_cell_1fe2r_53",_t="_editing_1fe2r_65",ft="_cellContent_1fe2r_70",mt="_editContainer_1fe2r_75",bt="_input_1fe2r_81",wt="_editActions_1fe2r_94",kt="_saveBtn_1fe2r_99",yt="_cancelBtn_1fe2r_100",$t="_actionsCell_1fe2r_119",St="_deleteBtn_1fe2r_127",Ct="_addBtn_1fe2r_141",xt="_newRow_1fe2r_155",zt="_required_1fe2r_164",It="_empty_1fe2r_169",Lt="_loadMore_1fe2r_176";var Tt=k("<input type=checkbox>"),Et=k("<select><option value>--"),Rt=k("<option>"),Ot=k("<input type=text>"),Pt=k("<input type=number>"),Mt=k("<input type=date>"),Dt=k("<tr><td><button>+"),Bt=k("<div>"),Nt=k("<div><button>"),Wt=k("<div><div><table><thead><tr><th></th></tr></thead><tbody>"),jt=k("<span>*"),At=k("<th>"),qt=k("<button>‚úï"),Ft=k("<tr><td>"),Ut=k("<div><div><button>‚úì</button><button>‚úï"),Ht=k("<td>");function Vt(e){const{t:n}=ce(),[i,o]=t(null),[a,s]=t(""),[l,d]=t({}),c=e=>{s(e)},u=(t,n)=>{const i=e.columns.find(e=>e.name===n);if(!i||!e.onUpdateRecord)return;const r=e.records.find(e=>e.id===t);if(!r)return;const s={...r.data};s[i.name]=a(),e.onUpdateRecord(t,s),o(null)},_=()=>{e.onAddRecord&&Object.keys(l()).length>0&&(e.onAddRecord(l()),d({}))},m=(t,n)=>{const i=((t,n)=>{const i=e.columns.find(e=>e.name===n);return i?t.data[i.name]??"":""})(t,n.name);switch(n.type){case"checkbox":return i?"‚úì":"";case"select":case"multi_select":case"number":default:return String(i);case"date":return i?new Date(i).toLocaleDateString():""}},k=(e,t,n=!1,i,a)=>{const s=e=>{n&&setTimeout(()=>e.focus(),0)},l=i&&a?e=>((e,t,n)=>{"Enter"===e.key?(e.preventDefault(),u(t,n)):"Escape"===e.key&&(e.preventDefault(),o(null))})(e,i,a):void 0;switch(e.type){case"checkbox":return w=Tt(),y(w,"keydown",l),w.addEventListener("change",e=>c(String(e.target.checked))),M(s,w),w.checked="true"===t,v(()=>p(w,bt)),w;case it:return e.options&&e.options.length>0?((b=Et()).firstChild,y(b,"keydown",l),b.addEventListener("change",e=>c(e.target.value)),M(s,b),b.value=t,g(b,r(f,{get each(){return e.options},children:e=>{return t=Rt(),g(t,()=>e.name),v(()=>t.value=e.id),t;var t}}),null),v(()=>p(b,bt)),b):(m=Ot(),y(m,"keydown",l),m.$$input=e=>c(e.target.value),M(s,m),m.value=t,v(()=>p(m,bt)),m);case"number":return _=Pt(),y(_,"keydown",l),_.$$input=e=>c(e.target.value),M(s,_),_.value=t,v(()=>p(_,bt)),_;case"date":return h=Mt(),y(h,"keydown",l),h.$$input=e=>c(e.target.value),M(s,h),h.value=t,v(()=>p(h,bt)),h;default:return d=Ot(),y(d,"keydown",l),d.$$input=e=>c(e.target.value),M(s,d),d.value=t,v(()=>p(d,bt)),d}var d,h,_,m,b,w};return $=Wt(),S=$.firstChild,C=S.firstChild,x=C.firstChild,z=x.firstChild,I=z.firstChild,L=x.nextSibling,g(I,()=>n("common.actions")),g(z,r(f,{get each(){return e.columns},children:e=>{return t=At(),g(t,()=>e.name,null),g(t,r(h,{get when(){return e.required},get children(){var e=jt();return v(()=>p(e,zt)),e}}),null),v(()=>p(t,ht)),t;var t}}),null),g(L,r(f,{get each(){return e.records},children:t=>{return l=Ft(),d=l.firstChild,g(d,r(h,{get when(){return e.onDeleteRecord},get children(){var i=qt();return i.$$click=()=>e.onDeleteRecord?.(t.id),v(e=>{var t=St,r=n("table.deleteRecord")||"Delete record";return t!==e.e&&p(i,e.e=t),r!==e.t&&b(i,"title",e.t=r),e},{e:void 0,t:void 0}),i}})),g(l,r(f,{get each(){return e.columns},children:n=>{const l=()=>i()?.recordId===t.id&&i()?.columnId===n.name;return(d=Ht()).$$click=()=>((t,n)=>{const i=e.columns.find(e=>e.name===n),r=e.records.find(e=>e.id===t)?.data[i?.name??""]??"";o({recordId:t,columnId:n}),s(String(r))})(t.id,n.name),g(d,r(h,{get when(){return l()},get fallback(){return e=Bt(),g(e,()=>m(t,n)),v(()=>p(e,ft)),e;var e},get children(){var e=Ut(),i=e.firstChild,r=i.firstChild,s=r.nextSibling;return g(e,()=>k(n,a(),!0,t.id,n.name),i),r.$$click=()=>u(t.id,n.name),s.$$click=()=>o(null),v(t=>{var n=mt,o=wt,a=kt,l=yt;return n!==t.e&&p(e,t.e=n),o!==t.t&&p(i,t.t=o),a!==t.a&&p(r,t.a=a),l!==t.o&&p(s,t.o=l),t},{e:void 0,t:void 0,a:void 0,o:void 0}),e}})),v(e=>{var t=pt,n={[`${_t}`]:l()};return t!==e.e&&p(d,e.e=t),e.t=w(d,n,e.t),e},{e:void 0,t:void 0}),d;var d}}),null),v(e=>{var t=vt,n=$t;return t!==e.e&&p(l,e.e=t),n!==e.t&&p(d,e.t=n),e},{e:void 0,t:void 0}),l;var l,d}}),null),g(L,r(h,{get when(){return e.onAddRecord},get children(){var t=Dt(),n=t.firstChild,i=n.firstChild;return i.$$click=_,g(t,r(f,{get each(){return e.columns},children:e=>{return t=Ht(),g(t,()=>k(e,String(l()[e.name]??""))),v(()=>p(t,pt)),t;var t}}),null),v(e=>{var r=xt,o=$t,a=Ct;return r!==e.e&&p(t,e.e=r),o!==e.t&&p(n,e.t=o),a!==e.a&&p(i,e.a=a),e},{e:void 0,t:void 0,a:void 0}),t}}),null),g($,r(h,{get when(){return 0===e.records.length},get children(){var e=Bt();return g(e,()=>n("table.noRecords")),v(()=>p(e,It)),e}}),null),g($,r(h,{get when(){return e.hasMore},get children(){var t=Nt(),i=t.firstChild;return i.$$click=()=>e.onLoadMore?.(),g(i,()=>n("table.loadMore")),v(()=>p(t,Lt)),t}}),null),v(e=>{var t=dt,n=ct,i=ut,r=gt,o=ht;return t!==e.e&&p($,e.e=t),n!==e.t&&p(S,e.t=n),i!==e.a&&p(C,e.a=i),r!==e.o&&p(z,e.o=r),o!==e.i&&p(I,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),$;var $,S,C,x,z,I,L}d(["keydown","input","click"]);const Gt="_grid_3ff2z_1",Yt="_card_3ff2z_8",Kt="_cardHeader_3ff2z_20",Jt="_deleteBtn_3ff2z_28",Qt="_cardBody_3ff2z_40",Xt="_field_3ff2z_46",Zt="_fieldName_3ff2z_51",en="_titleInput_3ff2z_58",tn="_fieldValueInput_3ff2z_75";var nn=k("<div>"),rn=k("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),on=k("<div><span>:</span><input type=text>");function an(e){const{t:t}=ce(),n=(t,n,i)=>{if(t.data[n]===i||!e.onUpdateRecord)return;const r={...t.data,[n]:i};e.onUpdateRecord(t.id,r)};return i=nn(),g(i,r(f,{get each(){return e.records},children:i=>{return o=rn(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=s.nextSibling,c=a.nextSibling,l.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},l.addEventListener("blur",t=>e.columns[0]&&n(i,e.columns[0].name,t.target.value)),d.$$click=()=>e.onDeleteRecord(i.id),g(c,r(f,{get each(){return e.columns.slice(1,4)},children:e=>{return t=on(),r=t.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>e.name,o),a.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},a.addEventListener("blur",t=>n(i,e.name,t.target.value)),v(e=>{var n=Xt,i=Zt,o=tn;return n!==e.e&&p(t,e.e=n),i!==e.t&&p(r,e.t=i),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=String(i.data[e.name]||"")),t;var t,r,o,a}})),v(e=>{var n=Yt,i=Kt,r=t("table.untitled")||"Untitled",s=en,u=Jt,g=Qt;return n!==e.e&&p(o,e.e=n),i!==e.t&&p(a,e.t=i),r!==e.a&&b(l,"placeholder",e.a=r),s!==e.o&&p(l,e.o=s),u!==e.i&&p(d,e.i=u),g!==e.n&&p(c,e.n=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>l.value=String((e.columns[0]?i.data[e.columns[0].name]:null)||"")),o;var o,a,s,l,d,c}})),v(()=>p(i,Gt)),i;var i}d(["keydown","click"]);const sn="_gallery_1i7ro_1",ln="_card_1i7ro_8",dn="_imageContainer_1i7ro_23",cn="_image_1i7ro_23",un="_imagePlaceholder_1i7ro_38",gn="_cardContent_1i7ro_43",hn="_cardHeader_1i7ro_47",vn="_deleteBtn_1i7ro_54",pn="_cardBody_1i7ro_67",_n="_field_1i7ro_71",fn="_fieldName_1i7ro_77",mn="_titleInput_1i7ro_83",bn="_fieldValueInput_1i7ro_100";var wn=k("<div>"),kn=k("<div><div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),yn=k("<img>"),$n=k("<div><span>:</span><input type=text>");function Sn(e){const{t:t}=ce(),n=(t,n,i)=>{if(t.data[n]===i||!e.onUpdateRecord)return;const r={...t.data,[n]:i};e.onUpdateRecord(t.id,r)};return i=wn(),g(i,r(f,{get each(){return e.records},children:i=>{const o=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return a=kn(),s=a.firstChild,l=s.firstChild,d=l.firstChild,c=d.firstChild,u=d.nextSibling,_=l.nextSibling,g(a,r(h,{when:o,children:n=>{return o=wn(),g(o,r(h,{get when(){return i.data[n().name]},get fallback(){return e=wn(),g(e,()=>t("table.noImage")),v(()=>p(e,un)),e;var e},get children(){var t=yn();return v(r=>{var o=String(i.data[n().name]),a=String((e.columns[0]?i.data[e.columns[0].name]:null)||"Record"),s=cn;return o!==r.e&&b(t,"src",r.e=o),a!==r.t&&b(t,"alt",r.t=a),s!==r.a&&p(t,r.a=s),r},{e:void 0,t:void 0,a:void 0}),t}})),v(()=>p(o,dn)),o;var o}}),s),c.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},c.addEventListener("blur",t=>e.columns[0]&&n(i,e.columns[0].name,t.target.value)),u.$$click=()=>e.onDeleteRecord(i.id),g(_,r(f,{get each(){return e.columns.slice(1,3)},children:e=>{return t=$n(),r=t.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>e.name,o),a.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},a.addEventListener("blur",t=>n(i,e.name,t.target.value)),v(e=>{var n=_n,i=fn,o=bn;return n!==e.e&&p(t,e.e=n),i!==e.t&&p(r,e.t=i),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=String(i.data[e.name]||"")),t;var t,r,o,a}})),v(e=>{var n=ln,i=gn,r=hn,o=t("table.untitled")||"Untitled",d=mn,g=vn,h=pn;return n!==e.e&&p(a,e.e=n),i!==e.t&&p(s,e.t=i),r!==e.a&&p(l,e.a=r),o!==e.o&&b(c,"placeholder",e.o=o),d!==e.i&&p(c,e.i=d),g!==e.n&&p(u,e.n=g),h!==e.s&&p(_,e.s=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>c.value=String((e.columns[0]?i.data[e.columns[0].name]:null)||"")),a;var a,s,l,d,c,u,_}})),v(()=>p(i,sn)),i;var i}d(["keydown","click"]);const Cn="_board_ojcu7_1",xn="_noGroup_ojcu7_7",zn="_columns_ojcu7_16",In="_column_ojcu7_16",Ln="_columnHeader_ojcu7_31",Tn="_columnName_ojcu7_38",En="_columnCount_ojcu7_45",Rn="_cards_ojcu7_53",On="_card_ojcu7_53",Pn="_cardHeader_ojcu7_68",Mn="_deleteBtn_ojcu7_80",Dn="_cardBody_ojcu7_93",Bn="_field_ojcu7_97",Nn="_fieldName_ojcu7_103",Wn="_titleInput_ojcu7_108",jn="_fieldValueInput_ojcu7_125";var An=k("<div>"),qn=k("<div><div><span></span><span></span></div><div>"),Fn=k("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Un=k("<div><span>:</span><input type=text>");function Hn(e){const{t:t}=ce(),n=(t,n,i)=>{if(t.data[n]===i||!e.onUpdateRecord)return;const r={...t.data,[n]:i};e.onUpdateRecord(t.id,r)},o=()=>e.columns.find(e=>e.type===it||"multi_select"===e.type),a=i(()=>{const n=o();if(!n)return[{name:"All Records",records:e.records,fromOptions:!0}];const i={};return n.options&&n.options.forEach(e=>{i[e.id]={name:e.name,records:[],fromOptions:!0}}),i.__none__={name:t("table.noGroup")||"No Group",records:[],fromOptions:!0},e.records.forEach(e=>{const t=e.data[n.name];t&&"string"==typeof t?(i[t]||(i[t]={name:t,records:[]}),i[t].records.push(e)):i.__none__?.records.push(e)}),Object.values(i).filter(e=>e.records.length>0||e.fromOptions)});return s=An(),g(s,r(h,{get when(){return o()},get fallback(){return e=An(),g(e,()=>t("table.addSelectColumn")),v(()=>p(e,xn)),e;var e},get children(){var i=An();return g(i,r(f,{get each(){return a()},children:i=>{return a=qn(),s=a.firstChild,l=s.firstChild,d=l.nextSibling,c=s.nextSibling,g(l,()=>i.name),g(d,()=>i.records.length),g(c,r(f,{get each(){return i.records},children:i=>{return a=Fn(),s=a.firstChild,l=s.firstChild,d=l.firstChild,c=l.nextSibling,u=s.nextSibling,d.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},d.addEventListener("blur",t=>e.columns[0]&&n(i,e.columns[0].name,t.target.value)),c.$$click=()=>e.onDeleteRecord(i.id),g(u,r(f,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==o()?.name)},children:e=>{return t=Un(),r=t.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>e.name,o),a.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},a.addEventListener("blur",t=>n(i,e.name,t.target.value)),v(e=>{var n=Bn,i=Nn,o=jn;return n!==e.e&&p(t,e.e=n),i!==e.t&&p(r,e.t=i),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=String(i.data[e.name]||"")),t;var t,r,o,a}})),v(e=>{var n=On,i=Pn,r=t("table.untitled")||"Untitled",o=Wn,l=Mn,g=Dn;return n!==e.e&&p(a,e.e=n),i!==e.t&&p(s,e.t=i),r!==e.a&&b(d,"placeholder",e.a=r),o!==e.o&&p(d,e.o=o),l!==e.i&&p(c,e.i=l),g!==e.n&&p(u,e.n=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>d.value=String((e.columns[0]?i.data[e.columns[0].name]:null)||"")),a;var a,s,l,d,c,u}})),v(e=>{var t=In,n=Ln,i=Tn,r=En,o=Rn;return t!==e.e&&p(a,e.e=t),n!==e.t&&p(s,e.t=n),i!==e.a&&p(l,e.a=i),r!==e.o&&p(d,e.o=r),o!==e.i&&p(c,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),a;var a,s,l,d,c}})),v(()=>p(i,zn)),i}})),v(()=>p(s,Cn)),s;var s}d(["keydown","click"]);class Vn extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function Gn(e,t){const n=await e(t);if(!n.ok){const e=await n.json();throw new Vn(n.status,e)}return n.json()}async function Yn(e,t,n){const i={method:"POST"};n&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n));const r=await e(t,i);if(!r.ok){const e=await r.json();throw new Vn(r.status,e)}return r.json()}function Kn(e){return{admin:{organizations:{listAllOrgs:()=>Gn(e,"/api/admin/organizations")},getAdminStats:()=>Gn(e,"/api/admin/stats"),listAllUsers:()=>Gn(e,"/api/admin/users")},auth:{email:{changeEmail:t=>Yn(e,"/api/auth/email",t),sendVerificationEmail:()=>Yn(e,"/api/auth/email/send-verification")},invitations:{acceptOrgInvitation:t=>Yn(e,"/api/auth/invitations/org/accept",t),acceptWSInvitation:t=>Yn(e,"/api/auth/invitations/ws/accept",t)},sessions:{listSessions:()=>Gn(e,"/api/auth/sessions"),revokeAllSessions:()=>Yn(e,"/api/auth/sessions/revoke-all"),revokeSession:t=>Yn(e,"/api/auth/sessions/revoke",t)},getMe:()=>Gn(e,"/api/auth/me"),listProviders:()=>Gn(e,"/api/auth/providers"),login:t=>Yn(e,"/api/auth/login",t),logout:()=>Yn(e,"/api/auth/logout"),register:t=>Yn(e,"/api/auth/register",t),switchWorkspace:t=>Yn(e,"/api/auth/switch-workspace",t),updateUserSettings:t=>Yn(e,"/api/auth/settings",t)},organizations:{createOrganization:t=>Yn(e,"/api/organizations",t)},getHealth:()=>Gn(e,"/api/health"),org:t=>({invitations:{createOrgInvitation:n=>Yn(e,`/api/organizations/${t}/invitations`,n),listOrgInvitations:()=>Gn(e,`/api/organizations/${t}/invitations`)},organizations:{getOrganization:()=>Gn(e,`/api/organizations/${t}`),updateOrganization:n=>Yn(e,`/api/organizations/${t}`,n)},settings:{updateOrgPreferences:n=>Yn(e,`/api/organizations/${t}/settings`,n)},users:{listUsers:()=>Gn(e,`/api/organizations/${t}/users`),updateOrgMemberRole:n=>Yn(e,`/api/organizations/${t}/users/role`,n)},workspaces:{createWorkspace:n=>Yn(e,`/api/organizations/${t}/workspaces`,n)}}),ws:t=>({invitations:{createWSInvitation:n=>Yn(e,`/api/workspaces/${t}/invitations`,n),listWSInvitations:()=>Gn(e,`/api/workspaces/${t}/invitations`)},nodes:{assets:{deleteNodeAsset:(n,i)=>Yn(e,`/api/workspaces/${t}/nodes/${n}/assets/${i}/delete`),listNodeAssets:n=>Gn(e,`/api/workspaces/${t}/nodes/${n}/assets`)},history:{getNodeVersion:(n,i)=>Gn(e,`/api/workspaces/${t}/nodes/${n}/history/${i}`),async listNodeVersions(n,i){const r=new URLSearchParams;i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/history`+(r.toString()?`?${r}`:"");return Gn(e,o)}},page:{createPage:(n,i)=>Yn(e,`/api/workspaces/${t}/nodes/${n}/page/create`,i),deletePage:n=>Yn(e,`/api/workspaces/${t}/nodes/${n}/page/delete`),getPage:n=>Gn(e,`/api/workspaces/${t}/nodes/${n}/page`),updatePage:(n,i)=>Yn(e,`/api/workspaces/${t}/nodes/${n}/page`,i)},table:{records:{createRecord:(n,i)=>Yn(e,`/api/workspaces/${t}/nodes/${n}/table/records/create`,i),deleteRecord:(n,i)=>Yn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}/delete`),getRecord:(n,i)=>Gn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`),async listRecords(n,i){const r=new URLSearchParams;i.Offset&&r.set("offset",String(i.Offset)),i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/table/records`+(r.toString()?`?${r}`:"");return Gn(e,o)},updateRecord:(n,i,r)=>Yn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`,r)},createTable:(n,i)=>Yn(e,`/api/workspaces/${t}/nodes/${n}/table/create`,i),deleteTable:n=>Yn(e,`/api/workspaces/${t}/nodes/${n}/table/delete`),getTable:n=>Gn(e,`/api/workspaces/${t}/nodes/${n}/table`),updateTable:(n,i)=>Yn(e,`/api/workspaces/${t}/nodes/${n}/table`,i)},deleteNode:n=>Yn(e,`/api/workspaces/${t}/nodes/${n}/delete`),getNode:n=>Gn(e,`/api/workspaces/${t}/nodes/${n}`),listNodeChildren:n=>Gn(e,`/api/workspaces/${t}/nodes/${n}/children`)},settings:{git:{deleteGitRemote:()=>Yn(e,`/api/workspaces/${t}/settings/git/delete`),getGitRemote:()=>Gn(e,`/api/workspaces/${t}/settings/git`),pushGit:()=>Yn(e,`/api/workspaces/${t}/settings/git/push`),updateGitRemote:n=>Yn(e,`/api/workspaces/${t}/settings/git`,n)},updateWSMembershipSettings:n=>Yn(e,`/api/workspaces/${t}/settings/membership`,n)},users:{updateWSMemberRole:n=>Yn(e,`/api/workspaces/${t}/users/role`,n)},workspaces:{getWorkspace:()=>Gn(e,`/api/workspaces/${t}`),updateWorkspace:n=>Yn(e,`/api/workspaces/${t}`,n)},search:n=>Yn(e,`/api/workspaces/${t}/search`,n)})}}const Jn=3,Qn=1e3,Xn=3e4;function Zn(e){return 429===e||e>=500&&e<600}function ei(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const n=Date.parse(e);return isNaN(n)?null:Math.max(0,n-Date.now())}function ti(e,t){if(null!==t)return Math.min(t,Xn);const n=Qn*Math.pow(2,e);return Math.min(n,Xn)}function ni(e,t){return n=async(n,i)=>{const r=e(),o={...i?.headers};r&&(o.Authorization=`Bearer ${r}`);const a=await fetch(n,{...i,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let i=0;for(;;){const r=await n(e,t);if(!Zn(r.status)||i>=Jn)return r;const o=ti(i,ei(r.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),i++}};var n}function ii(e,t){return Kn(ni(e,t))}const ri="_settings_1ivbi_1",oi="_header_1ivbi_7",ai="_backButton_1ivbi_20",si="_section_1ivbi_36",li="_table_1ivbi_45",di="_roleSelect_1ivbi_63",ci="_error_1ivbi_69",ui="_success_1ivbi_77",gi="_tabs_1ivbi_85",hi="_activeTab_1ivbi_107",vi="_settingsForm_1ivbi_112",pi="_formItem_1ivbi_119",_i="_saveButton_1ivbi_138",fi="_hint_1ivbi_157",mi="_inviteSection_1ivbi_163",bi="_inviteForm_1ivbi_167",wi="_formGroup_1ivbi_178",ki="_addRemoteSection_1ivbi_207",yi="_actions_1ivbi_219",$i="_smallButton_1ivbi_224",Si="_deleteButtonSmall_1ivbi_238",Ci="_orgLink_1ivbi_252",xi="_linkButton_1ivbi_266";var zi=k("<button>"),Ii=k("<div>"),Li=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Ti=k("<h4>"),Ei=k("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=editor></option><option value=viewer></option></select><button type=submit>"),Ri=k("<section><h3>"),Oi=k("<form><div><label></label><input type=text required></div><button type=submit>"),Pi=k("<section><h3></h3><div><p></p><button> ‚Üí"),Mi=k("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),Di=k("<section><h3></h3><p>"),Bi=k("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),Ni=k("<p>"),Wi=k("<select><option value=admin></option><option value=editor></option><option value=viewer>"),ji=k("<tr><td></td><td></td><td>"),Ai=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function qi(e){const{t:n}=ce(),[o,a]=t("members"),[s,l]=t([]),[d,c]=t([]),[u,_]=t(null),[m,w]=t(""),[k,y]=t(""),[$,S]=t(""),[C,z]=t("viewer"),[I,L]=t(""),[T,E]=t(""),[R,O]=t(!1),[P,M]=t(null),[D,B]=t(null),N=i(()=>ii(()=>e.token)),W=i(()=>{const t=e.user.organization_id;return t?N().org(t):null}),j=i(()=>{const t=e.user.workspace_id;return t?N().ws(t):null}),A=async()=>{const t=W();if(t)try{O(!0),M(null);const n=j();if("members"===o()&&"admin"===e.user.workspace_role){const[e,i]=await Promise.all([t.users.listUsers(),n?n.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);l(e.users?.filter(e=>!!e)||[]),c(i.invitations?.filter(e=>!!e)||[])}if("workspace"===o()&&n){const e=await n.workspaces.getWorkspace();L(e.name),E(e.name)}if("sync"===o()&&"admin"===e.user.workspace_role&&n)try{const e=await n.settings.git.getGitRemote();_(e)}catch{_(null)}}catch(i){M(`${n("errors.failedToLoad")}: ${i}`)}finally{O(!1)}};x(()=>{A()});const q=async e=>{e.preventDefault();const t=j();if($()&&t)try{O(!0),await t.invitations.createWSInvitation({email:$(),role:C()}),S(""),B(n("success.invitationSent")||"Invitation sent successfully"),A()}catch(i){M(`${n("errors.failedToInvite")}: ${i}`)}finally{O(!1)}},F=async e=>{e.preventDefault();const t=j();if(t)try{O(!0),M(null),B(null),I()!==T()&&I().trim()&&await t.workspaces.updateWorkspace({name:I().trim()}),E(I().trim()),B(n("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(i){M(`${n("errors.failedToSave")}: ${i}`)}finally{O(!1)}},U=async e=>{e.preventDefault();const t=j();if(t)try{O(!0),M(null);const e=await t.settings.git.updateGitRemote({url:m(),token:k(),type:"custom",auth_type:k()?"token":"none"});_(e),B(n("success.remoteAdded")||"Git remote configured"),w(""),y("")}catch(i){M(`${n("errors.failedToAddRemote")}: ${i}`)}finally{O(!1)}},H=async()=>{const e=j();if(e)try{O(!0),M(null),B(null),await e.settings.git.pushGit(),B(n("success.pushSuccessful")||"Push successful"),A()}catch(t){M(`${n("errors.pushFailed")}: ${t}`)}finally{O(!1)}},V=async()=>{if(!confirm(n("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=j();if(e)try{O(!0),M(null),await e.settings.git.deleteGitRemote(),_(null),B(n("success.remoteRemoved")||"Remote removed")}catch(t){M(`${n("errors.failedToRemoveRemote")}: ${t}`)}finally{O(!1)}};return(()=>{var t=Bi(),i=t.firstChild,l=i.firstChild;l.firstChild;var c=l.nextSibling,_=i.nextSibling,x=_.firstChild,T=x.nextSibling;return l.$$click=()=>e.onBack(),g(l,()=>n("common.back"),null),g(c,()=>n("settings.title")),x.$$click=()=>a("members"),g(x,()=>n("settings.members")),T.$$click=()=>a("workspace"),g(T,()=>n("settings.workspace")),g(_,r(h,{get when(){return"admin"===e.user.workspace_role},get children(){var e=zi();return e.$$click=()=>a("sync"),g(e,()=>n("settings.gitSync")),v(()=>p(e,"sync"===o()?hi:"")),e}}),null),g(t,r(h,{get when(){return P()},get children(){var e=Ii();return g(e,P),v(()=>p(e,ci)),e}}),null),g(t,r(h,{get when(){return D()},get children(){var e=Ii();return g(e,D),v(()=>p(e,ui)),e}}),null),g(t,r(h,{get when(){return"members"===o()},get children(){var t=Ri(),i=t.firstChild;return g(i,()=>n("settings.members")),g(t,r(h,{get when(){return"admin"===e.user.workspace_role},get fallback(){return e=Ni(),g(e,()=>n("settings.adminOnlyMembers")),e;var e},get children(){return[(k=Li(),y=k.firstChild,x=y.firstChild.firstChild,I=x.nextSibling,L=I.nextSibling,T=y.nextSibling,g(x,()=>n("settings.nameColumn")),g(I,()=>n("settings.emailColumn")),g(L,()=>n("settings.roleColumn")),g(T,r(f,{get each(){return s()},children:t=>{return i=ji(),o=i.firstChild,a=o.nextSibling,s=a.nextSibling,g(o,()=>t.name),g(a,()=>t.email),g(s,r(h,{get when(){return t.id!==e.user.id},get fallback(){return t.workspace_role},get children(){var e=Wi(),i=e.firstChild,r=i.nextSibling,o=r.nextSibling;return e.addEventListener("change",e=>(async(e,t)=>{const i=j();if(i)try{O(!0),await i.users.updateWSMemberRole({user_id:e,role:t}),B(n("success.roleUpdated")||"Role updated"),A()}catch(r){M(`${n("errors.failedToUpdateRole")}: ${r}`)}finally{O(!1)}})(t.id,e.target.value)),g(i,()=>n("settings.roleAdmin")),g(r,()=>n("settings.roleEditor")),g(o,()=>n("settings.roleViewer")),v(()=>p(e,di)),v(()=>e.value=t.workspace_role),e}})),i;var i,o,a,s}})),v(()=>p(k,li)),k),(t=Ei(),i=t.firstChild,o=i.firstChild,a=o.nextSibling,l=a.firstChild,c=l.nextSibling,u=c.firstChild,_=u.nextSibling,m=_.nextSibling,w=c.nextSibling,i.addEventListener("submit",q),g(o,()=>n("settings.inviteNewMember")),l.$$input=e=>S(e.target.value),c.addEventListener("change",e=>z(e.target.value)),g(u,()=>n("settings.roleAdmin")),g(_,()=>n("settings.roleEditor")),g(m,()=>n("settings.roleViewer")),g(w,()=>n("common.invite")),g(t,r(h,{get when(){return d().length>0},get children(){return[(l=Ti(),g(l,()=>n("settings.pendingInvitations")),l),(e=Li(),t=e.firstChild,i=t.firstChild.firstChild,o=i.nextSibling,a=o.nextSibling,s=t.nextSibling,g(i,()=>n("settings.emailColumn")),g(o,()=>n("settings.roleColumn")),g(a,()=>n("settings.sentColumn")),g(s,r(f,{get each(){return d()},children:e=>{return t=ji(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,g(n,()=>e.email),g(i,()=>e.role),g(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>p(e,li)),e)];var e,t,i,o,a,s,l}}),null),v(e=>{var r=mi,o=bi,s=wi,d=n("settings.emailPlaceholder")||"Email address",c=R();return r!==e.e&&p(t,e.e=r),o!==e.t&&p(i,e.t=o),s!==e.a&&p(a,e.a=s),d!==e.o&&b(l,"placeholder",e.o=d),c!==e.i&&(w.disabled=e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>l.value=$()),v(()=>c.value=C()),t)];var t,i,o,a,l,c,u,_,m,w,k,y,x,I,L,T}}),null),v(()=>p(t,si)),t}}),null),g(t,r(h,{get when(){return"workspace"===o()},get children(){var t=Pi(),i=t.firstChild,o=i.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.firstChild;return g(i,()=>n("settings.workspaceSettings")),g(t,r(h,{get when(){return"admin"===e.user.workspace_role},get fallback(){return e=Ni(),g(e,()=>n("settings.adminOnlyWorkspace")),e;var e},get children(){var e=Oi(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",F),g(i,()=>n("settings.workspaceName")),r.$$input=e=>L(e.target.value),g(o,()=>n("settings.saveWorkspaceSettings")),v(n=>{var i=vi,r=pi,a=_i,s=R();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=I()),e}}),o),g(a,()=>n("settings.orgSettingsHint")),s.$$click=()=>e.onOpenOrgSettings(),g(s,()=>n("settings.openOrgSettings"),l),v(e=>{var n=si,i=Ci,r=xi;return n!==e.e&&p(t,e.e=n),i!==e.t&&p(o,e.t=i),r!==e.a&&p(s,e.a=r),e},{e:void 0,t:void 0,a:void 0}),t}}),null),g(t,r(h,{get when(){return"sync"===o()},get children(){var e=Di(),t=e.firstChild,i=t.nextSibling;return g(t,()=>n("settings.gitSynchronization")),g(i,()=>n("settings.gitSyncHint")),g(e,r(h,{get when(){return u()},children:e=>{const t=e().last_sync;return i=Ai(),r=i.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,u=c.firstChild,h=u.nextSibling,g(o,()=>n("settings.urlColumn")),g(a,()=>n("settings.lastSyncColumn")),g(s,()=>n("common.actions")),g(l,()=>e().url),g(d,()=>t?new Date(t).toLocaleString():n("settings.never")),u.$$click=H,g(u,()=>n("common.push")),h.$$click=V,g(h,()=>n("common.remove")),v(e=>{var t=li,n=yi,r=R(),o=$i,a=R(),s=Si;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(c,e.t=n),r!==e.a&&(u.disabled=e.a=r),o!==e.o&&p(u,e.o=o),a!==e.i&&(h.disabled=e.i=a),s!==e.n&&p(h,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,a,s,l,d,c,u,h}}),null),g(e,r(h,{get when(){return!u()},get children(){var e=Mi(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,u=s.nextSibling;return g(t,()=>n("settings.addNewRemote")),i.addEventListener("submit",U),g(o,()=>n("settings.repositoryUrl")),a.$$input=e=>w(e.target.value),g(l,()=>n("settings.personalAccessToken")),d.$$input=e=>y(e.target.value),g(c,()=>n("settings.tokenHint")),g(u,()=>n("settings.addRemote")),v(t=>{var o=ki,l=vi,g=pi,h=n("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",v=pi,_=n("settings.tokenPlaceholder")||"ghp_...",f=fi,m=_i,w=R();return o!==t.e&&p(e,t.e=o),l!==t.t&&p(i,t.t=l),g!==t.a&&p(r,t.a=g),h!==t.o&&b(a,"placeholder",t.o=h),v!==t.i&&p(s,t.i=v),_!==t.n&&b(d,"placeholder",t.n=_),f!==t.s&&p(c,t.s=f),m!==t.h&&p(u,t.h=m),w!==t.r&&(u.disabled=t.r=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>a.value=m()),v(()=>d.value=k()),e}}),null),v(t=>{var n=si,r=fi;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(e=>{var n=ri,r=oi,a=ai,s=gi,d="members"===o()?hi:"",c="workspace"===o()?hi:"";return n!==e.e&&p(t,e.e=n),r!==e.t&&p(i,e.t=r),a!==e.a&&p(l,e.a=a),s!==e.o&&p(_,e.o=s),d!==e.i&&p(x,e.i=d),c!==e.n&&p(T,e.n=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),t})()}d(["click","input"]);const Fi="_settings_qni6l_1",Ui="_header_qni6l_7",Hi="_backButton_qni6l_20",Vi="_section_qni6l_36",Gi="_table_qni6l_45",Yi="_roleSelect_qni6l_63",Ki="_error_qni6l_69",Ji="_success_qni6l_77",Qi="_tabs_qni6l_85",Xi="_activeTab_qni6l_107",Zi="_settingsForm_qni6l_112",er="_formItem_qni6l_119",tr="_saveButton_qni6l_138",nr="_inviteSection_qni6l_157",ir="_inviteForm_qni6l_161",rr="_formGroup_qni6l_172";var or=k("<div>"),ar=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),sr=k("<h4>"),lr=k("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=member></option></select><button type=submit>"),dr=k("<section><h3>"),cr=k("<form><div><label></label><input type=text required></div><button type=submit>"),ur=k("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),gr=k("<p>"),hr=k("<select><option value=owner></option><option value=admin></option><option value=member>"),vr=k("<tr><td></td><td></td><td>");function pr(e){const{t:n}=ce(),[o,a]=t("members"),[s,l]=t([]),[d,c]=t([]),[u,_]=t(""),[m,w]=t("member"),[k,y]=t(""),[$,S]=t(""),[C,z]=t(!1),[I,L]=t(null),[T,E]=t(null),R=i(()=>ii(()=>e.token)),O=i(()=>R().org(e.orgId)),P=i(()=>{const t=e.user.organizations?.find(t=>t.organization_id===e.orgId);return t?.role}),M=i(()=>{const e=P();return e===rt||e===ot}),D=async()=>{const e=O();try{if(z(!0),L(null),"members"===o()&&M()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);l(t.users?.filter(e=>!!e)||[]),c(n.invitations?.filter(e=>!!e)||[])}if("settings"===o()){const t=await e.organizations.getOrganization();y(t.name),S(t.name)}}catch(t){L(`${n("errors.failedToLoad")}: ${t}`)}finally{z(!1)}};x(()=>{D()});const B=async e=>{e.preventDefault();const t=O();if(u())try{z(!0),await t.invitations.createOrgInvitation({email:u(),role:m()}),_(""),E(n("success.invitationSent")||"Invitation sent successfully"),D()}catch(i){L(`${n("errors.failedToInvite")}: ${i}`)}finally{z(!1)}},N=async e=>{e.preventDefault();const t=O();try{z(!0),L(null),E(null),k()!==$()&&k().trim()&&await t.organizations.updateOrganization({name:k().trim()}),S(k().trim()),E(n("success.orgSettingsSaved")||"Organization settings saved")}catch(i){L(`${n("errors.failedToSave")}: ${i}`)}finally{z(!1)}};return(()=>{var t=ur(),i=t.firstChild,l=i.firstChild;l.firstChild;var c=l.nextSibling,$=i.nextSibling,S=$.firstChild,x=S.nextSibling;return l.$$click=()=>e.onBack(),g(l,()=>n("common.back"),null),g(c,()=>n("settings.organizationSettings")),S.$$click=()=>a("members"),g(S,()=>n("settings.members")),x.$$click=()=>a("settings"),g(x,()=>n("settings.settings")),g(t,r(h,{get when(){return I()},get children(){var e=or();return g(e,I),v(()=>p(e,Ki)),e}}),null),g(t,r(h,{get when(){return T()},get children(){var e=or();return g(e,T),v(()=>p(e,Ji)),e}}),null),g(t,r(h,{get when(){return"members"===o()},get children(){var t=dr(),i=t.firstChild;return g(i,()=>n("settings.organizationMembers")),g(t,r(h,{get when(){return M()},get fallback(){return e=gr(),g(e,()=>n("settings.adminOnlyMembers")),e;var e},get children(){return[(S=ar(),x=S.firstChild,I=x.firstChild.firstChild,T=I.nextSibling,R=T.nextSibling,P=x.nextSibling,g(I,()=>n("settings.nameColumn")),g(T,()=>n("settings.emailColumn")),g(R,()=>n("settings.roleColumn")),g(P,r(f,{get each(){return s()},children:t=>{return i=vr(),o=i.firstChild,a=o.nextSibling,s=a.nextSibling,g(o,()=>t.name),g(a,()=>t.email),g(s,r(h,{get when(){return t.id!==e.user.id},get fallback(){return t.org_role},get children(){var e=hr(),i=e.firstChild,r=i.nextSibling,o=r.nextSibling;return e.addEventListener("change",e=>(async(e,t)=>{const i=O();try{z(!0),await i.users.updateOrgMemberRole({user_id:e,role:t}),E(n("success.roleUpdated")||"Role updated"),D()}catch(r){L(`${n("errors.failedToUpdateRole")}: ${r}`)}finally{z(!1)}})(t.id,e.target.value)),g(i,()=>n("settings.roleOwner")),g(r,()=>n("settings.roleAdmin")),g(o,()=>n("settings.roleMember")),v(()=>p(e,Yi)),v(()=>e.value=t.org_role),e}})),i;var i,o,a,s}})),v(()=>p(S,Gi)),S),(t=lr(),i=t.firstChild,o=i.firstChild,a=o.nextSibling,l=a.firstChild,c=l.nextSibling,k=c.firstChild,y=k.nextSibling,$=c.nextSibling,i.addEventListener("submit",B),g(o,()=>n("settings.inviteNewMember")),l.$$input=e=>_(e.target.value),c.addEventListener("change",e=>w(e.target.value)),g(k,()=>n("settings.roleAdmin")),g(y,()=>n("settings.roleMember")),g($,()=>n("common.invite")),g(t,r(h,{get when(){return d().length>0},get children(){return[(l=sr(),g(l,()=>n("settings.pendingInvitations")),l),(e=ar(),t=e.firstChild,i=t.firstChild.firstChild,o=i.nextSibling,a=o.nextSibling,s=t.nextSibling,g(i,()=>n("settings.emailColumn")),g(o,()=>n("settings.roleColumn")),g(a,()=>n("settings.sentColumn")),g(s,r(f,{get each(){return d()},children:e=>{return t=vr(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,g(n,()=>e.email),g(i,()=>e.role),g(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>p(e,Gi)),e)];var e,t,i,o,a,s,l}}),null),v(e=>{var r=nr,o=ir,s=rr,d=n("settings.emailPlaceholder")||"Email address",c=C();return r!==e.e&&p(t,e.e=r),o!==e.t&&p(i,e.t=o),s!==e.a&&p(a,e.a=s),d!==e.o&&b(l,"placeholder",e.o=d),c!==e.i&&($.disabled=e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>l.value=u()),v(()=>c.value=m()),t)];var t,i,o,a,l,c,k,y,$,S,x,I,T,R,P}}),null),v(()=>p(t,Vi)),t}}),null),g(t,r(h,{get when(){return"settings"===o()},get children(){var e=dr(),t=e.firstChild;return g(t,()=>n("settings.organizationPreferences")),g(e,r(h,{get when(){return M()},get fallback(){return e=gr(),g(e,()=>n("settings.adminOnlySettings")),e;var e},get children(){var e=cr(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",N),g(i,()=>n("settings.organizationName")),r.$$input=e=>y(e.target.value),g(o,()=>n("common.save")),v(n=>{var i=Zi,r=er,a=tr,s=C();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=k()),e}}),null),v(()=>p(e,Vi)),e}}),null),v(e=>{var n=Fi,r=Ui,a=Hi,s=Qi,d="members"===o()?Xi:"",c="settings"===o()?Xi:"";return n!==e.e&&p(t,e.e=n),r!==e.t&&p(i,e.t=r),a!==e.a&&p(l,e.a=a),s!==e.o&&p($,e.o=s),d!==e.i&&p(S,e.i=d),c!==e.n&&p(x,e.n=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),t})()}d(["click","input"]);const _r="_profile_179j3_1",fr="_header_179j3_7",mr="_backButton_179j3_20",br="_userInfoSection_179j3_36",wr="_avatarLarge_179j3_46",kr="_avatarImageLarge_179j3_58",yr="_initialsLarge_179j3_64",$r="_userDetails_179j3_70",Sr="_userName_179j3_74",Cr="_userEmail_179j3_80",xr="_userRole_179j3_85",zr="_section_179j3_95",Ir="_error_179j3_104",Lr="_success_179j3_112",Tr="_settingsForm_179j3_120",Er="_formItem_179j3_127",Rr="_checkboxLabel_179j3_146",Or="_saveButton_179j3_159",Pr="_orgList_179j3_178",Mr="_orgItem_179j3_184",Dr="_orgInfo_179j3_194",Br="_orgName_179j3_200",Nr="_orgNameLink_179j3_204",Wr="_orgRole_179j3_214",jr="_emptyState_179j3_223";var Ar=k("<div>"),qr=k("<span>"),Fr=k("<div><label><input type=checkbox>"),Ur=k("<div><header><button>‚Üê </button><h2></h2></header><section><div></div><div><h3></h3><p></p></div></section><section><h3></h3></section><section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),Hr=k("<img referrerpolicy=no-referrer>"),Vr=k("<p>"),Gr=k("<a>"),Yr=k("<div><div><span>");function Kr(e){const{t:n}=ce(),[o,a]=t("light"),[s,l]=t("en"),[d,c]=t(!0),[u,_]=t(!1),[w,k]=t(null),[y,$]=t(null),S=i(()=>ii(()=>e.token)),C=i(()=>{const t=e.user.workspace_id;return t?S().ws(t):null}),z=()=>{const t=e.user.name||e.user.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};x(()=>{a(e.user.settings?.theme||"light"),l(e.user.settings?.language||"en")});x(()=>{(async()=>{try{_(!0),k(null);const t=e.user.workspaces?.find(t=>t.workspace_id===e.user.workspace_id);t&&c(t.settings?.notifications??!0)}catch(t){k(`${n("errors.failedToLoad")}: ${t}`)}finally{_(!1)}})()});const I=async e=>{e.preventDefault();const t=C();try{_(!0),k(null),$(null);const e={theme:o(),language:s()},i=[S().auth.updateUserSettings({settings:e})];if(t){const e={notifications:d()};i.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(i),$(n("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(i){k(`${n("errors.failedToSave")}: ${i}`)}finally{_(!1)}};return(()=>{var t=Ur(),i=t.firstChild,_=i.firstChild;_.firstChild;var k=_.nextSibling,$=i.nextSibling,S=$.firstChild,C=S.nextSibling,x=C.firstChild,L=x.nextSibling,T=$.nextSibling,E=T.firstChild,R=T.nextSibling,O=R.firstChild,P=O.nextSibling,M=P.firstChild,D=M.firstChild,B=D.nextSibling,N=B.firstChild,W=N.nextSibling,j=W.nextSibling,A=M.nextSibling,q=A.firstChild,F=q.nextSibling,U=F.firstChild,H=U.nextSibling,V=H.nextSibling,G=V.nextSibling,Y=A.nextSibling;return _.$$click=()=>e.onBack(),g(_,()=>n("common.back"),null),g(k,()=>n("profile.title")),g(t,r(h,{get when(){return w()},get children(){var e=Ar();return g(e,w),v(()=>p(e,Ir)),e}}),$),g(t,r(h,{get when(){return y()},get children(){var e=Ar();return g(e,y),v(()=>p(e,Lr)),e}}),$),g(S,r(h,{get when(){return(()=>{const t=e.user.oauth_identities;if(!t)return null;for(const e of t)if(e.avatar_url)return e.avatar_url;return null})()},get fallback(){return e=qr(),g(e,z),v(()=>p(e,yr)),e;var e},children:t=>{return n=Hr(),v(i=>{var r=t(),o=e.user.name||"User",a=kr;return r!==i.e&&b(n,"src",i.e=r),o!==i.t&&b(n,"alt",i.t=o),a!==i.a&&p(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),g(x,()=>e.user.name),g(L,()=>e.user.email),g(C,r(h,{get when(){return e.user.workspace_role},get children(){var t=qr();return g(t,()=>e.user.workspace_role),v(()=>p(t,xr)),t}}),null),g(E,()=>n("profile.myOrganizations")),g(T,r(h,{get when(){return m(()=>!!e.user.organizations)()&&e.user.organizations.length>0},get fallback(){return e=Vr(),g(e,()=>n("profile.noOrganizations")),v(()=>p(e,jr)),e;var e},get children(){var t=Ar();return g(t,r(f,{get each(){return e.user.organizations},children:t=>{const n=(t.organization_name||"organization").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");const i=`/o/${t.organization_id}+${n}/settings`,o=t.organization_name||t.organization_id;return a=Yr(),s=a.firstChild,l=s.firstChild,g(s,r(h,{get when(){return t.role===ot||t.role===rt},get fallback(){return e=qr(),g(e,o),v(()=>p(e,Br)),e;var e},get children(){var n=Gr();return n.$$click=n=>{n.preventDefault(),e.onOrgSettings(t)},b(n,"href",i),g(n,o),v(()=>p(n,Nr)),n}}),l),g(l,()=>t.role),v(e=>{var t=Mr,n=Dr,i=Wr;return t!==e.e&&p(a,e.e=t),n!==e.t&&p(s,e.t=n),i!==e.a&&p(l,e.a=i),e},{e:void 0,t:void 0,a:void 0}),a;var a,s,l}})),v(()=>p(t,Pr)),t}}),null),g(O,()=>n("settings.personalSettings")),P.addEventListener("submit",I),g(D,()=>n("settings.theme")),B.addEventListener("change",e=>a(e.target.value)),g(N,()=>n("settings.themeLight")),g(W,()=>n("settings.themeDark")),g(j,()=>n("settings.themeSystem")),g(q,()=>n("settings.language")),F.addEventListener("change",e=>l(e.target.value)),g(U,()=>n("settings.languageEn")),g(H,()=>n("settings.languageFr")),g(V,()=>n("settings.languageDe")),g(G,()=>n("settings.languageEs")),g(P,r(h,{get when(){return e.user.workspace_id},get children(){var e=Fr(),t=e.firstChild,i=t.firstChild;return i.addEventListener("change",e=>c(e.currentTarget.checked)),g(t,()=>n("settings.enableNotifications"),null),v(n=>{var i=Er,r=Rr;return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),n},{e:void 0,t:void 0}),v(()=>i.checked=d()),e}}),Y),g(Y,()=>n("settings.saveChanges")),v(e=>{var n=_r,r=fr,o=mr,a=br,s=wr,l=$r,d=Sr,c=Cr,g=zr,h=zr,v=Tr,f=Er,m=Er,b=Or,w=u();return n!==e.e&&p(t,e.e=n),r!==e.t&&p(i,e.t=r),o!==e.a&&p(_,e.a=o),a!==e.o&&p($,e.o=a),s!==e.i&&p(S,e.i=s),l!==e.n&&p(C,e.n=l),d!==e.s&&p(x,e.s=d),c!==e.h&&p(L,e.h=c),g!==e.r&&p(T,e.r=g),h!==e.d&&p(R,e.d=h),v!==e.l&&p(P,e.l=v),f!==e.u&&p(M,e.u=f),m!==e.c&&p(A,e.c=m),b!==e.w&&p(Y,e.w=b),w!==e.m&&(Y.disabled=e.m=w),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),v(()=>B.value=o()),v(()=>F.value=s()),t})()}d(["click"]);const Jr="_authContainer_1ksl8_1",Qr="_authForm_1ksl8_9",Xr="_formGroup_1ksl8_24",Zr="_error_1ksl8_62",eo="_toggle_1ksl8_72",to="_authFooter_1ksl8_87",no="_oauthSection_1ksl8_104",io="_divider_1ksl8_108",ro="_oauthButtons_1ksl8_127",oo="_oauthIcon_1ksl8_133",ao="_googleButton_1ksl8_140",so="_microsoftButton_1ksl8_141",lo="_githubButton_1ksl8_142",co="_oauthButton_1ksl8_127";var uo=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),go=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),ho=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),vo=k("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),po=k("<div><div><span></span></div><div>"),_o=k("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),fo=k("<div>"),mo=k("<a>");const bo={[at]:function(){return e=uo(),v(()=>b(e,"class",oo)),e;var e},[st]:function(){return e=go(),v(()=>b(e,"class",oo)),e;var e},[lt]:function(){return e=ho(),v(()=>b(e,"class",oo)),e;var e}},wo={[at]:{style:ao,labelKey:"auth.loginWithGoogle"},[st]:{style:so,labelKey:"auth.loginWithMicrosoft"},[lt]:{style:lo,labelKey:"auth.loginWithGitHub"}};const ko=Kn((e,t)=>fetch(e,t));function yo(e){const{t:i}=ce(),[o]=n(()=>ko.auth.listProviders().then(e=>e.providers)),[a,s]=t(!1),[l,d]=t(""),[c,u]=t(""),[_,w]=t(""),[k,y]=t(null),[$,S]=t(!1),C=async t=>{t.preventDefault(),y(null),S(!0);try{const t=a()?await ko.auth.register({email:l(),password:c(),name:_()}):await ko.auth.login({email:l(),password:c()});t.token&&t.user?e.onLogin(t.token,t.user):y("Invalid response from server")}catch(n){y(n instanceof Vn?n.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{S(!1)}};return E=_o(),R=E.firstChild,O=R.firstChild,P=O.nextSibling,M=P.firstChild,D=M.nextSibling,B=P.nextSibling,N=B.firstChild,W=N.nextSibling,j=B.nextSibling,A=j.nextSibling,q=A.firstChild,F=A.nextSibling,U=F.firstChild,R.addEventListener("submit",C),g(O,(x=m(()=>!!a()),()=>x()?i("auth.createAccount"):i("auth.loginTitle"))),g(R,(z=m(()=>!!k()),()=>{return z()&&(e=fo(),g(e,k),v(()=>p(e,Zr)),e);var e}),P),g(R,r(h,{get when(){return a()},get children(){var e=vo(),t=e.firstChild,n=t.nextSibling;return g(t,()=>i("auth.name")),n.$$input=e=>w(e.target.value),v(()=>p(e,Xr)),v(()=>n.value=_()),e}}),P),g(M,()=>i("auth.email")),D.$$input=e=>d(e.target.value),g(N,()=>i("auth.password")),W.$$input=e=>u(e.target.value),g(j,(I=m(()=>!!$()),()=>I()?i("auth.pleaseWait"):m(()=>!!a())()?i("auth.register"):i("auth.login"))),g(R,r(h,{get when(){return(o()??[]).length>0},get children(){var e=po(),t=e.firstChild,n=t.firstChild,a=t.nextSibling;return g(n,()=>i("auth.or")),g(a,r(f,{get each(){return o()},children:e=>{const t=function(e){const t=wo[e];return t?{style:t.style,label:t.labelKey}:{style:co,label:e.charAt(0).toUpperCase()+e.slice(1)}}(e),n=e in wo,o=bo[e];return a=mo(),b(a,"href",`/api/auth/oauth/${e}`),g(a,o&&r(o,{}),null),g(a,()=>n?i(t.label):t.label,null),v(()=>p(a,t.style)),a;var a}})),v(n=>{var i=no,r=io,o=ro;return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),o!==n.a&&p(a,n.a=o),n},{e:void 0,t:void 0,a:void 0}),e}}),A),g(A,(L=m(()=>!!a()),()=>L()?i("auth.alreadyHaveAccount"):i("auth.dontHaveAccount")),q),q.$$click=()=>s(!a()),g(q,(T=m(()=>!!a()),()=>T()?i("auth.login"):i("auth.register"))),U.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},g(U,()=>i("app.privacyPolicy")),v(e=>{var t=Jr,n=Qr,i=Xr,r=Xr,o=a()?"new-password":"current-password",s=$(),l=eo,d=to;return t!==e.e&&p(E,e.e=t),n!==e.t&&p(R,e.t=n),i!==e.a&&p(P,e.a=i),r!==e.o&&p(B,e.o=r),o!==e.i&&b(W,"autocomplete",e.i=o),s!==e.n&&(j.disabled=e.n=s),l!==e.s&&p(A,e.s=l),d!==e.h&&p(F,e.h=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),v(()=>D.value=l()),v(()=>W.value=c()),E;var x,z,I,L,T,E,R,O,P,M,D,B,N,W,j,A,q,F,U}d(["input","click"]);const $o="_container_mfa6v_1",So="_content_mfa6v_9",Co="_header_mfa6v_19",xo="_section_mfa6v_36",zo="_footer_mfa6v_49",Io="_backButton_mfa6v_57";var Lo=k("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and tables are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function To(){return e=Lo(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(l=s.firstChild).$$click=()=>window.history.back(),v(d=>{var c=$o,u=So,g=Co,h=xo,v=xo,_=xo,f=xo,m=zo,b=Io;return c!==d.e&&p(e,d.e=c),u!==d.t&&p(t,d.t=u),g!==d.a&&p(n,d.a=g),h!==d.o&&p(i,d.o=h),v!==d.i&&p(r,d.i=v),_!==d.n&&p(o,d.n=_),f!==d.s&&p(a,d.s=f),m!==d.h&&p(s,d.h=m),b!==d.r&&p(l,d.r=b),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,n,i,r,o,a,s,l}d(["click"]);const Eo="_container_mfa6v_1",Ro="_content_mfa6v_9",Oo="_header_mfa6v_19",Po="_section_mfa6v_36",Mo="_footer_mfa6v_49",Do="_backButton_mfa6v_57";var Bo=k("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, data, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the ‚ÄúContent‚Äù) and the trademarks, service marks, and logos contained therein (the ‚ÄúMarks‚Äù) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function No(){return e=Bo(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,(d=l.firstChild).$$click=()=>window.history.back(),v(c=>{var u=Eo,g=Ro,h=Oo,v=Po,_=Po,f=Po,m=Po,b=Po,w=Mo,k=Do;return u!==c.e&&p(e,c.e=u),g!==c.t&&p(t,c.t=g),h!==c.a&&p(n,c.a=h),v!==c.o&&p(i,c.o=v),_!==c.i&&p(r,c.i=_),f!==c.n&&p(o,c.n=f),m!==c.s&&p(a,c.s=m),b!==c.h&&p(s,c.h=b),w!==c.r&&p(l,c.r=w),k!==c.d&&p(d,c.d=k),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,n,i,r,o,a,s,l,d}d(["click"]);const Wo="_banner_172qk_1",jo="_content_172qk_23",Ao="_title_172qk_27",qo="_message_172qk_32",Fo="_actions_172qk_37",Uo="_installButton_172qk_42",Ho="_dismissButton_172qk_56";var Vo=k("<div><div><div></div><div></div></div><div><button></button><button>");const Go="mddb_pwa_dismissed";function Yo(){const{t:e}=ce(),[n,i]=t(null),[o,a]=t(!1);u(()=>{if(function(){const e=localStorage.getItem(Go);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),i(e),a(!0)},t=()=>{a(!1),i(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),C(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=n();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),i(null)},l=()=>{localStorage.setItem(Go,(new Date).toISOString()),a(!1)};return r(h,{get when(){return m(()=>!!o())()&&n()},get children(){var t=Vo(),n=t.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,a=o.firstChild,d=a.nextSibling;return g(i,()=>e("pwa.installTitle")),g(r,()=>e("pwa.installMessage")),a.$$click=l,g(a,()=>e("pwa.dismissButton")),d.$$click=s,g(d,()=>e("pwa.installButton")),v(e=>{var s=Wo,l=jo,c=Ao,u=qo,g=Fo,h=Ho,v=Uo;return s!==e.e&&p(t,e.e=s),l!==e.t&&p(n,e.t=l),c!==e.a&&p(i,e.a=c),u!==e.o&&p(r,e.o=u),g!==e.i&&p(o,e.i=g),h!==e.n&&p(a,e.n=h),v!==e.s&&p(d,e.s=v),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}})}d(["click"]);const Ko="_overlay_v0iwf_1",Jo="_modal_v0iwf_11",Qo="_header_v0iwf_28",Xo="_formGroup_v0iwf_53",Zo="_primaryButton_v0iwf_76",ea="_secondaryButton_v0iwf_99",ta="_actions_v0iwf_113",na="_error_v0iwf_127";var ia=k("<button type=button>"),ra=k("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),oa=k("<div>");function aa(e){const{t:n}=ce(),[i,o]=t(""),[a,s]=t(!1),[l,d]=t(null),c=async t=>{if(t.preventDefault(),i().trim())try{s(!0),d(null),await e.onCreate({name:i().trim()}),e.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=t=>{e.isFirstOrg||t.target!==t.currentTarget||e.onClose()};return $=ra(),S=$.firstChild,C=S.firstChild,x=C.firstChild,z=x.nextSibling,I=C.nextSibling,L=I.firstChild,T=L.firstChild,E=T.nextSibling,R=L.nextSibling,O=R.firstChild,$.$$click=u,g(x,(_=m(()=>!!e.isFirstOrg),()=>_()?n("createOrg.firstOrgTitle"):n("createOrg.title"))),g(z,(f=m(()=>!!e.isFirstOrg),()=>f()?n("createOrg.firstOrgDescription"):n("createOrg.description"))),g(S,(w=m(()=>!!l()),()=>{return w()&&(e=oa(),g(e,l),v(()=>p(e,na)),e);var e}),I),I.addEventListener("submit",c),g(T,()=>n("createOrg.nameLabel")),E.$$input=e=>o(e.target.value),g(R,r(h,{get when(){return!e.isFirstOrg},get children(){var t=ia();return y(t,"click",e.onClose),g(t,()=>n("common.cancel")),v(()=>p(t,ea)),t}}),O),g(O,(k=m(()=>!!a()),()=>k()?n("common.creating"):n("createOrg.create"))),v(t=>{var r=Ko,o=Jo,s=Qo,l=Xo,d=n("createOrg.namePlaceholder")||"",c=ta,u=Zo,g=!i().trim()||a(),h=e.isFirstOrg?{flex:1}:void 0;return r!==t.e&&p($,t.e=r),o!==t.t&&p(S,t.t=o),s!==t.a&&p(C,t.a=s),l!==t.o&&p(L,t.o=l),d!==t.i&&b(E,"placeholder",t.i=d),c!==t.n&&p(R,t.n=c),u!==t.s&&p(O,t.s=u),g!==t.h&&(O.disabled=t.h=g),t.r=ee(O,h,t.r),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>E.value=i()),$;var _,f,w,k,$,S,C,x,z,I,L,T,E,R,O}d(["click","input"]);var sa=k("<button type=button>"),la=k("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),da=k("<div>");function ca(e){const{t:n}=ce(),[i,o]=t(""),[a,s]=t(!1),[l,d]=t(null),c=async t=>{if(t.preventDefault(),i().trim())try{s(!0),d(null),await e.onCreate({name:i().trim()}),e.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=t=>{e.isFirstWorkspace||t.target!==t.currentTarget||e.onClose()};return $=la(),S=$.firstChild,C=S.firstChild,x=C.firstChild,z=x.nextSibling,I=C.nextSibling,L=I.firstChild,T=L.firstChild,E=T.nextSibling,R=L.nextSibling,O=R.firstChild,$.$$click=u,g(x,(_=m(()=>!!e.isFirstWorkspace),()=>_()?n("createWorkspace.firstWorkspaceTitle"):n("createWorkspace.title"))),g(z,(f=m(()=>!!e.isFirstWorkspace),()=>f()?n("createWorkspace.firstWorkspaceDescription"):n("createWorkspace.description"))),g(S,(w=m(()=>!!l()),()=>{return w()&&(e=da(),g(e,l),v(()=>p(e,na)),e);var e}),I),I.addEventListener("submit",c),g(T,()=>n("createWorkspace.nameLabel")),E.$$input=e=>o(e.target.value),g(R,r(h,{get when(){return!e.isFirstWorkspace},get children(){var t=sa();return y(t,"click",e.onClose),g(t,()=>n("common.cancel")),v(()=>p(t,ea)),t}}),O),g(O,(k=m(()=>!!a()),()=>k()?n("common.creating"):n("createWorkspace.create"))),v(t=>{var r=Ko,o=Jo,s=Qo,l=Xo,d=n("createWorkspace.namePlaceholder")||"",c=ta,u=Zo,g=!i().trim()||a(),h=e.isFirstWorkspace?{flex:1}:void 0;return r!==t.e&&p($,t.e=r),o!==t.t&&p(S,t.t=o),s!==t.a&&p(C,t.a=s),l!==t.o&&p(L,t.o=l),d!==t.i&&b(E,"placeholder",t.i=d),c!==t.n&&p(R,t.n=c),u!==t.s&&p(O,t.s=u),g!==t.h&&(O.disabled=t.h=g),t.r=ee(O,h,t.r),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>E.value=i()),$;var _,f,w,k,$,S,C,x,z,I,L,T,E,R,O}d(["click","input"]);const ua="_userMenu_o60yu_1",ga="_avatarButton_o60yu_5",ha="_avatarImage_o60yu_24",va="_initials_o60yu_30",pa="_dropdown_o60yu_37",_a="_userInfo_o60yu_50",fa="_userName_o60yu_57",ma="_userEmail_o60yu_63",ba="_userRole_o60yu_68",wa="_divider_o60yu_78",ka="_menuItem_o60yu_83";var ya=k("<span>"),$a=k("<div><div><span></span><span></span></div><div></div><button></button><button>"),Sa=k("<div><button>"),Ca=k("<img referrerpolicy=no-referrer>");function xa(e){const{t:n}=ce(),[i,o]=t(!1);let a;const s=()=>{const t=e.user.name||e.user.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},l=e=>{a&&!a.contains(e.target)&&o(!1)};u(()=>{document.addEventListener("mousedown",l),C(()=>{document.removeEventListener("mousedown",l)})});const d=()=>{o(!1),e.onLogout()},c=()=>{o(!1),e.onProfile()};return _=Sa(),f=_.firstChild,"function"==typeof a?M(a,_):a=_,f.$$click=()=>o(!i()),g(f,r(h,{get when(){return(()=>{const t=e.user.oauth_identities;if(!t)return null;for(const e of t)if(e.avatar_url)return e.avatar_url;return null})()},get fallback(){return e=ya(),g(e,s),v(()=>p(e,va)),e;var e},children:t=>{return n=Ca(),v(i=>{var r=t(),o=e.user.name||"User",a=ha;return r!==i.e&&b(n,"src",i.e=r),o!==i.t&&b(n,"alt",i.t=o),a!==i.a&&p(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),g(_,r(h,{get when(){return i()},get children(){var t=$a(),i=t.firstChild,o=i.firstChild,a=o.nextSibling,s=i.nextSibling,l=s.nextSibling,u=l.nextSibling;return g(o,()=>e.user.name),g(a,()=>e.user.email),g(i,r(h,{get when(){return e.user.workspace_role},get children(){var t=ya();return g(t,()=>e.user.workspace_role),v(()=>p(t,ba)),t}}),null),l.$$click=c,g(l,()=>n("userMenu.profile")),u.$$click=d,g(u,()=>n("userMenu.logout")),v(e=>{var n=pa,r=_a,d=fa,c=ma,g=wa,h=ka,v=ka;return n!==e.e&&p(t,e.e=n),r!==e.t&&p(i,e.t=r),d!==e.a&&p(o,e.a=d),c!==e.o&&p(a,e.o=c),g!==e.i&&p(s,e.i=g),h!==e.n&&p(l,e.n=h),v!==e.s&&p(u,e.s=v),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}}),null),v(t=>{var n=ua,i=ga,r=e.user.name||e.user.email;return n!==t.e&&p(_,t.e=n),i!==t.t&&p(f,t.t=i),r!==t.a&&b(f,"title",t.a=r),t},{e:void 0,t:void 0,a:void 0}),_;var _,f}d(["click"]);const za="_wsMenu_9glbe_1",Ia="_wsButton_9glbe_5",La="_wsName_9glbe_23",Ta="_chevron_9glbe_31",Ea="_dropdown_9glbe_36",Ra="_wsList_9glbe_49",Oa="_orgHeader_9glbe_54",Pa="_wsItem_9glbe_65",Ma="_active_9glbe_84",Da="_wsItemName_9glbe_88",Ba="_checkmark_9glbe_94",Na="_divider_9glbe_99",Wa="_menuItem_9glbe_104",ja="_icon_9glbe_123",Aa="_plusIcon_9glbe_127";var qa=k("<div><div></div><div></div><button><span>‚öô</span></button><button><span>+"),Fa=k("<div><button><span></span><span>"),Ua=k("<div>"),Ha=k("<span>‚úì"),Va=k("<button><span>");function Ga(e){const{t:n}=ce(),[o,a]=t(!1);let s;const l=i(()=>{const t=new Map;for(const n of e.organizations)t.set(n.organization_id,{orgId:n.organization_id,orgName:n.organization_name||n.organization_id,workspaces:[]});for(const n of e.workspaces){const e=t.get(n.organization_id);e&&e.workspaces.push(n)}return Array.from(t.values()).filter(e=>e.workspaces.length>0)}),d=()=>{const t=e.workspaces.find(t=>t.workspace_id===e.currentWsId);return t?.workspace_name||n("app.workspace")},c=e=>{s&&!s.contains(e.target)&&a(!1)};u(()=>{document.addEventListener("mousedown",c),C(()=>{document.removeEventListener("mousedown",c)})});const _=()=>{a(!1),e.onOpenSettings()},m=()=>{a(!1),e.onCreateWorkspace()},w=i(()=>l().length>1);return k=Fa(),y=k.firstChild,$=y.firstChild,S=$.nextSibling,"function"==typeof s?M(s,k):s=k,y.$$click=()=>a(!o()),g($,d),g(S,()=>o()?"‚ñ≤":"‚ñº"),g(k,r(h,{get when(){return o()},get children(){var t=qa(),i=t.firstChild,o=i.nextSibling,s=o.nextSibling,d=s.firstChild,c=s.nextSibling,u=c.firstChild;return g(i,r(f,{get each(){return l()},children:t=>[r(h,{get when(){return w()},get children(){var e=Ua();return g(e,()=>t.orgName),v(()=>p(e,Oa)),e}}),r(f,{get each(){return t.workspaces},children:t=>{return n=Va(),i=n.firstChild,n.$$click=()=>{return n=t.workspace_id,a(!1),void(n!==e.currentWsId&&e.onSwitchWorkspace(n));var n},g(i,()=>t.workspace_name||t.workspace_id),g(n,r(h,{get when(){return t.workspace_id===e.currentWsId},get children(){var e=Ha();return v(()=>p(e,Ba)),e}}),null),v(r=>{var o=`${Pa} ${t.workspace_id===e.currentWsId?Ma:""}`,a=Da;return o!==r.e&&p(n,r.e=o),a!==r.t&&p(i,r.t=a),r},{e:void 0,t:void 0}),n;var n,i}})]})),s.$$click=_,g(s,()=>n("app.settings"),null),c.$$click=m,g(c,()=>n("createWorkspace.title"),null),v(e=>{var n=Ea,r=Ra,a=Na,l=Wa,g=ja,h=Wa,v=Aa;return n!==e.e&&p(t,e.e=n),r!==e.t&&p(i,e.t=r),a!==e.a&&p(o,e.a=a),l!==e.o&&p(s,e.o=l),g!==e.i&&p(d,e.i=g),h!==e.n&&p(c,e.n=h),v!==e.s&&p(u,e.s=v),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}}),null),v(e=>{var t=za,n=Ia,i=d(),r=La,o=Ta;return t!==e.e&&p(k,e.e=t),n!==e.t&&p(y,e.t=n),i!==e.a&&b(y,"title",e.a=i),r!==e.o&&p($,e.o=r),o!==e.i&&p(S,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),k;var k,y,$,S}d(["click"]);const Ya="_app_szlfa_13",Ka="_header_szlfa_19",Ja="_headerLeft_szlfa_29",Qa="_userInfo_szlfa_37",Xa="_container_szlfa_44",Za="_main_szlfa_50",es="_error_szlfa_58",ts="_editor_szlfa_66",ns="_editorHeader_szlfa_74",is="_editorStatus_szlfa_83",rs="_unsavedIndicator_szlfa_91",os="_savingIndicator_szlfa_96",as="_savedIndicator_szlfa_101",ss="_titleInput_szlfa_111",ls="_nodeContent_szlfa_121",ds="_tableView_szlfa_128",cs="_tableHeader_szlfa_136",us="_viewToggle_szlfa_143",gs="_active_szlfa_159",hs="_breadcrumbs_szlfa_164",vs="_breadcrumbItem_szlfa_175",ps="_breadcrumbSeparator_szlfa_186",_s="_historyPanel_szlfa_191",fs="_historyList_szlfa_205",ms="_historyItem_szlfa_212",bs="_historyMeta_szlfa_225",ws="_historyDate_szlfa_233",ks="_historyHash_szlfa_237",ys="_historyMessage_szlfa_244",$s="_hamburger_szlfa_252",Ss="_mobileBackdrop_szlfa_263";var Cs=k("<nav>"),xs=k("<div>"),zs=k("<span>‚óè "),Is=k("<span>‚ü≥ "),Ls=k("<span>‚úì "),Ts=k("<li>"),Es=k("<div><h3></h3><ul>"),Rs=k("<div><div><h3></h3><div><button></button><button></button><button></button><button>"),Os=k("<div><div><input type=text><div></div></div><div>"),Ps=k("<div><main>"),Ms=k('<div><header><div><button aria-label="Toggle menu">‚ò∞</button></div><div>'),Ds=k("<span>/"),Bs=k("<span>"),Ns=k("<li><div><span></span><span></span></div><div>");const Ws=e=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");function js(){const{t:e,locale:n,setLocale:o}=ce(),[a,s]=t(null),[l,d]=t(localStorage.getItem("mddb_token")),[_,k]=c([]),[y,$]=t([]),[S,z]=t(null),[I,L]=t(null),[T,E]=t(!1),[R,O]=t(!1),[P,M]=t(null),[D,B]=t(!1),[N,W]=t(!1),[j,A]=t(!1),[q,F]=t("table"),[U,H]=t(""),[V,G]=t(""),[Y,K]=t(!1),[J,Q]=t(null),[X,Z]=t(!1),[ee,re]=t("idle"),[oe,ae]=t(null),[se,le]=t(!1),[de,ue]=t(!1),[ge,he]=t(!1),[ve,pe]=t(!1),[_e,fe]=t(!1),[me,be]=t(!1),[we,ke]=t([]),[ye,$e]=t([]),[Se,Ce]=t(!1),xe=50,ze=async()=>{const e=l();if(e)try{const t=ii(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),d(null),s(null),window.history.pushState(null,"","/")},Ie=i(()=>ii(()=>l(),ze)),Le=i(()=>{const e=a()?.workspace_id;return e?Ie().ws(e):null}),Te=(e,t)=>{localStorage.setItem("mddb_token",e),d(e),s(t)};async function Ee(t,n=!0){try{K(!0);const e=await Ie().auth.switchWorkspace({ws_id:t});if(!e.user)throw new Error("No user data returned");if(Te(e.token,e.user),z(null),L(null),H(""),G(""),$([]),$e([]),Z(!1),re("idle"),Fe=null,je=null,n){const t=e.user.workspace_id,n=e.user.workspace_name;if(t){const e=Ws(n||"workspace");window.history.pushState(null,"",`/w/${t}+${e}/`)}else window.history.pushState(null,"","/")}await Ae()}catch(i){Q(i instanceof Vn?`${e("errors.failedToSwitch")}: ${i.message}`:`${e("errors.failedToSwitch")}: ${i}`)}finally{K(!1)}}async function Re(e){await Ie().organizations.createOrganization({name:e.name});const t=await Ie().auth.getMe();s(t)}async function Oe(e){const t=a();if(!t||!t.organization_id)throw new Error("No organization selected");const n=await Ie().org(t.organization_id).workspaces.createWorkspace({name:e.name}),i=await Ie().auth.getMe();s(i),await Ee(n.id)}function Pe(){const e=a();if(!e?.name)return"";return e.name.split(" ")[0]||e.name}const Me=function(e,t){let n=null,i=null;const r=(...r)=>{i=r,null!==n&&clearTimeout(n),n=setTimeout(()=>{n=null,i=null,e(...r)},t)};return r.flush=()=>{if(null!==n&&null!==i){clearTimeout(n);const t=i;n=null,i=null,e(...t)}},r.cancel=()=>{null!==n&&(clearTimeout(n),n=null,i=null)},r.pending=()=>null!==n,r}(async()=>{const t=S(),n=Le();if(t&&X()&&n)try{re("saving"),await n.nodes.page.updatePage(t,{title:U(),content:V()}),Z(!1),re("saved");const e=Ws(U()),i=a()?.workspace_id,r=a()?.workspace_name;if(i){const n=window.location.pathname,o=`/w/${i}+${Ws(r||"workspace")}/${t}${e?"+"+e:""}`;n!==o&&window.history.replaceState(null,"",o)}setTimeout(()=>{"saved"===ee()&&re("idle")},2e3)}catch(i){Q(`${e("errors.autoSaveFailed")}: ${i}`),re("idle")}},2e3);x(()=>{const e=a(),t=e?.settings?.language;t&&["en","fr","de","es"].includes(t)&&t!==n()&&(o(t),localStorage.setItem("mddb_locale",t))}),x(()=>{const t=a();if(!t||ve()||_e())return;const n=t.organizations||[];if(0===n.length)return fe(!0),void async function(){try{K(!0);const t=Pe(),n=t?e("onboarding.defaultOrgName",{name:t}):e("onboarding.defaultOrgNameFallback");await Re({name:n||"My Organization"})}catch(t){Q(`${e("errors.failedToCreate")}: ${t}`)}finally{K(!1)}}().finally(()=>fe(!1));const i=n[0];if(i){if(0===(t.workspaces?.filter(e=>e.organization_id===i.organization_id)||[]).length&&(i.role===ot||i.role===rt))return fe(!0),void async function(){try{K(!0);const t=Pe(),n=t?e("onboarding.defaultWorkspaceName",{name:t}):e("onboarding.defaultWorkspaceNameFallback");await Oe({name:n||"Main"})}catch(t){Q(`${e("errors.failedToCreate")}: ${t}`)}finally{K(!1)}}().finally(()=>fe(!1))}const r=t.workspace_id,o=t.workspace_name;if(r&&(pe(!0),"/"===window.location.pathname)){const e=Ws(o||"workspace");window.history.replaceState(null,"",`/w/${r}+${e}/`)}}),u(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),d(e),window.history.replaceState({},document.title,window.location.pathname))});let De=!1;x(()=>{const e=l(),t=a();!e||t||De||(De=!0,(async()=>{try{const e=await Ie().auth.getMe();s(e)}catch(e){console.error("Failed to load user",e),e instanceof Vn&&401===e.status&&(localStorage.removeItem("mddb_token"),d(null))}finally{De=!1}})())});const Be=async()=>{const t=window.location.pathname;if("/privacy"===t)return W(!0),A(!1),void B(!1);if("/terms"===t)return A(!0),W(!1),void B(!1);if("/profile"===t)return B(!0),E(!1),W(!1),void A(!1);B(!1),W(!1),A(!1);const n=t.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);if(n&&n[1]){const t=n[1];if(a()&&a()?.workspace_id!==t)try{const n=a(),i=n?.workspaces?.some(e=>e.workspace_id===t);if(!i){Q(e("errors.noAccessToWs")||"You do not have access to this workspace");const t=n?.workspace_id,i=n?.workspace_name;if(t){const e=Ws(i||"workspace");setTimeout(()=>window.history.replaceState(null,"",`/w/${t}+${e}/`),2e3)}return}await Ee(t,!1)}catch{return}return E(!0),void O(!1)}E(!1);const i=t.match(/^\/o\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);if(i&&i[1]){const t=i[1],n=a(),r=n?.organizations?.some(e=>e.organization_id===t);if(!r){Q(e("errors.noAccessToOrg")||"You do not have access to this organization");const t=n?.workspace_id,i=n?.workspace_name;if(t){const e=Ws(i||"workspace");setTimeout(()=>window.history.replaceState(null,"",`/w/${t}+${e}/`),2e3)}return}return O(!0),void M(t)}O(!1),M(null);const r=t.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/([a-zA-Z0-9_-]+)(?:\+.*)?$/);if(r&&r[1]&&r[2]){const e=r[2];return void(e!==S()&&Ue(e,!1))}const o=t.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/);o&&o[1]&&_.length>0&&_[0]?Ue(_[0].id,!1):(z(null),L(null),H(""),G(""))};u(()=>{window.addEventListener("popstate",Be),C(()=>window.removeEventListener("popstate",Be))}),x(()=>{a()?(Ae(),Be()):Be()});let We=!1,je=null;async function Ae(t=!1){const n=Le(),i=a()?.workspace_id;if(n&&!We&&!(!t&&i&&je===i&&_.length>0))try{We=!0,K(!0);const t=await n.nodes.listNodeChildren("0");let r=t?.nodes||[];if(0===r.length&&ve()){const t=await async function(){const t=Le(),n=a();if(!t||!n)return null;if("admin"!==n.workspace_role&&"editor"!==n.workspace_role)return null;try{const n=await t.nodes.page.createPage("0",{title:e("welcome.welcomePageTitle"),content:e("welcome.welcomePageContent")});return n?.id?String(n.id):null}catch(i){return Q(`${e("errors.failedToCreate")}: ${i}`),null}}();if(t){const e=await n.nodes.listNodeChildren("0");r=e?.nodes||[]}}k(ie(r)),je=i||null,Q(null);const o=window.location.pathname;o.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/)&&!S()&&r.length>0&&r[0]&&Ue(r[0].id,!1)}catch(r){Q(`${e("errors.failedToLoad")}: ${r}`)}finally{We=!1,K(!1)}}let qe=null,Fe=null;async function Ue(t,n=!0){const i=Le();if(i&&qe!==t&&Fe!==t){Me.flush();try{qe=t,K(!0),be(!1);const e=await i.nodes.getNode(t);z(e.id),L(e),Fe=e.id,H(e.title),G(e.content||""),Z(!1),re("idle"),Q(null);const r=Ws(e.title),o=a()?.workspace_id,s=a()?.workspace_name;if(o){const t=`/w/${o}+${Ws(s||"workspace")}/${e.id}${r?"+"+r:""}`;n?window.location.pathname!==t&&window.history.pushState(null,"",t):window.location.pathname!==t&&window.history.replaceState(null,"",t)}if(e.has_table){const e=(await i.nodes.table.records.listRecords(t,{Offset:0,Limit:xe})).records||[];$(e),Ce(e.length===xe)}else $([]),Ce(!1);const l=[e];let d=e;for(;d.parent_id&&"0"!==d.parent_id;)try{const e=await i.nodes.getNode(d.parent_id);l.unshift(e),d=e}catch{break}$e(l)}catch(r){Q(`${e("errors.failedToLoad")}: ${r}`)}finally{qe=null,K(!1)}}}async function He(t){if(me())return void be(!1);const n=Le();if(n)try{K(!0);const e=await n.nodes.history.listNodeVersions(t,{Limit:100});ke(e.history?.filter(Boolean)||[]),be(!0)}catch(i){Q(`${e("errors.failedToLoad")}: ${i}`)}finally{K(!1)}}async function Ve(t="document",n){if(!U().trim())return void Q(e("errors.titleRequired")||"Title is required");const i=Le();if(i)try{K(!0);const e=n||oe()||"0";let r;if("table"===t){r=(await i.nodes.table.createTable(e,{title:U(),properties:[]})).id}else{r=(await i.nodes.page.createPage(e,{title:U()})).id}await Ae(!0),Ue(String(r)),H(""),G(""),Z(!1),re("idle"),Q(null),ae(null)}catch(r){Q(`${e("errors.failedToCreate")}: ${r}`)}finally{K(!1)}}const Ge=e=>{Ue(e.id),he(!1)};async function Ye(e){const t=Le();if(!t)return[];try{const n=await t.nodes.listNodeChildren(e),i=n.nodes?.filter(Boolean)||[];return i.length>0&&k(ne(t=>{const n=t=>{for(const r of t){if(r.id===e)return r.children=i,!0;if(r.children&&n(r.children))return!0}return!1};n(t)})),i}catch(n){return console.error("Failed to fetch children:",n),[]}}async function Ke(t){const n=S(),i=Le();if(n&&i)try{K(!0),await i.nodes.table.records.createRecord(n,{data:t}),Ue(n),Q(null)}catch(r){Q(`${e("errors.failedToCreate")}: ${r}`)}finally{K(!1)}}async function Je(t){const n=S(),i=Le();if(n&&i&&confirm(e("table.confirmDeleteRecord")||"Delete this record?"))try{K(!0),await i.nodes.table.records.deleteRecord(n,t);const e=await i.nodes.table.records.listRecords(n,{Offset:0,Limit:xe});$(e.records||[]),Ce((e.records||[]).length===xe),Q(null)}catch(r){Q(`${e("errors.failedToDelete")}: ${r}`)}finally{K(!1)}}async function Qe(t,n){const i=S(),r=Le();if(i&&r)try{K(!0),await r.nodes.table.records.updateRecord(i,t,{data:n});const e=await r.nodes.table.records.listRecords(i,{Offset:0,Limit:xe});$(e.records||[]),Q(null)}catch(o){Q(`${e("errors.failedToSave")}: ${o}`)}finally{K(!1)}}async function Xe(){const t=S(),n=Le();if(t&&!Y()&&n)try{K(!0);const e=y().length,i=(await n.nodes.table.records.listRecords(t,{Offset:e,Limit:xe})).records||[];$([...y(),...i]),Ce(i.length===xe)}catch(i){Q(`${e("errors.failedToLoad")}: ${i}`)}finally{K(!1)}}return[r(h,{get when(){return!N()},get fallback(){return r(To,{})},get children(){return r(h,{get when(){return!j()},get fallback(){return r(No,{})},get children(){return r(h,{get when(){return a()},get fallback(){return r(yo,{onLogin:Te})},get children(){var t=Ms(),n=t.firstChild,i=n.firstChild,o=i.firstChild,s=i.nextSibling;return o.$$click=()=>he(!ge()),g(i,r(h,{get when(){return S()},get children(){var e=Cs();return g(e,r(f,{get each(){return S()?ye():[]},children:(e,t)=>{return[r(h,{get when(){return t()>0},get children(){var e=Ds();return v(()=>p(e,ps)),e}}),(n=Bs(),n.$$click=()=>Ge(e),g(n,()=>e.title),v(()=>p(n,vs)),n)];var n}})),v(()=>p(e,hs)),e}}),null),g(s,r(Ga,{get workspaces(){return a()?.workspaces||[]},get organizations(){return a()?.organizations||[]},get currentWsId(){return a()?.workspace_id||""},onSwitchWorkspace:e=>Ee(e),onOpenSettings:()=>{E(!0),z(null),he(!1);const e=a()?.workspace_id,t=a()?.workspace_name;if(e){const n=Ws(t||"workspace");window.history.pushState(null,"",`/w/${e}+${n}/settings`)}},onCreateWorkspace:()=>ue(!0)}),null),g(s,r(xa,{get user(){return a()},onLogout:ze,onProfile:()=>{B(!0),E(!1),z(null),window.history.pushState(null,"","/profile")}}),null),g(t,r(h,{get when(){return D()},get children(){return r(Kr,{get user(){return a()},get token(){return l()},onBack:()=>{window.history.back()},onOrgSettings:e=>{te(()=>{O(!0),M(e.organization_id),B(!1)});const t=Ws(e.organization_name||"organization");window.history.pushState(null,"",`/o/${e.organization_id}+${t}/settings`)}})}}),null),g(t,r(h,{get when(){return T()},get children(){return r(qi,{get user(){return a()},get token(){return l()},onBack:()=>{window.history.back()},onOpenOrgSettings:()=>{const e=a(),t=e?.organization_id,n=e?.organizations?.find(e=>e.organization_id===t),i=n?.organization_name;if(t){O(!0),M(t),E(!1);const e=Ws(i||"organization");window.history.pushState(null,"",`/o/${t}+${e}/settings`)}}})}}),null),g(t,r(h,{get when(){return m(()=>!!R())()&&P()},get children(){return r(pr,{get user(){return a()},get token(){return l()},get orgId(){return P()},onBack:()=>{window.history.back()}})}}),null),g(t,r(h,{get when(){return m(()=>!(D()||T()))()&&!R()},get children(){var t=Ps(),n=t.firstChild;return g(t,r(h,{get when(){return ge()},get children(){var e=xs();return e.$$click=()=>he(!1),v(()=>p(e,Ss)),e}}),n),g(t,r(Ne,{get isOpen(){return ge()},get loading(){return Y()},nodes:_,get selectedNodeId(){return S()},onCreatePage:()=>{ae(null),Ve("document"),he(!1)},onCreateTable:()=>{ae(null),Ve("table"),he(!1)},onCreateChildPage:e=>{ae(e),Ve("document",e),he(!1)},onCreateChildTable:e=>{ae(e),Ve("table",e),he(!1)},onSelectNode:Ge,onCloseMobileSidebar:()=>he(!1),onFetchChildren:Ye,onDeleteNode:async t=>{if(!confirm(e("table.confirmDeleteRecord")||"Delete this item?"))return;const n=Le();if(n)try{if(K(!0),await n.nodes.deleteNode(t),t===S()){Fe=null,z(null),L(null),H(""),G(""),$([]);const e=a()?.workspace_id,t=a()?.workspace_name;if(e){const n=Ws(t||"workspace");window.history.pushState(null,"",`/w/${e}+${n}/`)}}await Ae(!0)}catch(i){Q(`${e("errors.failedToDelete")}: ${i}`)}finally{K(!1)}},onShowHistory:e=>{e!==S()?Ue(e).then(()=>He(e)):He(e)}}),n),g(n,r(h,{get when(){return J()},fallback:null,get children(){var e=xs();return g(e,J),v(()=>p(e,es)),e}}),null),g(n,r(h,{get when(){return S()},get children(){var t=Os(),n=t.firstChild,i=n.firstChild,o=i.nextSibling,s=n.nextSibling;return i.$$input=e=>{H(e.target.value);const t=S();var n,i;t&&(n=t,i=e.target.value,k(ne(e=>{const t=e=>{for(const r of e){if(r.id===n)return r.title=i,!0;if(r.children&&t(r.children))return!0}return!1};t(e)})),$e(e=>e.map(e=>e.id===n?{...e,title:i}:e))),Z(!0),Me()},g(o,r(h,{get when(){return m(()=>!!X())()&&"idle"===ee()},get children(){var t=zs();return t.firstChild,g(t,()=>e("editor.unsaved"),null),v(()=>p(t,rs)),t}}),null),g(o,r(h,{get when(){return"saving"===ee()},get children(){var t=Is();return t.firstChild,g(t,()=>e("common.saving"),null),v(()=>p(t,os)),t}}),null),g(o,r(h,{get when(){return"saved"===ee()},get children(){var t=Ls();return t.firstChild,g(t,()=>e("common.saved"),null),v(()=>p(t,as)),t}}),null),g(t,r(h,{get when(){return me()},get children(){var t=Es(),n=t.firstChild,i=n.nextSibling;return g(n,()=>e("editor.versionHistory")),g(i,r(f,{get each(){return we()},children:t=>{return n=Ns(),i=n.firstChild,r=i.firstChild,o=r.nextSibling,a=i.nextSibling,n.$$click=()=>{const n=S();n&&async function(t,n){if(!confirm(e("editor.restoreConfirm")||"This will replace current editor content. Continue?"))return;const i=Le();if(i)try{K(!0);const e=await i.nodes.history.getNodeVersion(t,n);G(e.content||""),Z(!0),be(!1)}catch(r){Q(`${e("errors.failedToLoad")}: ${r}`)}finally{K(!1)}}(n,t.hash)},g(r,()=>new Date(t.timestamp).toLocaleString()),g(o,()=>t.hash.substring(0,7)),g(a,()=>t.message),v(e=>{var t=ms,s=bs,l=ws,d=ks,c=ys;return t!==e.e&&p(n,e.e=t),s!==e.t&&p(i,e.t=s),l!==e.a&&p(r,e.a=l),d!==e.o&&p(o,e.o=d),c!==e.i&&p(a,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),n;var n,i,r,o,a}}),null),g(i,r(h,{get when(){return 0===we().length},get children(){var t=Ts();return g(t,()=>e("editor.noHistory")),v(()=>p(t,ms)),t}}),null),v(e=>{var n=_s,r=fs;return n!==e.e&&p(t,e.e=n),r!==e.t&&p(i,e.t=r),e},{e:void 0,t:void 0}),t}}),s),g(s,r(h,{get when(){return I()?.has_page},get children(){return r(nt,{get content(){return V()},get pageId(){return S()??void 0},get orgId(){return a()?.organization_id},onChange:e=>{G(e),Z(!0),Me()}})}}),null),g(s,r(h,{get when(){return I()?.has_table},get children(){var t=Rs(),n=t.firstChild,i=n.firstChild,o=i.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.nextSibling,d=l.nextSibling;return g(i,()=>e("table.records")),a.$$click=()=>F("table"),g(a,()=>e("table.table")),s.$$click=()=>F("grid"),g(s,()=>e("table.grid")),l.$$click=()=>F("gallery"),g(l,()=>e("table.gallery")),d.$$click=()=>F("board"),g(d,()=>e("table.board")),g(t,r(h,{get when(){return"table"===q()},get children(){return r(Vt,{get tableId(){return S()||""},get columns(){return I()?.properties||[]},get records(){return y()},onAddRecord:Ke,onUpdateRecord:Qe,onDeleteRecord:Je,onLoadMore:Xe,get hasMore(){return Se()}})}}),null),g(t,r(h,{get when(){return"grid"===q()},get children(){return r(an,{get records(){return y()},get columns(){return I()?.properties||[]},onUpdateRecord:Qe,onDeleteRecord:Je})}}),null),g(t,r(h,{get when(){return"gallery"===q()},get children(){return r(Sn,{get records(){return y()},get columns(){return I()?.properties||[]},onUpdateRecord:Qe,onDeleteRecord:Je})}}),null),g(t,r(h,{get when(){return"board"===q()},get children(){return r(Hn,{get records(){return y()},get columns(){return I()?.properties||[]},onUpdateRecord:Qe,onDeleteRecord:Je})}}),null),v(e=>{var i=ds,r=cs,c=us,u={[`${gs}`]:"table"===q()},g={[`${gs}`]:"grid"===q()},h={[`${gs}`]:"gallery"===q()},v={[`${gs}`]:"board"===q()};return i!==e.e&&p(t,e.e=i),r!==e.t&&p(n,e.t=r),c!==e.a&&p(o,e.a=c),e.o=w(a,u,e.o),e.i=w(s,g,e.i),e.n=w(l,h,e.n),e.s=w(d,v,e.s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}}),null),v(r=>{var a=ts,l=ns,d=e("editor.titlePlaceholder")||"Title",c=ss,u=is,g=ls;return a!==r.e&&p(t,r.e=a),l!==r.t&&p(n,r.t=l),d!==r.a&&b(i,"placeholder",r.a=d),c!==r.o&&p(i,r.o=c),u!==r.i&&p(o,r.i=u),g!==r.n&&p(s,r.n=g),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>i.value=U()),t}}),null),v(e=>{var i=Xa,r=Za;return i!==e.e&&p(t,e.e=i),r!==e.t&&p(n,e.t=r),e},{e:void 0,t:void 0}),t}}),null),v(e=>{var r=Ya,a=Ka,l=Ja,d=$s,c=Qa;return r!==e.e&&p(t,e.e=r),a!==e.t&&p(n,e.t=a),l!==e.a&&p(i,e.a=l),d!==e.o&&p(o,e.o=d),c!==e.i&&p(s,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t}})}})}}),r(Yo,{}),r(h,{get when(){return se()},get children(){return r(aa,{onClose:()=>le(!1),onCreate:Re})}}),r(h,{get when(){return de()},get children(){return r(ca,{onClose:()=>ue(!1),onCreate:Oe,isFirstWorkspace:!0})}})]}d(["click","input"]);const As=localStorage.getItem("mddb_locale"),qs=As&&["en","fr","de","es"].includes(As)?As:"en",Fs=document.getElementById("app");Fs&&re(()=>r(de,{initialLocale:qs,get children(){return r(js,{})}}),Fs);
