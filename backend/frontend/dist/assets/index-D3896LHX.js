const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Editor-DldywrNv.js","assets/vendor-CNS2GQke.js","assets/editor-vendor-YI8KGB9u.js","assets/Editor-29x-_eco.css","assets/index-D2hFxmM5.js","assets/index-CCjh8Il3.css"])))=>i.map(i=>d[i]);
import{c as e,a as t,d as n,u as i,t as r,e as o,r as a,f as s,g as l,h as d,i as c,j as u,S as h,l as v,m as g,s as p,F as _,n as m,o as f,p as w,q as b,v as y,w as k,x as $,y as S,z as C,A as x,B as I,C as q,D as T,E as L,G as E,H as z,I as N,J as R,K as D}from"./vendor-CNS2GQke.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const P={},O=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in P)return;P[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};async function A(e){const t=await((e,t,n)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>O(()=>import("./de-iX8llo_5.js"),[]),"./dictionaries/en.ts":()=>O(()=>import("./en-DdjSXlPJ.js"),[]),"./dictionaries/es.ts":()=>O(()=>import("./es-BOm7M6HE.js"),[]),"./dictionaries/fr.ts":()=>O(()=>import("./fr-Cyi90UpL.js"),[])}),`./dictionaries/${e}.ts`,3);return s(t.dict)}const B=o(),W=i=>{const[o,s]=e(i.initialLocale||"en"),[l]=t(o,A),d=r(l,a),c={locale:o,setLocale:s,t:d,translateError:e=>{const t=`errors.${e}`,n=d(t);return n&&n!==t?n:d("errors.unknown")||"An error occurred"},ready:()=>"ready"===l.state};return n(B.Provider,{value:c,get children(){return i.children}})};function j(){const e=i(B);if(!e)throw new Error("useI18n must be used within I18nProvider");return e}const M="_sidebarNodeWrapper_i1nam_1",U="_childList_i1nam_2",F="_pageItem_i1nam_13",V="_active_i1nam_28",H="_nodeIcon_i1nam_34",G="_pageTitleText_i1nam_41",K="_expandIcon_i1nam_49",Y="_hidden_i1nam_67",J="_loading_i1nam_67",Z="_expanded_i1nam_72",X="_contextMenu_i1nam_95",Q="_contextMenuItem_i1nam_107",ee="_contextMenuDivider_i1nam_124",te="_hoverDeleteButton_i1nam_131";var ne=y("<div><button>üìÑ </button><button>üìä </button><div></div><button>üïê "),ie=y("<ul>"),re=y("<li><div><span></span><span></span><span></span><button>üóë");function oe(t){const{t:i}=j(),r=d(()=>0===t.depth||t.ancestorIds.includes(t.node.id)),[o,a]=e(r),[s,l]=e(!1),[y,k]=e({x:0,y:0}),[$,S]=e(!1),C=()=>t.node.children??[],x=()=>!!(t.node.children&&t.node.children.length>0)||!0===t.node.has_children;c(()=>{const e=t.selectedId,n=C();e&&n.some(t=>t.id===e)&&a(!0)});let I=!1;c(b(()=>t.ancestorIds.length,(e,n)=>{(void 0===n||0===n)&&e>0&&!I&&t.ancestorIds.includes(t.node.id)&&(I=!0,a(!0))})),c(()=>{o()&&x()&&!t.node.children&&t.onFetchChildren&&(S(!0),t.onFetchChildren(t.node.id).finally(()=>S(!1)))});const q=e=>{e.stopPropagation(),a(!o())},T=e=>{e.preventDefault(),e.stopPropagation(),k({x:e.clientX,y:e.clientY}),l(!0)},L=()=>l(!1);return E=re(),z=E.firstChild,N=z.firstChild,R=N.nextSibling,D=R.nextSibling,P=D.nextSibling,E.$$click=L,z.$$contextmenu=T,z.$$click=()=>t.onSelect(t.node),N.$$click=q,u(N,()=>$()?"‚óã":"‚ñ∂"),u(R,()=>t.node.has_table&&!t.node.has_page?"üìä":"üìÑ"),u(D,()=>t.node.title),P.$$click=e=>{e.stopPropagation(),t.onDeleteNode?.(t.node.id)},u(E,n(h,{get when(){return s()},get children(){var e=ne(),n=e.firstChild;n.firstChild;var r=n.nextSibling;r.firstChild;var o=r.nextSibling,a=o.nextSibling;return a.firstChild,e.$$click=e=>e.stopPropagation(),n.$$click=()=>{t.onCreateChildPage(t.node.id),l(!1)},u(n,()=>i("app.createSubPage"),null),r.$$click=()=>{t.onCreateChildTable(t.node.id),l(!1)},u(r,()=>i("app.createSubTable"),null),a.$$click=()=>{t.onShowHistory?.(t.node.id),l(!1)},u(a,()=>i("editor.history"),null),v(t=>{var i=X,s=`${y().x}px`,l=`${y().y}px`,d=Q,c=Q,u=ee,h=Q;return i!==t.e&&g(e,t.e=i),s!==t.t&&p(e,"left",t.t=s),l!==t.a&&p(e,"top",t.a=l),d!==t.o&&g(n,t.o=d),c!==t.i&&g(r,t.i=c),u!==t.n&&g(o,t.n=u),h!==t.s&&g(a,t.s=h),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),u(E,n(h,{get when(){return m(()=>!!o())()&&C().length>0},get children(){var e=ie();return u(e,n(_,{get each(){return C()},children:e=>n(oe,{node:e,get selectedId(){return t.selectedId},get ancestorIds(){return t.ancestorIds},get onSelect(){return t.onSelect},get onCreateChildPage(){return t.onCreateChildPage},get onCreateChildTable(){return t.onCreateChildTable},get onFetchChildren(){return t.onFetchChildren},get onDeleteNode(){return t.onDeleteNode},get onShowHistory(){return t.onShowHistory},get depth(){return t.depth+1}})})),v(()=>g(e,U)),e}}),null),v(e=>{var n=M,r=`sidebar-node-${t.node.id}`,a=F,s={[`${V}`]:t.selectedId===t.node.id},l=12*t.depth+8+"px",d=K,c={[`${Z}`]:o(),[`${Y}`]:!x(),[`${J}`]:$()},u=`expand-icon-${t.node.id}`,h=H,v=G,_=te,m=i("common.delete")||"Delete";return n!==e.e&&g(E,e.e=n),r!==e.t&&f(E,"data-testid",e.t=r),a!==e.a&&g(z,e.a=a),e.o=w(z,s,e.o),l!==e.i&&p(z,"padding-left",e.i=l),d!==e.n&&g(N,e.n=d),e.s=w(N,c,e.s),u!==e.h&&f(N,"data-testid",e.h=u),h!==e.r&&g(R,e.r=h),v!==e.d&&g(D,e.d=v),_!==e.l&&g(P,e.l=_),m!==e.u&&f(P,"title",e.u=m),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),E;var E,z,N,R,D,P}l(["click","contextmenu"]);const ae="_sidebar_1ddhe_1",se="_sidebarHeader_1ddhe_9",le="_loading_1ddhe_42",de="_pageList_1ddhe_48",ce="_sidebarFooter_1ddhe_55",ue="_footerSeparator_1ddhe_71",he="_sidebarActions_1ddhe_76",ve="_mobileOpen_1ddhe_115";var ge=y("<p>"),pe=y("<aside><div><h2></h2><div><button>+P</button><button>+D</button></div></div><ul></ul><div><a href=/privacy></a><span>|</span><a href=/terms>");function _e(e){const{t:t}=j(),i=(t,n)=>{t.preventDefault(),window.history.pushState(null,"",n),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()};return r=pe(),o=r.firstChild,a=o.firstChild,s=a.nextSibling,l=s.firstChild,d=l.nextSibling,c=o.nextSibling,p=c.nextSibling,w=p.firstChild,b=w.nextSibling,y=b.nextSibling,u(a,()=>t("app.workspace")),l.$$click=()=>e.onCreatePage(),d.$$click=()=>e.onCreateTable(),u(r,n(h,{get when(){return m(()=>!!e.loading)()&&0===e.nodes.length},get children(){var e=ge();return u(e,()=>t("common.loading")),v(()=>g(e,le)),e}}),c),u(c,n(_,{get each(){return e.nodes},children:t=>n(oe,{node:t,get selectedId(){return e.selectedNodeId},get ancestorIds(){return e.ancestorIds},get onSelect(){return e.onSelectNode},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},depth:0})})),w.$$click=e=>i(e,"/privacy"),u(w,()=>t("app.privacyPolicy")),y.$$click=e=>i(e,"/terms"),u(y,()=>t("app.terms")),v(n=>{var i=`${ae} ${e.isOpen?ve:""}`,a=se,u=he,h=t("app.newPage")||"New Page",v=t("app.newTable")||"New Table",_=de,m=ce,w=ue;return i!==n.e&&g(r,n.e=i),a!==n.t&&g(o,n.t=a),u!==n.a&&g(s,n.a=u),h!==n.o&&f(l,"title",n.o=h),v!==n.i&&f(d,"title",n.i=v),_!==n.n&&g(c,n.n=_),m!==n.s&&g(p,n.s=m),w!==n.h&&g(b,n.h=w),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),r;var r,o,a,s,l,d,c,p,w,b,y}l(["click"]);const me="number",fe="checkbox",we="date",be="select",ye="org:owner",ke="org:admin",$e="ws:admin",Se="google",Ce="microsoft",xe="github",Ie="_container_pm8wq_1",qe="_tableWrapper_pm8wq_11",Te="_table_pm8wq_11",Le="_headerRow_pm8wq_26",Ee="_headerCell_pm8wq_34",ze="_row_pm8wq_46",Ne="_cell_pm8wq_55",Re="_editing_pm8wq_67",De="_cellContent_pm8wq_72",Pe="_editContainer_pm8wq_77",Oe="_input_pm8wq_83",Ae="_editActions_pm8wq_96",Be="_saveBtn_pm8wq_101",We="_cancelBtn_pm8wq_102",je="_actionsCell_pm8wq_121",Me="_deleteBtn_pm8wq_129",Ue="_addBtn_pm8wq_143",Fe="_newRow_pm8wq_163",Ve="_required_pm8wq_172",He="_empty_pm8wq_177",Ge="_loadMore_pm8wq_184",Ke="_addColumnCell_pm8wq_203",Ye="_addColumnWrapper_pm8wq_210",Je="_addColumnBtn_pm8wq_215",Ze="_addColumnDropdown_pm8wq_233",Xe="_columnNameInput_pm8wq_250",Qe="_columnTypeSelect_pm8wq_251",et="_addColumnActions_pm8wq_265",tt="_addColumnConfirm_pm8wq_271",nt="_addColumnCancel_pm8wq_272";var it=y("<input type=checkbox>"),rt=y("<select><option value>--"),ot=y("<option>"),at=y("<input type=text>"),st=y("<input type=number>"),lt=y("<input type=date>"),dt=y("<div><input type=text><select></select><div><button></button><button>"),ct=y("<th><div><button>+"),ut=y("<td style=color:var(--c-text-light);font-style:italic>"),ht=y("<tr><td><button>+"),vt=y("<div>"),gt=y("<div><button>"),pt=y("<div><div><table><thead><tr><th></th></tr></thead><tbody>"),_t=y("<span>*"),mt=y("<th>"),ft=y("<button>‚úï"),wt=y("<tr><td>"),bt=y("<div><div><button>‚úì</button><button>‚úï"),yt=y("<td>");const kt=[{type:"text",labelKey:"table.typeText"},{type:"number",labelKey:"table.typeNumber"},{type:"checkbox",labelKey:"table.typeCheckbox"},{type:"date",labelKey:"table.typeDate"},{type:"select",labelKey:"table.typeSelect"},{type:"url",labelKey:"table.typeUrl"},{type:"email",labelKey:"table.typeEmail"}];function $t(t){const{t:i}=j(),[r,o]=e(null),[a,s]=e(""),[l,d]=e({}),[c,p]=e(!1),[b,y]=e(""),[S,C]=e("text"),x=()=>{const e=b().trim();if(!e||!t.onAddColumn)return;const n={name:e,type:S(),required:!1};t.onAddColumn(n),y(""),C("text"),p(!1)},I=e=>{s(e)},q=(e,n)=>{const i=t.columns.find(e=>e.name===n);if(!i||!t.onUpdateRecord)return;const r=t.records.find(t=>t.id===e);if(!r)return;const s={...r.data};s[i.name]=a(),t.onUpdateRecord(e,s),o(null)},T=()=>{t.onAddRecord&&(t.onAddRecord(l()),d({}))},L=(e,t)=>{d(n=>({...n,[e]:t}))},E=(e,n)=>{const i=((e,n)=>{const i=t.columns.find(e=>e.name===n);return i?e.data[i.name]??"":""})(e,n.name);switch(n.type){case"checkbox":return i?"‚úì":"";case"select":case"multi_select":case"number":default:return String(i);case"date":return i?new Date(i).toLocaleDateString():""}},z=(e,t,i=!1,r,a)=>{const s=e=>{i&&setTimeout(()=>e.focus(),0)},l=r&&a?e=>((e,t,n)=>{"Enter"===e.key?(e.preventDefault(),q(t,n)):"Escape"===e.key&&(e.preventDefault(),o(null))})(e,r,a):void 0;switch(e.type){case fe:return f=it(),k(f,"keydown",l),f.addEventListener("change",e=>I(String(e.target.checked))),$(s,f),f.checked="true"===t,v(()=>g(f,Oe)),f;case be:return e.options&&e.options.length>0?((m=rt()).firstChild,k(m,"keydown",l),m.addEventListener("change",e=>I(e.target.value)),$(s,m),m.value=t,u(m,n(_,{get each(){return e.options},children:e=>{return t=ot(),u(t,()=>e.name),v(()=>t.value=e.id),t;var t}}),null),v(()=>g(m,Oe)),m):(p=at(),k(p,"keydown",l),p.$$input=e=>I(e.target.value),$(s,p),p.value=t,v(()=>g(p,Oe)),p);case me:return h=st(),k(h,"keydown",l),h.$$input=e=>I(e.target.value),$(s,h),h.value=t,v(()=>g(h,Oe)),h;case we:return c=lt(),k(c,"keydown",l),c.$$input=e=>I(e.target.value),$(s,c),c.value=t,v(()=>g(c,Oe)),c;default:return d=at(),k(d,"keydown",l),d.$$input=e=>I(e.target.value),$(s,d),d.value=t,v(()=>g(d,Oe)),d}var d,c,h,p,m,f};return N=pt(),R=N.firstChild,D=R.firstChild,P=D.firstChild,O=P.firstChild,A=O.firstChild,B=P.nextSibling,u(A,()=>i("common.actions")),u(O,n(_,{get each(){return t.columns},children:e=>{return t=mt(),u(t,()=>e.name,null),u(t,n(h,{get when(){return e.required},get children(){var e=_t();return v(()=>g(e,Ve)),e}}),null),v(()=>g(t,Ee)),t;var t}}),null),u(O,n(h,{get when(){return t.onAddColumn},get children(){var e=ct(),t=e.firstChild,r=t.firstChild;return r.$$click=()=>p(!c()),u(t,n(h,{get when(){return c()},get children(){var e=dt(),t=e.firstChild,r=t.nextSibling,o=r.nextSibling,a=o.firstChild,s=a.nextSibling;return t.$$input=e=>y(e.target.value),r.addEventListener("change",e=>C(e.target.value)),u(r,n(_,{each:kt,children:e=>{return t=ot(),u(t,()=>i(e.labelKey)||e.type),v(()=>t.value=e.type),t;var t}})),a.$$click=x,u(a,()=>i("common.confirm")||"Add"),s.$$click=()=>p(!1),u(s,()=>i("common.cancel")||"Cancel"),v(n=>{var l=Ze,d=i("table.columnName")||"Column Name",c=Xe,u=Qe,h=et,v=tt,p=nt;return l!==n.e&&g(e,n.e=l),d!==n.t&&f(t,"placeholder",n.t=d),c!==n.a&&g(t,n.a=c),u!==n.o&&g(r,n.o=u),h!==n.i&&g(o,n.i=h),v!==n.n&&g(a,n.n=v),p!==n.s&&g(s,n.s=p),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>t.value=b()),v(()=>r.value=S()),e}}),null),v(n=>{var o=Ke,a=Ye,s=Je,l=i("table.addColumn")||"Add Column";return o!==n.e&&g(e,n.e=o),a!==n.t&&g(t,n.t=a),s!==n.a&&g(r,n.a=s),l!==n.o&&f(r,"title",n.o=l),n},{e:void 0,t:void 0,a:void 0,o:void 0}),e}}),null),u(B,n(_,{get each(){return t.records},children:e=>{return l=wt(),d=l.firstChild,u(d,n(h,{get when(){return t.onDeleteRecord},get children(){var n=ft();return n.$$click=()=>t.onDeleteRecord?.(e.id),v(e=>{var t=Me,r=i("table.deleteRecord")||"Delete record";return t!==e.e&&g(n,e.e=t),r!==e.t&&f(n,"title",e.t=r),e},{e:void 0,t:void 0}),n}})),u(l,n(_,{get each(){return t.columns},children:i=>{const l=()=>r()?.recordId===e.id&&r()?.columnId===i.name;return(d=yt()).$$click=()=>((e,n)=>{const i=t.columns.find(e=>e.name===n),r=t.records.find(t=>t.id===e)?.data[i?.name??""]??"";o({recordId:e,columnId:n}),s(String(r))})(e.id,i.name),u(d,n(h,{get when(){return l()},get fallback(){return t=vt(),u(t,()=>E(e,i)),v(()=>g(t,De)),t;var t},get children(){var t=bt(),n=t.firstChild,r=n.firstChild,s=r.nextSibling;return u(t,()=>z(i,a(),!0,e.id,i.name),n),r.$$click=()=>q(e.id,i.name),s.$$click=()=>o(null),v(e=>{var i=Pe,o=Ae,a=Be,l=We;return i!==e.e&&g(t,e.e=i),o!==e.t&&g(n,e.t=o),a!==e.a&&g(r,e.a=a),l!==e.o&&g(s,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t}})),v(e=>{var t=Ne,n={[`${Re}`]:l()};return t!==e.e&&g(d,e.e=t),e.t=w(d,n,e.t),e},{e:void 0,t:void 0}),d;var d}}),null),v(e=>{var t=ze,n=je;return t!==e.e&&g(l,e.e=t),n!==e.t&&g(d,e.t=n),e},{e:void 0,t:void 0}),l;var l,d}}),null),u(B,n(h,{get when(){return t.onAddRecord},get children(){var e=ht(),r=e.firstChild,o=r.firstChild;return o.$$click=T,u(e,n(h,{get when(){return 0===t.columns.length},get children(){var e=ut();return u(e,()=>i("table.noColumns")),v(()=>g(e,Ne)),e}}),null),u(e,n(_,{get each(){return t.columns},children:e=>{return t=yt(),u(t,()=>((e,t)=>{const i=e=>{"Enter"===e.key&&(e.preventDefault(),T())};switch(e.type){case fe:return(d=it()).addEventListener("change",t=>L(e.name,String(t.target.checked))),d.checked="true"===t,v(()=>g(d,Oe)),d;case be:return e.options&&e.options.length>0?((l=rt()).firstChild,l.addEventListener("change",t=>L(e.name,t.target.value)),l.value=t,u(l,n(_,{get each(){return e.options},children:e=>{return t=ot(),u(t,()=>e.name),v(()=>t.value=e.id),t;var t}}),null),v(()=>g(l,Oe)),l):((s=at()).$$keydown=i,s.$$input=t=>L(e.name,t.target.value),s.value=t,v(()=>g(s,Oe)),s);case me:return(a=st()).$$keydown=i,a.$$input=t=>L(e.name,t.target.value),a.value=t,v(()=>g(a,Oe)),a;case we:return(o=lt()).$$keydown=i,o.$$input=t=>L(e.name,t.target.value),o.value=t,v(()=>g(o,Oe)),o;default:return(r=at()).$$keydown=i,r.$$input=t=>L(e.name,t.target.value),r.value=t,v(()=>g(r,Oe)),r}var r,o,a,s,l,d})(e,String(l()[e.name]??""))),v(()=>g(t,Ne)),t;var t}}),null),v(n=>{var a=Fe,s=je,l=Ue,d=0===t.columns.length,c=0===t.columns.length?i("table.addColumnFirst"):i("table.addRecord");return a!==n.e&&g(e,n.e=a),s!==n.t&&g(r,n.t=s),l!==n.a&&g(o,n.a=l),d!==n.o&&(o.disabled=n.o=d),c!==n.i&&f(o,"title",n.i=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}}),null),u(N,n(h,{get when(){return 0===t.columns.length},get children(){var e=vt();return u(e,()=>i("table.noColumns")),v(()=>g(e,He)),e}}),null),u(N,n(h,{get when(){return m(()=>t.columns.length>0)()&&0===t.records.length},get children(){var e=vt();return u(e,()=>i("table.noRecords")),v(()=>g(e,He)),e}}),null),u(N,n(h,{get when(){return t.hasMore},get children(){var e=gt(),n=e.firstChild;return n.$$click=()=>t.onLoadMore?.(),u(n,()=>i("table.loadMore")),v(()=>g(e,Ge)),e}}),null),v(e=>{var t=Ie,n=qe,i=Te,r=Le,o=Ee;return t!==e.e&&g(N,e.e=t),n!==e.t&&g(R,e.t=n),i!==e.a&&g(D,e.a=i),r!==e.o&&g(O,e.o=r),o!==e.i&&g(A,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),N;var N,R,D,P,O,A,B}function St(e,t,n,i){if(e.data[t]===n||!i)return;const r={...e.data,[t]:n};i(e.id,r)}function Ct(e){"Enter"===e.key&&e.currentTarget.blur()}function xt(e,t){if(!t)return"";const n=e.data[t];return null!=n?String(n):""}function It(e,t){const n=t[0];return n?xt(e,n.name):""}l(["keydown","input","click"]);const qt="_grid_3ff2z_1",Tt="_card_3ff2z_8",Lt="_cardHeader_3ff2z_20",Et="_deleteBtn_3ff2z_28",zt="_cardBody_3ff2z_40",Nt="_field_3ff2z_46",Rt="_fieldName_3ff2z_51",Dt="_titleInput_3ff2z_58",Pt="_fieldValueInput_3ff2z_75";var Ot=y("<div>"),At=y("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Bt=y("<div><span>:</span><input type=text>");function Wt(e){const{t:t}=j();return i=Ot(),u(i,n(_,{get each(){return e.records},children:i=>{return r=At(),o=r.firstChild,a=o.firstChild,s=a.firstChild,l=a.nextSibling,d=o.nextSibling,k(s,"keydown",Ct),s.addEventListener("blur",t=>e.columns[0]&&St(i,e.columns[0].name,t.target.value,e.onUpdateRecord)),l.$$click=()=>e.onDeleteRecord(i.id),u(d,n(_,{get each(){return e.columns.slice(1,4)},children:t=>{return n=Bt(),r=n.firstChild,o=r.firstChild,a=r.nextSibling,u(r,()=>t.name,o),k(a,"keydown",Ct),a.addEventListener("blur",n=>St(i,t.name,n.target.value,e.onUpdateRecord)),v(e=>{var t=Nt,i=Rt,o=Pt;return t!==e.e&&g(n,e.e=t),i!==e.t&&g(r,e.t=i),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=xt(i,t.name)),n;var n,r,o,a}})),v(e=>{var n=Tt,i=Lt,a=t("table.untitled")||"Untitled",c=Dt,u=Et,h=zt;return n!==e.e&&g(r,e.e=n),i!==e.t&&g(o,e.t=i),a!==e.a&&f(s,"placeholder",e.a=a),c!==e.o&&g(s,e.o=c),u!==e.i&&g(l,e.i=u),h!==e.n&&g(d,e.n=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>s.value=It(i,e.columns)),r;var r,o,a,s,l,d}})),v(()=>g(i,qt)),i;var i}l(["keydown","click"]);const jt="_gallery_1i7ro_1",Mt="_card_1i7ro_8",Ut="_imageContainer_1i7ro_23",Ft="_image_1i7ro_23",Vt="_imagePlaceholder_1i7ro_38",Ht="_cardContent_1i7ro_43",Gt="_cardHeader_1i7ro_47",Kt="_deleteBtn_1i7ro_54",Yt="_cardBody_1i7ro_67",Jt="_field_1i7ro_71",Zt="_fieldName_1i7ro_77",Xt="_titleInput_1i7ro_83",Qt="_fieldValueInput_1i7ro_100";var en=y("<div>"),tn=y("<div><div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),nn=y("<img>"),rn=y("<div><span>:</span><input type=text>");function on(e){const{t:t}=j();return i=en(),u(i,n(_,{get each(){return e.records},children:i=>{const r=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return o=tn(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=l.firstChild,c=l.nextSibling,p=s.nextSibling,u(o,n(h,{when:r,children:r=>{return o=en(),u(o,n(h,{get when(){return i.data[r().name]},get fallback(){return e=en(),u(e,()=>t("table.noImage")),v(()=>g(e,Vt)),e;var e},get children(){var t=nn();return v(n=>{var o=String(i.data[r().name]),a=It(i,e.columns)||"Record",s=Ft;return o!==n.e&&f(t,"src",n.e=o),a!==n.t&&f(t,"alt",n.t=a),s!==n.a&&g(t,n.a=s),n},{e:void 0,t:void 0,a:void 0}),t}})),v(()=>g(o,Ut)),o;var o}}),a),k(d,"keydown",Ct),d.addEventListener("blur",t=>e.columns[0]&&St(i,e.columns[0].name,t.target.value,e.onUpdateRecord)),c.$$click=()=>e.onDeleteRecord(i.id),u(p,n(_,{get each(){return e.columns.slice(1,3)},children:t=>{return n=rn(),r=n.firstChild,o=r.firstChild,a=r.nextSibling,u(r,()=>t.name,o),k(a,"keydown",Ct),a.addEventListener("blur",n=>St(i,t.name,n.target.value,e.onUpdateRecord)),v(e=>{var t=Jt,i=Zt,o=Qt;return t!==e.e&&g(n,e.e=t),i!==e.t&&g(r,e.t=i),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=xt(i,t.name)),n;var n,r,o,a}})),v(e=>{var n=Mt,i=Ht,r=Gt,l=t("table.untitled")||"Untitled",u=Xt,h=Kt,v=Yt;return n!==e.e&&g(o,e.e=n),i!==e.t&&g(a,e.t=i),r!==e.a&&g(s,e.a=r),l!==e.o&&f(d,"placeholder",e.o=l),u!==e.i&&g(d,e.i=u),h!==e.n&&g(c,e.n=h),v!==e.s&&g(p,e.s=v),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>d.value=It(i,e.columns)),o;var o,a,s,l,d,c,p}})),v(()=>g(i,jt)),i;var i}l(["keydown","click"]);const an="_board_ojcu7_1",sn="_noGroup_ojcu7_7",ln="_columns_ojcu7_16",dn="_column_ojcu7_16",cn="_columnHeader_ojcu7_31",un="_columnName_ojcu7_38",hn="_columnCount_ojcu7_45",vn="_cards_ojcu7_53",gn="_card_ojcu7_53",pn="_cardHeader_ojcu7_68",_n="_deleteBtn_ojcu7_80",mn="_cardBody_ojcu7_93",fn="_field_ojcu7_97",wn="_fieldName_ojcu7_103",bn="_titleInput_ojcu7_108",yn="_fieldValueInput_ojcu7_125";var kn=y("<div>"),$n=y("<div><div><span></span><span></span></div><div>"),Sn=y("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Cn=y("<div><span>:</span><input type=text>");function xn(e){const{t:t}=j(),i=S(()=>e.columns.find(e=>e.type===be||"multi_select"===e.type)),r=S(()=>{const n=i();if(!n)return[{name:"All Records",records:e.records,fromOptions:!0}];const r={};return n.options&&n.options.forEach(e=>{r[e.id]={name:e.name,records:[],fromOptions:!0}}),r.__none__={name:t("table.noGroup")||"No Group",records:[],fromOptions:!0},e.records.forEach(e=>{const t=e.data[n.name];t&&"string"==typeof t?(r[t]||(r[t]={name:t,records:[]}),r[t].records.push(e)):r.__none__?.records.push(e)}),Object.values(r).filter(e=>e.records.length>0||e.fromOptions)});return o=kn(),u(o,n(h,{get when(){return i()},get fallback(){return e=kn(),u(e,()=>t("table.addSelectColumn")),v(()=>g(e,sn)),e;var e},get children(){var o=kn();return u(o,n(_,{get each(){return r()},children:r=>{return o=$n(),a=o.firstChild,s=a.firstChild,l=s.nextSibling,d=a.nextSibling,u(s,()=>r.name),u(l,()=>r.records.length),u(d,n(_,{get each(){return r.records},children:r=>{return o=Sn(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=s.nextSibling,c=a.nextSibling,k(l,"keydown",Ct),l.addEventListener("blur",t=>e.columns[0]&&St(r,e.columns[0].name,t.target.value,e.onUpdateRecord)),d.$$click=()=>e.onDeleteRecord(r.id),u(c,n(_,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==i()?.name)},children:t=>{return n=Cn(),i=n.firstChild,o=i.firstChild,a=i.nextSibling,u(i,()=>t.name,o),k(a,"keydown",Ct),a.addEventListener("blur",n=>St(r,t.name,n.target.value,e.onUpdateRecord)),v(e=>{var t=fn,r=wn,o=yn;return t!==e.e&&g(n,e.e=t),r!==e.t&&g(i,e.t=r),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=xt(r,t.name)),n;var n,i,o,a}})),v(e=>{var n=gn,i=pn,r=t("table.untitled")||"Untitled",s=bn,u=_n,h=mn;return n!==e.e&&g(o,e.e=n),i!==e.t&&g(a,e.t=i),r!==e.a&&f(l,"placeholder",e.a=r),s!==e.o&&g(l,e.o=s),u!==e.i&&g(d,e.i=u),h!==e.n&&g(c,e.n=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>l.value=It(r,e.columns)),o;var o,a,s,l,d,c}})),v(e=>{var t=dn,n=cn,i=un,r=hn,c=vn;return t!==e.e&&g(o,e.e=t),n!==e.t&&g(a,e.t=n),i!==e.a&&g(s,e.a=i),r!==e.o&&g(l,e.o=r),c!==e.i&&g(d,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,a,s,l,d}})),v(()=>g(o,ln)),o}})),v(()=>g(o,an)),o;var o}l(["keydown","click"]);class In extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function qn(e,t){const n=await e(t);if(!n.ok){const e=await n.json();throw new In(n.status,e)}return n.json()}async function Tn(e,t,n){const i={method:"POST"};n&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n));const r=await e(t,i);if(!r.ok){const e=await r.json();throw new In(r.status,e)}return r.json()}function Ln(e){return{admin:{organizations:{listAllOrgs:()=>qn(e,"/api/admin/organizations")},getAdminStats:()=>qn(e,"/api/admin/stats"),listAllUsers:()=>qn(e,"/api/admin/users")},auth:{email:{changeEmail:t=>Tn(e,"/api/auth/email",t),sendVerificationEmail:()=>Tn(e,"/api/auth/email/send-verification")},invitations:{acceptOrgInvitation:t=>Tn(e,"/api/auth/invitations/org/accept",t),acceptWSInvitation:t=>Tn(e,"/api/auth/invitations/ws/accept",t)},sessions:{listSessions:()=>qn(e,"/api/auth/sessions"),revokeAllSessions:()=>Tn(e,"/api/auth/sessions/revoke-all"),revokeSession:t=>Tn(e,"/api/auth/sessions/revoke",t)},getMe:()=>qn(e,"/api/auth/me"),listProviders:()=>qn(e,"/api/auth/providers"),login:t=>Tn(e,"/api/auth/login",t),logout:()=>Tn(e,"/api/auth/logout"),register:t=>Tn(e,"/api/auth/register",t),switchWorkspace:t=>Tn(e,"/api/auth/switch-workspace",t),updateUserSettings:t=>Tn(e,"/api/auth/settings",t)},organizations:{createOrganization:t=>Tn(e,"/api/organizations",t)},server:{getConfig:()=>qn(e,"/api/server/config"),updateConfig:t=>Tn(e,"/api/server/config",t)},getHealth:()=>qn(e,"/api/health"),org:t=>({invitations:{createOrgInvitation:n=>Tn(e,`/api/organizations/${t}/invitations`,n),listOrgInvitations:()=>qn(e,`/api/organizations/${t}/invitations`)},notion:{getStatus:n=>qn(e,`/api/organizations/${t}/notion/import/${n}/status`),startImport:n=>Tn(e,`/api/organizations/${t}/notion/import`,n)},organizations:{getOrganization:()=>qn(e,`/api/organizations/${t}`),updateOrganization:n=>Tn(e,`/api/organizations/${t}`,n)},settings:{updateOrgPreferences:n=>Tn(e,`/api/organizations/${t}/settings`,n)},users:{listUsers:()=>qn(e,`/api/organizations/${t}/users`),updateOrgMemberRole:n=>Tn(e,`/api/organizations/${t}/users/role`,n)},workspaces:{createWorkspace:n=>Tn(e,`/api/organizations/${t}/workspaces`,n)}}),ws:t=>({invitations:{createWSInvitation:n=>Tn(e,`/api/workspaces/${t}/invitations`,n),listWSInvitations:()=>qn(e,`/api/workspaces/${t}/invitations`)},nodes:{assets:{deleteNodeAsset:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/assets/${i}/delete`),listNodeAssets:n=>qn(e,`/api/workspaces/${t}/nodes/${n}/assets`)},history:{getNodeVersion:(n,i)=>qn(e,`/api/workspaces/${t}/nodes/${n}/history/${i}`),async listNodeVersions(n,i){const r=new URLSearchParams;i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/history`+(r.toString()?`?${r}`:"");return qn(e,o)}},page:{createPage:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/page/create`,i),deletePage:n=>Tn(e,`/api/workspaces/${t}/nodes/${n}/page/delete`),getPage:n=>qn(e,`/api/workspaces/${t}/nodes/${n}/page`),updatePage:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/page`,i)},table:{records:{createRecord:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/table/records/create`,i),deleteRecord:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}/delete`),getRecord:(n,i)=>qn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`),async listRecords(n,i){const r=new URLSearchParams;i.ViewID&&r.set("view_id",i.ViewID),i.Filters&&r.set("filters",i.Filters),i.Sorts&&r.set("sorts",i.Sorts),i.Offset&&r.set("offset",String(i.Offset)),i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/table/records`+(r.toString()?`?${r}`:"");return qn(e,o)},updateRecord:(n,i,r)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`,r)},createTable:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/table/create`,i),deleteTable:n=>Tn(e,`/api/workspaces/${t}/nodes/${n}/table/delete`),getTable:n=>qn(e,`/api/workspaces/${t}/nodes/${n}/table`),updateTable:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/table`,i)},views:{createView:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/views/create`,i),deleteView:(n,i)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/views/${i}/delete`),updateView:(n,i,r)=>Tn(e,`/api/workspaces/${t}/nodes/${n}/views/${i}`,r)},deleteNode:n=>Tn(e,`/api/workspaces/${t}/nodes/${n}/delete`),getNode:n=>qn(e,`/api/workspaces/${t}/nodes/${n}`),async getNodeTitles(n){const i=new URLSearchParams;n.IDs&&i.set("ids",n.IDs);const r=`/api/workspaces/${t}/nodes/titles`+(i.toString()?`?${i}`:"");return qn(e,r)},listNodeChildren:n=>qn(e,`/api/workspaces/${t}/nodes/${n}/children`)},notion:{cancelImport:()=>Tn(e,`/api/workspaces/${t}/notion/import/cancel`)},settings:{git:{deleteGitRemote:()=>Tn(e,`/api/workspaces/${t}/settings/git/delete`),getGitRemote:()=>qn(e,`/api/workspaces/${t}/settings/git`),pushGit:()=>Tn(e,`/api/workspaces/${t}/settings/git/push`),updateGitRemote:n=>Tn(e,`/api/workspaces/${t}/settings/git`,n)},updateWSMembershipSettings:n=>Tn(e,`/api/workspaces/${t}/settings/membership`,n)},users:{updateWSMemberRole:n=>Tn(e,`/api/workspaces/${t}/users/role`,n)},workspaces:{getWorkspace:()=>qn(e,`/api/workspaces/${t}`),updateWorkspace:n=>Tn(e,`/api/workspaces/${t}`,n)},search:n=>Tn(e,`/api/workspaces/${t}/search`,n)})}}const En=3,zn=1e3,Nn=3e4;function Rn(e){return 429===e||e>=500&&e<600}function Dn(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const n=Date.parse(e);return isNaN(n)?null:Math.max(0,n-Date.now())}function Pn(e,t){if(null!==t)return Math.min(t,Nn);const n=zn*Math.pow(2,e);return Math.min(n,Nn)}function On(e,t){return n=async(n,i)=>{const r=e(),o={...i?.headers};r&&(o.Authorization=`Bearer ${r}`);const a=await fetch(n,{...i,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let i=0;for(;;){const r=await n(e,t);if(!Rn(r.status)||i>=En)return r;const o=Pn(i,Dn(r.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),i++}};var n}function An(e,t){return Ln(On(e,t))}const Bn=o(),Wn=t=>{const[i,r]=e(null),[o,a]=e(localStorage.getItem("mddb_token")),s=async()=>{const e=o();if(e)try{const t=An(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),a(null),r(null),window.history.pushState(null,"","/")},l=S(()=>An(()=>o(),s)),d=S(()=>{const e=i()?.workspace_id;return e?l().ws(e):null}),u=S(()=>{const e=i()?.organization_id;return e?l().org(e):null});C(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),a(e),window.history.replaceState({},document.title,window.location.pathname))});let h=!1;c(()=>{const e=o(),t=i();!e||t||h||(h=!0,(async()=>{try{const e=await l().auth.getMe();r(e)}catch(e){console.error("Failed to load user",e),e instanceof In&&401===e.status&&(localStorage.removeItem("mddb_token"),a(null))}finally{h=!1}})())});const v={user:i,token:o,api:l,wsApi:d,orgApi:u,login:(e,t)=>{localStorage.setItem("mddb_token",e),a(e),r(t)},logout:s,setUser:r,refreshUser:async()=>{try{const e=await l().auth.getMe();r(e)}catch(e){console.error("Failed to refresh user",e),e instanceof In&&401===e.status&&(localStorage.removeItem("mddb_token"),a(null),r(null))}}};return n(Bn.Provider,{value:v,get children(){return t.children}})};function jn(){const e=i(Bn);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function Mn(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}function Un(e,t){return`/w/${e}+${Mn(t||"workspace")}/`}function Fn(e,t,n,i){const r=Mn(t||"workspace"),o=i?Mn(i):"";return`/w/${e}+${r}/${n}${o?"+"+o:""}`}function Vn(e,t){return`/o/${e}+${Mn(t||"organization")}/settings`}function Hn(e,t,n){if(!e||"user"===e)return"/settings/user";if("server"===e)return"/settings/server";return`/settings/${e}/${t}+${Mn(n||e)}`}const Gn=o(),Kn=t=>{const{t:i,ready:r}=j(),{user:o,setUser:a,api:s,wsApi:l,login:d}=jn(),[u,h]=x([]),[v,g]=e(null),[p,_]=e(null),[m,f]=e([]),[w,b]=e(!1),[y,k]=e(null),[$,S]=e(!1),[C,L]=e(!1);let E=!1,z=null,N=null,R=null;function D(){const e=o();if(!e?.name)return"";return e.name.split(" ")[0]||e.name}async function P(e){await s().organizations.createOrganization({name:e.name});const t=await s().auth.getMe();a(t)}async function O(e){const t=o();if(!t||!t.organization_id)throw new Error("No organization selected");const n=await s().org(t.organization_id).workspaces.createWorkspace({name:e.name}),i=await s().auth.getMe();a(i),await A(n.id)}async function A(e,t=!0){try{b(!0);const n=await s().auth.switchWorkspace({ws_id:e});if(!n.user)throw new Error("No user data returned");if(d(n.token,n.user),q(()=>{g(null),_(null),f([])}),R=null,z=null,t){const e=n.user.workspace_id,t=n.user.workspace_name;e?window.history.pushState(null,"",Un(e,t)):window.history.pushState(null,"","/")}await B()}catch(n){k(`${i("errors.failedToSwitch")}: ${n}`)}finally{b(!1)}}async function B(e=!1){const t=l(),n=o()?.workspace_id;if(t&&!E&&!(!e&&n&&z===n&&u.length>0))try{E=!0,b(!0);const e=await t.nodes.listNodeChildren("0");let r=e?.nodes||[];if(0===r.length&&$()){const e=await async function(){const e=l(),t=o();if(!e||!t)return null;if(t.workspace_role!==$e&&"ws:editor"!==t.workspace_role)return null;try{const t=await e.nodes.page.createPage("0",{title:i("welcome.welcomePageTitle"),content:i("welcome.welcomePageContent")});return t?.id?String(t.id):null}catch(n){return k(`${i("errors.failedToCreate")}: ${n}`),null}}();if(e){const e=await t.nodes.listNodeChildren("0");r=e?.nodes||[]}}h(T(r)),z=n||null,k(null);const a=window.location.pathname;a.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/)&&!v()&&r.length>0&&r[0]&&W(r[0].id,!1)}catch(r){k(`${i("errors.failedToLoad")}: ${r}`)}finally{E=!1,b(!1)}}async function W(e,t=!0){const n=l();if(n&&N!==e&&R!==e)try{N=e,b(!0);const i=await n.nodes.getNode(e);q(()=>{g(i.id),_(i)}),R=i.id,k(null);const r=o()?.workspace_id,a=o()?.workspace_name;if(r){const e=Fn(r,a,i.id,i.title);t?window.location.pathname!==e&&window.history.pushState(null,"",e):window.location.pathname!==e&&window.history.replaceState(null,"",e)}const s=[i];let l=i;for(;l.parent_id&&"0"!==l.parent_id;)try{const e=await n.nodes.getNode(l.parent_id);s.unshift(e),l=e}catch{break}return f(s),i}catch(r){return void k(`${i("errors.failedToLoad")}: ${r}`)}finally{N=null,b(!1)}}c(()=>{const e=o();if(!e||!r()||$()||C())return;const t=e.organizations||[];if(0===t.length)return L(!0),void async function(){try{b(!0);const e=D(),t=e?i("onboarding.defaultOrgName",{name:e}):i("onboarding.defaultOrgNameFallback");await P({name:t})}catch(e){k(`${i("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>L(!1));const n=t[0];if(n){if(0===(e.workspaces?.filter(e=>e.organization_id===n.organization_id)||[]).length&&(n.role===ke||n.role===ye))return L(!0),void async function(){try{b(!0);const e=D(),t=e?i("onboarding.defaultWorkspaceName",{name:e}):i("onboarding.defaultWorkspaceNameFallback");await O({name:t})}catch(e){k(`${i("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>L(!1))}const a=e.workspace_id,s=e.workspace_name;a&&(S(!0),"/"===window.location.pathname&&window.history.replaceState(null,"",Un(a,s)))}),c(()=>{o()&&B()}),c(()=>{const e=o()?.workspace_id;e&&z!==e&&(R=null)});const M={nodes:u,setNodes:e=>{h(I(e))},selectedNodeId:v,setSelectedNodeId:g,selectedNodeData:p,setSelectedNodeData:_,breadcrumbPath:m,setBreadcrumbPath:f,loading:w,setLoading:b,error:y,setError:k,firstLoginCheckDone:$,setFirstLoginCheckDone:S,switchWorkspace:A,createOrganization:P,createWorkspace:O,loadNodes:B,loadNode:W,fetchNodeChildren:async function(e){const t=l();if(t)try{const n=await t.nodes.listNodeChildren(e),i=n.nodes?.filter(Boolean)||[];h(I(t=>{const n=t=>{for(const r of t){if(r.id===e)return r.children=i,r.has_children=i.length>0,!0;if(r.children&&n(r.children))return!0}return!1};n(t)}))}catch(n){console.error("Failed to fetch children:",n)}},removeNode:e=>{h(I(t=>{const n=t=>{const i=t.findIndex(t=>t.id===e);if(-1!==i)return t.splice(i,1),!0;for(const e of t)if(e.children&&n(e.children))return 0===e.children.length&&(e.has_children=!1),!0;return!1};n(t)}))},updateNodeTitle:(e,t)=>{h(I(n=>{const i=n=>{for(const r of n){if(r.id===e)return r.title=t,!0;if(r.children&&i(r.children))return!0}return!1};i(n)})),f(n=>n.map(n=>n.id===e?{...n,title:t}:n))}};return n(Gn.Provider,{value:M,get children(){return t.children}})};function Yn(){const e=i(Gn);if(!e)throw new Error("useWorkspace must be used within a WorkspaceProvider");return e}function Jn(e){return!e.includes("://")&&!e.startsWith("/")}function Zn(e,t){if(!t||0===Object.keys(t).length)return e;let n=e.replace(/!\[([^\]]*)\]\(([^/)][^)]*)\)/g,(e,n,i)=>{if(!Jn(i))return e;const r=t[i];return r?`![${n}](${r})`:e});return n=n.replace(/\[([^\]]+)\]\(([^/)][^)]*)\)/g,(e,n,i)=>{if(!Jn(i))return e;const r=t[i];return r?`[${n}](${r})`:e}),n}const Xn=/^\/assets\/[^/]+\/[^/]+\/([^?]+)/;function Qn(e){const t=e.match(Xn);return t&&t[1]?decodeURIComponent(t[1]):null}function ei(e,t){const n={};for(const[r,o]of Object.entries(t||{}))n[o]=r;let i=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,t,i)=>{const r=n[o=i]?n[o]:Qn(o);var o;return r?`![${t}](${r})`:e});return i=i.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(e,t,n)=>{const i=Qn(n);return i?`[${t}](${i})`:e}),i}const ti=/\[([^\]]*)\]\(\/w\/([^/+]+)(?:\+[^/]*)?\/([A-Za-z0-9]+)(?:\+[^)]*)?\)/g;function ni(e,t,n){return e&&n&&t&&0!==Object.keys(t).length?e.replace(/\[([^\]]*)\]\((\/w\/([^/+]+)(?:\+[^/]*)?\/([A-Za-z0-9]+)(?:\+[^)]*)?)\)/g,(e,i,r,o,a)=>{if(o!==n)return e;const s=t[a];return void 0!==s?`[${s}](${r})`:e}):e}const ii=o(),ri=t=>{const{t:i}=j(),{user:r,wsApi:o}=jn(),{selectedNodeId:a,selectedNodeData:s,updateNodeTitle:l,setLoading:d,setError:u}=Yn(),[h,v]=e(""),[g,p]=e(""),[_,m]=e(!1),[f,w]=e("idle"),[b,y]=e({}),[k,$]=e(!1),[S,C]=e([]),x=function(e,t){let n=null,i=null;const r=(...r)=>{i=r,null!==n&&clearTimeout(n),n=setTimeout(()=>{n=null,i=null,e(...r)},t)};return r.flush=()=>{if(null!==n&&null!==i){clearTimeout(n);const t=i;n=null,i=null,e(...t)}},r.cancel=()=>{null!==n&&(clearTimeout(n),n=null,i=null)},r.pending=()=>null!==n,r}(async()=>{const e=a(),t=o();if(e&&_()&&t)try{w("saving"),await t.nodes.page.updatePage(e,{title:h(),content:g()}),m(!1),w("saved");const n=r()?.workspace_id,i=r()?.workspace_name;if(n){const t=window.location.pathname,r=Fn(n,i,e,h());t!==r&&window.history.replaceState(null,"",r)}setTimeout(()=>{"saved"===f()&&w("idle")},2e3)}catch(n){u(`${i("errors.autoSaveFailed")}: ${n}`),w("idle")}},2e3);async function I(e){const t=o(),n=r()?.workspace_id;if(!t||!n||!e)return void y({});const i=function(e,t){if(!e||!t)return[];const n=new Set,i=new RegExp(ti.source,"g");let r;for(;null!==(r=i.exec(e));){const e=r[2],i=r[3];e===t&&i&&!n.has(i)&&n.add(i)}return Array.from(n)}(e,n);if(0!==i.length)try{const e=await t.nodes.getNodeTitles({IDs:i.join(",")});y(e.titles||{})}catch{y({})}else y({})}function q(){v(""),p(""),m(!1),w("idle"),$(!1),C([]),y({})}L(()=>{x.flush()}),c(()=>{const e=s();e?(v(e.title),p(e.content||""),m(!1),w("idle"),$(!1),I(e.content||"")):q()});const T={title:h,setTitle:v,content:g,setContent:p,hasUnsavedChanges:_,setHasUnsavedChanges:m,autoSaveStatus:f,assetUrls:()=>s()?.asset_urls||{},linkedNodeTitles:b,showHistory:k,setShowHistory:$,history:S,loadHistory:async function(e){if(k())return void $(!1);const t=o();if(t)try{d(!0);const n=await t.nodes.history.listNodeVersions(e,{Limit:100});C(n.history?.filter(Boolean)||[]),$(!0)}catch(n){u(`${i("errors.failedToLoad")}: ${n}`)}finally{d(!1)}},loadVersion:async function(e,t){if(!confirm(i("editor.restoreConfirm")||"This will replace current editor content. Continue?"))return;const n=o();if(n)try{d(!0);const i=await n.nodes.history.getNodeVersion(e,t);p(i.content||""),m(!0),$(!1)}catch(r){u(`${i("errors.failedToLoad")}: ${r}`)}finally{d(!1)}},triggerAutoSave:x,flushAutoSave:x.flush,resetEditor:q,handleTitleChange:function(e){v(e);const t=a();t&&l(t,e),m(!0),x()},handleContentChange:function(e){p(e),m(!0),x()}};return n(ii.Provider,{value:T,get children(){return t.children}})};function oi(){const e=i(ii);if(!e)throw new Error("useEditor must be used within an EditorProvider");return e}const ai=o(),si=t=>{const{t:i}=j(),{wsApi:r}=jn(),{selectedNodeId:o,selectedNodeData:a,loading:s,setLoading:l,setError:d}=Yn(),[u,h]=e([]),[v,g]=e(!1),[p,_]=e([]),[m,f]=e(),[w,b]=e([]),[y,k]=e([]),$="__default__";function S(){h([]),g(!1),_([]),f(void 0),b([]),k([])}function C(e){if(e===m())return;const t=p().find(t=>t.id===e);q(()=>{f(e),t?(b(t.filters||[]),k(t.sorts||[])):(b([]),k([]))});const n=o();n&&x(n)}async function x(e){const t=r();if(t)try{l(!0);const n=w().length>0?JSON.stringify(w()):void 0,i=y().length>0?JSON.stringify(y()):void 0,r=m(),o=r===$?"":r||"",a=(await t.nodes.table.records.listRecords(e,{Offset:0,Limit:50,ViewID:o,Filters:n||"",Sorts:i||""})).records||[];h(a),g(50===a.length)}catch(n){d(`${i("errors.failedToLoad")}: ${n}`)}finally{l(!1)}}c(()=>{const e=a();e?.has_table?(q(()=>{const t=e.views||[];if(t.length>0){_(t);const e=t.find(e=>e.default)||t[0];e&&(f(e.id),b(e.filters||[]),k(e.sorts||[]))}else{const e={id:$,name:i("table.all")||"All",type:"table",default:!0,filters:[],sorts:[],columns:[],groups:[]};_([e]),f($),b([]),k([])}}),x(e.id)):S()});const I={records:u,hasMore:v,views:p,activeViewId:m,activeFilters:w,activeSorts:y,loadRecords:x,loadMoreRecords:async function(){const e=o(),t=r();if(e&&!s()&&t)try{l(!0);const n=u().length,i=w().length>0?JSON.stringify(w()):void 0,r=y().length>0?JSON.stringify(y()):void 0,o=m(),a=o===$?"":o||"",s=(await t.nodes.table.records.listRecords(e,{Offset:n,Limit:50,ViewID:a,Filters:i||"",Sorts:r||""})).records||[];h([...u(),...s]),g(50===s.length)}catch(n){d(`${i("errors.failedToLoad")}: ${n}`)}finally{l(!1)}},addRecord:async function(e){const t=o(),n=r();if(t&&n)try{l(!0),await n.nodes.table.records.createRecord(t,{data:e}),await x(t),d(null)}catch(a){d(`${i("errors.failedToCreate")}: ${a}`)}finally{l(!1)}},updateRecord:async function(e,t){const n=o(),a=r();if(n&&a)try{l(!0),await a.nodes.table.records.updateRecord(n,e,{data:t}),await x(n),d(null)}catch(s){d(`${i("errors.failedToSave")}: ${s}`)}finally{l(!1)}},deleteRecord:async function(e){const t=o(),n=r();if(t&&n&&confirm(i("table.confirmDeleteRecord")||"Delete this record?"))try{l(!0),await n.nodes.table.records.deleteRecord(t,e),await x(t),d(null)}catch(a){d(`${i("errors.failedToDelete")}: ${a}`)}finally{l(!1)}},clearRecords:S,setActiveViewId:C,setFilters:function(e){b(e);const t=o();t&&x(t)},setSorts:function(e){k(e);const t=o();t&&x(t)},createView:async function(e,t){const n=o(),a=r();if(n&&a)try{l(!0);const i=await a.nodes.views.createView(n,{name:e,type:t}),r={id:i.id,name:e,type:t,default:!1,filters:[],sorts:[],columns:[],groups:[]};q(()=>{_([...p(),r]),f(i.id),b([]),k([])})}catch(s){d(`${i("errors.failedToCreate")}: ${s}`)}finally{l(!1)}},updateView:async function(e,t){const n=o(),a=r();if(n&&a)try{l(!0),await a.nodes.views.updateView(n,e,t),_(p().map(n=>n.id===e?{...n,...t}:n)),e===m()&&(t.filters&&b(t.filters),t.sorts&&k(t.sorts),(t.filters||t.sorts)&&await x(n))}catch(s){d(`${i("errors.failedToSave")}: ${s}`)}finally{l(!1)}},deleteView:async function(e){const t=o(),n=r();if(t&&n&&confirm(i("table.confirmDeleteView")||"Delete this view?"))try{l(!0),await n.nodes.views.deleteView(t,e);const i=p().filter(t=>t.id!==e);if(_(i),m()===e){const e=i[0];C(e?e.id:void 0)}}catch(a){d(`${i("errors.failedToDelete")}: ${a}`)}finally{l(!1)}}};return n(ai.Provider,{value:I,get children(){return t.children}})};function li(){const e=i(ai);if(!e)throw new Error("useRecords must be used within a RecordsProvider");return e}const di="_container_1uha7_3",ci="_tabs_1uha7_7",ui="_tab_1uha7_7",hi="_active_1uha7_35",vi="_icon_1uha7_41",gi="_name_1uha7_46",pi="_defaultBadge_1uha7_52",_i="_addWrapper_1uha7_61",mi="_addButton_1uha7_65",fi="_dropdown_1uha7_81",wi="_overlay_1uha7_113",bi="_contextMenu_1uha7_119",yi="_deleteAction_1uha7_146";var ki=y("<div data-testid=view-type-menu><button data-testid=view-type-table><span></span></button><button data-testid=view-type-list><span></span></button><button data-testid=view-type-gallery><span></span></button><button data-testid=view-type-board><span>"),$i=y("<div>"),Si=y("<div><div><div><button data-testid=add-view-button>+"),Ci=y("<span>"),xi=y("<button><span></span><span>"),Ii=y("<div><button>");const qi={table:"‚ò∞",board:"‚ò∑",gallery:"‚ñ¶",list:"‚ò∞",calendar:"üìÖ"};function Ti(){const{t:t}=j(),{views:i,activeViewId:r,setActiveViewId:o,createView:a,deleteView:s}=li(),[l,d]=e(!1),[c,m]=e(null),[b,y]=e(null),k=e=>{const n=t("table.newView")||"New View";a(n,e),d(!1)},$=()=>{const e=c();e&&s(e.id),m(null),y(null)},S=()=>{d(!1),m(null),y(null)};return C=Si(),x=C.firstChild,I=x.firstChild,q=I.firstChild,u(x,n(_,{get each(){return i()},children:e=>{return i=xi(),a=i.firstChild,s=a.nextSibling,i.$$contextmenu=t=>((e,t)=>{e.preventDefault(),m(t),y({x:e.clientX,y:e.clientY})})(t,e),i.$$click=()=>{return t=e.id,void o(t);var t},u(a,()=>qi[e.type]||"‚ò∞"),u(s,()=>e.name),u(i,n(h,{get when(){return e.default},get children(){var e=Ci();return u(e,()=>t("table.defaultView")||"Default"),v(()=>g(e,pi)),e}}),null),v(t=>{var n=ui,o={[`${hi}`]:e.id===r()},l=e.name,d=vi,c=gi;return n!==t.e&&g(i,t.e=n),t.t=w(i,o,t.t),l!==t.a&&f(i,"title",t.a=l),d!==t.o&&g(a,t.o=d),c!==t.i&&g(s,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),i;var i,a,s}}),I),q.$$click=()=>d(!l()),u(I,n(h,{get when(){return l()},get children(){var e=ki(),n=e.firstChild,i=n.firstChild,r=n.nextSibling,o=r.firstChild,a=r.nextSibling,s=a.firstChild,l=a.nextSibling,d=l.firstChild;return n.$$click=()=>k("table"),u(i,()=>qi.table),u(n,()=>t("table.table"),null),r.$$click=()=>k("list"),u(o,()=>qi.list),u(r,()=>t("table.list"),null),a.$$click=()=>k("gallery"),u(s,()=>qi.gallery),u(a,()=>t("table.gallery"),null),l.$$click=()=>k("board"),u(d,()=>qi.board),u(l,()=>t("table.board"),null),v(t=>{var n=fi,r=vi,a=vi,l=vi,c=vi;return n!==t.e&&g(e,t.e=n),r!==t.t&&g(i,t.t=r),a!==t.a&&g(o,t.a=a),l!==t.o&&g(s,t.o=l),c!==t.i&&g(d,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}}),null),u(C,n(h,{get when(){return b()},children:e=>n(h,{get when(){return c()},get children(){return[(r=$i(),r.$$click=S,v(()=>g(r,wi)),r),(n=Ii(),i=n.firstChild,i.$$click=$,u(i,()=>t("common.delete")),v(t=>{var r=bi,o=`${e().x}px`,a=`${e().y}px`,s=yi;return r!==t.e&&g(n,t.e=r),o!==t.t&&p(n,"left",t.t=o),a!==t.a&&p(n,"top",t.a=a),s!==t.o&&g(i,t.o=s),t},{e:void 0,t:void 0,a:void 0,o:void 0}),n)];var n,i,r}})}),null),u(C,n(h,{get when(){return l()},get children(){var e=$i();return e.$$click=S,v(()=>g(e,wi)),e}}),null),v(e=>{var n=di,i=ci,r=_i,o=mi,a=t("table.newView")||"New View";return n!==e.e&&g(C,e.e=n),i!==e.t&&g(x,e.t=i),r!==e.a&&g(I,e.a=r),o!==e.o&&g(q,e.o=o),a!==e.i&&f(q,"title",e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),C;var C,x,I,q}l(["click","contextmenu"]);const Li="_settings_1ivbi_1",Ei="_header_1ivbi_7",zi="_backButton_1ivbi_20",Ni="_section_1ivbi_36",Ri="_table_1ivbi_45",Di="_roleSelect_1ivbi_63",Pi="_error_1ivbi_69",Oi="_success_1ivbi_77",Ai="_tabs_1ivbi_85",Bi="_activeTab_1ivbi_107",Wi="_settingsForm_1ivbi_112",ji="_formItem_1ivbi_119",Mi="_saveButton_1ivbi_138",Ui="_hint_1ivbi_157",Fi="_inviteSection_1ivbi_163",Vi="_inviteForm_1ivbi_167",Hi="_formGroup_1ivbi_178",Gi="_addRemoteSection_1ivbi_207",Ki="_actions_1ivbi_219",Yi="_smallButton_1ivbi_224",Ji="_deleteButtonSmall_1ivbi_238",Zi="_orgLink_1ivbi_252",Xi="_linkButton_1ivbi_266";var Qi=y("<button>"),er=y("<div>"),tr=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),nr=y("<h4>"),ir=y("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=editor></option><option value=viewer></option></select><button type=submit>"),rr=y("<section><h3>"),or=y("<form><div><label></label><input type=text required></div><button type=submit>"),ar=y("<section><h3></h3><div><p></p><button> ‚Üí"),sr=y("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),lr=y("<section><h3></h3><p>"),dr=y("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),cr=y("<p>"),ur=y("<select><option value=admin></option><option value=editor></option><option value=viewer>"),hr=y("<tr><td></td><td></td><td>"),vr=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function gr(t){const{t:i}=j(),{user:r,orgApi:o,wsApi:a}=jn(),[s,l]=e("members"),[d,p]=e([]),[m,w]=e([]),[b,y]=e(null),[k,$]=e(""),[S,C]=e(""),[x,I]=e(""),[q,T]=e("viewer"),[L,E]=e(""),[z,N]=e(""),[R,D]=e(!1),[P,O]=e(null),[A,B]=e(null),W=()=>r()?.workspace_role===$e,M=async()=>{const e=o();if(e)try{D(!0),O(null);const t=a();if("members"===s()&&W()){const[n,i]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);p(n.users?.filter(e=>!!e)||[]),w(i.invitations?.filter(e=>!!e)||[])}if("workspace"===s()&&t){const e=await t.workspaces.getWorkspace();E(e.name),N(e.name)}if("sync"===s()&&W()&&t)try{const e=await t.settings.git.getGitRemote();y(e)}catch{y(null)}}catch(t){O(`${i("errors.failedToLoad")}: ${t}`)}finally{D(!1)}};c(()=>{M()});const U=async e=>{e.preventDefault();const t=a();if(x()&&t)try{D(!0),await t.invitations.createWSInvitation({email:x(),role:q()}),I(""),B(i("success.invitationSent")||"Invitation sent successfully"),M()}catch(n){O(`${i("errors.failedToInvite")}: ${n}`)}finally{D(!1)}},F=async e=>{e.preventDefault();const t=a();if(t)try{D(!0),O(null),B(null),L()!==z()&&L().trim()&&await t.workspaces.updateWorkspace({name:L().trim()}),N(L().trim()),B(i("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(n){O(`${i("errors.failedToSave")}: ${n}`)}finally{D(!1)}},V=async e=>{e.preventDefault();const t=a();if(t)try{D(!0),O(null);const e=await t.settings.git.updateGitRemote({url:k(),token:S(),type:"custom",auth_type:S()?"token":"none"});y(e),B(i("success.remoteAdded")||"Git remote configured"),$(""),C("")}catch(n){O(`${i("errors.failedToAddRemote")}: ${n}`)}finally{D(!1)}},H=async()=>{const e=a();if(e)try{D(!0),O(null),B(null),await e.settings.git.pushGit(),B(i("success.pushSuccessful")||"Push successful"),M()}catch(t){O(`${i("errors.pushFailed")}: ${t}`)}finally{D(!1)}},G=async()=>{if(!confirm(i("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=a();if(e)try{D(!0),O(null),await e.settings.git.deleteGitRemote(),y(null),B(i("success.remoteRemoved")||"Remote removed")}catch(t){O(`${i("errors.failedToRemoveRemote")}: ${t}`)}finally{D(!1)}};return(()=>{var e=dr(),o=e.firstChild,c=o.firstChild;c.firstChild;var p=c.nextSibling,w=o.nextSibling,y=w.firstChild,z=y.nextSibling;return c.$$click=()=>t.onBack(),u(c,()=>i("common.back"),null),u(p,()=>i("settings.title")),y.$$click=()=>l("members"),u(y,()=>i("settings.members")),z.$$click=()=>l("workspace"),u(z,()=>i("settings.workspace")),u(w,n(h,{get when(){return W()},get children(){var e=Qi();return e.$$click=()=>l("sync"),u(e,()=>i("settings.gitSync")),v(()=>g(e,"sync"===s()?Bi:"")),e}}),null),u(e,n(h,{get when(){return P()},get children(){var e=er();return u(e,P),v(()=>g(e,Pi)),e}}),null),u(e,n(h,{get when(){return A()},get children(){var e=er();return u(e,A),v(()=>g(e,Oi)),e}}),null),u(e,n(h,{get when(){return"members"===s()},get children(){var e=rr(),t=e.firstChild;return u(t,()=>i("settings.members")),u(e,n(h,{get when(){return W()},get fallback(){return e=cr(),u(e,()=>i("settings.adminOnlyMembers")),e;var e},get children(){return[(k=tr(),$=k.firstChild,S=$.firstChild.firstChild,C=S.nextSibling,L=C.nextSibling,E=$.nextSibling,u(S,()=>i("settings.nameColumn")),u(C,()=>i("settings.emailColumn")),u(L,()=>i("settings.roleColumn")),u(E,n(_,{get each(){return d()},children:e=>{return t=hr(),o=t.firstChild,s=o.nextSibling,l=s.nextSibling,u(o,()=>e.name),u(s,()=>e.email),u(l,n(h,{get when(){return e.id!==r()?.id},get fallback(){return e.workspace_role},get children(){var t=ur(),n=t.firstChild,r=n.nextSibling,o=r.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const n=a();if(n)try{D(!0),await n.users.updateWSMemberRole({user_id:e,role:t}),B(i("success.roleUpdated")||"Role updated"),M()}catch(r){O(`${i("errors.failedToUpdateRole")}: ${r}`)}finally{D(!1)}})(e.id,t.target.value)),u(n,()=>i("settings.roleAdmin")),u(r,()=>i("settings.roleEditor")),u(o,()=>i("settings.roleViewer")),v(()=>g(t,Di)),v(()=>t.value=e.workspace_role),t}})),t;var t,o,s,l}})),v(()=>g(k,Ri)),k),(e=ir(),t=e.firstChild,o=t.firstChild,s=o.nextSibling,l=s.firstChild,c=l.nextSibling,p=c.firstChild,w=p.nextSibling,b=w.nextSibling,y=c.nextSibling,t.addEventListener("submit",U),u(o,()=>i("settings.inviteNewMember")),l.$$input=e=>I(e.target.value),c.addEventListener("change",e=>T(e.target.value)),u(p,()=>i("settings.roleAdmin")),u(w,()=>i("settings.roleEditor")),u(b,()=>i("settings.roleViewer")),u(y,()=>i("common.invite")),u(e,n(h,{get when(){return m().length>0},get children(){return[(l=nr(),u(l,()=>i("settings.pendingInvitations")),l),(e=tr(),t=e.firstChild,r=t.firstChild.firstChild,o=r.nextSibling,a=o.nextSibling,s=t.nextSibling,u(r,()=>i("settings.emailColumn")),u(o,()=>i("settings.roleColumn")),u(a,()=>i("settings.sentColumn")),u(s,n(_,{get each(){return m()},children:e=>{return t=hr(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,u(n,()=>e.email),u(i,()=>e.role),u(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>g(e,Ri)),e)];var e,t,r,o,a,s,l}}),null),v(n=>{var r=Fi,o=Vi,a=Hi,d=i("settings.emailPlaceholder")||"Email address",c=R();return r!==n.e&&g(e,n.e=r),o!==n.t&&g(t,n.t=o),a!==n.a&&g(s,n.a=a),d!==n.o&&f(l,"placeholder",n.o=d),c!==n.i&&(y.disabled=n.i=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>l.value=x()),v(()=>c.value=q()),e)];var e,t,o,s,l,c,p,w,b,y,k,$,S,C,L,E}}),null),v(()=>g(e,Ni)),e}}),null),u(e,n(h,{get when(){return"workspace"===s()},get children(){var e=ar(),r=e.firstChild,o=r.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.firstChild;return u(r,()=>i("settings.workspaceSettings")),u(e,n(h,{get when(){return W()},get fallback(){return e=cr(),u(e,()=>i("settings.adminOnlyWorkspace")),e;var e},get children(){var e=or(),t=e.firstChild,n=t.firstChild,r=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",F),u(n,()=>i("settings.workspaceName")),r.$$input=e=>E(e.target.value),u(o,()=>i("settings.saveWorkspaceSettings")),v(n=>{var i=Wi,r=ji,a=Mi,s=R();return i!==n.e&&g(e,n.e=i),r!==n.t&&g(t,n.t=r),a!==n.a&&g(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=L()),e}}),o),u(a,()=>i("settings.orgSettingsHint")),s.$$click=()=>t.onOpenOrgSettings(),u(s,()=>i("settings.openOrgSettings"),l),v(t=>{var n=Ni,i=Zi,r=Xi;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(o,t.t=i),r!==t.a&&g(s,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),u(e,n(h,{get when(){return"sync"===s()},get children(){var e=lr(),t=e.firstChild,r=t.nextSibling;return u(t,()=>i("settings.gitSynchronization")),u(r,()=>i("settings.gitSyncHint")),u(e,n(h,{get when(){return b()},children:e=>{const t=e().last_sync;return n=vr(),r=n.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,h=c.firstChild,p=h.nextSibling,u(o,()=>i("settings.urlColumn")),u(a,()=>i("settings.lastSyncColumn")),u(s,()=>i("common.actions")),u(l,()=>e().url),u(d,()=>t?new Date(t).toLocaleString():i("settings.never")),h.$$click=H,u(h,()=>i("common.push")),p.$$click=G,u(p,()=>i("common.remove")),v(e=>{var t=Ri,i=Ki,r=R(),o=Yi,a=R(),s=Ji;return t!==e.e&&g(n,e.e=t),i!==e.t&&g(c,e.t=i),r!==e.a&&(h.disabled=e.a=r),o!==e.o&&g(h,e.o=o),a!==e.i&&(p.disabled=e.i=a),s!==e.n&&g(p,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n;var n,r,o,a,s,l,d,c,h,p}}),null),u(e,n(h,{get when(){return!b()},get children(){var e=sr(),t=e.firstChild,n=t.nextSibling,r=n.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,h=s.nextSibling;return u(t,()=>i("settings.addNewRemote")),n.addEventListener("submit",V),u(o,()=>i("settings.repositoryUrl")),a.$$input=e=>$(e.target.value),u(l,()=>i("settings.personalAccessToken")),d.$$input=e=>C(e.target.value),u(c,()=>i("settings.tokenHint")),u(h,()=>i("settings.addRemote")),v(t=>{var o=Gi,l=Wi,u=ji,v=i("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",p=ji,_=i("settings.tokenPlaceholder")||"ghp_...",m=Ui,w=Mi,b=R();return o!==t.e&&g(e,t.e=o),l!==t.t&&g(n,t.t=l),u!==t.a&&g(r,t.a=u),v!==t.o&&f(a,"placeholder",t.o=v),p!==t.i&&g(s,t.i=p),_!==t.n&&f(d,"placeholder",t.n=_),m!==t.s&&g(c,t.s=m),w!==t.h&&g(h,t.h=w),b!==t.r&&(h.disabled=t.r=b),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>a.value=k()),v(()=>d.value=S()),e}}),null),v(t=>{var n=Ni,i=Ui;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),v(t=>{var n=Li,i=Ei,r=zi,a=Ai,l="members"===s()?Bi:"",d="workspace"===s()?Bi:"";return n!==t.e&&g(e,t.e=n),i!==t.t&&g(o,t.t=i),r!==t.a&&g(c,t.a=r),a!==t.o&&g(w,t.o=a),l!==t.i&&g(y,t.i=l),d!==t.n&&g(z,t.n=d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}l(["click","input"]);const pr="_settings_qni6l_1",_r="_header_qni6l_7",mr="_backButton_qni6l_20",fr="_section_qni6l_36",wr="_table_qni6l_45",br="_roleSelect_qni6l_63",yr="_error_qni6l_69",kr="_success_qni6l_77",$r="_tabs_qni6l_85",Sr="_activeTab_qni6l_107",Cr="_settingsForm_qni6l_112",xr="_formItem_qni6l_119",Ir="_saveButton_qni6l_138",qr="_inviteSection_qni6l_157",Tr="_inviteForm_qni6l_161",Lr="_formGroup_qni6l_172";var Er=y("<div>"),zr=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Nr=y("<h4>"),Rr=y("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=member></option></select><button type=submit>"),Dr=y("<section><h3>"),Pr=y("<form><div><label></label><input type=text required></div><button type=submit>"),Or=y("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),Ar=y("<p>"),Br=y("<select><option value=owner></option><option value=admin></option><option value=member>"),Wr=y("<tr><td></td><td></td><td>");function jr(t){const{t:i}=j(),{user:r,api:o}=jn(),[a,s]=e("members"),[l,d]=e([]),[p,m]=e([]),[w,b]=e(""),[y,k]=e("member"),[$,C]=e(""),[x,I]=e(""),[q,T]=e(!1),[L,E]=e(null),[z,N]=e(null),R=S(()=>o().org(t.orgId)),D=S(()=>{const e=r()?.organizations?.find(e=>e.organization_id===t.orgId);return e?.role}),P=S(()=>{const e=D();return e===ye||e===ke}),O=async()=>{const e=R();try{if(T(!0),E(null),"members"===a()&&P()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);d(t.users?.filter(e=>!!e)||[]),m(n.invitations?.filter(e=>!!e)||[])}if("settings"===a()){const t=await e.organizations.getOrganization();C(t.name),I(t.name)}}catch(t){E(`${i("errors.failedToLoad")}: ${t}`)}finally{T(!1)}};c(()=>{O()});const A=async e=>{e.preventDefault();const t=R();if(w())try{T(!0),await t.invitations.createOrgInvitation({email:w(),role:y()}),b(""),N(i("success.invitationSent")||"Invitation sent successfully"),O()}catch(n){E(`${i("errors.failedToInvite")}: ${n}`)}finally{T(!1)}},B=async e=>{e.preventDefault();const t=R();try{T(!0),E(null),N(null),$()!==x()&&$().trim()&&await t.organizations.updateOrganization({name:$().trim()}),I($().trim()),N(i("success.orgSettingsSaved")||"Organization settings saved")}catch(n){E(`${i("errors.failedToSave")}: ${n}`)}finally{T(!1)}};return(()=>{var e=Or(),o=e.firstChild,d=o.firstChild;d.firstChild;var c=d.nextSibling,m=o.nextSibling,S=m.firstChild,x=S.nextSibling;return d.$$click=()=>t.onBack(),u(d,()=>i("common.back"),null),u(c,()=>i("settings.organizationSettings")),S.$$click=()=>s("members"),u(S,()=>i("settings.members")),x.$$click=()=>s("settings"),u(x,()=>i("settings.settings")),u(e,n(h,{get when(){return L()},get children(){var e=Er();return u(e,L),v(()=>g(e,yr)),e}}),null),u(e,n(h,{get when(){return z()},get children(){var e=Er();return u(e,z),v(()=>g(e,kr)),e}}),null),u(e,n(h,{get when(){return"members"===a()},get children(){var e=Dr(),t=e.firstChild;return u(t,()=>i("settings.organizationMembers")),u(e,n(h,{get when(){return P()},get fallback(){return e=Ar(),u(e,()=>i("settings.adminOnlyMembers")),e;var e},get children(){return[(S=zr(),C=S.firstChild,x=C.firstChild.firstChild,I=x.nextSibling,L=I.nextSibling,z=C.nextSibling,u(x,()=>i("settings.nameColumn")),u(I,()=>i("settings.emailColumn")),u(L,()=>i("settings.roleColumn")),u(z,n(_,{get each(){return l()},children:e=>{return t=Wr(),o=t.firstChild,a=o.nextSibling,s=a.nextSibling,u(o,()=>e.name),u(a,()=>e.email),u(s,n(h,{get when(){return e.id!==r()?.id},get fallback(){return e.org_role},get children(){var t=Br(),n=t.firstChild,r=n.nextSibling,o=r.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const n=R();try{T(!0),await n.users.updateOrgMemberRole({user_id:e,role:t}),N(i("success.roleUpdated")||"Role updated"),O()}catch(r){E(`${i("errors.failedToUpdateRole")}: ${r}`)}finally{T(!1)}})(e.id,t.target.value)),u(n,()=>i("settings.roleOwner")),u(r,()=>i("settings.roleAdmin")),u(o,()=>i("settings.roleMember")),v(()=>g(t,br)),v(()=>t.value=e.org_role),t}})),t;var t,o,a,s}})),v(()=>g(S,wr)),S),(e=Rr(),t=e.firstChild,o=t.firstChild,a=o.nextSibling,s=a.firstChild,d=s.nextSibling,c=d.firstChild,m=c.nextSibling,$=d.nextSibling,t.addEventListener("submit",A),u(o,()=>i("settings.inviteNewMember")),s.$$input=e=>b(e.target.value),d.addEventListener("change",e=>k(e.target.value)),u(c,()=>i("settings.roleAdmin")),u(m,()=>i("settings.roleMember")),u($,()=>i("common.invite")),u(e,n(h,{get when(){return p().length>0},get children(){return[(l=Nr(),u(l,()=>i("settings.pendingInvitations")),l),(e=zr(),t=e.firstChild,r=t.firstChild.firstChild,o=r.nextSibling,a=o.nextSibling,s=t.nextSibling,u(r,()=>i("settings.emailColumn")),u(o,()=>i("settings.roleColumn")),u(a,()=>i("settings.sentColumn")),u(s,n(_,{get each(){return p()},children:e=>{return t=Wr(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,u(n,()=>e.email),u(i,()=>e.role),u(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>g(e,wr)),e)];var e,t,r,o,a,s,l}}),null),v(n=>{var r=qr,o=Tr,l=Lr,d=i("settings.emailPlaceholder")||"Email address",c=q();return r!==n.e&&g(e,n.e=r),o!==n.t&&g(t,n.t=o),l!==n.a&&g(a,n.a=l),d!==n.o&&f(s,"placeholder",n.o=d),c!==n.i&&($.disabled=n.i=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>s.value=w()),v(()=>d.value=y()),e)];var e,t,o,a,s,d,c,m,$,S,C,x,I,L,z}}),null),v(()=>g(e,fr)),e}}),null),u(e,n(h,{get when(){return"settings"===a()},get children(){var e=Dr(),t=e.firstChild;return u(t,()=>i("settings.organizationPreferences")),u(e,n(h,{get when(){return P()},get fallback(){return e=Ar(),u(e,()=>i("settings.adminOnlySettings")),e;var e},get children(){var e=Pr(),t=e.firstChild,n=t.firstChild,r=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",B),u(n,()=>i("settings.organizationName")),r.$$input=e=>C(e.target.value),u(o,()=>i("common.save")),v(n=>{var i=Cr,r=xr,a=Ir,s=q();return i!==n.e&&g(e,n.e=i),r!==n.t&&g(t,n.t=r),a!==n.a&&g(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=$()),e}}),null),v(()=>g(e,fr)),e}}),null),v(t=>{var n=pr,i=_r,r=mr,s=$r,l="members"===a()?Sr:"",c="settings"===a()?Sr:"";return n!==t.e&&g(e,t.e=n),i!==t.t&&g(o,t.t=i),r!==t.a&&g(d,t.a=r),s!==t.o&&g(m,t.o=s),l!==t.i&&g(S,t.i=l),c!==t.n&&g(x,t.n=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}l(["click","input"]);const Mr="_profile_179j3_1",Ur="_header_179j3_7",Fr="_backButton_179j3_20",Vr="_userInfoSection_179j3_36",Hr="_avatarLarge_179j3_46",Gr="_avatarImageLarge_179j3_58",Kr="_initialsLarge_179j3_64",Yr="_userDetails_179j3_70",Jr="_userName_179j3_74",Zr="_userEmail_179j3_80",Xr="_userRole_179j3_85",Qr="_section_179j3_95",eo="_error_179j3_104",to="_success_179j3_112",no="_settingsForm_179j3_120",io="_formItem_179j3_127",ro="_checkboxLabel_179j3_146",oo="_saveButton_179j3_159",ao="_orgList_179j3_178",so="_orgItem_179j3_184",lo="_orgInfo_179j3_194",co="_orgName_179j3_200",uo="_orgNameLink_179j3_204",ho="_orgRole_179j3_214",vo="_emptyState_179j3_223";var go=y("<div>"),po=y("<div><header><button>‚Üê </button><h2>"),_o=y("<span>"),mo=y("<section><div></div><div><h3></h3><p>"),fo=y("<section><h3>"),wo=y("<div><label><input type=checkbox>"),bo=y("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),yo=y("<img referrerpolicy=no-referrer>"),ko=y("<p>"),$o=y("<a>"),So=y("<div><div><span>");function Co(t){const{t:i}=j(),{user:r,api:o,wsApi:a}=jn(),[s,l]=e("light"),[d,p]=e("en"),[m,w]=e(!0),[b,y]=e(!1),[k,$]=e(null),[S,C]=e(null),x=()=>{const e=r(),t=e?.name||e?.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};c(()=>{const e=r();l(e?.settings?.theme||"light"),p(e?.settings?.language||"en")});c(()=>{(async()=>{const e=r();if(e)try{y(!0),$(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&w(t.settings?.notifications??!0)}catch(t){$(`${i("errors.failedToLoad")}: ${t}`)}finally{y(!1)}})()});const I=async e=>{e.preventDefault();const t=a();try{y(!0),$(null),C(null);const e={theme:s(),language:d()},n=[o().auth.updateUserSettings({settings:e})];if(t){const e={notifications:m()};n.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(n),C(i("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(n){$(`${i("errors.failedToSave")}: ${n}`)}finally{y(!1)}};return(()=>{var e=po(),o=e.firstChild,a=o.firstChild;a.firstChild;var c=a.nextSibling;return a.$$click=()=>t.onBack(),u(a,()=>i("common.back"),null),u(c,()=>i("profile.title")),u(e,n(h,{get when(){return k()},get children(){var e=go();return u(e,k),v(()=>g(e,eo)),e}}),null),u(e,n(h,{get when(){return S()},get children(){var e=go();return u(e,S),v(()=>g(e,to)),e}}),null),u(e,n(h,{get when(){return r()},children:e=>{return[(B=mo(),W=B.firstChild,j=W.nextSibling,M=j.firstChild,U=M.nextSibling,u(W,n(h,{get when(){return(()=>{const e=r()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=_o(),u(e,x),v(()=>g(e,Kr)),e;var e},children:t=>{return n=yo(),v(i=>{var r=t(),o=e().name||"User",a=Gr;return r!==i.e&&f(n,"src",i.e=r),o!==i.t&&f(n,"alt",i.t=o),a!==i.a&&g(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),u(M,()=>e().name),u(U,()=>e().email),u(j,n(h,{get when(){return e().workspace_role},get children(){var t=_o();return u(t,()=>e().workspace_role),v(()=>g(t,Xr)),t}}),null),v(e=>{var t=Vr,n=Hr,i=Yr,r=Jr,o=Zr;return t!==e.e&&g(B,e.e=t),n!==e.t&&g(W,e.t=n),i!==e.a&&g(j,e.a=i),r!==e.o&&g(M,e.o=r),o!==e.i&&g(U,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),B),(O=fo(),A=O.firstChild,u(A,()=>i("profile.myOrganizations")),u(O,n(h,{get when(){return e().organizations?.length},get fallback(){return e=ko(),u(e,()=>i("profile.noOrganizations")),v(()=>g(e,vo)),e;var e},get children(){var i=go();return u(i,n(_,{get each(){return e().organizations},children:e=>{const i=Mn(e.organization_name||"organization"),r=`/o/${e.organization_id}+${i}/settings`,o=e.organization_name||e.organization_id;return a=So(),s=a.firstChild,l=s.firstChild,u(s,n(h,{get when(){return e.role===ke||e.role===ye},get fallback(){return e=_o(),u(e,o),v(()=>g(e,co)),e;var e},get children(){var n=$o();return n.$$click=n=>{n.preventDefault(),t.onOrgSettings(e)},f(n,"href",r),u(n,o),v(()=>g(n,uo)),n}}),l),u(l,()=>e.role),v(e=>{var t=so,n=lo,i=ho;return t!==e.e&&g(a,e.e=t),n!==e.t&&g(s,e.t=n),i!==e.a&&g(l,e.a=i),e},{e:void 0,t:void 0,a:void 0}),a;var a,s,l}})),v(()=>g(i,ao)),i}}),null),v(()=>g(O,Qr)),O),(o=bo(),a=o.firstChild,c=a.nextSibling,y=c.firstChild,k=y.firstChild,$=k.nextSibling,S=$.firstChild,C=S.nextSibling,q=C.nextSibling,T=y.nextSibling,L=T.firstChild,E=L.nextSibling,z=E.firstChild,N=z.nextSibling,R=N.nextSibling,D=R.nextSibling,P=T.nextSibling,u(a,()=>i("settings.personalSettings")),c.addEventListener("submit",I),u(k,()=>i("settings.theme")),$.addEventListener("change",e=>l(e.target.value)),u(S,()=>i("settings.themeLight")),u(C,()=>i("settings.themeDark")),u(q,()=>i("settings.themeSystem")),u(L,()=>i("settings.language")),E.addEventListener("change",e=>p(e.target.value)),u(z,()=>i("settings.languageEn")),u(N,()=>i("settings.languageFr")),u(R,()=>i("settings.languageDe")),u(D,()=>i("settings.languageEs")),u(c,n(h,{get when(){return e().workspace_id},get children(){var e=wo(),t=e.firstChild,n=t.firstChild;return n.addEventListener("change",e=>w(e.currentTarget.checked)),u(t,()=>i("settings.enableNotifications"),null),v(n=>{var i=io,r=ro;return i!==n.e&&g(e,n.e=i),r!==n.t&&g(t,n.t=r),n},{e:void 0,t:void 0}),v(()=>n.checked=m()),e}}),P),u(P,()=>i("settings.saveChanges")),v(e=>{var t=Qr,n=no,i=io,r=io,a=oo,s=b();return t!==e.e&&g(o,e.e=t),n!==e.t&&g(c,e.t=n),i!==e.a&&g(y,e.a=i),r!==e.o&&g(T,e.o=r),a!==e.i&&g(P,e.i=a),s!==e.n&&(P.disabled=e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>$.value=s()),v(()=>E.value=d()),o)];var o,a,c,y,k,$,S,C,q,T,L,E,z,N,R,D,P,O,A,B,W,j,M,U}}),null),v(t=>{var n=Mr,i=Ur,r=Fr;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(o,t.t=i),r!==t.a&&g(a,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e})()}l(["click"]);const xo="_authContainer_1ksl8_1",Io="_authForm_1ksl8_9",qo="_formGroup_1ksl8_24",To="_error_1ksl8_62",Lo="_toggle_1ksl8_72",Eo="_authFooter_1ksl8_87",zo="_oauthSection_1ksl8_104",No="_divider_1ksl8_108",Ro="_oauthButtons_1ksl8_127",Do="_oauthIcon_1ksl8_133",Po="_googleButton_1ksl8_140",Oo="_microsoftButton_1ksl8_141",Ao="_githubButton_1ksl8_142",Bo="_oauthButton_1ksl8_127";var Wo=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),jo=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),Mo=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),Uo=y("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),Fo=y("<div><div><span></span></div><div>"),Vo=y("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),Ho=y("<div>"),Go=y("<a>");const Ko={[Se]:function(){return e=Wo(),v(()=>f(e,"class",Do)),e;var e},[Ce]:function(){return e=jo(),v(()=>f(e,"class",Do)),e;var e},[xe]:function(){return e=Mo(),v(()=>f(e,"class",Do)),e;var e}},Yo={[Se]:{style:Po,labelKey:"auth.loginWithGoogle"},[Ce]:{style:Oo,labelKey:"auth.loginWithMicrosoft"},[xe]:{style:Ao,labelKey:"auth.loginWithGitHub"}};const Jo=Ln((e,t)=>fetch(e,t));function Zo(i){const{t:r}=j(),[o]=t(()=>Jo.auth.listProviders().then(e=>e.providers)),[a,s]=e(!1),[l,d]=e(""),[c,p]=e(""),[w,b]=e(""),[y,k]=e(null),[$,S]=e(!1),C=async e=>{e.preventDefault(),k(null),S(!0);try{const e=a()?await Jo.auth.register({email:l(),password:c(),name:w()}):await Jo.auth.login({email:l(),password:c()});e.token&&e.user?i.onLogin(e.token,e.user):k("Invalid response from server")}catch(t){k(t instanceof In?t.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{S(!1)}};return E=Vo(),z=E.firstChild,N=z.firstChild,R=N.nextSibling,D=R.firstChild,P=D.nextSibling,O=R.nextSibling,A=O.firstChild,B=A.nextSibling,W=O.nextSibling,M=W.nextSibling,U=M.firstChild,F=M.nextSibling,V=F.firstChild,z.addEventListener("submit",C),u(N,(x=m(()=>!!a()),()=>x()?r("auth.createAccount"):r("auth.loginTitle"))),u(z,(I=m(()=>!!y()),()=>{return I()&&(e=Ho(),u(e,y),v(()=>g(e,To)),e);var e}),R),u(z,n(h,{get when(){return a()},get children(){var e=Uo(),t=e.firstChild,n=t.nextSibling;return u(t,()=>r("auth.name")),n.$$input=e=>b(e.target.value),v(()=>g(e,qo)),v(()=>n.value=w()),e}}),R),u(D,()=>r("auth.email")),P.$$input=e=>d(e.target.value),u(A,()=>r("auth.password")),B.$$input=e=>p(e.target.value),u(W,(q=m(()=>!!$()),()=>q()?r("auth.pleaseWait"):m(()=>!!a())()?r("auth.register"):r("auth.login"))),u(z,n(h,{get when(){return(o()??[]).length>0},get children(){var e=Fo(),t=e.firstChild,i=t.firstChild,a=t.nextSibling;return u(i,()=>r("auth.or")),u(a,n(_,{get each(){return o()},children:e=>{const t=function(e){const t=Yo[e];return t?{style:t.style,label:t.labelKey}:{style:Bo,label:e.charAt(0).toUpperCase()+e.slice(1)}}(e),i=e in Yo,o=Ko[e];return a=Go(),f(a,"href",`/api/auth/oauth/${e}`),u(a,o&&n(o,{}),null),u(a,()=>i?r(t.label):t.label,null),v(()=>g(a,t.style)),a;var a}})),v(n=>{var i=zo,r=No,o=Ro;return i!==n.e&&g(e,n.e=i),r!==n.t&&g(t,n.t=r),o!==n.a&&g(a,n.a=o),n},{e:void 0,t:void 0,a:void 0}),e}}),M),u(M,(T=m(()=>!!a()),()=>T()?r("auth.alreadyHaveAccount"):r("auth.dontHaveAccount")),U),U.$$click=()=>s(!a()),u(U,(L=m(()=>!!a()),()=>L()?r("auth.login"):r("auth.register"))),V.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},u(V,()=>r("app.privacyPolicy")),v(e=>{var t=xo,n=Io,i=qo,r=qo,o=a()?"new-password":"current-password",s=$(),l=Lo,d=Eo;return t!==e.e&&g(E,e.e=t),n!==e.t&&g(z,e.t=n),i!==e.a&&g(R,e.a=i),r!==e.o&&g(O,e.o=r),o!==e.i&&f(B,"autocomplete",e.i=o),s!==e.n&&(W.disabled=e.n=s),l!==e.s&&g(M,e.s=l),d!==e.h&&g(F,e.h=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),v(()=>P.value=l()),v(()=>B.value=c()),E;var x,I,q,T,L,E,z,N,R,D,P,O,A,B,W,M,U,F,V}l(["input","click"]);const Xo="_container_mfa6v_1",Qo="_content_mfa6v_9",ea="_header_mfa6v_19",ta="_section_mfa6v_36",na="_footer_mfa6v_49",ia="_backButton_mfa6v_57";var ra=y("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and tables are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function oa(){return e=ra(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(l=s.firstChild).$$click=()=>window.history.back(),v(d=>{var c=Xo,u=Qo,h=ea,v=ta,p=ta,_=ta,m=ta,f=na,w=ia;return c!==d.e&&g(e,d.e=c),u!==d.t&&g(t,d.t=u),h!==d.a&&g(n,d.a=h),v!==d.o&&g(i,d.o=v),p!==d.i&&g(r,d.i=p),_!==d.n&&g(o,d.n=_),m!==d.s&&g(a,d.s=m),f!==d.h&&g(s,d.h=f),w!==d.r&&g(l,d.r=w),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,n,i,r,o,a,s,l}l(["click"]);const aa="_container_mfa6v_1",sa="_content_mfa6v_9",la="_header_mfa6v_19",da="_section_mfa6v_36",ca="_footer_mfa6v_49",ua="_backButton_mfa6v_57";var ha=y("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, data, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the ‚ÄúContent‚Äù) and the trademarks, service marks, and logos contained therein (the ‚ÄúMarks‚Äù) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function va(){return e=ha(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,(d=l.firstChild).$$click=()=>window.history.back(),v(c=>{var u=aa,h=sa,v=la,p=da,_=da,m=da,f=da,w=da,b=ca,y=ua;return u!==c.e&&g(e,c.e=u),h!==c.t&&g(t,c.t=h),v!==c.a&&g(n,c.a=v),p!==c.o&&g(i,c.o=p),_!==c.i&&g(r,c.i=_),m!==c.n&&g(o,c.n=m),f!==c.s&&g(a,c.s=f),w!==c.h&&g(s,c.h=w),b!==c.r&&g(l,c.r=b),y!==c.d&&g(d,c.d=y),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,n,i,r,o,a,s,l,d}l(["click"]);const ga="_banner_172qk_1",pa="_content_172qk_23",_a="_title_172qk_27",ma="_message_172qk_32",fa="_actions_172qk_37",wa="_installButton_172qk_42",ba="_dismissButton_172qk_56";var ya=y("<div><div><div></div><div></div></div><div><button></button><button>");const ka="mddb_pwa_dismissed";function $a(){const{t:t}=j(),[i,r]=e(null),[o,a]=e(!1);C(()=>{if(function(){const e=localStorage.getItem(ka);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),r(e),a(!0)},t=()=>{a(!1),r(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),L(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=i();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),r(null)},l=()=>{localStorage.setItem(ka,(new Date).toISOString()),a(!1)};return n(h,{get when(){return m(()=>!!o())()&&i()},get children(){var e=ya(),n=e.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,a=o.firstChild,d=a.nextSibling;return u(i,()=>t("pwa.installTitle")),u(r,()=>t("pwa.installMessage")),a.$$click=l,u(a,()=>t("pwa.dismissButton")),d.$$click=s,u(d,()=>t("pwa.installButton")),v(t=>{var s=ga,l=pa,c=_a,u=ma,h=fa,v=ba,p=wa;return s!==t.e&&g(e,t.e=s),l!==t.t&&g(n,t.t=l),c!==t.a&&g(i,t.a=c),u!==t.o&&g(r,t.o=u),h!==t.i&&g(o,t.i=h),v!==t.n&&g(a,t.n=v),p!==t.s&&g(d,t.s=p),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}})}l(["click"]);const Sa="_overlay_v0iwf_1",Ca="_modal_v0iwf_11",xa="_header_v0iwf_28",Ia="_formGroup_v0iwf_53",qa="_primaryButton_v0iwf_76",Ta="_secondaryButton_v0iwf_99",La="_actions_v0iwf_113",Ea="_error_v0iwf_127";var za=y("<button type=button>"),Na=y("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Ra=y("<div>");function Da(t){const{t:i}=j(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},p=e=>{t.isFirstOrg||e.target!==e.currentTarget||t.onClose()};return k=Na(),$=k.firstChild,S=$.firstChild,C=S.firstChild,x=C.nextSibling,I=S.nextSibling,q=I.firstChild,T=q.firstChild,L=T.nextSibling,z=q.nextSibling,N=z.firstChild,k.$$click=p,u(C,(_=m(()=>!!t.isFirstOrg),()=>_()?i("createOrg.firstOrgTitle"):i("createOrg.title"))),u(x,(w=m(()=>!!t.isFirstOrg),()=>w()?i("createOrg.firstOrgDescription"):i("createOrg.description"))),u($,(b=m(()=>!!l()),()=>{return b()&&(e=Ra(),u(e,l),v(()=>g(e,Ea)),e);var e}),I),I.addEventListener("submit",c),u(T,()=>i("createOrg.nameLabel")),L.$$input=e=>o(e.target.value),u(z,n(h,{get when(){return!t.isFirstOrg},get children(){var e=za();return e.$$click=()=>t.onClose(),u(e,()=>i("common.cancel")),v(()=>g(e,Ta)),e}}),N),u(N,(y=m(()=>!!a()),()=>y()?i("common.creating"):i("createOrg.create"))),v(e=>{var n=Sa,o=Ca,s=xa,l=Ia,d=i("createOrg.namePlaceholder")||"",c=La,u=qa,h=!r().trim()||a(),v=t.isFirstOrg?{flex:1}:void 0;return n!==e.e&&g(k,e.e=n),o!==e.t&&g($,e.t=o),s!==e.a&&g(S,e.a=s),l!==e.o&&g(q,e.o=l),d!==e.i&&f(L,"placeholder",e.i=d),c!==e.n&&g(z,e.n=c),u!==e.s&&g(N,e.s=u),h!==e.h&&(N.disabled=e.h=h),e.r=E(N,v,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>L.value=r()),k;var _,w,b,y,k,$,S,C,x,I,q,T,L,z,N}l(["click","input"]);var Pa=y("<button type=button>"),Oa=y("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Aa=y("<div>");function Ba(t){const{t:i}=j(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},p=e=>{t.isFirstWorkspace||e.target!==e.currentTarget||t.onClose()};return k=Oa(),$=k.firstChild,S=$.firstChild,C=S.firstChild,x=C.nextSibling,I=S.nextSibling,q=I.firstChild,T=q.firstChild,L=T.nextSibling,z=q.nextSibling,N=z.firstChild,k.$$click=p,u(C,(_=m(()=>!!t.isFirstWorkspace),()=>_()?i("createWorkspace.firstWorkspaceTitle"):i("createWorkspace.title"))),u(x,(w=m(()=>!!t.isFirstWorkspace),()=>w()?i("createWorkspace.firstWorkspaceDescription"):i("createWorkspace.description"))),u($,(b=m(()=>!!l()),()=>{return b()&&(e=Aa(),u(e,l),v(()=>g(e,Ea)),e);var e}),I),I.addEventListener("submit",c),u(T,()=>i("createWorkspace.nameLabel")),L.$$input=e=>o(e.target.value),u(z,n(h,{get when(){return!t.isFirstWorkspace},get children(){var e=Pa();return e.$$click=()=>t.onClose(),u(e,()=>i("common.cancel")),v(()=>g(e,Ta)),e}}),N),u(N,(y=m(()=>!!a()),()=>y()?i("common.creating"):i("createWorkspace.create"))),v(e=>{var n=Sa,o=Ca,s=xa,l=Ia,d=i("createWorkspace.namePlaceholder")||"",c=La,u=qa,h=!r().trim()||a(),v=t.isFirstWorkspace?{flex:1}:void 0;return n!==e.e&&g(k,e.e=n),o!==e.t&&g($,e.t=o),s!==e.a&&g(S,e.a=s),l!==e.o&&g(q,e.o=l),d!==e.i&&f(L,"placeholder",e.i=d),c!==e.n&&g(z,e.n=c),u!==e.s&&g(N,e.s=u),h!==e.h&&(N.disabled=e.h=h),e.r=E(N,v,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>L.value=r()),k;var _,w,b,y,k,$,S,C,x,I,q,T,L,z,N}l(["click","input"]);const Wa="_overlay_1l8b3_1",ja="_modal_1l8b3_11",Ma="_header_1l8b3_28",Ua="_error_1l8b3_43",Fa="_setupBox_1l8b3_53",Va="_setupHeader_1l8b3_61",Ha="_setupTitle_1l8b3_70",Ga="_createLink_1l8b3_75",Ka="_setupSteps_1l8b3_93",Ya="_subSteps_1l8b3_109",Ja="_formGroup_1l8b3_119",Za="_actions_1l8b3_137",Xa="_primaryButton_1l8b3_143",Qa="_secondaryButton_1l8b3_166";var es=y('<div><div><header><h2></h2><p></p></header><div><div><span></span><a href=https://www.notion.so/profile/integrations/form/new-integration target=_blank rel="noopener noreferrer"> &#x2197;</a></div><ol><li><ol><li></li><li></li><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li></ol></div><form><div><label></label><input type=password autofocus></div><div><button type=button></button><button type=submit>'),ts=y("<div>");function ns(t){const{t:n}=j(),[i,r]=e(""),[o,a]=e(!1),[s,l]=e(null),d=e=>{"Escape"!==e.key||o()||t.onClose()};C(()=>{document.addEventListener("keydown",d)}),L(()=>{document.removeEventListener("keydown",d)});const c=async e=>{if(e.preventDefault(),i().trim())try{a(!0),l(null),await t.onImport({notionToken:i().trim()}),t.onClose()}catch(n){l(String(n))}finally{a(!1)}},h=e=>{e.target===e.currentTarget&&t.onClose()};return w=es(),b=w.firstChild,y=b.firstChild,k=y.firstChild,$=k.nextSibling,S=y.nextSibling,x=S.firstChild,I=x.firstChild,q=I.nextSibling,T=q.firstChild,E=x.nextSibling,z=E.firstChild,N=z.firstChild,R=N.firstChild,D=R.nextSibling,P=D.nextSibling,O=P.nextSibling,A=z.nextSibling,B=A.firstChild,W=B.firstChild,M=W.nextSibling,U=A.nextSibling,F=U.firstChild,V=F.firstChild,H=V.nextSibling,G=S.nextSibling,K=G.firstChild,Y=K.firstChild,J=Y.nextSibling,Z=K.nextSibling,X=Z.firstChild,Q=X.nextSibling,w.$$click=h,u(k,()=>n("notionImport.title")),u($,()=>n("notionImport.description")),u(b,(p=m(()=>!!s()),()=>{return p()&&(e=ts(),u(e,s),v(()=>g(e,Ua)),e);var e}),S),u(I,()=>n("notionImport.setupTitle")),u(q,()=>n("notionImport.createIntegration"),T),u(z,()=>n("notionImport.step1Header"),N),u(R,()=>n("notionImport.step1a")),u(D,()=>n("notionImport.step1b")),u(P,()=>n("notionImport.step1c")),u(O,()=>n("notionImport.step1d")),u(A,()=>n("notionImport.step2Header"),B),u(W,()=>n("notionImport.step2a")),u(M,()=>n("notionImport.step2b")),u(U,()=>n("notionImport.step3Header"),F),u(V,()=>n("notionImport.step3a")),u(H,()=>n("notionImport.step3b")),G.addEventListener("submit",c),u(Y,()=>n("notionImport.notionToken")),J.$$input=e=>r(e.target.value),X.$$click=()=>t.onClose(),u(X,()=>n("common.cancel")),u(Q,(_=m(()=>!!o()),()=>_()?n("notionImport.importing"):n("notionImport.startImport"))),v(e=>{var t=Wa,r=ja,a=Ma,s=Fa,l=Va,d=Ha,c=Ga,u=Ka,h=Ya,v=Ya,p=Ya,_=Ja,m=n("notionImport.notionTokenPlaceholder")||"",k=Za,$=Qa,C=Xa,T=!i().trim()||o();return t!==e.e&&g(w,e.e=t),r!==e.t&&g(b,e.t=r),a!==e.a&&g(y,e.a=a),s!==e.o&&g(S,e.o=s),l!==e.i&&g(x,e.i=l),d!==e.n&&g(I,e.n=d),c!==e.s&&g(q,e.s=c),u!==e.h&&g(E,e.h=u),h!==e.r&&g(N,e.r=h),v!==e.d&&g(B,e.d=v),p!==e.l&&g(F,e.l=p),_!==e.u&&g(K,e.u=_),m!==e.c&&f(J,"placeholder",e.c=m),k!==e.w&&g(Z,e.w=k),$!==e.m&&g(X,e.m=$),C!==e.f&&g(Q,e.f=C),T!==e.y&&(Q.disabled=e.y=T),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),v(()=>J.value=i()),w;var p,_,w,b,y,k,$,S,x,I,q,T,E,z,N,R,D,P,O,A,B,W,M,U,F,V,H,G,K,Y,J,Z,X,Q}l(["click","input"]);const is="_banner_tmw21_1",rs="_success_tmw21_11",os="_error_tmw21_16",as="_cancelled_tmw21_21",ss="_icon_tmw21_26",ls="_content_tmw21_30",ds="_message_tmw21_37",cs="_progress_tmw21_41",us="_stats_tmw21_46",hs="_stat_tmw21_46",vs="_statValue_tmw21_58",gs="_actions_tmw21_63",ps="_cancelButton_tmw21_68",_s="_dismissButton_tmw21_82",ms="_spinner_tmw21_95";var fs=y("<span>&#x21BB;"),ws=y("<span>&#x2713;"),bs=y("<span>&#x2717;"),ys=y("<span>&#x26A0;"),ks=y("<span>/<!>: "),$s=y("<span><span></span> "),Ss=y("<div>"),Cs=y("<span>"),xs=y("<button>"),Is=y("<div><span></span><div><span></span></div><div>");function qs(e){const{t:t}=j(),i=()=>e.status,r=()=>{switch(i().status){case"running":return t("notionImport.importInProgress");case"completed":return t("notionImport.importCompleted");case"failed":return t("notionImport.importFailed");case"cancelled":return t("notionImport.importCancelled");default:return""}},o=()=>{switch(i().status){case"running":return e=fs(),v(()=>g(e,ms)),e;case"completed":return ws();case"failed":return bs();case"cancelled":return ys();default:return null}var e},a=()=>["completed","failed","cancelled"].includes(i().status);return s=Is(),l=s.firstChild,d=l.nextSibling,c=d.firstChild,p=d.nextSibling,u(l,o),u(c,r),u(d,n(h,{get when(){return m(()=>"running"===i().status)()&&i().message},get children(){var e=ks(),t=e.firstChild,n=t.nextSibling;return n.nextSibling,u(e,()=>i().progress,t),u(e,()=>i().total,n),u(e,()=>i().message,null),v(()=>g(e,cs)),e}}),null),u(d,n(h,{get when(){return m(()=>!!a())()&&(i().pages||i().databases||i().records)},get children(){var e=Ss();return u(e,n(h,{get when(){return i().pages},get children(){var e=$s(),n=e.firstChild;return n.nextSibling,u(n,()=>i().pages),u(e,()=>t("notionImport.pagesImported"),null),v(t=>{var i=hs,r=vs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),u(e,n(h,{get when(){return i().databases},get children(){var e=$s(),n=e.firstChild;return n.nextSibling,u(n,()=>i().databases),u(e,()=>t("notionImport.databasesImported"),null),v(t=>{var i=hs,r=vs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),u(e,n(h,{get when(){return i().records},get children(){var e=$s(),n=e.firstChild;return n.nextSibling,u(n,()=>i().records),u(e,()=>t("notionImport.recordsImported"),null),v(t=>{var i=hs,r=vs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),u(e,n(h,{get when(){return i().assets},get children(){var e=$s(),n=e.firstChild;return n.nextSibling,u(n,()=>i().assets),u(e,()=>t("notionImport.assetsImported"),null),v(t=>{var i=hs,r=vs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),u(e,n(h,{get when(){return i().errors},get children(){var e=$s(),n=e.firstChild;return n.nextSibling,u(n,()=>i().errors),u(e,()=>t("notionImport.errorsEncountered"),null),v(t=>{var i=hs,r=vs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(()=>g(e,us)),e}}),null),u(d,n(h,{get when(){return m(()=>"failed"===i().status)()&&i().message},get children(){var e=Cs();return u(e,()=>i().message),v(()=>g(e,cs)),e}}),null),u(p,n(h,{get when(){return"running"===i().status},get children(){var n=xs();return n.$$click=()=>e.onCancel(),u(n,()=>t("notionImport.cancel")),v(()=>g(n,ps)),n}}),null),u(p,n(h,{get when(){return a()},get children(){var n=xs();return n.$$click=()=>e.onDismiss(),u(n,()=>t("notionImport.dismiss")),v(()=>g(n,_s)),n}}),null),v(e=>{var t=(()=>{switch(i().status){case"completed":return`${is} ${rs}`;case"failed":return`${is} ${os}`;case"cancelled":return`${is} ${as}`;default:return is}})(),n=ss,r=ls,o=ds,a=gs;return t!==e.e&&g(s,e.e=t),n!==e.t&&g(l,e.t=n),r!==e.a&&g(d,e.a=r),o!==e.o&&g(c,e.o=o),a!==e.i&&g(p,e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s;var s,l,d,c,p}function Ts(e,t){C(()=>{const n=n=>{const i=e();i&&!i.contains(n.target)&&t()};document.addEventListener("mousedown",n),L(()=>{document.removeEventListener("mousedown",n)})})}l(["click"]);const Ls="_userMenu_o60yu_1",Es="_avatarButton_o60yu_5",zs="_avatarImage_o60yu_24",Ns="_initials_o60yu_30",Rs="_dropdown_o60yu_37",Ds="_userInfo_o60yu_50",Ps="_userName_o60yu_57",Os="_userEmail_o60yu_63",As="_userRole_o60yu_68",Bs="_divider_o60yu_78",Ws="_menuItem_o60yu_83";var js=y("<span>"),Ms=y("<div role=menu><div><span></span><span></span></div><div></div><button role=menuitem></button><button role=menuitem>"),Us=y("<div><button aria-haspopup=menu>"),Fs=y("<img referrerpolicy=no-referrer>");function Vs(t){const{t:i}=j(),{user:r,logout:o}=jn(),[a,s]=e(!1);let l;const d=()=>{const e=r();if(!e)return"";const t=e.name||e.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},c=()=>r()?.name||"",p=()=>r()?.email||"",_=()=>r()?.workspace_role;Ts(()=>l,()=>s(!1));const m=()=>{s(!1),o()},w=()=>{s(!1),t.onProfile()};return b=Us(),y=b.firstChild,"function"==typeof l?$(l,b):l=b,y.$$click=()=>s(!a()),u(y,n(h,{get when(){return(()=>{const e=r();if(!e)return null;const t=e.oauth_identities;if(!t)return null;for(const n of t)if(n.avatar_url)return n.avatar_url;return null})()},get fallback(){return e=js(),u(e,d),v(()=>g(e,Ns)),e;var e},children:e=>{return t=Fs(),v(n=>{var i=e(),r=c()||"User",o=zs;return i!==n.e&&f(t,"src",n.e=i),r!==n.t&&f(t,"alt",n.t=r),o!==n.a&&g(t,n.a=o),n},{e:void 0,t:void 0,a:void 0}),t;var t}})),u(b,n(h,{get when(){return a()},get children(){var e=Ms(),t=e.firstChild,r=t.firstChild,o=r.nextSibling,a=t.nextSibling,s=a.nextSibling,l=s.nextSibling;return u(r,c),u(o,p),u(t,n(h,{get when(){return _()},get children(){var e=js();return u(e,_),v(()=>g(e,As)),e}}),null),s.$$click=w,u(s,()=>i("userMenu.profile")),l.$$click=m,u(l,()=>i("userMenu.logout")),v(n=>{var i=Rs,d=Ds,c=Ps,u=Os,h=Bs,v=Ws,p=Ws;return i!==n.e&&g(e,n.e=i),d!==n.t&&g(t,n.t=d),c!==n.a&&g(r,n.a=c),u!==n.o&&g(o,n.o=u),h!==n.i&&g(a,n.i=h),v!==n.n&&g(s,n.n=v),p!==n.s&&g(l,n.s=p),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),v(e=>{var t=Ls,n=Es,r=c()||p(),o=i("userMenu.profile")||"User menu",s=a();return t!==e.e&&g(b,e.e=t),n!==e.t&&g(y,e.t=n),r!==e.a&&f(y,"title",e.a=r),o!==e.o&&f(y,"aria-label",e.o=o),s!==e.i&&f(y,"aria-expanded",e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),b;var b,y}l(["click"]);const Hs="_wsMenu_1kkrz_1",Gs="_wsButton_1kkrz_5",Ks="_wsName_1kkrz_23",Ys="_chevron_1kkrz_31",Js="_dropdown_1kkrz_36",Zs="_wsList_1kkrz_49",Xs="_orgHeader_1kkrz_54",Qs="_wsItem_1kkrz_65",el="_active_1kkrz_84",tl="_wsItemName_1kkrz_88",nl="_checkmark_1kkrz_94",il="_divider_1kkrz_99",rl="_menuItem_1kkrz_104",ol="_icon_1kkrz_123",al="_plusIcon_1kkrz_127";var sl=y("<div role=menu><div></div><div></div><button role=menuitem><span aria-hidden=true>‚öô</span></button><button role=menuitem><span aria-hidden=true>+</span></button><button role=menuitem><span aria-hidden=true>&#x2B07;"),ll=y("<div><button aria-haspopup=menu><span></span><span aria-hidden=true>"),dl=y("<div>"),cl=y("<span aria-hidden=true>‚úì"),ul=y("<button role=menuitem><span>");function hl(t){const{t:i}=j(),{user:r}=jn(),{switchWorkspace:o}=Yn(),[a,s]=e(!1);let l;const d=S(()=>{const e=r();if(!e)return[];const t=new Map,n=e.organizations||[],i=e.workspaces||[];for(const r of n)t.set(r.organization_id,{orgId:r.organization_id,orgName:r.organization_name||r.organization_id,workspaces:[]});for(const r of i){const e=t.get(r.organization_id);e&&e.workspaces.push(r)}return Array.from(t.values()).filter(e=>e.workspaces.length>0)}),c=()=>r()?.workspace_id||"",p=()=>{const e=r();if(!e)return i("app.workspace");const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);return t?.workspace_name||i("app.workspace")};Ts(()=>l,()=>s(!1));const m=()=>{s(!1),t.onOpenSettings()},w=()=>{s(!1),t.onCreateWorkspace()},b=()=>{s(!1),t.onImportFromNotion()},y=S(()=>d().length>1);return k=ll(),C=k.firstChild,x=C.firstChild,I=x.nextSibling,"function"==typeof l?$(l,k):l=k,C.$$click=()=>s(!a()),u(x,p),u(I,()=>a()?"‚ñ≤":"‚ñº"),u(k,n(h,{get when(){return a()},get children(){var e=sl(),r=e.firstChild,a=r.nextSibling,l=a.nextSibling,p=l.firstChild,f=l.nextSibling,k=f.firstChild,$=f.nextSibling,S=$.firstChild;return u(r,n(_,{get each(){return d()},children:e=>[n(h,{get when(){return y()},get children(){var t=dl();return u(t,()=>e.orgName),v(()=>g(t,Xs)),t}}),n(_,{get each(){return e.workspaces},children:e=>{return i=ul(),r=i.firstChild,i.$$click=()=>{return n=e.workspace_id,s(!1),t.onSwitchWorkspace?.(),void(n!==c()&&o(n));var n},u(r,()=>e.workspace_name||e.workspace_id),u(i,n(h,{get when(){return e.workspace_id===c()},get children(){var e=cl();return v(()=>g(e,nl)),e}}),null),v(t=>{var n=`${Qs} ${e.workspace_id===c()?el:""}`,o=tl;return n!==t.e&&g(i,t.e=n),o!==t.t&&g(r,t.t=o),t},{e:void 0,t:void 0}),i;var i,r}})]})),l.$$click=m,u(l,()=>i("app.settings"),null),f.$$click=w,u(f,()=>i("createWorkspace.title"),null),$.$$click=b,u($,()=>i("notionImport.title"),null),v(t=>{var n=Js,i=Zs,o=il,s=rl,d=ol,c=rl,u=al,h=rl,v=ol;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(r,t.t=i),o!==t.a&&g(a,t.a=o),s!==t.o&&g(l,t.o=s),d!==t.i&&g(p,t.i=d),c!==t.n&&g(f,t.n=c),u!==t.s&&g(k,t.s=u),h!==t.h&&g($,t.h=h),v!==t.r&&g(S,t.r=v),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e}}),null),v(e=>{var t=Hs,n=Gs,r=p(),o=i("app.switchWorkspace")||"Switch workspace",s=a(),l=Ks,d=Ys;return t!==e.e&&g(k,e.e=t),n!==e.t&&g(C,e.t=n),r!==e.a&&f(C,"title",e.a=r),o!==e.o&&f(C,"aria-label",e.o=o),s!==e.i&&f(C,"aria-expanded",e.i=s),l!==e.n&&g(x,e.n=l),d!==e.s&&g(I,e.s=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),k;var k,C,x,I}l(["click"]);const vl="_errorBoundary_1gyxj_3",gl="_errorMessage_1gyxj_21",pl="_errorDetails_1gyxj_27",_l="_retryButton_1gyxj_51";var ml=y("<div role=alert><h2>Something went wrong</h2><p></p><details><summary>Technical details</summary><pre></pre></details><button>Try again");function fl(e){return t=ml(),n=t.firstChild.nextSibling,i=n.nextSibling,r=i.firstChild.nextSibling,o=i.nextSibling,u(n,()=>e.error.message),u(r,()=>e.error.stack),o.$$click=()=>e.reset(),v(e=>{var r=vl,a=gl,s=pl,l=_l;return r!==e.e&&g(t,e.e=r),a!==e.t&&g(n,e.t=a),s!==e.a&&g(i,e.a=s),l!==e.o&&g(o,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t;var t,n,i,r,o}const wl=e=>n(z,{fallback:(e,t)=>n(fl,{error:e,reset:t}),get children(){return e.children}});l(["click"]);const bl="_app_i6qqq_13",yl="_header_i6qqq_19",kl="_headerLeft_i6qqq_29",$l="_userInfo_i6qqq_37",Sl="_container_i6qqq_44",Cl="_main_i6qqq_50",xl="_error_i6qqq_58",Il="_editor_i6qqq_66",ql="_editorLoading_i6qqq_74",Tl="_settingsLoading_i6qqq_75",Ll="_editorHeader_i6qqq_80",El="_editorStatus_i6qqq_89",zl="_unsavedIndicator_i6qqq_97",Nl="_savingIndicator_i6qqq_102",Rl="_savedIndicator_i6qqq_107",Dl="_titleInput_i6qqq_117",Pl="_nodeContent_i6qqq_127",Ol="_tableView_i6qqq_134",Al="_tableHeader_i6qqq_142",Bl="_breadcrumbs_i6qqq_149",Wl="_breadcrumbItem_i6qqq_160",jl="_breadcrumbSeparator_i6qqq_171",Ml="_historyPanel_i6qqq_176",Ul="_historyList_i6qqq_190",Fl="_historyItem_i6qqq_197",Vl="_historyMeta_i6qqq_210",Hl="_historyDate_i6qqq_218",Gl="_historyHash_i6qqq_222",Kl="_historyMessage_i6qqq_229",Yl="_hamburger_i6qqq_237",Jl="_mobileBackdrop_i6qqq_248";var Zl=y("<nav>"),Xl=y("<div>"),Ql=y("<div role=alert aria-live=polite>"),ed=y("<span>‚óè "),td=y("<span>‚ü≥ "),nd=y("<span>‚úì "),id=y("<li>"),rd=y("<div><h3></h3><ul>"),od=y("<div><div><h3>"),ad=y("<div><div><input type=text><div></div></div><div>"),sd=y("<div><main>"),ld=y('<div><header><div><button aria-label="Toggle menu">‚ò∞</button></div><div>'),dd=y("<span>/"),cd=y("<span>"),ud=y("<li><div><span></span><span></span></div><div>");const hd=R(()=>O(()=>import("./Editor-DldywrNv.js"),__vite__mapDeps([0,1,2,3]))),vd=R(()=>O(()=>import("./index-D2hFxmM5.js"),__vite__mapDeps([4,1,5])).then(e=>({default:e.Settings})));function gd(){const{t:t,locale:i,setLocale:r}=j(),{user:o,token:a,login:s,wsApi:l,orgApi:d}=jn(),{nodes:p,selectedNodeId:w,setSelectedNodeId:b,selectedNodeData:y,setSelectedNodeData:k,breadcrumbPath:$,loading:x,setLoading:I,error:T,setError:E,switchWorkspace:z,createOrganization:R,createWorkspace:D,loadNodes:P,loadNode:O,fetchNodeChildren:A,removeNode:B}=Yn(),{title:W,content:M,hasUnsavedChanges:U,autoSaveStatus:F,assetUrls:V,showHistory:H,history:G,loadHistory:K,loadVersion:Y,flushAutoSave:J,handleTitleChange:Z,handleContentChange:X,linkedNodeTitles:Q}=oi(),{records:ee,hasMore:te,loadMoreRecords:ne,addRecord:ie,updateRecord:re,deleteRecord:oe,views:ae,activeViewId:se}=li(),le=S(()=>ae().find(e=>e.id===se())),de=S(()=>le()?.type||"table"),[ce,ue]=e(!1),[he,ve]=e(!1),[ge,pe]=e(null),[me,fe]=e(!1),[we,be]=e(!1),[ye,ke]=e(!1),[$e,Se]=e(null),[Ce,xe]=e(!1),[Ie,qe]=e(!1),[Te,Le]=e(!1),[Ee,ze]=e(!1),[Ne,Re]=e(null),[De,Pe]=e(null),[Oe,Ae]=e(null);c(()=>{const e=o(),t=e?.settings?.language;t&&["en","fr","de","es"].includes(t)&&t!==i()&&(r(t),localStorage.setItem("mddb_locale",t))});const Be=async()=>{const e=window.location.pathname,n=function(e){return"/privacy"===e?"privacy":"/terms"===e?"terms":"/profile"===e?"profile":e.startsWith("/settings")?"settings":null}(e);if("privacy"===n)return be(!0),ke(!1),void fe(!1);if("terms"===n)return ke(!0),be(!1),void fe(!1);if("profile"===n)return window.history.replaceState(null,"",Hn("user")),Se({type:"profile"}),fe(!1),ue(!1),ve(!1),be(!1),void ke(!1);if("settings"===n){const t=function(e){if("/settings"===e||"/settings/"===e)return{type:"redirect",id:"/settings/user"};if("/settings/user"===e||"/settings/user/"===e)return{type:"profile"};if("/settings/server"===e||"/settings/server/"===e)return{type:"server"};const t=e.match(/^\/settings\/workspace\/([^+/]+)/);if(t){const e="undefined"!=typeof window?window.location.hash.slice(1):"";return{type:"workspace",id:t[1],section:e||void 0}}const n=e.match(/^\/settings\/org\/([^+/]+)/);if(n){const e="undefined"!=typeof window?window.location.hash.slice(1):"";return{type:"org",id:n[1],section:e||void 0}}return null}(e);if(t)return Se(t),fe(!1),ue(!1),ve(!1),be(!1),void ke(!1)}Se(null),fe(!1),be(!1),ke(!1);const i=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(i){const e=i.id,n=o(),r=n?.workspaces?.find(t=>t.workspace_id===e);if(!r){E(t("errors.noAccessToWs")||"You do not have access to this workspace");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",Un(e,i)),2e3))}const a=Hn("workspace",e,r.workspace_name);return window.history.replaceState(null,"",a),void Se({type:"workspace",id:e})}ue(!1);const r=function(e){const t=e.match(/^\/o\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(r){const e=r.id,n=o(),i=n?.organizations?.find(t=>t.organization_id===e);if(!i){E(t("errors.noAccessToOrg")||"You do not have access to this organization");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",Un(e,i)),2e3))}const a=Hn("org",e,i.organization_name);return window.history.replaceState(null,"",a),void Se({type:"org",id:e})}ve(!1),pe(null);const a=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/([a-zA-Z0-9_-]+)(?:\+.*)?$/);return t&&t[1]&&t[2]?{wsId:t[1],nodeId:t[2]}:null}(e);if(a){const e=a.nodeId;return void(e!==w()&&(J(),O(e,!1)))}const s=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/);return t&&t[1]?{wsId:t[1]}:null}(e);s&&p.length>0&&p[0]?O(p[0].id,!1):(b(null),k(null))};let We;C(()=>{window.addEventListener("popstate",Be),L(()=>window.removeEventListener("popstate",Be))});const je=async e=>{const t=d();if(!t)return;const n=await t.notion.startImport({notion_token:e.notionToken});var i;await z(n.workspace_id),i=n.workspace_id,Pe(i),We=window.setInterval(async()=>{const e=d();if(e)try{const t=await e.notion.getStatus(i);Re(t),["completed","failed","cancelled"].includes(t.status)&&(window.clearInterval(We),We=void 0,"completed"===t.status&&P(!0))}catch{window.clearInterval(We),We=void 0}},2e3),Re({status:"running",progress:0,total:0})},Me=async()=>{const e=l(),t=De();if(e&&t)try{await e.notion.cancelImport(),Re(e=>e?{...e,status:"cancelled"}:null)}catch{}},Ue=()=>{We&&(window.clearInterval(We),We=void 0),Re(null),Pe(null)};async function Fe(e="document",n){if(!W().trim())return void E(t("errors.titleRequired")||"Title is required");const i=l();if(i)try{I(!0);const t=n||Oe()||"0";let r;if("table"===e){r=(await i.nodes.table.createTable(t,{title:W(),properties:[{name:"Name",type:"text",required:!1}]})).id}else{r=(await i.nodes.page.createPage(t,{title:W()})).id}await P(!0),O(String(r)),E(null),Ae(null)}catch(r){E(`${t("errors.failedToCreate")}: ${r}`)}finally{I(!1)}}L(()=>{We&&window.clearInterval(We)}),c(()=>{o(),Be()});const Ve=e=>{J(),O(e.id),xe(!1)};function He(e,t=p,n=null){const i=t.findIndex(t=>t.id===e);if(-1!==i)return{parent:n,siblings:t,index:i};for(const r of t)if(r.children){const t=He(e,r.children,r);if(t)return t}return null}async function Ge(e){const n=l();if(!n)return;if(!confirm(t("table.confirmDeleteRecord")||"Delete this item?"))return;let i=null;if(e===w()){const t=He(e);if(t){const{parent:e,siblings:n,index:r}=t;e&&"0"!==e.id?i=e.id:r>0?i=n[r-1]?.id??null:n.length>1&&(i=n[1]?.id??null)}}try{I(!0),await n.nodes.deleteNode(e),B(e),e===w()&&(i?O(i):(q(()=>{b(null),k(null)}),await P(!0)))}catch(r){E(`${t("errors.failedToDelete")}: ${r}`)}finally{I(!1)}}async function Ke(e){const n=w(),i=y(),r=l();if(n&&i&&r)try{I(!0);const t=[...i.properties||[],e];await r.nodes.table.updateTable(n,{title:i.title,properties:t}),await O(n,!1),E(null)}catch(o){E(`${t("errors.failedToSave")}: ${o}`)}finally{I(!1)}}return[n(h,{get when(){return!we()},get fallback(){return n(oa,{})},get children(){return n(h,{get when(){return!ye()},get fallback(){return n(va,{})},get children(){return n(h,{get when(){return o()},get fallback(){return n(Zo,{onLogin:s})},get children(){var e=ld(),i=e.firstChild,r=i.firstChild,s=r.firstChild,l=r.nextSibling;return u(e,n(h,{get when(){return Ne()},keyed:!0,children:e=>n(qs,{status:e,onCancel:Me,onDismiss:Ue})}),i),s.$$click=()=>xe(!Ce()),u(r,n(hl,{onOpenSettings:()=>{const e=o()?.workspace_id,t=o()?.workspace_name;e&&(Se({type:"workspace",id:e}),ue(!1),b(null),xe(!1),window.history.pushState(null,"",Hn("workspace",e,t)))},onSwitchWorkspace:()=>{Se(null),ue(!1),ve(!1),fe(!1)},onCreateWorkspace:()=>Le(!0),onImportFromNotion:()=>ze(!0)}),null),u(r,n(h,{get when(){return w()},get children(){var e=Zl();return u(e,n(_,{get each(){return $()},children:(e,t)=>{return[n(h,{get when(){return t()>0},get children(){var e=dd();return v(()=>g(e,jl)),e}}),(i=cd(),i.$$click=()=>Ve(e),u(i,()=>e.title),v(()=>g(i,Wl)),i)];var i}})),v(()=>g(e,Bl)),e}}),null),u(l,n(Vs,{onProfile:()=>{Se({type:"profile"}),fe(!1),ue(!1),b(null),window.history.pushState(null,"",Hn("user"))}})),u(e,n(h,{get when(){return me()},get children(){return n(Co,{onBack:()=>window.history.back(),onOrgSettings:e=>{q(()=>{ve(!0),pe(e.organization_id),fe(!1)}),window.history.pushState(null,"",Vn(e.organization_id,e.organization_name))}})}}),null),u(e,n(h,{get when(){return ce()},get children(){return n(gr,{onBack:()=>window.history.back(),onOpenOrgSettings:()=>{const e=o(),t=e?.organization_id,n=e?.organizations?.find(e=>e.organization_id===t),i=n?.organization_name;t&&(ve(!0),pe(t),ue(!1),window.history.pushState(null,"",Vn(t,i)))}})}}),null),u(e,n(h,{get when(){return m(()=>!!he())()&&ge()},get children(){return n(jr,{get orgId(){return ge()},onBack:()=>window.history.back()})}}),null),u(e,n(h,{get when(){return $e()},children:e=>n(N,{get fallback(){return e=Xl(),u(e,()=>t("common.loading")),v(()=>g(e,Tl)),e;var e},get children(){return n(vd,{get route(){return e()},onClose:()=>{Se(null);const e=o()?.workspace_id,t=o()?.workspace_name;e&&window.history.pushState(null,"",Un(e,t))}})}})}),null),u(e,n(h,{get when(){return m(()=>!(me()||ce()||he()))()&&!$e()},get children(){var e=sd(),i=e.firstChild;return u(e,n(h,{get when(){return Ce()},get children(){var e=Xl();return e.$$click=()=>xe(!1),v(()=>g(e,Jl)),e}}),i),u(e,n(_e,{get isOpen(){return Ce()},get loading(){return x()},nodes:p,get selectedNodeId(){return w()},get ancestorIds(){return $().map(e=>e.id)},onCreatePage:()=>{Ae(null),Fe("document"),xe(!1)},onCreateTable:()=>{Ae(null),Fe("table"),xe(!1)},onCreateChildPage:e=>{Ae(e),Fe("document",e),xe(!1)},onCreateChildTable:e=>{Ae(e),Fe("table",e),xe(!1)},onSelectNode:Ve,onCloseMobileSidebar:()=>xe(!1),onFetchChildren:A,onDeleteNode:Ge,onShowHistory:e=>{e!==w()?O(e).then(()=>K(e)):K(e)}}),i),u(i,n(h,{get when(){return T()},fallback:null,get children(){var e=Ql();return u(e,T),v(()=>g(e,xl)),e}}),null),u(i,n(h,{get when(){return w()},get children(){var e=ad(),i=e.firstChild,r=i.firstChild,s=r.nextSibling,l=i.nextSibling;return r.$$input=e=>Z(e.target.value),u(s,n(h,{get when(){return m(()=>!!U())()&&"idle"===F()},get children(){var e=ed();return e.firstChild,u(e,()=>t("editor.unsaved"),null),v(()=>g(e,zl)),e}}),null),u(s,n(h,{get when(){return"saving"===F()},get children(){var e=td();return e.firstChild,u(e,()=>t("common.saving"),null),v(()=>g(e,Nl)),e}}),null),u(s,n(h,{get when(){return"saved"===F()},get children(){var e=nd();return e.firstChild,u(e,()=>t("common.saved"),null),v(()=>g(e,Rl)),e}}),null),u(e,n(h,{get when(){return H()},get children(){var e=rd(),i=e.firstChild,r=i.nextSibling;return u(i,()=>t("editor.versionHistory")),u(r,n(_,{get each(){return G()},children:e=>{return t=ud(),n=t.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,t.$$click=()=>{const t=w();t&&Y(t,e.hash)},u(i,()=>new Date(e.timestamp).toLocaleString()),u(r,()=>e.hash.substring(0,7)),u(o,()=>e.message),v(e=>{var a=Fl,s=Vl,l=Hl,d=Gl,c=Kl;return a!==e.e&&g(t,e.e=a),s!==e.t&&g(n,e.t=s),l!==e.a&&g(i,e.a=l),d!==e.o&&g(r,e.o=d),c!==e.i&&g(o,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t;var t,n,i,r,o}}),null),u(r,n(h,{get when(){return 0===G().length},get children(){var e=id();return u(e,()=>t("editor.noHistory")),v(()=>g(e,Fl)),e}}),null),v(t=>{var n=Ml,i=Ul;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(r,t.t=i),t},{e:void 0,t:void 0}),e}}),l),u(l,n(h,{get when(){return y()?.has_page},get children(){return n(N,{get fallback(){return e=Xl(),u(e,()=>t("common.loading")),v(()=>g(e,ql)),e;var e},get children(){return n(hd,{get content(){return M()},get nodeId(){return w()??void 0},get assetUrls(){return V()},get linkedNodeTitles(){return Q()},onChange:X,get wsId(){return o()?.workspace_id},getToken:()=>a(),onAssetUploaded:()=>{const e=w();e&&O(e,!1)},onError:E})}})}}),null),u(l,n(h,{get when(){return y()?.has_table},get children(){var e=od(),i=e.firstChild,r=i.firstChild;return u(r,()=>t("table.records")),u(i,n(Ti,{}),null),u(e,n(h,{get when(){return"table"===de()},get children(){return n($t,{get tableId(){return w()||""},get columns(){return y()?.properties||[]},get records(){return ee()},onAddRecord:ie,onUpdateRecord:re,onDeleteRecord:oe,onAddColumn:Ke,onLoadMore:ne,get hasMore(){return te()}})}}),null),u(e,n(h,{get when(){return"list"===de()},get children(){return n(Wt,{get records(){return ee()},get columns(){return y()?.properties||[]},onUpdateRecord:re,onDeleteRecord:oe})}}),null),u(e,n(h,{get when(){return"gallery"===de()},get children(){return n(on,{get records(){return ee()},get columns(){return y()?.properties||[]},onUpdateRecord:re,onDeleteRecord:oe})}}),null),u(e,n(h,{get when(){return"board"===de()},get children(){return n(xn,{get records(){return ee()},get columns(){return y()?.properties||[]},onUpdateRecord:re,onDeleteRecord:oe})}}),null),v(t=>{var n=Ol,r=Al;return n!==t.e&&g(e,t.e=n),r!==t.t&&g(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(n=>{var o=Il,a=Ll,d=t("editor.titlePlaceholder")||"Title",c=Dl,u=El,h=Pl;return o!==n.e&&g(e,n.e=o),a!==n.t&&g(i,n.t=a),d!==n.a&&f(r,"placeholder",n.a=d),c!==n.o&&g(r,n.o=c),u!==n.i&&g(s,n.i=u),h!==n.n&&g(l,n.n=h),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>r.value=W()),e}}),null),v(t=>{var n=Sl,r=Cl;return n!==t.e&&g(e,t.e=n),r!==t.t&&g(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(t=>{var n=bl,o=yl,a=kl,d=Yl,c=$l;return n!==t.e&&g(e,t.e=n),o!==t.t&&g(i,t.t=o),a!==t.a&&g(r,t.a=a),d!==t.o&&g(s,t.o=d),c!==t.i&&g(l,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}})}})}}),n($a,{}),n(h,{get when(){return Ie()},get children(){return n(Da,{onClose:()=>qe(!1),onCreate:R})}}),n(h,{get when(){return Te()},get children(){return n(Ba,{onClose:()=>Le(!1),onCreate:D,isFirstWorkspace:!0})}}),n(h,{get when(){return Ee()},get children(){return n(ns,{onClose:()=>ze(!1),onImport:je})}})]}function pd(){return n(wl,{get children(){return n(Wn,{get children(){return n(Kn,{get children(){return n(ri,{get children(){return n(si,{get children(){return n(gd,{})}})}})}})}})}})}l(["click","input"]);const _d=localStorage.getItem("mddb_locale"),md=_d&&["en","fr","de","es"].includes(_d)?_d:"en",fd=document.getElementById("app");fd&&D(()=>n(W,{initialLocale:md,get children(){return n(pd,{})}}),fd);export{ke as O,$e as W,jn as a,Yn as b,oi as c,Ts as d,ni as e,ei as f,ye as g,Fn as n,Zn as r,Hn as s,j as u,Un as w};
