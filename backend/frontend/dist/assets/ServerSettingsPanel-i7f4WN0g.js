import{c as e,h as t,s as i,d as a,v as r,w as n,S as l,x as s,q as v}from"./vendor-DudX5Zyp.js";import{u,d}from"./index-DF-GSr0m.js";import"./editor-vendor-oxYk7t8G.js";const o="_panel_1jx6v_3",p="_tabs_1jx6v_12",b="_activeTab_1jx6v_34",m="_section_1jx6v_39",_="_error_1jx6v_43",g="_success_1jx6v_51",x="_statusBadge_1jx6v_59",h="_enabled_1jx6v_63",f="_disabled_1jx6v_73",S="_settingsForm_1jx6v_83",c="_formGrid_1jx6v_90",$="_formItem_1jx6v_97",y="_saveButton_1jx6v_127",C="_hint_1jx6v_146";var w=s("<div>"),q=s("<span>"),I=s("<section><div></div><form><div><label></label><input type=text placeholder=smtp.example.com></div><div><label></label><input type=number min=1 max=65535></div><div><label></label><input type=text placeholder=user@example.com></div><div><label></label><input type=password placeholder=••••••••><p></p></div><div><label></label><input type=email placeholder=noreply@example.com></div><button type=submit>"),j=s("<section><form><div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=1></div><div><label></label><input type=number min=0></div></div><h3></h3><p></p><div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div></div><button type=submit>"),P=s("<div><h2></h2><div><button></button><button>");function T(){const{t:s}=u(),{api:v}=d(),[T,k]=e("smtp"),[B,z]=e(null),[R,A]=e(""),[L,E]=e(587),[M,O]=e(""),[U,D]=e(""),[H,F]=e(""),[W,G]=e(0),[J,K]=e(0),[N,Q]=e(0),[V,X]=e(0),[Y,Z]=e(0),[ee,te]=e(0),[ie,ae]=e(0),[re,ne]=e(0),[le,se]=e(0),[ve,ue]=e(0),[de,oe]=e(0),[pe,be]=e(0),[me,_e]=e(0),[ge,xe]=e(0),[he,fe]=e(0),[Se,ce]=e(0),[$e,ye]=e(0),[Ce,we]=e(!1),[qe,Ie]=e(null),[je,Pe]=e(null),Te=async()=>{try{we(!0),Ie(null);const e=await v().server.getConfig();z(e),A(e.smtp.host||""),E(e.smtp.port||587),O(e.smtp.username||""),F(e.smtp.from||""),D(""),G(e.quotas.max_request_body_bytes),K(e.quotas.max_sessions_per_user),Q(e.quotas.max_tables_per_workspace),X(e.quotas.max_columns_per_table),Z(e.quotas.max_records_per_table),te(e.quotas.max_pages),ae(e.quotas.max_storage_bytes),ne(e.quotas.max_organizations),se(e.quotas.max_workspaces),ue(e.quotas.max_users),oe(e.quotas.max_total_storage_bytes),be(e.quotas.max_asset_size_bytes),_e(e.quotas.max_egress_bandwidth_bps),xe(e.rate_limits.auth_rate_per_min),fe(e.rate_limits.write_rate_per_min),ce(e.rate_limits.read_auth_rate_per_min),ye(e.rate_limits.read_unauth_rate_per_min)}catch(e){Ie(`${s("errors.failedToLoad")}: ${e}`)}finally{we(!1)}};t(()=>{Te()});const ke=async e=>{e.preventDefault();try{we(!0),Ie(null),Pe(null),await v().server.updateConfig({smtp:{host:R(),port:L(),username:M(),password:U(),from:H()}}),Pe(s("server.configurationSaved")),await Te()}catch(t){Ie(`${s("errors.failedToSave")}: ${t}`)}finally{we(!1)}},Be=async e=>{e.preventDefault();try{we(!0),Ie(null),Pe(null),await v().server.updateConfig({quotas:{max_request_body_bytes:W(),max_sessions_per_user:J(),max_tables_per_workspace:N(),max_columns_per_table:V(),max_records_per_table:Y(),max_pages:ee(),max_storage_bytes:ie(),max_organizations:re(),max_workspaces:le(),max_users:ve(),max_total_storage_bytes:de(),max_asset_size_bytes:pe(),max_egress_bandwidth_bps:me()},rate_limits:{auth_rate_per_min:ge(),write_rate_per_min:he(),read_auth_rate_per_min:Se(),read_unauth_rate_per_min:$e()}}),Pe(s("server.configurationSaved"))}catch(t){Ie(`${s("errors.failedToSave")}: ${t}`)}finally{we(!1)}};return ze=P(),Re=ze.firstChild,Ae=Re.nextSibling,Le=Ae.firstChild,Ee=Le.nextSibling,i(Re,()=>s("server.serverSettings")),Le.$$click=()=>k("smtp"),i(Le,()=>s("server.smtpConfiguration")),Ee.$$click=()=>k("quotas"),i(Ee,()=>s("server.quotas")),i(ze,a(l,{get when(){return qe()},get children(){var e=w();return i(e,qe),r(()=>n(e,_)),e}}),null),i(ze,a(l,{get when(){return je()},get children(){var e=w();return i(e,je),r(()=>n(e,g)),e}}),null),i(ze,a(l,{get when(){return"smtp"===T()},get children(){var e=I(),t=e.firstChild,v=t.nextSibling,u=v.firstChild,d=u.firstChild,o=d.nextSibling,p=u.nextSibling,b=p.firstChild,_=b.nextSibling,g=p.nextSibling,c=g.firstChild,w=c.nextSibling,j=g.nextSibling,P=j.firstChild,T=P.nextSibling,k=T.nextSibling,z=j.nextSibling,W=z.firstChild,G=W.nextSibling,J=z.nextSibling;return i(t,a(l,{get when(){return B()?.smtp.host},get fallback(){return e=q(),i(e,()=>s("server.smtpDisabled")),r(()=>n(e,f)),e;var e},get children(){var e=q();return i(e,()=>s("server.smtpEnabled")),r(()=>n(e,h)),e}})),v.addEventListener("submit",ke),i(d,()=>s("server.smtpHost")),o.$$input=e=>A(e.target.value),i(b,()=>s("server.smtpPort")),_.$$input=e=>E(parseInt(e.target.value)||587),i(c,()=>s("server.smtpUsername")),w.$$input=e=>O(e.target.value),i(P,()=>s("server.smtpPassword")),T.$$input=e=>D(e.target.value),i(k,()=>s("server.smtpPasswordHint")),i(W,()=>s("server.smtpFrom")),G.$$input=e=>F(e.target.value),i(J,()=>s("server.saveConfiguration")),r(i=>{var a=m,r=x,l=S,s=$,d=$,o=$,b=$,_=C,h=$,f=y,c=Ce();return a!==i.e&&n(e,i.e=a),r!==i.t&&n(t,i.t=r),l!==i.a&&n(v,i.a=l),s!==i.o&&n(u,i.o=s),d!==i.i&&n(p,i.i=d),o!==i.n&&n(g,i.n=o),b!==i.s&&n(j,i.s=b),_!==i.h&&n(k,i.h=_),h!==i.r&&n(z,i.r=h),f!==i.d&&n(J,i.d=f),c!==i.l&&(J.disabled=i.l=c),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),r(()=>o.value=R()),r(()=>_.value=L()),r(()=>w.value=M()),r(()=>T.value=U()),r(()=>G.value=H()),e}}),null),i(ze,a(l,{get when(){return"quotas"===T()},get children(){var e=j(),t=e.firstChild,a=t.firstChild,l=a.firstChild,v=l.firstChild,u=v.nextSibling,d=l.nextSibling,o=d.firstChild,p=o.nextSibling,b=d.nextSibling,_=b.firstChild,g=_.nextSibling,x=b.nextSibling,h=x.firstChild,f=h.nextSibling,w=x.nextSibling,q=w.firstChild,I=q.nextSibling,P=w.nextSibling,T=P.firstChild,k=T.nextSibling,B=P.nextSibling,z=B.firstChild,R=z.nextSibling,A=B.nextSibling,L=A.firstChild,E=L.nextSibling,M=A.nextSibling,O=M.firstChild,U=O.nextSibling,D=M.nextSibling,H=D.firstChild,F=H.nextSibling,we=D.nextSibling,qe=we.firstChild,Ie=qe.nextSibling,je=we.nextSibling,Pe=je.firstChild,Te=Pe.nextSibling,ke=je.nextSibling,ze=ke.firstChild,Re=ze.nextSibling,Ae=a.nextSibling,Le=Ae.nextSibling,Ee=Le.nextSibling,Me=Ee.firstChild,Oe=Me.firstChild,Ue=Oe.nextSibling,De=Me.nextSibling,He=De.firstChild,Fe=He.nextSibling,We=De.nextSibling,Ge=We.firstChild,Je=Ge.nextSibling,Ke=We.nextSibling,Ne=Ke.firstChild,Qe=Ne.nextSibling,Ve=Ee.nextSibling;return t.addEventListener("submit",Be),i(v,()=>s("server.maxRequestBodyBytes")),u.$$input=e=>G(parseInt(e.target.value)||0),i(o,()=>s("server.maxSessionsPerUser")),p.$$input=e=>K(parseInt(e.target.value)||0),i(_,()=>s("server.maxTablesPerWorkspace")),g.$$input=e=>Q(parseInt(e.target.value)||0),i(h,()=>s("server.maxColumnsPerTable")),f.$$input=e=>X(parseInt(e.target.value)||0),i(q,()=>s("server.maxRecordsPerTable")),I.$$input=e=>Z(parseInt(e.target.value)||0),i(T,()=>s("server.maxPages")),k.$$input=e=>te(parseInt(e.target.value)||0),i(z,()=>s("server.maxStorageBytes")),R.$$input=e=>ae(parseInt(e.target.value)||0),i(L,()=>s("server.maxOrganizations")),E.$$input=e=>ne(parseInt(e.target.value)||0),i(O,()=>s("server.maxWorkspaces")),U.$$input=e=>se(parseInt(e.target.value)||0),i(H,()=>s("server.maxUsers")),F.$$input=e=>ue(parseInt(e.target.value)||0),i(qe,()=>s("server.maxTotalStorageBytes")),Ie.$$input=e=>oe(parseInt(e.target.value)||0),i(Pe,()=>s("server.maxAssetSizeBytes")),Te.$$input=e=>be(parseInt(e.target.value)||0),i(ze,()=>s("server.maxEgressBandwidthBps")),Re.$$input=e=>_e(parseInt(e.target.value)||0),i(Ae,()=>s("server.rateLimits")),i(Le,()=>s("server.rateLimitsHint")),i(Oe,()=>s("server.authRatePerMin")),Ue.$$input=e=>xe(parseInt(e.target.value)||0),i(He,()=>s("server.writeRatePerMin")),Fe.$$input=e=>fe(parseInt(e.target.value)||0),i(Ge,()=>s("server.readAuthRatePerMin")),Je.$$input=e=>ce(parseInt(e.target.value)||0),i(Ne,()=>s("server.readUnauthRatePerMin")),Qe.$$input=e=>ye(parseInt(e.target.value)||0),i(Ve,()=>s("server.saveConfiguration")),r(i=>{var r=m,s=S,v=c,u=$,o=$,p=$,_=$,g=$,h=$,f=$,q=$,I=$,j=$,T=$,k=$,z=$,R=C,L=c,E=$,O=$,U=$,H=$,F=y,W=Ce();return r!==i.e&&n(e,i.e=r),s!==i.t&&n(t,i.t=s),v!==i.a&&n(a,i.a=v),u!==i.o&&n(l,i.o=u),o!==i.i&&n(d,i.i=o),p!==i.n&&n(b,i.n=p),_!==i.s&&n(x,i.s=_),g!==i.h&&n(w,i.h=g),h!==i.r&&n(P,i.r=h),f!==i.d&&n(B,i.d=f),q!==i.l&&n(A,i.l=q),I!==i.u&&n(M,i.u=I),j!==i.c&&n(D,i.c=j),T!==i.w&&n(we,i.w=T),k!==i.m&&n(je,i.m=k),z!==i.f&&n(ke,i.f=z),R!==i.y&&n(Le,i.y=R),L!==i.g&&n(Ee,i.g=L),E!==i.p&&n(Me,i.p=E),O!==i.b&&n(De,i.b=O),U!==i.T&&n(We,i.T=U),H!==i.A&&n(Ke,i.A=H),F!==i.O&&n(Ve,i.O=F),W!==i.I&&(Ve.disabled=i.I=W),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0}),r(()=>u.value=W()),r(()=>p.value=J()),r(()=>g.value=N()),r(()=>f.value=V()),r(()=>I.value=Y()),r(()=>k.value=ee()),r(()=>R.value=ie()),r(()=>E.value=re()),r(()=>U.value=le()),r(()=>F.value=ve()),r(()=>Ie.value=de()),r(()=>Te.value=pe()),r(()=>Re.value=me()),r(()=>Ue.value=ge()),r(()=>Fe.value=he()),r(()=>Je.value=Se()),r(()=>Qe.value=$e()),e}}),null),r(e=>{var t=o,i=p,a="smtp"===T()?b:"",r="quotas"===T()?b:"";return t!==e.e&&n(ze,e.e=t),i!==e.t&&n(Ae,e.t=i),a!==e.a&&n(Le,e.a=a),r!==e.o&&n(Ee,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),ze;var ze,Re,Ae,Le,Ee}v(["click","input"]);export{T as default};
//# sourceMappingURL=ServerSettingsPanel-i7f4WN0g.js.map
