const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Editor-BGgdTx1E.js","assets/vendor-XI6dBZnE.js","assets/editor-vendor-C907dqzP.js","assets/Editor-yFypdL0K.css"])))=>i.map(i=>d[i]);
import{c as e,a as t,d as n,e as i,u as r,f as o,t as a,r as s,g as l,h as d,i as c,o as u,j as g,S as h,l as v,m as p,s as _,F as m,n as f,p as b,q as w,v as y,w as k,x as S,y as C,z as $,A as x,B as I,C as L,D as z,E,G as R,H as T,I as P}from"./vendor-XI6dBZnE.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const O={},N=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in O)return;O[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};async function D(e){const t=await((e,t,n)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>N(()=>import("./de-BZmmwrZ4.js"),[]),"./dictionaries/en.ts":()=>N(()=>import("./en-D3yZox2Q.js"),[]),"./dictionaries/es.ts":()=>N(()=>import("./es-WFYWZpvS.js"),[]),"./dictionaries/fr.ts":()=>N(()=>import("./fr-BzoNA0XI.js"),[])}),`./dictionaries/${e}.ts`,3);return l(t.dict)}const q=o(),A=r=>{const[o,l]=e(r.initialLocale||"en"),[d]=t(o,D),c=a(d,s),u=e=>{const t=`errors.${e}`,n=c(t);return n&&n!==t?n:c("errors.unknown")||"An error occurred"},g=n(()=>({locale:o,setLocale:l,t:c,translateError:u}));return i(q.Provider,{get value(){return g()},get children(){return r.children}})};function B(){const e=r(q);if(!e)throw new Error("useI18n must be used within I18nProvider");return e}const W="_sidebarNodeWrapper_i1nam_1",M="_childList_i1nam_2",U="_pageItem_i1nam_13",j="_active_i1nam_28",F="_nodeIcon_i1nam_34",H="_pageTitleText_i1nam_41",G="_expandIcon_i1nam_49",V="_hidden_i1nam_67",Y="_loading_i1nam_67",K="_expanded_i1nam_72",J="_contextMenu_i1nam_95",X="_contextMenuItem_i1nam_107",Z="_contextMenuDivider_i1nam_124",Q="_hoverDeleteButton_i1nam_131";var ee=y("<div><button>üìÑ </button><button>üìä </button><div></div><button>üïê "),te=y("<ul>"),ne=y("<li><div><span></span><span></span><span></span><button>üóë");function ie(t){const{t:n}=B(),[r,o]=e(0===t.depth),[a,s]=e(!1),[l,d]=e({x:0,y:0}),[y,k]=e(null),[S,C]=e(!1),[$,x]=c({}),I=()=>{const e=t.prefetchedChildren?.[t.node.id];if(e)return e;const n=y();return null!==n?n:[]},L=()=>{const e=y();if(null!==e)return e.length>0;const n=t.prefetchedChildren?.[t.node.id];return n?n.length>0:!0===t.node.has_children};u(()=>{const e=()=>{s(!1)};if(document.addEventListener("click",e),L()&&t.onFetchChildren){const e=t.prefetchedChildren?.[t.node.id];e?(k(e),z(e)):null===y()&&(async()=>{if(t.onFetchChildren&&null===y()&&!S()){C(!0);try{const e=await t.onFetchChildren(t.node.id);k(e),z(e)}catch(e){console.error("Failed to load children:",e),k([])}finally{C(!1)}}})()}return()=>document.removeEventListener("click",e)});const z=e=>{if(t.onFetchChildren)for(const n of e)$[n.id]||!0!==n.has_children||t.onFetchChildren(n.id).then(e=>{x(n.id,e)}).catch(()=>{})},E=async e=>{e.stopPropagation(),o(!r())},R=e=>{e.preventDefault(),e.stopPropagation(),d({x:e.clientX,y:e.clientY}),s(!0)};return T=ne(),P=T.firstChild,O=P.firstChild,N=O.nextSibling,D=N.nextSibling,q=D.nextSibling,P.$$contextmenu=R,P.$$click=()=>t.onSelect(t.node),O.$$click=E,g(O,()=>S()?"‚óã":"‚ñ∂"),g(N,()=>t.node.has_table&&!t.node.has_page?"üìä":"üìÑ"),g(D,()=>t.node.title),q.$$click=e=>{e.stopPropagation(),t.onDeleteNode?.(t.node.id)},g(T,i(h,{get when(){return a()},get children(){var e=ee(),i=e.firstChild;i.firstChild;var r=i.nextSibling;r.firstChild;var o=r.nextSibling,a=o.nextSibling;return a.firstChild,e.$$click=e=>e.stopPropagation(),i.$$click=()=>{t.onCreateChildPage(t.node.id),s(!1)},g(i,()=>n("app.createSubPage"),null),r.$$click=()=>{t.onCreateChildTable(t.node.id),s(!1)},g(r,()=>n("app.createSubTable"),null),a.$$click=()=>{t.onShowHistory?.(t.node.id),s(!1)},g(a,()=>n("editor.history"),null),v(t=>{var n=J,s=`${l().x}px`,d=`${l().y}px`,c=X,u=X,g=Z,h=X;return n!==t.e&&p(e,t.e=n),s!==t.t&&_(e,"left",t.t=s),d!==t.a&&_(e,"top",t.a=d),c!==t.o&&p(i,t.o=c),u!==t.i&&p(r,t.i=u),g!==t.n&&p(o,t.n=g),h!==t.s&&p(a,t.s=h),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),g(T,i(h,{get when(){return f(()=>!!r())()&&I().length>0},get children(){var e=te();return g(e,i(m,{get each(){return I()},children:e=>i(ie,{node:e,get selectedId(){return t.selectedId},get onSelect(){return t.onSelect},get onCreateChildPage(){return t.onCreateChildPage},get onCreateChildTable(){return t.onCreateChildTable},get onFetchChildren(){return t.onFetchChildren},get onDeleteNode(){return t.onDeleteNode},get onShowHistory(){return t.onShowHistory},get depth(){return t.depth+1},prefetchedChildren:$})})),v(()=>p(e,M)),e}}),null),v(e=>{var i=W,o=`sidebar-node-${t.node.id}`,a=U,s={[`${j}`]:t.selectedId===t.node.id},l=12*t.depth+8+"px",d=G,c={[`${K}`]:r(),[`${V}`]:!L(),[`${Y}`]:S()},u=`expand-icon-${t.node.id}`,g=F,h=H,v=Q,m=n("common.delete")||"Delete";return i!==e.e&&p(T,e.e=i),o!==e.t&&b(T,"data-testid",e.t=o),a!==e.a&&p(P,e.a=a),e.o=w(P,s,e.o),l!==e.i&&_(P,"padding-left",e.i=l),d!==e.n&&p(O,e.n=d),e.s=w(O,c,e.s),u!==e.h&&b(O,"data-testid",e.h=u),g!==e.r&&p(N,e.r=g),h!==e.d&&p(D,e.d=h),v!==e.l&&p(q,e.l=v),m!==e.u&&b(q,"title",e.u=m),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),T;var T,P,O,N,D,q}d(["click","contextmenu"]);const re="_sidebar_1ddhe_1",oe="_sidebarHeader_1ddhe_9",ae="_loading_1ddhe_42",se="_pageList_1ddhe_48",le="_sidebarFooter_1ddhe_55",de="_footerSeparator_1ddhe_71",ce="_sidebarActions_1ddhe_76",ue="_mobileOpen_1ddhe_115";var ge=y("<p>"),he=y("<aside><div><h2></h2><div><button>+P</button><button>+D</button></div></div><ul></ul><div><a href=/privacy></a><span>|</span><a href=/terms>");function ve(e){const{t:t}=B(),n=(t,n)=>{t.preventDefault(),window.history.pushState(null,"",n),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()};return r=he(),o=r.firstChild,a=o.firstChild,s=a.nextSibling,l=s.firstChild,d=l.nextSibling,c=o.nextSibling,u=c.nextSibling,_=u.firstChild,w=_.nextSibling,y=w.nextSibling,g(a,()=>t("app.workspace")),k(l,"click",e.onCreatePage),k(d,"click",e.onCreateTable),g(r,i(h,{get when(){return f(()=>!!e.loading)()&&0===e.nodes.length},get children(){var e=ge();return g(e,()=>t("common.loading")),v(()=>p(e,ae)),e}}),c),g(c,i(m,{get each(){return e.nodes},children:t=>i(ie,{node:t,get selectedId(){return e.selectedNodeId},get onSelect(){return e.onSelectNode},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},depth:0})})),_.$$click=e=>n(e,"/privacy"),g(_,()=>t("app.privacyPolicy")),y.$$click=e=>n(e,"/terms"),g(y,()=>t("app.terms")),v(n=>{var i=`${re} ${e.isOpen?ue:""}`,a=oe,g=ce,h=t("app.newPage")||"New Page",v=t("app.newTable")||"New Table",_=se,m=le,f=de;return i!==n.e&&p(r,n.e=i),a!==n.t&&p(o,n.t=a),g!==n.a&&p(s,n.a=g),h!==n.o&&b(l,"title",n.o=h),v!==n.i&&b(d,"title",n.i=v),_!==n.n&&p(c,n.n=_),m!==n.s&&p(u,n.s=m),f!==n.h&&p(w,n.h=f),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),r;var r,o,a,s,l,d,c,u,_,w,y}d(["click"]);const pe="select",_e="org:owner",me="org:admin",fe="ws:admin",be="google",we="microsoft",ye="github",ke="_container_1fe2r_1",Se="_tableWrapper_1fe2r_10",Ce="_table_1fe2r_10",$e="_headerRow_1fe2r_24",xe="_headerCell_1fe2r_32",Ie="_row_1fe2r_44",Le="_cell_1fe2r_53",ze="_editing_1fe2r_65",Ee="_cellContent_1fe2r_70",Re="_editContainer_1fe2r_75",Te="_input_1fe2r_81",Pe="_editActions_1fe2r_94",Oe="_saveBtn_1fe2r_99",Ne="_cancelBtn_1fe2r_100",De="_actionsCell_1fe2r_119",qe="_deleteBtn_1fe2r_127",Ae="_addBtn_1fe2r_141",Be="_newRow_1fe2r_155",We="_required_1fe2r_164",Me="_empty_1fe2r_169",Ue="_loadMore_1fe2r_176";var je=y("<input type=checkbox>"),Fe=y("<select><option value>--"),He=y("<option>"),Ge=y("<input type=text>"),Ve=y("<input type=number>"),Ye=y("<input type=date>"),Ke=y("<tr><td><button>+"),Je=y("<div>"),Xe=y("<div><button>"),Ze=y("<div><div><table><thead><tr><th></th></tr></thead><tbody>"),Qe=y("<span>*"),et=y("<th>"),tt=y("<button>‚úï"),nt=y("<tr><td>"),it=y("<div><div><button>‚úì</button><button>‚úï"),rt=y("<td>");function ot(t){const{t:n}=B(),[r,o]=e(null),[a,s]=e(""),[l,d]=e({}),c=e=>{s(e)},u=(e,n)=>{const i=t.columns.find(e=>e.name===n);if(!i||!t.onUpdateRecord)return;const r=t.records.find(t=>t.id===e);if(!r)return;const s={...r.data};s[i.name]=a(),t.onUpdateRecord(e,s),o(null)},_=()=>{t.onAddRecord&&Object.keys(l()).length>0&&(t.onAddRecord(l()),d({}))},f=(e,n)=>{const i=((e,n)=>{const i=t.columns.find(e=>e.name===n);return i?e.data[i.name]??"":""})(e,n.name);switch(n.type){case"checkbox":return i?"‚úì":"";case"select":case"multi_select":case"number":default:return String(i);case"date":return i?new Date(i).toLocaleDateString():""}},y=(e,t,n=!1,r,a)=>{const s=e=>{n&&setTimeout(()=>e.focus(),0)},l=r&&a?e=>((e,t,n)=>{"Enter"===e.key?(e.preventDefault(),u(t,n)):"Escape"===e.key&&(e.preventDefault(),o(null))})(e,r,a):void 0;switch(e.type){case"checkbox":return w=je(),k(w,"keydown",l),w.addEventListener("change",e=>c(String(e.target.checked))),S(s,w),w.checked="true"===t,v(()=>p(w,Te)),w;case pe:return e.options&&e.options.length>0?((b=Fe()).firstChild,k(b,"keydown",l),b.addEventListener("change",e=>c(e.target.value)),S(s,b),b.value=t,g(b,i(m,{get each(){return e.options},children:e=>{return t=He(),g(t,()=>e.name),v(()=>t.value=e.id),t;var t}}),null),v(()=>p(b,Te)),b):(f=Ge(),k(f,"keydown",l),f.$$input=e=>c(e.target.value),S(s,f),f.value=t,v(()=>p(f,Te)),f);case"number":return _=Ve(),k(_,"keydown",l),_.$$input=e=>c(e.target.value),S(s,_),_.value=t,v(()=>p(_,Te)),_;case"date":return h=Ye(),k(h,"keydown",l),h.$$input=e=>c(e.target.value),S(s,h),h.value=t,v(()=>p(h,Te)),h;default:return d=Ge(),k(d,"keydown",l),d.$$input=e=>c(e.target.value),S(s,d),d.value=t,v(()=>p(d,Te)),d}var d,h,_,f,b,w};return C=Ze(),$=C.firstChild,x=$.firstChild,I=x.firstChild,L=I.firstChild,z=L.firstChild,E=I.nextSibling,g(z,()=>n("common.actions")),g(L,i(m,{get each(){return t.columns},children:e=>{return t=et(),g(t,()=>e.name,null),g(t,i(h,{get when(){return e.required},get children(){var e=Qe();return v(()=>p(e,We)),e}}),null),v(()=>p(t,xe)),t;var t}}),null),g(E,i(m,{get each(){return t.records},children:e=>{return l=nt(),d=l.firstChild,g(d,i(h,{get when(){return t.onDeleteRecord},get children(){var i=tt();return i.$$click=()=>t.onDeleteRecord?.(e.id),v(e=>{var t=qe,r=n("table.deleteRecord")||"Delete record";return t!==e.e&&p(i,e.e=t),r!==e.t&&b(i,"title",e.t=r),e},{e:void 0,t:void 0}),i}})),g(l,i(m,{get each(){return t.columns},children:n=>{const l=()=>r()?.recordId===e.id&&r()?.columnId===n.name;return(d=rt()).$$click=()=>((e,n)=>{const i=t.columns.find(e=>e.name===n),r=t.records.find(t=>t.id===e)?.data[i?.name??""]??"";o({recordId:e,columnId:n}),s(String(r))})(e.id,n.name),g(d,i(h,{get when(){return l()},get fallback(){return t=Je(),g(t,()=>f(e,n)),v(()=>p(t,Ee)),t;var t},get children(){var t=it(),i=t.firstChild,r=i.firstChild,s=r.nextSibling;return g(t,()=>y(n,a(),!0,e.id,n.name),i),r.$$click=()=>u(e.id,n.name),s.$$click=()=>o(null),v(e=>{var n=Re,o=Pe,a=Oe,l=Ne;return n!==e.e&&p(t,e.e=n),o!==e.t&&p(i,e.t=o),a!==e.a&&p(r,e.a=a),l!==e.o&&p(s,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t}})),v(e=>{var t=Le,n={[`${ze}`]:l()};return t!==e.e&&p(d,e.e=t),e.t=w(d,n,e.t),e},{e:void 0,t:void 0}),d;var d}}),null),v(e=>{var t=Ie,n=De;return t!==e.e&&p(l,e.e=t),n!==e.t&&p(d,e.t=n),e},{e:void 0,t:void 0}),l;var l,d}}),null),g(E,i(h,{get when(){return t.onAddRecord},get children(){var e=Ke(),n=e.firstChild,r=n.firstChild;return r.$$click=_,g(e,i(m,{get each(){return t.columns},children:e=>{return t=rt(),g(t,()=>y(e,String(l()[e.name]??""))),v(()=>p(t,Le)),t;var t}}),null),v(t=>{var i=Be,o=De,a=Ae;return i!==t.e&&p(e,t.e=i),o!==t.t&&p(n,t.t=o),a!==t.a&&p(r,t.a=a),t},{e:void 0,t:void 0,a:void 0}),e}}),null),g(C,i(h,{get when(){return 0===t.records.length},get children(){var e=Je();return g(e,()=>n("table.noRecords")),v(()=>p(e,Me)),e}}),null),g(C,i(h,{get when(){return t.hasMore},get children(){var e=Xe(),i=e.firstChild;return i.$$click=()=>t.onLoadMore?.(),g(i,()=>n("table.loadMore")),v(()=>p(e,Ue)),e}}),null),v(e=>{var t=ke,n=Se,i=Ce,r=$e,o=xe;return t!==e.e&&p(C,e.e=t),n!==e.t&&p($,e.t=n),i!==e.a&&p(x,e.a=i),r!==e.o&&p(L,e.o=r),o!==e.i&&p(z,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),C;var C,$,x,I,L,z,E}function at(e,t,n,i){if(e.data[t]===n||!i)return;const r={...e.data,[t]:n};i(e.id,r)}function st(e){"Enter"===e.key&&e.currentTarget.blur()}function lt(e,t){if(!t)return"";const n=e.data[t];return null!=n?String(n):""}function dt(e,t){const n=t[0];return n?lt(e,n.name):""}d(["keydown","input","click"]);const ct="_grid_3ff2z_1",ut="_card_3ff2z_8",gt="_cardHeader_3ff2z_20",ht="_deleteBtn_3ff2z_28",vt="_cardBody_3ff2z_40",pt="_field_3ff2z_46",_t="_fieldName_3ff2z_51",mt="_titleInput_3ff2z_58",ft="_fieldValueInput_3ff2z_75";var bt=y("<div>"),wt=y("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),yt=y("<div><span>:</span><input type=text>");function kt(e){const{t:t}=B();return n=bt(),g(n,i(m,{get each(){return e.records},children:n=>{return r=wt(),o=r.firstChild,a=o.firstChild,s=a.firstChild,l=a.nextSibling,d=o.nextSibling,k(s,"keydown",st),s.addEventListener("blur",t=>e.columns[0]&&at(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),l.$$click=()=>e.onDeleteRecord(n.id),g(d,i(m,{get each(){return e.columns.slice(1,4)},children:t=>{return i=yt(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>t.name,o),k(a,"keydown",st),a.addEventListener("blur",i=>at(n,t.name,i.target.value,e.onUpdateRecord)),v(e=>{var t=pt,n=_t,o=ft;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=lt(n,t.name)),i;var i,r,o,a}})),v(e=>{var n=ut,i=gt,a=t("table.untitled")||"Untitled",c=mt,u=ht,g=vt;return n!==e.e&&p(r,e.e=n),i!==e.t&&p(o,e.t=i),a!==e.a&&b(s,"placeholder",e.a=a),c!==e.o&&p(s,e.o=c),u!==e.i&&p(l,e.i=u),g!==e.n&&p(d,e.n=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>s.value=dt(n,e.columns)),r;var r,o,a,s,l,d}})),v(()=>p(n,ct)),n;var n}d(["keydown","click"]);const St="_gallery_1i7ro_1",Ct="_card_1i7ro_8",$t="_imageContainer_1i7ro_23",xt="_image_1i7ro_23",It="_imagePlaceholder_1i7ro_38",Lt="_cardContent_1i7ro_43",zt="_cardHeader_1i7ro_47",Et="_deleteBtn_1i7ro_54",Rt="_cardBody_1i7ro_67",Tt="_field_1i7ro_71",Pt="_fieldName_1i7ro_77",Ot="_titleInput_1i7ro_83",Nt="_fieldValueInput_1i7ro_100";var Dt=y("<div>"),qt=y("<div><div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),At=y("<img>"),Bt=y("<div><span>:</span><input type=text>");function Wt(e){const{t:t}=B();return n=Dt(),g(n,i(m,{get each(){return e.records},children:n=>{const r=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return o=qt(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=l.firstChild,c=l.nextSibling,u=s.nextSibling,g(o,i(h,{when:r,children:r=>{return o=Dt(),g(o,i(h,{get when(){return n.data[r().name]},get fallback(){return e=Dt(),g(e,()=>t("table.noImage")),v(()=>p(e,It)),e;var e},get children(){var t=At();return v(i=>{var o=String(n.data[r().name]),a=dt(n,e.columns)||"Record",s=xt;return o!==i.e&&b(t,"src",i.e=o),a!==i.t&&b(t,"alt",i.t=a),s!==i.a&&p(t,i.a=s),i},{e:void 0,t:void 0,a:void 0}),t}})),v(()=>p(o,$t)),o;var o}}),a),k(d,"keydown",st),d.addEventListener("blur",t=>e.columns[0]&&at(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),c.$$click=()=>e.onDeleteRecord(n.id),g(u,i(m,{get each(){return e.columns.slice(1,3)},children:t=>{return i=Bt(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>t.name,o),k(a,"keydown",st),a.addEventListener("blur",i=>at(n,t.name,i.target.value,e.onUpdateRecord)),v(e=>{var t=Tt,n=Pt,o=Nt;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=lt(n,t.name)),i;var i,r,o,a}})),v(e=>{var n=Ct,i=Lt,r=zt,l=t("table.untitled")||"Untitled",g=Ot,h=Et,v=Rt;return n!==e.e&&p(o,e.e=n),i!==e.t&&p(a,e.t=i),r!==e.a&&p(s,e.a=r),l!==e.o&&b(d,"placeholder",e.o=l),g!==e.i&&p(d,e.i=g),h!==e.n&&p(c,e.n=h),v!==e.s&&p(u,e.s=v),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>d.value=dt(n,e.columns)),o;var o,a,s,l,d,c,u}})),v(()=>p(n,St)),n;var n}d(["keydown","click"]);const Mt="_board_ojcu7_1",Ut="_noGroup_ojcu7_7",jt="_columns_ojcu7_16",Ft="_column_ojcu7_16",Ht="_columnHeader_ojcu7_31",Gt="_columnName_ojcu7_38",Vt="_columnCount_ojcu7_45",Yt="_cards_ojcu7_53",Kt="_card_ojcu7_53",Jt="_cardHeader_ojcu7_68",Xt="_deleteBtn_ojcu7_80",Zt="_cardBody_ojcu7_93",Qt="_field_ojcu7_97",en="_fieldName_ojcu7_103",tn="_titleInput_ojcu7_108",nn="_fieldValueInput_ojcu7_125";var rn=y("<div>"),on=y("<div><div><span></span><span></span></div><div>"),an=y("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),sn=y("<div><span>:</span><input type=text>");function ln(e){const{t:t}=B(),r=n(()=>e.columns.find(e=>e.type===pe||"multi_select"===e.type)),o=n(()=>{const n=r();if(!n)return[{name:"All Records",records:e.records,fromOptions:!0}];const i={};return n.options&&n.options.forEach(e=>{i[e.id]={name:e.name,records:[],fromOptions:!0}}),i.__none__={name:t("table.noGroup")||"No Group",records:[],fromOptions:!0},e.records.forEach(e=>{const t=e.data[n.name];t&&"string"==typeof t?(i[t]||(i[t]={name:t,records:[]}),i[t].records.push(e)):i.__none__?.records.push(e)}),Object.values(i).filter(e=>e.records.length>0||e.fromOptions)});return a=rn(),g(a,i(h,{get when(){return r()},get fallback(){return e=rn(),g(e,()=>t("table.addSelectColumn")),v(()=>p(e,Ut)),e;var e},get children(){var n=rn();return g(n,i(m,{get each(){return o()},children:n=>{return o=on(),a=o.firstChild,s=a.firstChild,l=s.nextSibling,d=a.nextSibling,g(s,()=>n.name),g(l,()=>n.records.length),g(d,i(m,{get each(){return n.records},children:n=>{return o=an(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=s.nextSibling,c=a.nextSibling,k(l,"keydown",st),l.addEventListener("blur",t=>e.columns[0]&&at(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),d.$$click=()=>e.onDeleteRecord(n.id),g(c,i(m,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==r()?.name)},children:t=>{return i=sn(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>t.name,o),k(a,"keydown",st),a.addEventListener("blur",i=>at(n,t.name,i.target.value,e.onUpdateRecord)),v(e=>{var t=Qt,n=en,o=nn;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=lt(n,t.name)),i;var i,r,o,a}})),v(e=>{var n=Kt,i=Jt,r=t("table.untitled")||"Untitled",s=tn,u=Xt,g=Zt;return n!==e.e&&p(o,e.e=n),i!==e.t&&p(a,e.t=i),r!==e.a&&b(l,"placeholder",e.a=r),s!==e.o&&p(l,e.o=s),u!==e.i&&p(d,e.i=u),g!==e.n&&p(c,e.n=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>l.value=dt(n,e.columns)),o;var o,a,s,l,d,c}})),v(e=>{var t=Ft,n=Ht,i=Gt,r=Vt,c=Yt;return t!==e.e&&p(o,e.e=t),n!==e.t&&p(a,e.t=n),i!==e.a&&p(s,e.a=i),r!==e.o&&p(l,e.o=r),c!==e.i&&p(d,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,a,s,l,d}})),v(()=>p(n,jt)),n}})),v(()=>p(a,Mt)),a;var a}d(["keydown","click"]);class dn extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function cn(e,t){const n=await e(t);if(!n.ok){const e=await n.json();throw new dn(n.status,e)}return n.json()}async function un(e,t,n){const i={method:"POST"};n&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n));const r=await e(t,i);if(!r.ok){const e=await r.json();throw new dn(r.status,e)}return r.json()}function gn(e){return{admin:{organizations:{listAllOrgs:()=>cn(e,"/api/admin/organizations")},getAdminStats:()=>cn(e,"/api/admin/stats"),listAllUsers:()=>cn(e,"/api/admin/users")},auth:{email:{changeEmail:t=>un(e,"/api/auth/email",t),sendVerificationEmail:()=>un(e,"/api/auth/email/send-verification")},invitations:{acceptOrgInvitation:t=>un(e,"/api/auth/invitations/org/accept",t),acceptWSInvitation:t=>un(e,"/api/auth/invitations/ws/accept",t)},sessions:{listSessions:()=>cn(e,"/api/auth/sessions"),revokeAllSessions:()=>un(e,"/api/auth/sessions/revoke-all"),revokeSession:t=>un(e,"/api/auth/sessions/revoke",t)},getMe:()=>cn(e,"/api/auth/me"),listProviders:()=>cn(e,"/api/auth/providers"),login:t=>un(e,"/api/auth/login",t),logout:()=>un(e,"/api/auth/logout"),register:t=>un(e,"/api/auth/register",t),switchWorkspace:t=>un(e,"/api/auth/switch-workspace",t),updateUserSettings:t=>un(e,"/api/auth/settings",t)},organizations:{createOrganization:t=>un(e,"/api/organizations",t)},getHealth:()=>cn(e,"/api/health"),org:t=>({invitations:{createOrgInvitation:n=>un(e,`/api/organizations/${t}/invitations`,n),listOrgInvitations:()=>cn(e,`/api/organizations/${t}/invitations`)},notion:{getStatus:n=>cn(e,`/api/organizations/${t}/notion/import/${n}/status`),startImport:n=>un(e,`/api/organizations/${t}/notion/import`,n)},organizations:{getOrganization:()=>cn(e,`/api/organizations/${t}`),updateOrganization:n=>un(e,`/api/organizations/${t}`,n)},settings:{updateOrgPreferences:n=>un(e,`/api/organizations/${t}/settings`,n)},users:{listUsers:()=>cn(e,`/api/organizations/${t}/users`),updateOrgMemberRole:n=>un(e,`/api/organizations/${t}/users/role`,n)},workspaces:{createWorkspace:n=>un(e,`/api/organizations/${t}/workspaces`,n)}}),ws:t=>({invitations:{createWSInvitation:n=>un(e,`/api/workspaces/${t}/invitations`,n),listWSInvitations:()=>cn(e,`/api/workspaces/${t}/invitations`)},nodes:{assets:{deleteNodeAsset:(n,i)=>un(e,`/api/workspaces/${t}/nodes/${n}/assets/${i}/delete`),listNodeAssets:n=>cn(e,`/api/workspaces/${t}/nodes/${n}/assets`)},history:{getNodeVersion:(n,i)=>cn(e,`/api/workspaces/${t}/nodes/${n}/history/${i}`),async listNodeVersions(n,i){const r=new URLSearchParams;i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/history`+(r.toString()?`?${r}`:"");return cn(e,o)}},page:{createPage:(n,i)=>un(e,`/api/workspaces/${t}/nodes/${n}/page/create`,i),deletePage:n=>un(e,`/api/workspaces/${t}/nodes/${n}/page/delete`),getPage:n=>cn(e,`/api/workspaces/${t}/nodes/${n}/page`),updatePage:(n,i)=>un(e,`/api/workspaces/${t}/nodes/${n}/page`,i)},table:{records:{createRecord:(n,i)=>un(e,`/api/workspaces/${t}/nodes/${n}/table/records/create`,i),deleteRecord:(n,i)=>un(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}/delete`),getRecord:(n,i)=>cn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`),async listRecords(n,i){const r=new URLSearchParams;i.Offset&&r.set("offset",String(i.Offset)),i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/table/records`+(r.toString()?`?${r}`:"");return cn(e,o)},updateRecord:(n,i,r)=>un(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`,r)},createTable:(n,i)=>un(e,`/api/workspaces/${t}/nodes/${n}/table/create`,i),deleteTable:n=>un(e,`/api/workspaces/${t}/nodes/${n}/table/delete`),getTable:n=>cn(e,`/api/workspaces/${t}/nodes/${n}/table`),updateTable:(n,i)=>un(e,`/api/workspaces/${t}/nodes/${n}/table`,i)},deleteNode:n=>un(e,`/api/workspaces/${t}/nodes/${n}/delete`),getNode:n=>cn(e,`/api/workspaces/${t}/nodes/${n}`),listNodeChildren:n=>cn(e,`/api/workspaces/${t}/nodes/${n}/children`)},notion:{cancelImport:()=>un(e,`/api/workspaces/${t}/notion/import/cancel`)},settings:{git:{deleteGitRemote:()=>un(e,`/api/workspaces/${t}/settings/git/delete`),getGitRemote:()=>cn(e,`/api/workspaces/${t}/settings/git`),pushGit:()=>un(e,`/api/workspaces/${t}/settings/git/push`),updateGitRemote:n=>un(e,`/api/workspaces/${t}/settings/git`,n)},updateWSMembershipSettings:n=>un(e,`/api/workspaces/${t}/settings/membership`,n)},users:{updateWSMemberRole:n=>un(e,`/api/workspaces/${t}/users/role`,n)},workspaces:{getWorkspace:()=>cn(e,`/api/workspaces/${t}`),updateWorkspace:n=>un(e,`/api/workspaces/${t}`,n)},search:n=>un(e,`/api/workspaces/${t}/search`,n)})}}const hn=3,vn=1e3,pn=3e4;function _n(e){return 429===e||e>=500&&e<600}function mn(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const n=Date.parse(e);return isNaN(n)?null:Math.max(0,n-Date.now())}function fn(e,t){if(null!==t)return Math.min(t,pn);const n=vn*Math.pow(2,e);return Math.min(n,pn)}function bn(e,t){return n=async(n,i)=>{const r=e(),o={...i?.headers};r&&(o.Authorization=`Bearer ${r}`);const a=await fetch(n,{...i,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let i=0;for(;;){const r=await n(e,t);if(!_n(r.status)||i>=hn)return r;const o=fn(i,mn(r.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),i++}};var n}function wn(e,t){return gn(bn(e,t))}const yn=o(),kn=t=>{const[r,o]=e(null),[a,s]=e(localStorage.getItem("mddb_token")),l=async()=>{const e=a();if(e)try{const t=wn(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),s(null),o(null),window.history.pushState(null,"","/")},d=n(()=>wn(()=>a(),l)),c=n(()=>{const e=r()?.workspace_id;return e?d().ws(e):null}),g=n(()=>{const e=r()?.organization_id;return e?d().org(e):null});u(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),s(e),window.history.replaceState({},document.title,window.location.pathname))});let h=!1;C(()=>{const e=a(),t=r();!e||t||h||(h=!0,(async()=>{try{const e=await d().auth.getMe();o(e)}catch(e){console.error("Failed to load user",e),e instanceof dn&&401===e.status&&(localStorage.removeItem("mddb_token"),s(null))}finally{h=!1}})())});const v={user:r,token:a,api:d,wsApi:c,orgApi:g,login:(e,t)=>{localStorage.setItem("mddb_token",e),s(e),o(t)},logout:l,setUser:o,refreshUser:async()=>{try{const e=await d().auth.getMe();o(e)}catch(e){console.error("Failed to refresh user",e),e instanceof dn&&401===e.status&&(localStorage.removeItem("mddb_token"),s(null),o(null))}}};return i(yn.Provider,{value:v,get children(){return t.children}})};function Sn(){const e=r(yn);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function Cn(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}function $n(e,t){return`/w/${e}+${Cn(t||"workspace")}/`}function xn(e,t,n,i){const r=Cn(t||"workspace"),o=i?Cn(i):"";return`/w/${e}+${r}/${n}${o?"+"+o:""}`}function In(e,t){return`/o/${e}+${Cn(t||"organization")}/settings`}function Ln(e,t,n){if(!e||"user"===e)return"/settings/user";return`/settings/${e}/${t}+${Cn(n||e)}`}const zn=o(),En=t=>{const{t:n}=B(),{user:r,setUser:o,api:a,wsApi:s,login:l}=Sn(),[d,u]=c([]),[g,h]=e(null),[v,p]=e(null),[_,m]=e([]),[f,b]=e(!1),[w,y]=e(null),[k,S]=e(!1),[L,z]=e(!1);let E=!1,R=null,T=null,P=null;function O(){const e=r();if(!e?.name)return"";return e.name.split(" ")[0]||e.name}async function N(e){await a().organizations.createOrganization({name:e.name});const t=await a().auth.getMe();o(t)}async function D(e){const t=r();if(!t||!t.organization_id)throw new Error("No organization selected");const n=await a().org(t.organization_id).workspaces.createWorkspace({name:e.name}),i=await a().auth.getMe();o(i),await q(n.id)}async function q(e,t=!0){try{b(!0);const n=await a().auth.switchWorkspace({ws_id:e});if(!n.user)throw new Error("No user data returned");if(l(n.token,n.user),x(()=>{h(null),p(null),m([])}),P=null,R=null,t){const e=n.user.workspace_id,t=n.user.workspace_name;e?window.history.pushState(null,"",$n(e,t)):window.history.pushState(null,"","/")}await A()}catch(i){y(`${n("errors.failedToSwitch")}: ${i}`)}finally{b(!1)}}async function A(e=!1){const t=s(),i=r()?.workspace_id;if(t&&!E&&!(!e&&i&&R===i&&d.length>0))try{E=!0,b(!0);const e=await t.nodes.listNodeChildren("0");let o=e?.nodes||[];if(0===o.length&&k()){const e=await async function(){const e=s(),t=r();if(!e||!t)return null;if(t.workspace_role!==fe&&"ws:editor"!==t.workspace_role)return null;try{const t=await e.nodes.page.createPage("0",{title:n("welcome.welcomePageTitle"),content:n("welcome.welcomePageContent")});return t?.id?String(t.id):null}catch(i){return y(`${n("errors.failedToCreate")}: ${i}`),null}}();if(e){const e=await t.nodes.listNodeChildren("0");o=e?.nodes||[]}}u(I(o)),R=i||null,y(null);const a=window.location.pathname;a.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/)&&!g()&&o.length>0&&o[0]&&W(o[0].id,!1)}catch(o){y(`${n("errors.failedToLoad")}: ${o}`)}finally{E=!1,b(!1)}}async function W(e,t=!0){const i=s();if(i&&T!==e&&P!==e)try{T=e,b(!0);const n=await i.nodes.getNode(e);x(()=>{h(n.id),p(n)}),P=n.id,y(null);const o=r()?.workspace_id,a=r()?.workspace_name;if(o){const e=xn(o,a,n.id,n.title);t?window.location.pathname!==e&&window.history.pushState(null,"",e):window.location.pathname!==e&&window.history.replaceState(null,"",e)}const s=[n];let l=n;for(;l.parent_id&&"0"!==l.parent_id;)try{const e=await i.nodes.getNode(l.parent_id);s.unshift(e),l=e}catch{break}return m(s),n}catch(o){return void y(`${n("errors.failedToLoad")}: ${o}`)}finally{T=null,b(!1)}}C(()=>{const e=r();if(!e||k()||L())return;const t=e.organizations||[];if(0===t.length)return z(!0),void async function(){try{b(!0);const e=O(),t=e?n("onboarding.defaultOrgName",{name:e}):n("onboarding.defaultOrgNameFallback");await N({name:t||"My Organization"})}catch(e){y(`${n("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>z(!1));const i=t[0];if(i){if(0===(e.workspaces?.filter(e=>e.organization_id===i.organization_id)||[]).length&&(i.role===me||i.role===_e))return z(!0),void async function(){try{b(!0);const e=O(),t=e?n("onboarding.defaultWorkspaceName",{name:e}):n("onboarding.defaultWorkspaceNameFallback");await D({name:t||"Main"})}catch(e){y(`${n("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>z(!1))}const o=e.workspace_id,a=e.workspace_name;o&&(S(!0),"/"===window.location.pathname&&window.history.replaceState(null,"",$n(o,a)))}),C(()=>{r()&&A()}),C(()=>{const e=r()?.workspace_id;e&&R!==e&&(P=null)});const M={nodes:d,setNodes:e=>{u($(e))},selectedNodeId:g,setSelectedNodeId:h,selectedNodeData:v,setSelectedNodeData:p,breadcrumbPath:_,setBreadcrumbPath:m,loading:f,setLoading:b,error:w,setError:y,firstLoginCheckDone:k,setFirstLoginCheckDone:S,switchWorkspace:q,createOrganization:N,createWorkspace:D,loadNodes:A,loadNode:W,fetchNodeChildren:async function(e){const t=s();if(!t)return[];try{const n=await t.nodes.listNodeChildren(e),i=n.nodes?.filter(Boolean)||[];return i.length>0&&u($(t=>{const n=t=>{for(const r of t){if(r.id===e)return r.children=i,!0;if(r.children&&n(r.children))return!0}return!1};n(t)})),i}catch(n){return console.error("Failed to fetch children:",n),[]}},updateNodeTitle:(e,t)=>{u($(n=>{const i=n=>{for(const r of n){if(r.id===e)return r.title=t,!0;if(r.children&&i(r.children))return!0}return!1};i(n)})),m(n=>n.map(n=>n.id===e?{...n,title:t}:n))}};return i(zn.Provider,{value:M,get children(){return t.children}})};function Rn(){const e=r(zn);if(!e)throw new Error("useWorkspace must be used within a WorkspaceProvider");return e}const Tn=o(),Pn=t=>{const{t:n}=B(),{user:r,wsApi:o}=Sn(),{selectedNodeId:a,selectedNodeData:s,updateNodeTitle:l,setLoading:d,setError:c}=Rn(),[u,g]=e(""),[h,v]=e(""),[p,_]=e(!1),[m,f]=e("idle"),[b,w]=e(!1),[y,k]=e([]),S=function(e,t){let n=null,i=null;const r=(...r)=>{i=r,null!==n&&clearTimeout(n),n=setTimeout(()=>{n=null,i=null,e(...r)},t)};return r.flush=()=>{if(null!==n&&null!==i){clearTimeout(n);const t=i;n=null,i=null,e(...t)}},r.cancel=()=>{null!==n&&(clearTimeout(n),n=null,i=null)},r.pending=()=>null!==n,r}(async()=>{const e=a(),t=o();if(e&&p()&&t)try{f("saving"),await t.nodes.page.updatePage(e,{title:u(),content:h()}),_(!1),f("saved");const n=r()?.workspace_id,i=r()?.workspace_name;if(n){const t=window.location.pathname,r=xn(n,i,e,u());t!==r&&window.history.replaceState(null,"",r)}setTimeout(()=>{"saved"===m()&&f("idle")},2e3)}catch(i){c(`${n("errors.autoSaveFailed")}: ${i}`),f("idle")}},2e3);function $(){g(""),v(""),_(!1),f("idle"),w(!1),k([])}L(()=>{S.flush()}),C(()=>{const e=s();e?(g(e.title),v(e.content||""),_(!1),f("idle"),w(!1)):$()});const x={title:u,setTitle:g,content:h,setContent:v,hasUnsavedChanges:p,setHasUnsavedChanges:_,autoSaveStatus:m,assetUrls:()=>s()?.asset_urls||{},showHistory:b,setShowHistory:w,history:y,loadHistory:async function(e){if(b())return void w(!1);const t=o();if(t)try{d(!0);const n=await t.nodes.history.listNodeVersions(e,{Limit:100});k(n.history?.filter(Boolean)||[]),w(!0)}catch(i){c(`${n("errors.failedToLoad")}: ${i}`)}finally{d(!1)}},loadVersion:async function(e,t){if(!confirm(n("editor.restoreConfirm")||"This will replace current editor content. Continue?"))return;const i=o();if(i)try{d(!0);const n=await i.nodes.history.getNodeVersion(e,t);v(n.content||""),_(!0),w(!1)}catch(r){c(`${n("errors.failedToLoad")}: ${r}`)}finally{d(!1)}},triggerAutoSave:S,flushAutoSave:S.flush,resetEditor:$,handleTitleChange:function(e){g(e);const t=a();t&&l(t,e),_(!0),S()},handleContentChange:function(e){v(e),_(!0),S()}};return i(Tn.Provider,{value:x,get children(){return t.children}})};const On=o(),Nn=t=>{const{t:n}=B(),{wsApi:r}=Sn(),{selectedNodeId:o,selectedNodeData:a,loading:s,setLoading:l,setError:d}=Rn(),[c,u]=e([]),[g,h]=e(!1);function v(){u([]),h(!1)}async function p(e){const t=r();if(t)try{l(!0);const n=(await t.nodes.table.records.listRecords(e,{Offset:0,Limit:50})).records||[];u(n),h(50===n.length)}catch(i){d(`${n("errors.failedToLoad")}: ${i}`)}finally{l(!1)}}C(()=>{const e=a();e?.has_table?p(e.id):v()});const _={records:c,hasMore:g,loadRecords:p,loadMoreRecords:async function(){const e=o(),t=r();if(e&&!s()&&t)try{l(!0);const n=c().length,i=(await t.nodes.table.records.listRecords(e,{Offset:n,Limit:50})).records||[];u([...c(),...i]),h(50===i.length)}catch(i){d(`${n("errors.failedToLoad")}: ${i}`)}finally{l(!1)}},addRecord:async function(e){const t=o(),i=r();if(t&&i)try{l(!0),await i.nodes.table.records.createRecord(t,{data:e}),await p(t),d(null)}catch(a){d(`${n("errors.failedToCreate")}: ${a}`)}finally{l(!1)}},updateRecord:async function(e,t){const i=o(),a=r();if(i&&a)try{l(!0),await a.nodes.table.records.updateRecord(i,e,{data:t}),await p(i),d(null)}catch(s){d(`${n("errors.failedToSave")}: ${s}`)}finally{l(!1)}},deleteRecord:async function(e){const t=o(),i=r();if(t&&i&&confirm(n("table.confirmDeleteRecord")||"Delete this record?"))try{l(!0),await i.nodes.table.records.deleteRecord(t,e),await p(t),d(null)}catch(a){d(`${n("errors.failedToDelete")}: ${a}`)}finally{l(!1)}},clearRecords:v};return i(On.Provider,{value:_,get children(){return t.children}})};const Dn="_settings_1ivbi_1",qn="_header_1ivbi_7",An="_backButton_1ivbi_20",Bn="_section_1ivbi_36",Wn="_table_1ivbi_45",Mn="_roleSelect_1ivbi_63",Un="_error_1ivbi_69",jn="_success_1ivbi_77",Fn="_tabs_1ivbi_85",Hn="_activeTab_1ivbi_107",Gn="_settingsForm_1ivbi_112",Vn="_formItem_1ivbi_119",Yn="_saveButton_1ivbi_138",Kn="_hint_1ivbi_157",Jn="_inviteSection_1ivbi_163",Xn="_inviteForm_1ivbi_167",Zn="_formGroup_1ivbi_178",Qn="_addRemoteSection_1ivbi_207",ei="_actions_1ivbi_219",ti="_smallButton_1ivbi_224",ni="_deleteButtonSmall_1ivbi_238",ii="_orgLink_1ivbi_252",ri="_linkButton_1ivbi_266";var oi=y("<button>"),ai=y("<div>"),si=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),li=y("<h4>"),di=y("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=editor></option><option value=viewer></option></select><button type=submit>"),ci=y("<section><h3>"),ui=y("<form><div><label></label><input type=text required></div><button type=submit>"),gi=y("<section><h3></h3><div><p></p><button> ‚Üí"),hi=y("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),vi=y("<section><h3></h3><p>"),pi=y("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),_i=y("<p>"),mi=y("<select><option value=admin></option><option value=editor></option><option value=viewer>"),fi=y("<tr><td></td><td></td><td>"),bi=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function wi(t){const{t:n}=B(),{user:r,orgApi:o,wsApi:a}=Sn(),[s,l]=e("members"),[d,c]=e([]),[u,_]=e([]),[f,w]=e(null),[y,k]=e(""),[S,$]=e(""),[x,I]=e(""),[L,z]=e("viewer"),[E,R]=e(""),[T,P]=e(""),[O,N]=e(!1),[D,q]=e(null),[A,W]=e(null),M=()=>r()?.workspace_role===fe,U=async()=>{const e=o();if(e)try{N(!0),q(null);const t=a();if("members"===s()&&M()){const[n,i]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);c(n.users?.filter(e=>!!e)||[]),_(i.invitations?.filter(e=>!!e)||[])}if("workspace"===s()&&t){const e=await t.workspaces.getWorkspace();R(e.name),P(e.name)}if("sync"===s()&&M()&&t)try{const e=await t.settings.git.getGitRemote();w(e)}catch{w(null)}}catch(t){q(`${n("errors.failedToLoad")}: ${t}`)}finally{N(!1)}};C(()=>{U()});const j=async e=>{e.preventDefault();const t=a();if(x()&&t)try{N(!0),await t.invitations.createWSInvitation({email:x(),role:L()}),I(""),W(n("success.invitationSent")||"Invitation sent successfully"),U()}catch(i){q(`${n("errors.failedToInvite")}: ${i}`)}finally{N(!1)}},F=async e=>{e.preventDefault();const t=a();if(t)try{N(!0),q(null),W(null),E()!==T()&&E().trim()&&await t.workspaces.updateWorkspace({name:E().trim()}),P(E().trim()),W(n("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(i){q(`${n("errors.failedToSave")}: ${i}`)}finally{N(!1)}},H=async e=>{e.preventDefault();const t=a();if(t)try{N(!0),q(null);const e=await t.settings.git.updateGitRemote({url:y(),token:S(),type:"custom",auth_type:S()?"token":"none"});w(e),W(n("success.remoteAdded")||"Git remote configured"),k(""),$("")}catch(i){q(`${n("errors.failedToAddRemote")}: ${i}`)}finally{N(!1)}},G=async()=>{const e=a();if(e)try{N(!0),q(null),W(null),await e.settings.git.pushGit(),W(n("success.pushSuccessful")||"Push successful"),U()}catch(t){q(`${n("errors.pushFailed")}: ${t}`)}finally{N(!1)}},V=async()=>{if(!confirm(n("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=a();if(e)try{N(!0),q(null),await e.settings.git.deleteGitRemote(),w(null),W(n("success.remoteRemoved")||"Remote removed")}catch(t){q(`${n("errors.failedToRemoveRemote")}: ${t}`)}finally{N(!1)}};return(()=>{var e=pi(),o=e.firstChild,c=o.firstChild;c.firstChild;var _=c.nextSibling,w=o.nextSibling,C=w.firstChild,T=C.nextSibling;return c.$$click=()=>t.onBack(),g(c,()=>n("common.back"),null),g(_,()=>n("settings.title")),C.$$click=()=>l("members"),g(C,()=>n("settings.members")),T.$$click=()=>l("workspace"),g(T,()=>n("settings.workspace")),g(w,i(h,{get when(){return M()},get children(){var e=oi();return e.$$click=()=>l("sync"),g(e,()=>n("settings.gitSync")),v(()=>p(e,"sync"===s()?Hn:"")),e}}),null),g(e,i(h,{get when(){return D()},get children(){var e=ai();return g(e,D),v(()=>p(e,Un)),e}}),null),g(e,i(h,{get when(){return A()},get children(){var e=ai();return g(e,A),v(()=>p(e,jn)),e}}),null),g(e,i(h,{get when(){return"members"===s()},get children(){var e=ci(),t=e.firstChild;return g(t,()=>n("settings.members")),g(e,i(h,{get when(){return M()},get fallback(){return e=_i(),g(e,()=>n("settings.adminOnlyMembers")),e;var e},get children(){return[(k=si(),S=k.firstChild,C=S.firstChild.firstChild,$=C.nextSibling,E=$.nextSibling,R=S.nextSibling,g(C,()=>n("settings.nameColumn")),g($,()=>n("settings.emailColumn")),g(E,()=>n("settings.roleColumn")),g(R,i(m,{get each(){return d()},children:e=>{return t=fi(),o=t.firstChild,s=o.nextSibling,l=s.nextSibling,g(o,()=>e.name),g(s,()=>e.email),g(l,i(h,{get when(){return e.id!==r()?.id},get fallback(){return e.workspace_role},get children(){var t=mi(),i=t.firstChild,r=i.nextSibling,o=r.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const i=a();if(i)try{N(!0),await i.users.updateWSMemberRole({user_id:e,role:t}),W(n("success.roleUpdated")||"Role updated"),U()}catch(r){q(`${n("errors.failedToUpdateRole")}: ${r}`)}finally{N(!1)}})(e.id,t.target.value)),g(i,()=>n("settings.roleAdmin")),g(r,()=>n("settings.roleEditor")),g(o,()=>n("settings.roleViewer")),v(()=>p(t,Mn)),v(()=>t.value=e.workspace_role),t}})),t;var t,o,s,l}})),v(()=>p(k,Wn)),k),(e=di(),t=e.firstChild,o=t.firstChild,s=o.nextSibling,l=s.firstChild,c=l.nextSibling,_=c.firstChild,f=_.nextSibling,w=f.nextSibling,y=c.nextSibling,t.addEventListener("submit",j),g(o,()=>n("settings.inviteNewMember")),l.$$input=e=>I(e.target.value),c.addEventListener("change",e=>z(e.target.value)),g(_,()=>n("settings.roleAdmin")),g(f,()=>n("settings.roleEditor")),g(w,()=>n("settings.roleViewer")),g(y,()=>n("common.invite")),g(e,i(h,{get when(){return u().length>0},get children(){return[(l=li(),g(l,()=>n("settings.pendingInvitations")),l),(e=si(),t=e.firstChild,r=t.firstChild.firstChild,o=r.nextSibling,a=o.nextSibling,s=t.nextSibling,g(r,()=>n("settings.emailColumn")),g(o,()=>n("settings.roleColumn")),g(a,()=>n("settings.sentColumn")),g(s,i(m,{get each(){return u()},children:e=>{return t=fi(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,g(n,()=>e.email),g(i,()=>e.role),g(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>p(e,Wn)),e)];var e,t,r,o,a,s,l}}),null),v(i=>{var r=Jn,o=Xn,a=Zn,d=n("settings.emailPlaceholder")||"Email address",c=O();return r!==i.e&&p(e,i.e=r),o!==i.t&&p(t,i.t=o),a!==i.a&&p(s,i.a=a),d!==i.o&&b(l,"placeholder",i.o=d),c!==i.i&&(y.disabled=i.i=c),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>l.value=x()),v(()=>c.value=L()),e)];var e,t,o,s,l,c,_,f,w,y,k,S,C,$,E,R}}),null),v(()=>p(e,Bn)),e}}),null),g(e,i(h,{get when(){return"workspace"===s()},get children(){var e=gi(),r=e.firstChild,o=r.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.firstChild;return g(r,()=>n("settings.workspaceSettings")),g(e,i(h,{get when(){return M()},get fallback(){return e=_i(),g(e,()=>n("settings.adminOnlyWorkspace")),e;var e},get children(){var e=ui(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",F),g(i,()=>n("settings.workspaceName")),r.$$input=e=>R(e.target.value),g(o,()=>n("settings.saveWorkspaceSettings")),v(n=>{var i=Gn,r=Vn,a=Yn,s=O();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=E()),e}}),o),g(a,()=>n("settings.orgSettingsHint")),s.$$click=()=>t.onOpenOrgSettings(),g(s,()=>n("settings.openOrgSettings"),l),v(t=>{var n=Bn,i=ii,r=ri;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(s,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),g(e,i(h,{get when(){return"sync"===s()},get children(){var e=vi(),t=e.firstChild,r=t.nextSibling;return g(t,()=>n("settings.gitSynchronization")),g(r,()=>n("settings.gitSyncHint")),g(e,i(h,{get when(){return f()},children:e=>{const t=e().last_sync;return i=bi(),r=i.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,u=c.firstChild,h=u.nextSibling,g(o,()=>n("settings.urlColumn")),g(a,()=>n("settings.lastSyncColumn")),g(s,()=>n("common.actions")),g(l,()=>e().url),g(d,()=>t?new Date(t).toLocaleString():n("settings.never")),u.$$click=G,g(u,()=>n("common.push")),h.$$click=V,g(h,()=>n("common.remove")),v(e=>{var t=Wn,n=ei,r=O(),o=ti,a=O(),s=ni;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(c,e.t=n),r!==e.a&&(u.disabled=e.a=r),o!==e.o&&p(u,e.o=o),a!==e.i&&(h.disabled=e.i=a),s!==e.n&&p(h,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,a,s,l,d,c,u,h}}),null),g(e,i(h,{get when(){return!f()},get children(){var e=hi(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,u=s.nextSibling;return g(t,()=>n("settings.addNewRemote")),i.addEventListener("submit",H),g(o,()=>n("settings.repositoryUrl")),a.$$input=e=>k(e.target.value),g(l,()=>n("settings.personalAccessToken")),d.$$input=e=>$(e.target.value),g(c,()=>n("settings.tokenHint")),g(u,()=>n("settings.addRemote")),v(t=>{var o=Qn,l=Gn,g=Vn,h=n("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",v=Vn,_=n("settings.tokenPlaceholder")||"ghp_...",m=Kn,f=Yn,w=O();return o!==t.e&&p(e,t.e=o),l!==t.t&&p(i,t.t=l),g!==t.a&&p(r,t.a=g),h!==t.o&&b(a,"placeholder",t.o=h),v!==t.i&&p(s,t.i=v),_!==t.n&&b(d,"placeholder",t.n=_),m!==t.s&&p(c,t.s=m),f!==t.h&&p(u,t.h=f),w!==t.r&&(u.disabled=t.r=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>a.value=y()),v(()=>d.value=S()),e}}),null),v(t=>{var n=Bn,i=Kn;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),v(t=>{var n=Dn,i=qn,r=An,a=Fn,l="members"===s()?Hn:"",d="workspace"===s()?Hn:"";return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(c,t.a=r),a!==t.o&&p(w,t.o=a),l!==t.i&&p(C,t.i=l),d!==t.n&&p(T,t.n=d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}d(["click","input"]);const yi="_settings_qni6l_1",ki="_header_qni6l_7",Si="_backButton_qni6l_20",Ci="_section_qni6l_36",$i="_table_qni6l_45",xi="_roleSelect_qni6l_63",Ii="_error_qni6l_69",Li="_success_qni6l_77",zi="_tabs_qni6l_85",Ei="_activeTab_qni6l_107",Ri="_settingsForm_qni6l_112",Ti="_formItem_qni6l_119",Pi="_saveButton_qni6l_138",Oi="_inviteSection_qni6l_157",Ni="_inviteForm_qni6l_161",Di="_formGroup_qni6l_172";var qi=y("<div>"),Ai=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Bi=y("<h4>"),Wi=y("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=member></option></select><button type=submit>"),Mi=y("<section><h3>"),Ui=y("<form><div><label></label><input type=text required></div><button type=submit>"),ji=y("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),Fi=y("<p>"),Hi=y("<select><option value=owner></option><option value=admin></option><option value=member>"),Gi=y("<tr><td></td><td></td><td>");function Vi(t){const{t:r}=B(),{user:o,api:a}=Sn(),[s,l]=e("members"),[d,c]=e([]),[u,_]=e([]),[f,w]=e(""),[y,k]=e("member"),[S,$]=e(""),[x,I]=e(""),[L,z]=e(!1),[E,R]=e(null),[T,P]=e(null),O=n(()=>a().org(t.orgId)),N=n(()=>{const e=o()?.organizations?.find(e=>e.organization_id===t.orgId);return e?.role}),D=n(()=>{const e=N();return e===_e||e===me}),q=async()=>{const e=O();try{if(z(!0),R(null),"members"===s()&&D()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);c(t.users?.filter(e=>!!e)||[]),_(n.invitations?.filter(e=>!!e)||[])}if("settings"===s()){const t=await e.organizations.getOrganization();$(t.name),I(t.name)}}catch(t){R(`${r("errors.failedToLoad")}: ${t}`)}finally{z(!1)}};C(()=>{q()});const A=async e=>{e.preventDefault();const t=O();if(f())try{z(!0),await t.invitations.createOrgInvitation({email:f(),role:y()}),w(""),P(r("success.invitationSent")||"Invitation sent successfully"),q()}catch(n){R(`${r("errors.failedToInvite")}: ${n}`)}finally{z(!1)}},W=async e=>{e.preventDefault();const t=O();try{z(!0),R(null),P(null),S()!==x()&&S().trim()&&await t.organizations.updateOrganization({name:S().trim()}),I(S().trim()),P(r("success.orgSettingsSaved")||"Organization settings saved")}catch(n){R(`${r("errors.failedToSave")}: ${n}`)}finally{z(!1)}};return(()=>{var e=ji(),n=e.firstChild,a=n.firstChild;a.firstChild;var c=a.nextSibling,_=n.nextSibling,C=_.firstChild,x=C.nextSibling;return a.$$click=()=>t.onBack(),g(a,()=>r("common.back"),null),g(c,()=>r("settings.organizationSettings")),C.$$click=()=>l("members"),g(C,()=>r("settings.members")),x.$$click=()=>l("settings"),g(x,()=>r("settings.settings")),g(e,i(h,{get when(){return E()},get children(){var e=qi();return g(e,E),v(()=>p(e,Ii)),e}}),null),g(e,i(h,{get when(){return T()},get children(){var e=qi();return g(e,T),v(()=>p(e,Li)),e}}),null),g(e,i(h,{get when(){return"members"===s()},get children(){var e=Mi(),t=e.firstChild;return g(t,()=>r("settings.organizationMembers")),g(e,i(h,{get when(){return D()},get fallback(){return e=Fi(),g(e,()=>r("settings.adminOnlyMembers")),e;var e},get children(){return[(C=Ai(),$=C.firstChild,x=$.firstChild.firstChild,I=x.nextSibling,E=I.nextSibling,T=$.nextSibling,g(x,()=>r("settings.nameColumn")),g(I,()=>r("settings.emailColumn")),g(E,()=>r("settings.roleColumn")),g(T,i(m,{get each(){return d()},children:e=>{return t=Gi(),n=t.firstChild,a=n.nextSibling,s=a.nextSibling,g(n,()=>e.name),g(a,()=>e.email),g(s,i(h,{get when(){return e.id!==o()?.id},get fallback(){return e.org_role},get children(){var t=Hi(),n=t.firstChild,i=n.nextSibling,o=i.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const n=O();try{z(!0),await n.users.updateOrgMemberRole({user_id:e,role:t}),P(r("success.roleUpdated")||"Role updated"),q()}catch(i){R(`${r("errors.failedToUpdateRole")}: ${i}`)}finally{z(!1)}})(e.id,t.target.value)),g(n,()=>r("settings.roleOwner")),g(i,()=>r("settings.roleAdmin")),g(o,()=>r("settings.roleMember")),v(()=>p(t,xi)),v(()=>t.value=e.org_role),t}})),t;var t,n,a,s}})),v(()=>p(C,$i)),C),(e=Wi(),t=e.firstChild,n=t.firstChild,a=n.nextSibling,s=a.firstChild,l=s.nextSibling,c=l.firstChild,_=c.nextSibling,S=l.nextSibling,t.addEventListener("submit",A),g(n,()=>r("settings.inviteNewMember")),s.$$input=e=>w(e.target.value),l.addEventListener("change",e=>k(e.target.value)),g(c,()=>r("settings.roleAdmin")),g(_,()=>r("settings.roleMember")),g(S,()=>r("common.invite")),g(e,i(h,{get when(){return u().length>0},get children(){return[(l=Bi(),g(l,()=>r("settings.pendingInvitations")),l),(e=Ai(),t=e.firstChild,n=t.firstChild.firstChild,o=n.nextSibling,a=o.nextSibling,s=t.nextSibling,g(n,()=>r("settings.emailColumn")),g(o,()=>r("settings.roleColumn")),g(a,()=>r("settings.sentColumn")),g(s,i(m,{get each(){return u()},children:e=>{return t=Gi(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,g(n,()=>e.email),g(i,()=>e.role),g(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>p(e,$i)),e)];var e,t,n,o,a,s,l}}),null),v(n=>{var i=Oi,o=Ni,l=Di,d=r("settings.emailPlaceholder")||"Email address",c=L();return i!==n.e&&p(e,n.e=i),o!==n.t&&p(t,n.t=o),l!==n.a&&p(a,n.a=l),d!==n.o&&b(s,"placeholder",n.o=d),c!==n.i&&(S.disabled=n.i=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>s.value=f()),v(()=>l.value=y()),e)];var e,t,n,a,s,l,c,_,S,C,$,x,I,E,T}}),null),v(()=>p(e,Ci)),e}}),null),g(e,i(h,{get when(){return"settings"===s()},get children(){var e=Mi(),t=e.firstChild;return g(t,()=>r("settings.organizationPreferences")),g(e,i(h,{get when(){return D()},get fallback(){return e=Fi(),g(e,()=>r("settings.adminOnlySettings")),e;var e},get children(){var e=Ui(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",W),g(n,()=>r("settings.organizationName")),i.$$input=e=>$(e.target.value),g(o,()=>r("common.save")),v(n=>{var i=Ri,r=Ti,a=Pi,s=L();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>i.value=S()),e}}),null),v(()=>p(e,Ci)),e}}),null),v(t=>{var i=yi,r=ki,o=Si,l=zi,d="members"===s()?Ei:"",c="settings"===s()?Ei:"";return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),o!==t.a&&p(a,t.a=o),l!==t.o&&p(_,t.o=l),d!==t.i&&p(C,t.i=d),c!==t.n&&p(x,t.n=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}d(["click","input"]);const Yi="_profile_179j3_1",Ki="_header_179j3_7",Ji="_backButton_179j3_20",Xi="_userInfoSection_179j3_36",Zi="_avatarLarge_179j3_46",Qi="_avatarImageLarge_179j3_58",er="_initialsLarge_179j3_64",tr="_userDetails_179j3_70",nr="_userName_179j3_74",ir="_userEmail_179j3_80",rr="_userRole_179j3_85",or="_section_179j3_95",ar="_error_179j3_104",sr="_success_179j3_112",lr="_settingsForm_179j3_120",dr="_formItem_179j3_127",cr="_checkboxLabel_179j3_146",ur="_saveButton_179j3_159",gr="_orgList_179j3_178",hr="_orgItem_179j3_184",vr="_orgInfo_179j3_194",pr="_orgName_179j3_200",_r="_orgNameLink_179j3_204",mr="_orgRole_179j3_214",fr="_emptyState_179j3_223";var br=y("<div>"),wr=y("<div><header><button>‚Üê </button><h2>"),yr=y("<span>"),kr=y("<section><div></div><div><h3></h3><p>"),Sr=y("<section><h3>"),Cr=y("<div><label><input type=checkbox>"),$r=y("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),xr=y("<img referrerpolicy=no-referrer>"),Ir=y("<p>"),Lr=y("<a>"),zr=y("<div><div><span>");function Er(t){const{t:n}=B(),{user:r,api:o,wsApi:a}=Sn(),[s,l]=e("light"),[d,c]=e("en"),[u,_]=e(!0),[f,w]=e(!1),[y,k]=e(null),[S,$]=e(null),x=()=>{const e=r(),t=e?.name||e?.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};C(()=>{const e=r();l(e?.settings?.theme||"light"),c(e?.settings?.language||"en")});C(()=>{(async()=>{const e=r();if(e)try{w(!0),k(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&_(t.settings?.notifications??!0)}catch(t){k(`${n("errors.failedToLoad")}: ${t}`)}finally{w(!1)}})()});const I=async e=>{e.preventDefault();const t=a();try{w(!0),k(null),$(null);const e={theme:s(),language:d()},i=[o().auth.updateUserSettings({settings:e})];if(t){const e={notifications:u()};i.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(i),$(n("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(i){k(`${n("errors.failedToSave")}: ${i}`)}finally{w(!1)}};return(()=>{var e=wr(),o=e.firstChild,a=o.firstChild;a.firstChild;var w=a.nextSibling;return a.$$click=()=>t.onBack(),g(a,()=>n("common.back"),null),g(w,()=>n("profile.title")),g(e,i(h,{get when(){return y()},get children(){var e=br();return g(e,y),v(()=>p(e,ar)),e}}),null),g(e,i(h,{get when(){return S()},get children(){var e=br();return g(e,S),v(()=>p(e,sr)),e}}),null),g(e,i(h,{get when(){return r()},children:e=>{return[(B=kr(),W=B.firstChild,M=W.nextSibling,U=M.firstChild,j=U.nextSibling,g(W,i(h,{get when(){return(()=>{const e=r()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=yr(),g(e,x),v(()=>p(e,er)),e;var e},children:t=>{return n=xr(),v(i=>{var r=t(),o=e().name||"User",a=Qi;return r!==i.e&&b(n,"src",i.e=r),o!==i.t&&b(n,"alt",i.t=o),a!==i.a&&p(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),g(U,()=>e().name),g(j,()=>e().email),g(M,i(h,{get when(){return e().workspace_role},get children(){var t=yr();return g(t,()=>e().workspace_role),v(()=>p(t,rr)),t}}),null),v(e=>{var t=Xi,n=Zi,i=tr,r=nr,o=ir;return t!==e.e&&p(B,e.e=t),n!==e.t&&p(W,e.t=n),i!==e.a&&p(M,e.a=i),r!==e.o&&p(U,e.o=r),o!==e.i&&p(j,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),B),(q=Sr(),A=q.firstChild,g(A,()=>n("profile.myOrganizations")),g(q,i(h,{get when(){return e().organizations?.length},get fallback(){return e=Ir(),g(e,()=>n("profile.noOrganizations")),v(()=>p(e,fr)),e;var e},get children(){var n=br();return g(n,i(m,{get each(){return e().organizations},children:e=>{const n=Cn(e.organization_name||"organization"),r=`/o/${e.organization_id}+${n}/settings`,o=e.organization_name||e.organization_id;return a=zr(),s=a.firstChild,l=s.firstChild,g(s,i(h,{get when(){return e.role===me||e.role===_e},get fallback(){return e=yr(),g(e,o),v(()=>p(e,pr)),e;var e},get children(){var n=Lr();return n.$$click=n=>{n.preventDefault(),t.onOrgSettings(e)},b(n,"href",r),g(n,o),v(()=>p(n,_r)),n}}),l),g(l,()=>e.role),v(e=>{var t=hr,n=vr,i=mr;return t!==e.e&&p(a,e.e=t),n!==e.t&&p(s,e.t=n),i!==e.a&&p(l,e.a=i),e},{e:void 0,t:void 0,a:void 0}),a;var a,s,l}})),v(()=>p(n,gr)),n}}),null),v(()=>p(q,or)),q),(o=$r(),a=o.firstChild,w=a.nextSibling,y=w.firstChild,k=y.firstChild,S=k.nextSibling,C=S.firstChild,$=C.nextSibling,L=$.nextSibling,z=y.nextSibling,E=z.firstChild,R=E.nextSibling,T=R.firstChild,P=T.nextSibling,O=P.nextSibling,N=O.nextSibling,D=z.nextSibling,g(a,()=>n("settings.personalSettings")),w.addEventListener("submit",I),g(k,()=>n("settings.theme")),S.addEventListener("change",e=>l(e.target.value)),g(C,()=>n("settings.themeLight")),g($,()=>n("settings.themeDark")),g(L,()=>n("settings.themeSystem")),g(E,()=>n("settings.language")),R.addEventListener("change",e=>c(e.target.value)),g(T,()=>n("settings.languageEn")),g(P,()=>n("settings.languageFr")),g(O,()=>n("settings.languageDe")),g(N,()=>n("settings.languageEs")),g(w,i(h,{get when(){return e().workspace_id},get children(){var e=Cr(),t=e.firstChild,i=t.firstChild;return i.addEventListener("change",e=>_(e.currentTarget.checked)),g(t,()=>n("settings.enableNotifications"),null),v(n=>{var i=dr,r=cr;return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),n},{e:void 0,t:void 0}),v(()=>i.checked=u()),e}}),D),g(D,()=>n("settings.saveChanges")),v(e=>{var t=or,n=lr,i=dr,r=dr,a=ur,s=f();return t!==e.e&&p(o,e.e=t),n!==e.t&&p(w,e.t=n),i!==e.a&&p(y,e.a=i),r!==e.o&&p(z,e.o=r),a!==e.i&&p(D,e.i=a),s!==e.n&&(D.disabled=e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>S.value=s()),v(()=>R.value=d()),o)];var o,a,w,y,k,S,C,$,L,z,E,R,T,P,O,N,D,q,A,B,W,M,U,j}}),null),v(t=>{var n=Yi,i=Ki,r=Ji;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(a,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e})()}d(["click"]);const Rr="_authContainer_1ksl8_1",Tr="_authForm_1ksl8_9",Pr="_formGroup_1ksl8_24",Or="_error_1ksl8_62",Nr="_toggle_1ksl8_72",Dr="_authFooter_1ksl8_87",qr="_oauthSection_1ksl8_104",Ar="_divider_1ksl8_108",Br="_oauthButtons_1ksl8_127",Wr="_oauthIcon_1ksl8_133",Mr="_googleButton_1ksl8_140",Ur="_microsoftButton_1ksl8_141",jr="_githubButton_1ksl8_142",Fr="_oauthButton_1ksl8_127";var Hr=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),Gr=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),Vr=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),Yr=y("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),Kr=y("<div><div><span></span></div><div>"),Jr=y("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),Xr=y("<div>"),Zr=y("<a>");const Qr={[be]:function(){return e=Hr(),v(()=>b(e,"class",Wr)),e;var e},[we]:function(){return e=Gr(),v(()=>b(e,"class",Wr)),e;var e},[ye]:function(){return e=Vr(),v(()=>b(e,"class",Wr)),e;var e}},eo={[be]:{style:Mr,labelKey:"auth.loginWithGoogle"},[we]:{style:Ur,labelKey:"auth.loginWithMicrosoft"},[ye]:{style:jr,labelKey:"auth.loginWithGitHub"}};const to=gn((e,t)=>fetch(e,t));function no(n){const{t:r}=B(),[o]=t(()=>to.auth.listProviders().then(e=>e.providers)),[a,s]=e(!1),[l,d]=e(""),[c,u]=e(""),[_,w]=e(""),[y,k]=e(null),[S,C]=e(!1),$=async e=>{e.preventDefault(),k(null),C(!0);try{const e=a()?await to.auth.register({email:l(),password:c(),name:_()}):await to.auth.login({email:l(),password:c()});e.token&&e.user?n.onLogin(e.token,e.user):k("Invalid response from server")}catch(t){k(t instanceof dn?t.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{C(!1)}};return R=Jr(),T=R.firstChild,P=T.firstChild,O=P.nextSibling,N=O.firstChild,D=N.nextSibling,q=O.nextSibling,A=q.firstChild,W=A.nextSibling,M=q.nextSibling,U=M.nextSibling,j=U.firstChild,F=U.nextSibling,H=F.firstChild,T.addEventListener("submit",$),g(P,(x=f(()=>!!a()),()=>x()?r("auth.createAccount"):r("auth.loginTitle"))),g(T,(I=f(()=>!!y()),()=>{return I()&&(e=Xr(),g(e,y),v(()=>p(e,Or)),e);var e}),O),g(T,i(h,{get when(){return a()},get children(){var e=Yr(),t=e.firstChild,n=t.nextSibling;return g(t,()=>r("auth.name")),n.$$input=e=>w(e.target.value),v(()=>p(e,Pr)),v(()=>n.value=_()),e}}),O),g(N,()=>r("auth.email")),D.$$input=e=>d(e.target.value),g(A,()=>r("auth.password")),W.$$input=e=>u(e.target.value),g(M,(L=f(()=>!!S()),()=>L()?r("auth.pleaseWait"):f(()=>!!a())()?r("auth.register"):r("auth.login"))),g(T,i(h,{get when(){return(o()??[]).length>0},get children(){var e=Kr(),t=e.firstChild,n=t.firstChild,a=t.nextSibling;return g(n,()=>r("auth.or")),g(a,i(m,{get each(){return o()},children:e=>{const t=function(e){const t=eo[e];return t?{style:t.style,label:t.labelKey}:{style:Fr,label:e.charAt(0).toUpperCase()+e.slice(1)}}(e),n=e in eo,o=Qr[e];return a=Zr(),b(a,"href",`/api/auth/oauth/${e}`),g(a,o&&i(o,{}),null),g(a,()=>n?r(t.label):t.label,null),v(()=>p(a,t.style)),a;var a}})),v(n=>{var i=qr,r=Ar,o=Br;return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),o!==n.a&&p(a,n.a=o),n},{e:void 0,t:void 0,a:void 0}),e}}),U),g(U,(z=f(()=>!!a()),()=>z()?r("auth.alreadyHaveAccount"):r("auth.dontHaveAccount")),j),j.$$click=()=>s(!a()),g(j,(E=f(()=>!!a()),()=>E()?r("auth.login"):r("auth.register"))),H.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},g(H,()=>r("app.privacyPolicy")),v(e=>{var t=Rr,n=Tr,i=Pr,r=Pr,o=a()?"new-password":"current-password",s=S(),l=Nr,d=Dr;return t!==e.e&&p(R,e.e=t),n!==e.t&&p(T,e.t=n),i!==e.a&&p(O,e.a=i),r!==e.o&&p(q,e.o=r),o!==e.i&&b(W,"autocomplete",e.i=o),s!==e.n&&(M.disabled=e.n=s),l!==e.s&&p(U,e.s=l),d!==e.h&&p(F,e.h=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),v(()=>D.value=l()),v(()=>W.value=c()),R;var x,I,L,z,E,R,T,P,O,N,D,q,A,W,M,U,j,F,H}d(["input","click"]);const io="_container_mfa6v_1",ro="_content_mfa6v_9",oo="_header_mfa6v_19",ao="_section_mfa6v_36",so="_footer_mfa6v_49",lo="_backButton_mfa6v_57";var co=y("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and tables are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function uo(){return e=co(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(l=s.firstChild).$$click=()=>window.history.back(),v(d=>{var c=io,u=ro,g=oo,h=ao,v=ao,_=ao,m=ao,f=so,b=lo;return c!==d.e&&p(e,d.e=c),u!==d.t&&p(t,d.t=u),g!==d.a&&p(n,d.a=g),h!==d.o&&p(i,d.o=h),v!==d.i&&p(r,d.i=v),_!==d.n&&p(o,d.n=_),m!==d.s&&p(a,d.s=m),f!==d.h&&p(s,d.h=f),b!==d.r&&p(l,d.r=b),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,n,i,r,o,a,s,l}d(["click"]);const go="_container_mfa6v_1",ho="_content_mfa6v_9",vo="_header_mfa6v_19",po="_section_mfa6v_36",_o="_footer_mfa6v_49",mo="_backButton_mfa6v_57";var fo=y("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, data, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the ‚ÄúContent‚Äù) and the trademarks, service marks, and logos contained therein (the ‚ÄúMarks‚Äù) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function bo(){return e=fo(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,(d=l.firstChild).$$click=()=>window.history.back(),v(c=>{var u=go,g=ho,h=vo,v=po,_=po,m=po,f=po,b=po,w=_o,y=mo;return u!==c.e&&p(e,c.e=u),g!==c.t&&p(t,c.t=g),h!==c.a&&p(n,c.a=h),v!==c.o&&p(i,c.o=v),_!==c.i&&p(r,c.i=_),m!==c.n&&p(o,c.n=m),f!==c.s&&p(a,c.s=f),b!==c.h&&p(s,c.h=b),w!==c.r&&p(l,c.r=w),y!==c.d&&p(d,c.d=y),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,n,i,r,o,a,s,l,d}d(["click"]);const wo="_banner_172qk_1",yo="_content_172qk_23",ko="_title_172qk_27",So="_message_172qk_32",Co="_actions_172qk_37",$o="_installButton_172qk_42",xo="_dismissButton_172qk_56";var Io=y("<div><div><div></div><div></div></div><div><button></button><button>");const Lo="mddb_pwa_dismissed";function zo(){const{t:t}=B(),[n,r]=e(null),[o,a]=e(!1);u(()=>{if(function(){const e=localStorage.getItem(Lo);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),r(e),a(!0)},t=()=>{a(!1),r(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),L(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=n();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),r(null)},l=()=>{localStorage.setItem(Lo,(new Date).toISOString()),a(!1)};return i(h,{get when(){return f(()=>!!o())()&&n()},get children(){var e=Io(),n=e.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,a=o.firstChild,d=a.nextSibling;return g(i,()=>t("pwa.installTitle")),g(r,()=>t("pwa.installMessage")),a.$$click=l,g(a,()=>t("pwa.dismissButton")),d.$$click=s,g(d,()=>t("pwa.installButton")),v(t=>{var s=wo,l=yo,c=ko,u=So,g=Co,h=xo,v=$o;return s!==t.e&&p(e,t.e=s),l!==t.t&&p(n,t.t=l),c!==t.a&&p(i,t.a=c),u!==t.o&&p(r,t.o=u),g!==t.i&&p(o,t.i=g),h!==t.n&&p(a,t.n=h),v!==t.s&&p(d,t.s=v),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}})}d(["click"]);const Eo="_overlay_v0iwf_1",Ro="_modal_v0iwf_11",To="_header_v0iwf_28",Po="_formGroup_v0iwf_53",Oo="_primaryButton_v0iwf_76",No="_secondaryButton_v0iwf_99",Do="_actions_v0iwf_113",qo="_error_v0iwf_127";var Ao=y("<button type=button>"),Bo=y("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Wo=y("<div>");function Mo(t){const{t:n}=B(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=e=>{t.isFirstOrg||e.target!==e.currentTarget||t.onClose()};return S=Bo(),C=S.firstChild,$=C.firstChild,x=$.firstChild,I=x.nextSibling,L=$.nextSibling,E=L.firstChild,R=E.firstChild,T=R.nextSibling,P=E.nextSibling,O=P.firstChild,S.$$click=u,g(x,(_=f(()=>!!t.isFirstOrg),()=>_()?n("createOrg.firstOrgTitle"):n("createOrg.title"))),g(I,(m=f(()=>!!t.isFirstOrg),()=>m()?n("createOrg.firstOrgDescription"):n("createOrg.description"))),g(C,(w=f(()=>!!l()),()=>{return w()&&(e=Wo(),g(e,l),v(()=>p(e,qo)),e);var e}),L),L.addEventListener("submit",c),g(R,()=>n("createOrg.nameLabel")),T.$$input=e=>o(e.target.value),g(P,i(h,{get when(){return!t.isFirstOrg},get children(){var e=Ao();return k(e,"click",t.onClose),g(e,()=>n("common.cancel")),v(()=>p(e,No)),e}}),O),g(O,(y=f(()=>!!a()),()=>y()?n("common.creating"):n("createOrg.create"))),v(e=>{var i=Eo,o=Ro,s=To,l=Po,d=n("createOrg.namePlaceholder")||"",c=Do,u=Oo,g=!r().trim()||a(),h=t.isFirstOrg?{flex:1}:void 0;return i!==e.e&&p(S,e.e=i),o!==e.t&&p(C,e.t=o),s!==e.a&&p($,e.a=s),l!==e.o&&p(E,e.o=l),d!==e.i&&b(T,"placeholder",e.i=d),c!==e.n&&p(P,e.n=c),u!==e.s&&p(O,e.s=u),g!==e.h&&(O.disabled=e.h=g),e.r=z(O,h,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>T.value=r()),S;var _,m,w,y,S,C,$,x,I,L,E,R,T,P,O}d(["click","input"]);var Uo=y("<button type=button>"),jo=y("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Fo=y("<div>");function Ho(t){const{t:n}=B(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=e=>{t.isFirstWorkspace||e.target!==e.currentTarget||t.onClose()};return S=jo(),C=S.firstChild,$=C.firstChild,x=$.firstChild,I=x.nextSibling,L=$.nextSibling,E=L.firstChild,R=E.firstChild,T=R.nextSibling,P=E.nextSibling,O=P.firstChild,S.$$click=u,g(x,(_=f(()=>!!t.isFirstWorkspace),()=>_()?n("createWorkspace.firstWorkspaceTitle"):n("createWorkspace.title"))),g(I,(m=f(()=>!!t.isFirstWorkspace),()=>m()?n("createWorkspace.firstWorkspaceDescription"):n("createWorkspace.description"))),g(C,(w=f(()=>!!l()),()=>{return w()&&(e=Fo(),g(e,l),v(()=>p(e,qo)),e);var e}),L),L.addEventListener("submit",c),g(R,()=>n("createWorkspace.nameLabel")),T.$$input=e=>o(e.target.value),g(P,i(h,{get when(){return!t.isFirstWorkspace},get children(){var e=Uo();return k(e,"click",t.onClose),g(e,()=>n("common.cancel")),v(()=>p(e,No)),e}}),O),g(O,(y=f(()=>!!a()),()=>y()?n("common.creating"):n("createWorkspace.create"))),v(e=>{var i=Eo,o=Ro,s=To,l=Po,d=n("createWorkspace.namePlaceholder")||"",c=Do,u=Oo,g=!r().trim()||a(),h=t.isFirstWorkspace?{flex:1}:void 0;return i!==e.e&&p(S,e.e=i),o!==e.t&&p(C,e.t=o),s!==e.a&&p($,e.a=s),l!==e.o&&p(E,e.o=l),d!==e.i&&b(T,"placeholder",e.i=d),c!==e.n&&p(P,e.n=c),u!==e.s&&p(O,e.s=u),g!==e.h&&(O.disabled=e.h=g),e.r=z(O,h,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>T.value=r()),S;var _,m,w,y,S,C,$,x,I,L,E,R,T,P,O}d(["click","input"]);const Go="_overlay_1l8b3_1",Vo="_modal_1l8b3_11",Yo="_header_1l8b3_28",Ko="_error_1l8b3_43",Jo="_setupBox_1l8b3_53",Xo="_setupHeader_1l8b3_61",Zo="_setupTitle_1l8b3_70",Qo="_createLink_1l8b3_75",ea="_setupSteps_1l8b3_93",ta="_subSteps_1l8b3_109",na="_formGroup_1l8b3_119",ia="_actions_1l8b3_137",ra="_primaryButton_1l8b3_143",oa="_secondaryButton_1l8b3_166";var aa=y('<div><div><header><h2></h2><p></p></header><div><div><span></span><a href=https://www.notion.so/profile/integrations/form/new-integration target=_blank rel="noopener noreferrer"> &#x2197;</a></div><ol><li><ol><li></li><li></li><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li></ol></div><form><div><label></label><input type=password autofocus></div><div><button type=button></button><button type=submit>'),sa=y("<div>");function la(t){const{t:n}=B(),[i,r]=e(""),[o,a]=e(!1),[s,l]=e(null),d=e=>{"Escape"!==e.key||o()||t.onClose()};u(()=>{document.addEventListener("keydown",d)}),L(()=>{document.removeEventListener("keydown",d)});const c=async e=>{if(e.preventDefault(),i().trim())try{a(!0),l(null),await t.onImport({notionToken:i().trim()}),t.onClose()}catch(n){l(String(n))}finally{a(!1)}},h=e=>{e.target===e.currentTarget&&t.onClose()};return w=aa(),y=w.firstChild,S=y.firstChild,C=S.firstChild,$=C.nextSibling,x=S.nextSibling,I=x.firstChild,z=I.firstChild,E=z.nextSibling,R=E.firstChild,T=I.nextSibling,P=T.firstChild,O=P.firstChild,N=O.firstChild,D=N.nextSibling,q=D.nextSibling,A=q.nextSibling,W=P.nextSibling,M=W.firstChild,U=M.firstChild,j=U.nextSibling,F=W.nextSibling,H=F.firstChild,G=H.firstChild,V=G.nextSibling,Y=x.nextSibling,K=Y.firstChild,J=K.firstChild,X=J.nextSibling,Z=K.nextSibling,Q=Z.firstChild,ee=Q.nextSibling,w.$$click=h,g(C,()=>n("notionImport.title")),g($,()=>n("notionImport.description")),g(y,(_=f(()=>!!s()),()=>{return _()&&(e=sa(),g(e,s),v(()=>p(e,Ko)),e);var e}),x),g(z,()=>n("notionImport.setupTitle")),g(E,()=>n("notionImport.createIntegration"),R),g(P,()=>n("notionImport.step1Header"),O),g(N,()=>n("notionImport.step1a")),g(D,()=>n("notionImport.step1b")),g(q,()=>n("notionImport.step1c")),g(A,()=>n("notionImport.step1d")),g(W,()=>n("notionImport.step2Header"),M),g(U,()=>n("notionImport.step2a")),g(j,()=>n("notionImport.step2b")),g(F,()=>n("notionImport.step3Header"),H),g(G,()=>n("notionImport.step3a")),g(V,()=>n("notionImport.step3b")),Y.addEventListener("submit",c),g(J,()=>n("notionImport.notionToken")),X.$$input=e=>r(e.target.value),k(Q,"click",t.onClose),g(Q,()=>n("common.cancel")),g(ee,(m=f(()=>!!o()),()=>m()?n("notionImport.importing"):n("notionImport.startImport"))),v(e=>{var t=Go,r=Vo,a=Yo,s=Jo,l=Xo,d=Zo,c=Qo,u=ea,g=ta,h=ta,v=ta,_=na,m=n("notionImport.notionTokenPlaceholder")||"",f=ia,k=oa,C=ra,$=!i().trim()||o();return t!==e.e&&p(w,e.e=t),r!==e.t&&p(y,e.t=r),a!==e.a&&p(S,e.a=a),s!==e.o&&p(x,e.o=s),l!==e.i&&p(I,e.i=l),d!==e.n&&p(z,e.n=d),c!==e.s&&p(E,e.s=c),u!==e.h&&p(T,e.h=u),g!==e.r&&p(O,e.r=g),h!==e.d&&p(M,e.d=h),v!==e.l&&p(H,e.l=v),_!==e.u&&p(K,e.u=_),m!==e.c&&b(X,"placeholder",e.c=m),f!==e.w&&p(Z,e.w=f),k!==e.m&&p(Q,e.m=k),C!==e.f&&p(ee,e.f=C),$!==e.y&&(ee.disabled=e.y=$),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),v(()=>X.value=i()),w;var _,m,w,y,S,C,$,x,I,z,E,R,T,P,O,N,D,q,A,W,M,U,j,F,H,G,V,Y,K,J,X,Z,Q,ee}d(["click","input"]);const da="_banner_tmw21_1",ca="_success_tmw21_11",ua="_error_tmw21_16",ga="_cancelled_tmw21_21",ha="_icon_tmw21_26",va="_content_tmw21_30",pa="_message_tmw21_37",_a="_progress_tmw21_41",ma="_stats_tmw21_46",fa="_stat_tmw21_46",ba="_statValue_tmw21_58",wa="_actions_tmw21_63",ya="_cancelButton_tmw21_68",ka="_dismissButton_tmw21_82",Sa="_spinner_tmw21_95";var Ca=y("<span>&#x21BB;"),$a=y("<span>&#x2713;"),xa=y("<span>&#x2717;"),Ia=y("<span>&#x26A0;"),La=y("<span>/<!>: "),za=y("<span><span></span> "),Ea=y("<div>"),Ra=y("<span>"),Ta=y("<button>"),Pa=y("<div><span></span><div><span></span></div><div>");function Oa(e){const{t:t}=B(),n=()=>e.status,r=()=>{switch(n().status){case"running":return t("notionImport.importInProgress");case"completed":return t("notionImport.importCompleted");case"failed":return t("notionImport.importFailed");case"cancelled":return t("notionImport.importCancelled");default:return""}},o=()=>{switch(n().status){case"running":return e=Ca(),v(()=>p(e,Sa)),e;case"completed":return $a();case"failed":return xa();case"cancelled":return Ia();default:return null}var e},a=()=>["completed","failed","cancelled"].includes(n().status);return s=Pa(),l=s.firstChild,d=l.nextSibling,c=d.firstChild,u=d.nextSibling,g(l,o),g(c,r),g(d,i(h,{get when(){return f(()=>"running"===n().status)()&&n().message},get children(){var e=La(),t=e.firstChild,i=t.nextSibling;return i.nextSibling,g(e,()=>n().progress,t),g(e,()=>n().total,i),g(e,()=>n().message,null),v(()=>p(e,_a)),e}}),null),g(d,i(h,{get when(){return f(()=>!!a())()&&(n().pages||n().databases||n().records)},get children(){var e=Ea();return g(e,i(h,{get when(){return n().pages},get children(){var e=za(),i=e.firstChild;return i.nextSibling,g(i,()=>n().pages),g(e,()=>t("notionImport.pagesImported"),null),v(t=>{var n=fa,r=ba;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(e,i(h,{get when(){return n().databases},get children(){var e=za(),i=e.firstChild;return i.nextSibling,g(i,()=>n().databases),g(e,()=>t("notionImport.databasesImported"),null),v(t=>{var n=fa,r=ba;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(e,i(h,{get when(){return n().records},get children(){var e=za(),i=e.firstChild;return i.nextSibling,g(i,()=>n().records),g(e,()=>t("notionImport.recordsImported"),null),v(t=>{var n=fa,r=ba;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(e,i(h,{get when(){return n().assets},get children(){var e=za(),i=e.firstChild;return i.nextSibling,g(i,()=>n().assets),g(e,()=>t("notionImport.assetsImported"),null),v(t=>{var n=fa,r=ba;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(e,i(h,{get when(){return n().errors},get children(){var e=za(),i=e.firstChild;return i.nextSibling,g(i,()=>n().errors),g(e,()=>t("notionImport.errorsEncountered"),null),v(t=>{var n=fa,r=ba;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(()=>p(e,ma)),e}}),null),g(d,i(h,{get when(){return f(()=>"failed"===n().status)()&&n().message},get children(){var e=Ra();return g(e,()=>n().message),v(()=>p(e,_a)),e}}),null),g(u,i(h,{get when(){return"running"===n().status},get children(){var n=Ta();return k(n,"click",e.onCancel),g(n,()=>t("notionImport.cancel")),v(()=>p(n,ya)),n}}),null),g(u,i(h,{get when(){return a()},get children(){var n=Ta();return k(n,"click",e.onDismiss),g(n,()=>t("notionImport.dismiss")),v(()=>p(n,ka)),n}}),null),v(e=>{var t=(()=>{switch(n().status){case"completed":return`${da} ${ca}`;case"failed":return`${da} ${ua}`;case"cancelled":return`${da} ${ga}`;default:return da}})(),i=ha,r=va,o=pa,a=wa;return t!==e.e&&p(s,e.e=t),i!==e.t&&p(l,e.t=i),r!==e.a&&p(d,e.a=r),o!==e.o&&p(c,e.o=o),a!==e.i&&p(u,e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s;var s,l,d,c,u}function Na(e,t){u(()=>{const n=n=>{const i=e();i&&!i.contains(n.target)&&t()};document.addEventListener("mousedown",n),L(()=>{document.removeEventListener("mousedown",n)})})}d(["click"]);const Da="_userMenu_o60yu_1",qa="_avatarButton_o60yu_5",Aa="_avatarImage_o60yu_24",Ba="_initials_o60yu_30",Wa="_dropdown_o60yu_37",Ma="_userInfo_o60yu_50",Ua="_userName_o60yu_57",ja="_userEmail_o60yu_63",Fa="_userRole_o60yu_68",Ha="_divider_o60yu_78",Ga="_menuItem_o60yu_83";var Va=y("<span>"),Ya=y("<div role=menu><div><span></span><span></span></div><div></div><button role=menuitem></button><button role=menuitem>"),Ka=y("<div><button aria-haspopup=menu>"),Ja=y("<img referrerpolicy=no-referrer>");function Xa(t){const{t:n}=B(),{user:r,logout:o}=Sn(),[a,s]=e(!1);let l;const d=()=>{const e=r();if(!e)return"";const t=e.name||e.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},c=()=>r()?.name||"",u=()=>r()?.email||"",_=()=>r()?.workspace_role;Na(()=>l,()=>s(!1));const m=()=>{s(!1),o()},f=()=>{s(!1),t.onProfile()};return w=Ka(),y=w.firstChild,"function"==typeof l?S(l,w):l=w,y.$$click=()=>s(!a()),g(y,i(h,{get when(){return(()=>{const e=r();if(!e)return null;const t=e.oauth_identities;if(!t)return null;for(const n of t)if(n.avatar_url)return n.avatar_url;return null})()},get fallback(){return e=Va(),g(e,d),v(()=>p(e,Ba)),e;var e},children:e=>{return t=Ja(),v(n=>{var i=e(),r=c()||"User",o=Aa;return i!==n.e&&b(t,"src",n.e=i),r!==n.t&&b(t,"alt",n.t=r),o!==n.a&&p(t,n.a=o),n},{e:void 0,t:void 0,a:void 0}),t;var t}})),g(w,i(h,{get when(){return a()},get children(){var e=Ya(),t=e.firstChild,r=t.firstChild,o=r.nextSibling,a=t.nextSibling,s=a.nextSibling,l=s.nextSibling;return g(r,c),g(o,u),g(t,i(h,{get when(){return _()},get children(){var e=Va();return g(e,_),v(()=>p(e,Fa)),e}}),null),s.$$click=f,g(s,()=>n("userMenu.profile")),l.$$click=m,g(l,()=>n("userMenu.logout")),v(n=>{var i=Wa,d=Ma,c=Ua,u=ja,g=Ha,h=Ga,v=Ga;return i!==n.e&&p(e,n.e=i),d!==n.t&&p(t,n.t=d),c!==n.a&&p(r,n.a=c),u!==n.o&&p(o,n.o=u),g!==n.i&&p(a,n.i=g),h!==n.n&&p(s,n.n=h),v!==n.s&&p(l,n.s=v),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),v(e=>{var t=Da,i=qa,r=c()||u(),o=n("userMenu.profile")||"User menu",s=a();return t!==e.e&&p(w,e.e=t),i!==e.t&&p(y,e.t=i),r!==e.a&&b(y,"title",e.a=r),o!==e.o&&b(y,"aria-label",e.o=o),s!==e.i&&b(y,"aria-expanded",e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),w;var w,y}d(["click"]);const Za="_wsMenu_1kkrz_1",Qa="_wsButton_1kkrz_5",es="_wsName_1kkrz_23",ts="_chevron_1kkrz_31",ns="_dropdown_1kkrz_36",is="_wsList_1kkrz_49",rs="_orgHeader_1kkrz_54",os="_wsItem_1kkrz_65",as="_active_1kkrz_84",ss="_wsItemName_1kkrz_88",ls="_checkmark_1kkrz_94",ds="_divider_1kkrz_99",cs="_menuItem_1kkrz_104",us="_icon_1kkrz_123",gs="_plusIcon_1kkrz_127";var hs=y("<div role=menu><div></div><div></div><button role=menuitem><span aria-hidden=true>‚öô</span></button><button role=menuitem><span aria-hidden=true>+</span></button><button role=menuitem><span aria-hidden=true>&#x2B07;"),vs=y("<div><button aria-haspopup=menu><span></span><span aria-hidden=true>"),ps=y("<div>"),_s=y("<span aria-hidden=true>‚úì"),ms=y("<button role=menuitem><span>");function fs(t){const{t:r}=B(),{user:o}=Sn(),{switchWorkspace:a}=Rn(),[s,l]=e(!1);let d;const c=n(()=>{const e=o();if(!e)return[];const t=new Map,n=e.organizations||[],i=e.workspaces||[];for(const r of n)t.set(r.organization_id,{orgId:r.organization_id,orgName:r.organization_name||r.organization_id,workspaces:[]});for(const r of i){const e=t.get(r.organization_id);e&&e.workspaces.push(r)}return Array.from(t.values()).filter(e=>e.workspaces.length>0)}),u=()=>o()?.workspace_id||"",_=()=>{const e=o();if(!e)return r("app.workspace");const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);return t?.workspace_name||r("app.workspace")};Na(()=>d,()=>l(!1));const f=()=>{l(!1),t.onOpenSettings()},w=()=>{l(!1),t.onCreateWorkspace()},y=()=>{l(!1),t.onImportFromNotion()},k=n(()=>c().length>1);return C=vs(),$=C.firstChild,x=$.firstChild,I=x.nextSibling,"function"==typeof d?S(d,C):d=C,$.$$click=()=>l(!s()),g(x,_),g(I,()=>s()?"‚ñ≤":"‚ñº"),g(C,i(h,{get when(){return s()},get children(){var e=hs(),n=e.firstChild,o=n.nextSibling,s=o.nextSibling,d=s.firstChild,_=s.nextSibling,b=_.firstChild,S=_.nextSibling,C=S.firstChild;return g(n,i(m,{get each(){return c()},children:e=>[i(h,{get when(){return k()},get children(){var t=ps();return g(t,()=>e.orgName),v(()=>p(t,rs)),t}}),i(m,{get each(){return e.workspaces},children:e=>{return n=ms(),r=n.firstChild,n.$$click=()=>{return n=e.workspace_id,l(!1),t.onSwitchWorkspace?.(),void(n!==u()&&a(n));var n},g(r,()=>e.workspace_name||e.workspace_id),g(n,i(h,{get when(){return e.workspace_id===u()},get children(){var e=_s();return v(()=>p(e,ls)),e}}),null),v(t=>{var i=`${os} ${e.workspace_id===u()?as:""}`,o=ss;return i!==t.e&&p(n,t.e=i),o!==t.t&&p(r,t.t=o),t},{e:void 0,t:void 0}),n;var n,r}})]})),s.$$click=f,g(s,()=>r("app.settings"),null),_.$$click=w,g(_,()=>r("createWorkspace.title"),null),S.$$click=y,g(S,()=>r("notionImport.title"),null),v(t=>{var i=ns,r=is,a=ds,l=cs,c=us,u=cs,g=gs,h=cs,v=us;return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),a!==t.a&&p(o,t.a=a),l!==t.o&&p(s,t.o=l),c!==t.i&&p(d,t.i=c),u!==t.n&&p(_,t.n=u),g!==t.s&&p(b,t.s=g),h!==t.h&&p(S,t.h=h),v!==t.r&&p(C,t.r=v),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e}}),null),v(e=>{var t=Za,n=Qa,i=_(),o=r("app.switchWorkspace")||"Switch workspace",a=s(),l=es,d=ts;return t!==e.e&&p(C,e.e=t),n!==e.t&&p($,e.t=n),i!==e.a&&b($,"title",e.a=i),o!==e.o&&b($,"aria-label",e.o=o),a!==e.i&&b($,"aria-expanded",e.i=a),l!==e.n&&p(x,e.n=l),d!==e.s&&p(I,e.s=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),C;var C,$,x,I}d(["click"]);const bs="_errorBoundary_1gyxj_3",ws="_errorMessage_1gyxj_21",ys="_errorDetails_1gyxj_27",ks="_retryButton_1gyxj_51";var Ss=y("<div role=alert><h2>Something went wrong</h2><p></p><details><summary>Technical details</summary><pre></pre></details><button>Try again");function Cs(e){return t=Ss(),n=t.firstChild.nextSibling,i=n.nextSibling,r=i.firstChild.nextSibling,o=i.nextSibling,g(n,()=>e.error.message),g(r,()=>e.error.stack),k(o,"click",e.reset),v(e=>{var r=bs,a=ws,s=ys,l=ks;return r!==e.e&&p(t,e.e=r),a!==e.t&&p(n,e.t=a),s!==e.a&&p(i,e.a=s),l!==e.o&&p(o,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t;var t,n,i,r,o}const $s=e=>i(E,{fallback:(e,t)=>i(Cs,{error:e,reset:t}),get children(){return e.children}});d(["click"]);const xs="_navItemWrapper_1177w_3",Is="_navItem_1177w_3",Ls="_active_1177w_27",zs="_section_1177w_34",Es="_expandIcon_1177w_56",Rs="_expanded_1177w_74",Ts="_expandSpacer_1177w_78",Ps="_label_1177w_84",Os="_children_1177w_91";var Ns=y("<span>‚ñ∂"),Ds=y("<div>"),qs=y("<div><a><span>"),As=y("<span>");function Bs(t){const n=()=>t.item.children&&t.item.children.length>0,r=()=>{if(!n())return!1;const e=n=>{for(const i of n){if(t.isActive(i.url))return!0;if(i.children&&e(i.children))return!0}return!1};return e(t.item.children||[])},[o,a]=e(0===t.depth||r());C(()=>{t.currentRoute&&r()&&a(!0)});const s=e=>{e.preventDefault(),n()&&!t.item.url?a(!o()):t.item.url&&(n()&&a(!0),t.onNavigate(t.item.url))},l=e=>{e.preventDefault(),e.stopPropagation(),a(!o())};return d=qs(),c=d.firstChild,u=c.firstChild,c.$$click=s,g(c,i(h,{get when(){return n()},get fallback(){return e=As(),v(()=>p(e,Ts)),e;var e},get children(){var e=Ns();return e.$$click=l,v(()=>p(e,(()=>{let e=Es;return o()&&(e+=" "+Rs),e})())),e}}),u),g(u,()=>t.item.label),g(d,i(h,{get when(){return f(()=>!!o())()&&n()},get children(){var e=Ds();return g(e,i(m,{get each(){return t.item.children},children:e=>i(Bs,{item:e,get depth(){return t.depth+1},get isActive(){return t.isActive},get onNavigate(){return t.onNavigate},get currentRoute(){return t.currentRoute}})})),v(()=>p(e,Os)),e}}),null),v(e=>{var i=xs,r=t.item.url||"#",o=(()=>{let e=Is;return t.isActive(t.item.url)&&(e+=" "+Ls),0===t.depth&&n()&&(e+=" "+zs),e})(),a=12*t.depth+16+"px",s=Ps;return i!==e.e&&p(d,e.e=i),r!==e.t&&b(c,"href",e.t=r),o!==e.a&&p(c,e.a=o),a!==e.o&&_(c,"padding-left",e.o=a),s!==e.i&&p(u,e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),d;var d,c,u}d(["click"]);const Ws="_sidebar_dpyfy_3",Ms="_nav_dpyfy_13",Us="_mobileOpen_dpyfy_31";var js=y("<aside><nav>");function Fs(e){const{t:t}=B(),{user:n}=Sn(),r=e=>{if(!e)return!1;const t=window.location.pathname,n=window.location.hash,[i,r]=e.split("#");return i===t&&(!r||n==="#"+r)};return o=js(),a=o.firstChild,g(a,i(m,{get each(){return(()=>{const e=[],i=n();if(!i)return e;e.push({id:"user",label:t("settings.personal"),url:Ln("user")});const r=i.workspaces||[];if(r.length>0){const n=r.map(e=>{const n=e.workspace_id,i=e.workspace_name||n,r=e.role===fe,o=[{id:`ws-${n}-members`,label:t("settings.members"),url:Ln("workspace",n,i)+"#members"},{id:`ws-${n}-settings`,label:t("settings.settings"),url:Ln("workspace",n,i)+"#settings"}];return r&&o.push({id:`ws-${n}-sync`,label:t("settings.gitSync"),url:Ln("workspace",n,i)+"#sync"}),{id:`ws-${n}`,label:i,url:Ln("workspace",n,i),children:o}});e.push({id:"workspaces",label:t("settings.workspaces"),url:"",children:n})}const o=(i.organizations||[]).filter(e=>e.role===me||e.role===_e);if(o.length>0){const n=o.map(e=>{const n=e.organization_id,i=e.organization_name||n;return{id:`org-${n}`,label:i,url:Ln("org",n,i),children:[{id:`org-${n}-members`,label:t("settings.members"),url:Ln("org",n,i)+"#members"},{id:`org-${n}-settings`,label:t("settings.settings"),url:Ln("org",n,i)+"#settings"}]}});e.push({id:"organizations",label:t("settings.organizations"),url:"",children:n})}return e})()},children:t=>i(Bs,{item:t,depth:0,isActive:r,get onNavigate(){return e.onNavigate},get currentRoute(){return e.currentRoute}})})),v(t=>{var n=`${Ws} ${e.isOpen?Us:""}`,i=Ms;return n!==t.e&&p(o,t.e=n),i!==t.t&&p(a,t.t=i),t},{e:void 0,t:void 0}),o;var o,a}const Hs="_profile_vysi4_3",Gs="_userInfoSection_vysi4_7",Vs="_avatarLarge_vysi4_17",Ys="_avatarImageLarge_vysi4_29",Ks="_initialsLarge_vysi4_35",Js="_userDetails_vysi4_41",Xs="_userName_vysi4_45",Zs="_userEmail_vysi4_51",Qs="_userRole_vysi4_56",el="_section_vysi4_66",tl="_error_vysi4_75",nl="_success_vysi4_83",il="_settingsForm_vysi4_91",rl="_formItem_vysi4_98",ol="_checkboxLabel_vysi4_117",al="_saveButton_vysi4_130",sl="_orgList_vysi4_149",ll="_orgItem_vysi4_155",dl="_orgInfo_vysi4_165",cl="_orgName_vysi4_171",ul="_orgNameLink_vysi4_175",gl="_orgRole_vysi4_185",hl="_emptyState_vysi4_194";var vl=y("<div>"),pl=y("<span>"),_l=y("<section><div></div><div><h3></h3><p>"),ml=y("<section><h3>"),fl=y("<div><label><input type=checkbox>"),bl=y("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),wl=y("<img referrerpolicy=no-referrer>"),yl=y("<p>"),kl=y("<a>"),Sl=y("<div><div><span>");function Cl(){const{t:t}=B(),{user:n,api:r,wsApi:o}=Sn(),[a,s]=e("light"),[l,d]=e("en"),[c,u]=e(!0),[_,f]=e(!1),[w,y]=e(null),[k,S]=e(null),$=()=>{const e=n(),t=e?.name||e?.email||"",i=t.split(/[\s@]+/);return i.length>=2&&i[0]&&i[1]?((i[0][0]||"")+(i[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};C(()=>{const e=n();s(e?.settings?.theme||"light"),d(e?.settings?.language||"en")});C(()=>{(async()=>{const e=n();if(e)try{f(!0),y(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&u(t.settings?.notifications??!0)}catch(i){y(`${t("errors.failedToLoad")}: ${i}`)}finally{f(!1)}})()});const x=async e=>{e.preventDefault();const n=o();try{f(!0),y(null),S(null);const e={theme:a(),language:l()},i=[r().auth.updateUserSettings({settings:e})];if(n){const e={notifications:c()};i.push(n.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(i),S(t("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(i){y(`${t("errors.failedToSave")}: ${i}`)}finally{f(!1)}};return I=vl(),g(I,i(h,{get when(){return w()},get children(){var e=vl();return g(e,w),v(()=>p(e,tl)),e}}),null),g(I,i(h,{get when(){return k()},get children(){var e=vl();return g(e,k),v(()=>p(e,nl)),e}}),null),g(I,i(h,{get when(){return n()},children:e=>{return[(A=_l(),B=A.firstChild,W=B.nextSibling,M=W.firstChild,U=M.nextSibling,g(B,i(h,{get when(){return(()=>{const e=n()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=pl(),g(e,$),v(()=>p(e,Ks)),e;var e},children:t=>{return n=wl(),v(i=>{var r=t(),o=e().name||"User",a=Ys;return r!==i.e&&b(n,"src",i.e=r),o!==i.t&&b(n,"alt",i.t=o),a!==i.a&&p(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),g(M,()=>e().name),g(U,()=>e().email),g(W,i(h,{get when(){return e().workspace_role},get children(){var t=pl();return g(t,()=>e().workspace_role),v(()=>p(t,Qs)),t}}),null),v(e=>{var t=Gs,n=Vs,i=Js,r=Xs,o=Zs;return t!==e.e&&p(A,e.e=t),n!==e.t&&p(B,e.t=n),i!==e.a&&p(W,e.a=i),r!==e.o&&p(M,e.o=r),o!==e.i&&p(U,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),A),(D=ml(),q=D.firstChild,g(q,()=>t("profile.myOrganizations")),g(D,i(h,{get when(){return e().organizations?.length},get fallback(){return e=yl(),g(e,()=>t("profile.noOrganizations")),v(()=>p(e,hl)),e;var e},get children(){var t=vl();return g(t,i(m,{get each(){return e().organizations},children:e=>{const t=e.organization_name||e.organization_id;return n=Sl(),r=n.firstChild,o=r.firstChild,g(r,i(h,{get when(){return e.role===me||e.role===_e},get fallback(){return e=pl(),g(e,t),v(()=>p(e,cl)),e;var e},get children(){var n=kl();return n.$$click=t=>{t.preventDefault(),(e=>{window.history.pushState(null,"",Ln("org",e.organization_id,e.organization_name)),window.dispatchEvent(new PopStateEvent("popstate"))})(e)},g(n,t),v(t=>{var i=Ln("org",e.organization_id,e.organization_name),r=ul;return i!==t.e&&b(n,"href",t.e=i),r!==t.t&&p(n,t.t=r),t},{e:void 0,t:void 0}),n}}),o),g(o,()=>e.role),v(e=>{var t=ll,i=dl,a=gl;return t!==e.e&&p(n,e.e=t),i!==e.t&&p(r,e.t=i),a!==e.a&&p(o,e.a=a),e},{e:void 0,t:void 0,a:void 0}),n;var n,r,o}})),v(()=>p(t,sl)),t}}),null),v(()=>p(D,el)),D),(r=bl(),o=r.firstChild,f=o.nextSibling,w=f.firstChild,y=w.firstChild,k=y.nextSibling,S=k.firstChild,C=S.nextSibling,I=C.nextSibling,L=w.nextSibling,z=L.firstChild,E=z.nextSibling,R=E.firstChild,T=R.nextSibling,P=T.nextSibling,O=P.nextSibling,N=L.nextSibling,g(o,()=>t("settings.personalSettings")),f.addEventListener("submit",x),g(y,()=>t("settings.theme")),k.addEventListener("change",e=>s(e.target.value)),g(S,()=>t("settings.themeLight")),g(C,()=>t("settings.themeDark")),g(I,()=>t("settings.themeSystem")),g(z,()=>t("settings.language")),E.addEventListener("change",e=>d(e.target.value)),g(R,()=>t("settings.languageEn")),g(T,()=>t("settings.languageFr")),g(P,()=>t("settings.languageDe")),g(O,()=>t("settings.languageEs")),g(f,i(h,{get when(){return e().workspace_id},get children(){var e=fl(),n=e.firstChild,i=n.firstChild;return i.addEventListener("change",e=>u(e.currentTarget.checked)),g(n,()=>t("settings.enableNotifications"),null),v(t=>{var i=rl,r=ol;return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),t},{e:void 0,t:void 0}),v(()=>i.checked=c()),e}}),N),g(N,()=>t("settings.saveChanges")),v(e=>{var t=el,n=il,i=rl,o=rl,a=al,s=_();return t!==e.e&&p(r,e.e=t),n!==e.t&&p(f,e.t=n),i!==e.a&&p(w,e.a=i),o!==e.o&&p(L,e.o=o),a!==e.i&&p(N,e.i=a),s!==e.n&&(N.disabled=e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>k.value=a()),v(()=>E.value=l()),r)];var r,o,f,w,y,k,S,C,I,L,z,E,R,T,P,O,N,D,q,A,B,W,M,U}}),null),v(()=>p(I,Hs)),I;var I}d(["click"]);const $l="_table_rjyw4_3",xl="_roleSelect_rjyw4_21";var Il=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Ll=y("<select>"),zl=y("<tr><td></td><td></td><td>"),El=y("<option>");function Rl(e){const{t:t}=B(),n=t=>("workspace_role"===e.roleField?t.workspace_role:t.org_role)||"";return r=Il(),o=r.firstChild,a=o.firstChild.firstChild,s=a.nextSibling,l=s.nextSibling,d=o.nextSibling,g(a,()=>t("settings.nameColumn")),g(s,()=>t("settings.emailColumn")),g(l,()=>t("settings.roleColumn")),g(d,i(m,{get each(){return e.members},children:t=>{return r=zl(),o=r.firstChild,a=o.nextSibling,s=a.nextSibling,g(o,()=>t.name),g(a,()=>t.email),g(s,i(h,{get when(){return t.id!==e.currentUserId},get fallback(){return n(t)},get children(){var r=Ll();return r.addEventListener("change",n=>e.onUpdateRole(t.id,n.target.value)),g(r,i(m,{get each(){return e.roleOptions},children:e=>{return t=El(),g(t,()=>e.label),v(()=>t.value=e.value),t;var t}})),v(t=>{var n=xl,i=e.loading;return n!==t.e&&p(r,t.e=n),i!==t.t&&(r.disabled=t.t=i),t},{e:void 0,t:void 0}),v(()=>r.value=n(t)),r}})),r;var r,o,a,s}})),v(()=>p(r,$l)),r;var r,o,a,s,l,d}const Tl="_inviteSection_toc48_3",Pl="_inviteForm_toc48_7",Ol="_formGroup_toc48_17",Nl="_pendingSection_toc48_57",Dl="_table_toc48_65";var ql=y("<div><h4></h4><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Al=y("<div><form><h4></h4><div><input type=email required><select></select><button type=submit>"),Bl=y("<option>"),Wl=y("<tr><td></td><td></td><td>");function Ml(t){const{t:n}=B(),[r,o]=e(""),[a,s]=e(t.defaultRole),l=async e=>{e.preventDefault(),r()&&(await t.onInvite(r(),a()),o(""))};return d=Al(),c=d.firstChild,u=c.firstChild,_=u.nextSibling,f=_.firstChild,w=f.nextSibling,y=w.nextSibling,c.addEventListener("submit",l),g(u,()=>n("settings.inviteNewMember")),f.$$input=e=>o(e.target.value),w.addEventListener("change",e=>s(e.target.value)),g(w,i(m,{get each(){return t.roleOptions},children:e=>{return t=Bl(),g(t,()=>e.label),v(()=>t.value=e.value),t;var t}})),g(y,()=>n("common.invite")),g(d,i(h,{get when(){return t.pendingInvitations.length>0},get children(){var e=ql(),r=e.firstChild,o=r.nextSibling,a=o.firstChild,s=a.firstChild.firstChild,l=s.nextSibling,d=l.nextSibling,c=a.nextSibling;return g(r,()=>n("settings.pendingInvitations")),g(s,()=>n("settings.emailColumn")),g(l,()=>n("settings.roleColumn")),g(d,()=>n("settings.sentColumn")),g(c,i(m,{get each(){return t.pendingInvitations},children:e=>{return t=Wl(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,g(n,()=>e.email),g(i,()=>e.role),g(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(t=>{var n=Nl,i=Dl;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),t},{e:void 0,t:void 0}),e}}),null),v(e=>{var i=Tl,r=Pl,o=Ol,a=n("settings.emailPlaceholder")||"Email address",s=t.loading,l=t.loading,u=t.loading;return i!==e.e&&p(d,e.e=i),r!==e.t&&p(c,e.t=r),o!==e.a&&p(_,e.a=o),a!==e.o&&b(f,"placeholder",e.o=a),s!==e.i&&(f.disabled=e.i=s),l!==e.n&&(w.disabled=e.n=l),u!==e.s&&(y.disabled=e.s=u),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>f.value=r()),v(()=>w.value=a()),d;var d,c,u,_,f,w,y}d(["input"]);const Ul="_panel_1dwg0_3",jl="_tabs_1dwg0_7",Fl="_activeTab_1dwg0_29",Hl="_section_1dwg0_34",Gl="_error_1dwg0_43",Vl="_success_1dwg0_51",Yl="_settingsForm_1dwg0_59",Kl="_formItem_1dwg0_66",Jl="_saveButton_1dwg0_86",Xl="_hint_1dwg0_105",Zl="_table_1dwg0_111",Ql="_actions_1dwg0_129",ed="_smallButton_1dwg0_134",td="_deleteButtonSmall_1dwg0_148",nd="_addRemoteSection_1dwg0_162",id="_orgLink_1dwg0_174",rd="_linkButton_1dwg0_188";var od=y("<button>"),ad=y("<div>"),sd=y("<section><h3>"),ld=y("<form><div><label></label><input type=text required></div><button type=submit>"),dd=y("<section><h3></h3><div><p></p><button> ‚Üí"),cd=y("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),ud=y("<section><h3></h3><p>"),gd=y("<div><div><button></button><button>"),hd=y("<p>"),vd=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function pd(t){const{t:n}=B(),{user:r,orgApi:o,wsApi:a}=Sn(),[s,l]=e("settings"===t.section?"settings":"sync"===t.section?"sync":"members"),[d,c]=e([]),[u,_]=e([]),[m,f]=e(null),[w,y]=e(""),[k,S]=e(""),[$,x]=e(""),[I,L]=e(""),[z,E]=e(!1),[R,T]=e(null),[P,O]=e(null),N=()=>r()?.workspace_role===fe,D=e=>{l(e);const t="members"===e?"":`#${e}`,n=window.location.pathname;window.history.replaceState(null,"",n+t)},q=async()=>{const e=o();if(e)try{E(!0),T(null);const t=a();if("members"===s()&&N()){const[n,i]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);c(n.users?.filter(e=>!!e)||[]),_(i.invitations?.filter(e=>!!e)||[])}if("settings"===s()&&t){const e=await t.workspaces.getWorkspace();x(e.name),L(e.name)}if("sync"===s()&&N()&&t)try{const e=await t.settings.git.getGitRemote();f(e)}catch{f(null)}}catch(t){T(`${n("errors.failedToLoad")}: ${t}`)}finally{E(!1)}};C(()=>{q()}),C(()=>{const e=t.section;"settings"===e?l("settings"):"sync"===e?l("sync"):"members"!==e&&e||l("members")});const A=async(e,t)=>{const i=a();if(i)try{E(!0),await i.invitations.createWSInvitation({email:e,role:t}),O(n("success.invitationSent")||"Invitation sent successfully"),q()}catch(r){T(`${n("errors.failedToInvite")}: ${r}`)}finally{E(!1)}},W=async(e,t)=>{const i=a();if(i)try{E(!0),await i.users.updateWSMemberRole({user_id:e,role:t}),O(n("success.roleUpdated")||"Role updated"),q()}catch(r){T(`${n("errors.failedToUpdateRole")}: ${r}`)}finally{E(!1)}},M=async e=>{e.preventDefault();const t=a();if(t)try{E(!0),T(null),O(null),$()!==I()&&$().trim()&&await t.workspaces.updateWorkspace({name:$().trim()}),L($().trim()),O(n("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(i){T(`${n("errors.failedToSave")}: ${i}`)}finally{E(!1)}},U=async e=>{e.preventDefault();const t=a();if(t)try{E(!0),T(null);const e=await t.settings.git.updateGitRemote({url:w(),token:k(),type:"custom",auth_type:k()?"token":"none"});f(e),O(n("success.remoteAdded")||"Git remote configured"),y(""),S("")}catch(i){T(`${n("errors.failedToAddRemote")}: ${i}`)}finally{E(!1)}},j=async()=>{const e=a();if(e)try{E(!0),T(null),O(null),await e.settings.git.pushGit(),O(n("success.pushSuccessful")||"Push successful"),q()}catch(t){T(`${n("errors.pushFailed")}: ${t}`)}finally{E(!1)}},F=async()=>{if(!confirm(n("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=a();if(e)try{E(!0),T(null),await e.settings.git.deleteGitRemote(),f(null),O(n("success.remoteRemoved")||"Remote removed")}catch(t){T(`${n("errors.failedToRemoveRemote")}: ${t}`)}finally{E(!1)}},H=[{value:"admin",label:n("settings.roleAdmin")},{value:"editor",label:n("settings.roleEditor")},{value:"viewer",label:n("settings.roleViewer")}];return G=gd(),V=G.firstChild,Y=V.firstChild,K=Y.nextSibling,Y.$$click=()=>D("members"),g(Y,()=>n("settings.members")),K.$$click=()=>D("settings"),g(K,()=>n("settings.workspace")),g(V,i(h,{get when(){return N()},get children(){var e=od();return e.$$click=()=>D("sync"),g(e,()=>n("settings.gitSync")),v(()=>p(e,"sync"===s()?Fl:"")),e}}),null),g(G,i(h,{get when(){return R()},get children(){var e=ad();return g(e,R),v(()=>p(e,Gl)),e}}),null),g(G,i(h,{get when(){return P()},get children(){var e=ad();return g(e,P),v(()=>p(e,Vl)),e}}),null),g(G,i(h,{get when(){return"members"===s()},get children(){var e=sd(),t=e.firstChild;return g(t,()=>n("settings.members")),g(e,i(h,{get when(){return N()},get fallback(){return e=hd(),g(e,()=>n("settings.adminOnlyMembers")),e;var e},get children(){return[i(Rl,{get members(){return d()},get currentUserId(){return r()?.id||""},roleOptions:H,roleField:"workspace_role",onUpdateRole:W,get loading(){return z()}}),i(Ml,{roleOptions:H,defaultRole:"viewer",get pendingInvitations(){return u().map(e=>({email:e.email,role:e.role,created:e.created}))},onInvite:A,get loading(){return z()}})]}}),null),v(()=>p(e,Hl)),e}}),null),g(G,i(h,{get when(){return"settings"===s()},get children(){var e=dd(),o=e.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,d=l.firstChild;return g(o,()=>n("settings.workspaceSettings")),g(e,i(h,{get when(){return N()},get fallback(){return e=hd(),g(e,()=>n("settings.adminOnlyWorkspace")),e;var e},get children(){var e=ld(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",M),g(i,()=>n("settings.workspaceName")),r.$$input=e=>x(e.target.value),g(o,()=>n("settings.saveWorkspaceSettings")),v(n=>{var i=Yl,r=Kl,a=Jl,s=z();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=$()),e}}),a),g(s,()=>n("settings.orgSettingsHint")),l.$$click=()=>{const e=r(),n=e?.organization_id,i=e?.organizations?.find(e=>e.organization_id===n),o=i?.organization_name||"";n&&t.onNavigateToOrgSettings(n,o)},g(l,()=>n("settings.openOrgSettings"),d),v(t=>{var n=Hl,i=id,r=rd;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(a,t.t=i),r!==t.a&&p(l,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),g(G,i(h,{get when(){return"sync"===s()},get children(){var e=ud(),t=e.firstChild,r=t.nextSibling;return g(t,()=>n("settings.gitSynchronization")),g(r,()=>n("settings.gitSyncHint")),g(e,i(h,{get when(){return m()},children:e=>{const t=e().last_sync;return i=vd(),r=i.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,u=c.firstChild,h=u.nextSibling,g(o,()=>n("settings.urlColumn")),g(a,()=>n("settings.lastSyncColumn")),g(s,()=>n("common.actions")),g(l,()=>e().url),g(d,()=>t?new Date(t).toLocaleString():n("settings.never")),u.$$click=j,g(u,()=>n("common.push")),h.$$click=F,g(h,()=>n("common.remove")),v(e=>{var t=Zl,n=Ql,r=z(),o=ed,a=z(),s=td;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(c,e.t=n),r!==e.a&&(u.disabled=e.a=r),o!==e.o&&p(u,e.o=o),a!==e.i&&(h.disabled=e.i=a),s!==e.n&&p(h,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,a,s,l,d,c,u,h}}),null),g(e,i(h,{get when(){return!m()},get children(){var e=cd(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,u=s.nextSibling;return g(t,()=>n("settings.addNewRemote")),i.addEventListener("submit",U),g(o,()=>n("settings.repositoryUrl")),a.$$input=e=>y(e.target.value),g(l,()=>n("settings.personalAccessToken")),d.$$input=e=>S(e.target.value),g(c,()=>n("settings.tokenHint")),g(u,()=>n("settings.addRemote")),v(t=>{var o=nd,l=Yl,g=Kl,h=n("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",v=Kl,_=n("settings.tokenPlaceholder")||"ghp_...",m=Xl,f=Jl,w=z();return o!==t.e&&p(e,t.e=o),l!==t.t&&p(i,t.t=l),g!==t.a&&p(r,t.a=g),h!==t.o&&b(a,"placeholder",t.o=h),v!==t.i&&p(s,t.i=v),_!==t.n&&b(d,"placeholder",t.n=_),m!==t.s&&p(c,t.s=m),f!==t.h&&p(u,t.h=f),w!==t.r&&(u.disabled=t.r=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>a.value=w()),v(()=>d.value=k()),e}}),null),v(t=>{var n=Hl,i=Xl;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),v(e=>{var t=Ul,n=jl,i="members"===s()?Fl:"",r="settings"===s()?Fl:"";return t!==e.e&&p(G,e.e=t),n!==e.t&&p(V,e.t=n),i!==e.a&&p(Y,e.a=i),r!==e.o&&p(K,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),G;var G,V,Y,K}d(["click","input"]);const _d="_panel_1e73u_3",md="_tabs_1e73u_7",fd="_activeTab_1e73u_29",bd="_section_1e73u_34",wd="_error_1e73u_43",yd="_success_1e73u_51",kd="_settingsForm_1e73u_59",Sd="_formItem_1e73u_66",Cd="_saveButton_1e73u_84";var $d=y("<div>"),xd=y("<section><h3>"),Id=y("<form><div><label></label><input type=text required></div><button type=submit>"),Ld=y("<div><div><button></button><button>"),zd=y("<p>");function Ed(t){const{t:r}=B(),{user:o,api:a}=Sn(),[s,l]=e("settings"===t.section?"settings":"members"),[d,c]=e([]),[u,_]=e([]),[m,f]=e(""),[b,w]=e(""),[y,k]=e(!1),[S,$]=e(null),[x,I]=e(null),L=n(()=>a().org(t.orgId)),z=n(()=>{const e=o()?.organizations?.find(e=>e.organization_id===t.orgId);return e?.role}),E=n(()=>{const e=z();return e===_e||e===me}),R=e=>{l(e);const t="members"===e?"":`#${e}`,n=window.location.pathname;window.history.replaceState(null,"",n+t)},T=async()=>{const e=L();try{if(k(!0),$(null),"members"===s()&&E()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);c(t.users?.filter(e=>!!e)||[]),_(n.invitations?.filter(e=>!!e)||[])}if("settings"===s()){const t=await e.organizations.getOrganization();f(t.name),w(t.name)}}catch(t){$(`${r("errors.failedToLoad")}: ${t}`)}finally{k(!1)}};C(()=>{T()}),C(()=>{const e=t.section;"settings"===e?l("settings"):"members"!==e&&e||l("members")});const P=async(e,t)=>{const n=L();try{k(!0),await n.invitations.createOrgInvitation({email:e,role:t}),I(r("success.invitationSent")||"Invitation sent successfully"),T()}catch(i){$(`${r("errors.failedToInvite")}: ${i}`)}finally{k(!1)}},O=async(e,t)=>{const n=L();try{k(!0),await n.users.updateOrgMemberRole({user_id:e,role:t}),I(r("success.roleUpdated")||"Role updated"),T()}catch(i){$(`${r("errors.failedToUpdateRole")}: ${i}`)}finally{k(!1)}},N=async e=>{e.preventDefault();const t=L();try{k(!0),$(null),I(null),m()!==b()&&m().trim()&&await t.organizations.updateOrganization({name:m().trim()}),w(m().trim()),I(r("success.orgSettingsSaved")||"Organization settings saved")}catch(n){$(`${r("errors.failedToSave")}: ${n}`)}finally{k(!1)}},D=[{value:"owner",label:r("settings.roleOwner")},{value:"admin",label:r("settings.roleAdmin")},{value:"member",label:r("settings.roleMember")}],q=[{value:"admin",label:r("settings.roleAdmin")},{value:"member",label:r("settings.roleMember")}];return A=Ld(),W=A.firstChild,M=W.firstChild,U=M.nextSibling,M.$$click=()=>R("members"),g(M,()=>r("settings.members")),U.$$click=()=>R("settings"),g(U,()=>r("settings.settings")),g(A,i(h,{get when(){return S()},get children(){var e=$d();return g(e,S),v(()=>p(e,wd)),e}}),null),g(A,i(h,{get when(){return x()},get children(){var e=$d();return g(e,x),v(()=>p(e,yd)),e}}),null),g(A,i(h,{get when(){return"members"===s()},get children(){var e=xd(),t=e.firstChild;return g(t,()=>r("settings.organizationMembers")),g(e,i(h,{get when(){return E()},get fallback(){return e=zd(),g(e,()=>r("settings.adminOnlyMembers")),e;var e},get children(){return[i(Rl,{get members(){return d()},get currentUserId(){return o()?.id||""},roleOptions:D,roleField:"org_role",onUpdateRole:O,get loading(){return y()}}),i(Ml,{roleOptions:q,defaultRole:"member",get pendingInvitations(){return u().map(e=>({email:e.email,role:e.role,created:e.created}))},onInvite:P,get loading(){return y()}})]}}),null),v(()=>p(e,bd)),e}}),null),g(A,i(h,{get when(){return"settings"===s()},get children(){var e=xd(),t=e.firstChild;return g(t,()=>r("settings.organizationPreferences")),g(e,i(h,{get when(){return E()},get fallback(){return e=zd(),g(e,()=>r("settings.adminOnlySettings")),e;var e},get children(){var e=Id(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",N),g(n,()=>r("settings.organizationName")),i.$$input=e=>f(e.target.value),g(o,()=>r("common.save")),v(n=>{var i=kd,r=Sd,a=Cd,s=y();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>i.value=m()),e}}),null),v(()=>p(e,bd)),e}}),null),v(e=>{var t=_d,n=md,i="members"===s()?fd:"",r="settings"===s()?fd:"";return t!==e.e&&p(A,e.e=t),n!==e.t&&p(W,e.t=n),i!==e.a&&p(M,e.a=i),r!==e.o&&p(U,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),A;var A,W,M,U}d(["click","input"]);const Rd="_settingsPage_1eedq_3",Td="_header_1eedq_10",Pd="_headerLeft_1eedq_21",Od="_hamburger_1eedq_27",Nd="_backButton_1eedq_37",Dd="_title_1eedq_53",qd="_layout_1eedq_64",Ad="_content_1eedq_70",Bd="_error_1eedq_81",Wd="_mobileBackdrop_1eedq_88";var Md=y("<div>"),Ud=y('<div><header><div><button aria-label="Toggle settings menu">‚ò∞</button><button>‚Üê </button><h1></h1></div></header><div><main>');function jd(t){const{t:n}=B(),{user:r}=Sn(),[o,a]=e(!1),s=e=>{"Escape"===e.key&&o()&&a(!1)};u(()=>{window.addEventListener("keydown",s),L(()=>window.removeEventListener("keydown",s))}),C(()=>{"redirect"===t.route.type&&t.route.id&&(window.history.replaceState(null,"",t.route.id),window.dispatchEvent(new PopStateEvent("popstate")))});const l=e=>{a(!1),window.history.pushState(null,"",e),window.dispatchEvent(new PopStateEvent("popstate"))},d=()=>{window.history.back()},c=()=>{const e=r()?.workspace_id,n=r()?.workspace_name;e&&(t.onClose(),window.history.pushState(null,"",$n(e,n)),window.dispatchEvent(new PopStateEvent("popstate")))};return(()=>{var e=Ud(),s=e.firstChild,u=s.firstChild,_=u.firstChild,m=_.nextSibling;m.firstChild;var b=m.nextSibling,w=s.nextSibling,y=w.firstChild;return _.$$click=()=>a(!o()),m.$$click=d,g(m,()=>n("common.back"),null),b.$$click=c,g(b,()=>n("settings.title")),g(w,i(h,{get when(){return o()},get children(){var e=Md();return e.$$click=()=>a(!1),v(()=>p(e,Wd)),e}}),y),g(w,i(Fs,{get isOpen(){return o()},get currentRoute(){return t.route},onNavigate:l}),y),g(y,i(h,{get when(){return"profile"===t.route.type},get children(){return i(Cl,{})}}),null),g(y,i(h,{get when(){return f(()=>!("workspace"!==t.route.type||!t.route.id))()?t.route.id:null},children:e=>i(h,{get when(){return(e=>{const t=r()?.workspaces?.find(t=>t.workspace_id===e);return t?{id:e,name:t.workspace_name||e}:null})(e())},get fallback(){return e=Md(),g(e,()=>n("errors.failedToLoad")),v(()=>p(e,Bd)),e;var e},get children(){return i(pd,{get wsId(){return e()},get section(){return t.route.section},onNavigateToOrgSettings:(e,t)=>{l(Ln("org",e,t))}})}})}),null),g(y,i(h,{get when(){return f(()=>!("org"!==t.route.type||!t.route.id))()?t.route.id:null},children:e=>i(h,{get when(){return(e=>{const t=r()?.organizations?.find(t=>t.organization_id===e);return t?{id:e,name:t.organization_name||e}:null})(e())},get fallback(){return e=Md(),g(e,()=>n("errors.failedToLoad")),v(()=>p(e,Bd)),e;var e},get children(){return i(Ed,{get orgId(){return e()},get section(){return t.route.section}})}})}),null),v(t=>{var n=Rd,i=Td,r=Pd,o=Od,a=Nd,l=Dd,d=qd,c=Ad;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(s,t.t=i),r!==t.a&&p(u,t.a=r),o!==t.o&&p(_,t.o=o),a!==t.i&&p(m,t.i=a),l!==t.n&&p(b,t.n=l),d!==t.s&&p(w,t.s=d),c!==t.h&&p(y,t.h=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),e})()}d(["click"]);const Fd="_app_1sq5h_13",Hd="_header_1sq5h_19",Gd="_headerLeft_1sq5h_29",Vd="_userInfo_1sq5h_37",Yd="_container_1sq5h_44",Kd="_main_1sq5h_50",Jd="_error_1sq5h_58",Xd="_editor_1sq5h_66",Zd="_editorLoading_1sq5h_74",Qd="_editorHeader_1sq5h_79",ec="_editorStatus_1sq5h_88",tc="_unsavedIndicator_1sq5h_96",nc="_savingIndicator_1sq5h_101",ic="_savedIndicator_1sq5h_106",rc="_titleInput_1sq5h_116",oc="_nodeContent_1sq5h_126",ac="_tableView_1sq5h_133",sc="_tableHeader_1sq5h_141",lc="_viewToggle_1sq5h_148",dc="_active_1sq5h_164",cc="_breadcrumbs_1sq5h_169",uc="_breadcrumbItem_1sq5h_180",gc="_breadcrumbSeparator_1sq5h_191",hc="_historyPanel_1sq5h_196",vc="_historyList_1sq5h_210",pc="_historyItem_1sq5h_217",_c="_historyMeta_1sq5h_230",mc="_historyDate_1sq5h_238",fc="_historyHash_1sq5h_242",bc="_historyMessage_1sq5h_249",wc="_hamburger_1sq5h_257",yc="_mobileBackdrop_1sq5h_268";var kc=y("<nav>"),Sc=y("<div>"),Cc=y("<div role=alert aria-live=polite>"),$c=y("<span>‚óè "),xc=y("<span>‚ü≥ "),Ic=y("<span>‚úì "),Lc=y("<li>"),zc=y("<div><h3></h3><ul>"),Ec=y("<div><div><h3></h3><div><button></button><button></button><button></button><button>"),Rc=y("<div><div><input type=text><div></div></div><div>"),Tc=y("<div><main>"),Pc=y('<div><header><div><button aria-label="Toggle menu">‚ò∞</button></div><div>'),Oc=y("<span>/"),Nc=y("<span>"),Dc=y("<li><div><span></span><span></span></div><div>");const qc=T(()=>N(()=>import("./Editor-BGgdTx1E.js"),__vite__mapDeps([0,1,2,3])));function Ac(){const{t:t,locale:n,setLocale:o}=B(),{user:a,login:s,wsApi:l,orgApi:d}=Sn(),{nodes:c,selectedNodeId:_,setSelectedNodeId:y,selectedNodeData:k,setSelectedNodeData:S,breadcrumbPath:$,loading:I,setLoading:z,error:E,setError:T,switchWorkspace:P,createOrganization:O,createWorkspace:N,loadNodes:D,loadNode:q,fetchNodeChildren:A}=Rn(),{title:W,content:M,hasUnsavedChanges:U,autoSaveStatus:j,assetUrls:F,showHistory:H,history:G,loadHistory:V,loadVersion:Y,flushAutoSave:K,handleTitleChange:J,handleContentChange:X}=function(){const e=r(Tn);if(!e)throw new Error("useEditor must be used within an EditorProvider");return e}(),{records:Z,hasMore:Q,loadMoreRecords:ee,addRecord:te,updateRecord:ne,deleteRecord:ie}=function(){const e=r(On);if(!e)throw new Error("useRecords must be used within a RecordsProvider");return e}(),[re,oe]=e(!1),[ae,se]=e(!1),[le,de]=e(null),[ce,ue]=e(!1),[ge,he]=e(!1),[pe,_e]=e(!1),[me,fe]=e(null),[be,we]=e("table"),[ye,ke]=e(!1),[Se,Ce]=e(!1),[$e,xe]=e(!1),[Ie,Le]=e(!1),[ze,Ee]=e(null),[Re,Te]=e(null),[Pe,Oe]=e(null);C(()=>{const e=a(),t=e?.settings?.language;t&&["en","fr","de","es"].includes(t)&&t!==n()&&(o(t),localStorage.setItem("mddb_locale",t))});const Ne=async()=>{const e=window.location.pathname,n=function(e){return"/privacy"===e?"privacy":"/terms"===e?"terms":"/profile"===e?"profile":e.startsWith("/settings")?"settings":null}(e);if("privacy"===n)return he(!0),_e(!1),void ue(!1);if("terms"===n)return _e(!0),he(!1),void ue(!1);if("profile"===n)return window.history.replaceState(null,"",Ln("user")),fe({type:"profile"}),ue(!1),oe(!1),se(!1),he(!1),void _e(!1);if("settings"===n){const t=function(e){if("/settings"===e||"/settings/"===e)return{type:"redirect",id:"/settings/user"};if("/settings/user"===e||"/settings/user/"===e)return{type:"profile"};const t=e.match(/^\/settings\/workspace\/([^+/]+)/);if(t){const e="undefined"!=typeof window?window.location.hash.slice(1):"";return{type:"workspace",id:t[1],section:e||void 0}}const n=e.match(/^\/settings\/org\/([^+/]+)/);if(n){const e="undefined"!=typeof window?window.location.hash.slice(1):"";return{type:"org",id:n[1],section:e||void 0}}return null}(e);if(t)return fe(t),ue(!1),oe(!1),se(!1),he(!1),void _e(!1)}fe(null),ue(!1),he(!1),_e(!1);const i=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(i){const e=i.id,n=a(),r=n?.workspaces?.find(t=>t.workspace_id===e);if(!r){T(t("errors.noAccessToWs")||"You do not have access to this workspace");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",$n(e,i)),2e3))}const o=Ln("workspace",e,r.workspace_name);return window.history.replaceState(null,"",o),void fe({type:"workspace",id:e})}oe(!1);const r=function(e){const t=e.match(/^\/o\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(r){const e=r.id,n=a(),i=n?.organizations?.find(t=>t.organization_id===e);if(!i){T(t("errors.noAccessToOrg")||"You do not have access to this organization");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",$n(e,i)),2e3))}const o=Ln("org",e,i.organization_name);return window.history.replaceState(null,"",o),void fe({type:"org",id:e})}se(!1),de(null);const o=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/([a-zA-Z0-9_-]+)(?:\+.*)?$/);return t&&t[1]&&t[2]?{wsId:t[1],nodeId:t[2]}:null}(e);if(o){const e=o.nodeId;return void(e!==_()&&(K(),q(e,!1)))}const s=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/);return t&&t[1]?{wsId:t[1]}:null}(e);s&&c.length>0&&c[0]?q(c[0].id,!1):(y(null),S(null))};let De;u(()=>{window.addEventListener("popstate",Ne),L(()=>window.removeEventListener("popstate",Ne))});const qe=async e=>{const t=d();if(!t)return;const n=await t.notion.startImport({notion_token:e.notionToken});var i;await P(n.workspace_id),i=n.workspace_id,Te(i),De=window.setInterval(async()=>{const e=d();if(e)try{const t=await e.notion.getStatus(i);Ee(t),["completed","failed","cancelled"].includes(t.status)&&(window.clearInterval(De),De=void 0,"completed"===t.status&&D(!0))}catch{window.clearInterval(De),De=void 0}},2e3),Ee({status:"running",progress:0,total:0})},Ae=async()=>{const e=l(),t=Re();if(e&&t)try{await e.notion.cancelImport(),Ee(e=>e?{...e,status:"cancelled"}:null)}catch{}},Be=()=>{De&&(window.clearInterval(De),De=void 0),Ee(null),Te(null)};async function We(e="document",n){if(!W().trim())return void T(t("errors.titleRequired")||"Title is required");const i=l();if(i)try{z(!0);const t=n||Pe()||"0";let r;if("table"===e){r=(await i.nodes.table.createTable(t,{title:W(),properties:[]})).id}else{r=(await i.nodes.page.createPage(t,{title:W()})).id}await D(!0),q(String(r)),T(null),Oe(null)}catch(r){T(`${t("errors.failedToCreate")}: ${r}`)}finally{z(!1)}}L(()=>{De&&window.clearInterval(De)}),C(()=>{a(),Ne()});const Me=e=>{K(),q(e.id),ke(!1)};async function Ue(e){const n=l();if(n&&confirm(t("table.confirmDeleteRecord")||"Delete this item?"))try{if(z(!0),await n.nodes.deleteNode(e),e===_()){y(null),S(null);const e=a()?.workspace_id,t=a()?.workspace_name;e&&window.history.pushState(null,"",$n(e,t))}await D(!0)}catch(i){T(`${t("errors.failedToDelete")}: ${i}`)}finally{z(!1)}}return[i(h,{get when(){return!ge()},get fallback(){return i(uo,{})},get children(){return i(h,{get when(){return!pe()},get fallback(){return i(bo,{})},get children(){return i(h,{get when(){return a()},get fallback(){return i(no,{onLogin:s})},get children(){var e=Pc(),n=e.firstChild,r=n.firstChild,o=r.firstChild,s=r.nextSibling;return g(e,i(h,{get when(){return ze()},keyed:!0,children:e=>i(Oa,{status:e,onCancel:Ae,onDismiss:Be})}),n),o.$$click=()=>ke(!ye()),g(r,i(fs,{onOpenSettings:()=>{const e=a()?.workspace_id,t=a()?.workspace_name;e&&(fe({type:"workspace",id:e}),oe(!1),y(null),ke(!1),window.history.pushState(null,"",Ln("workspace",e,t)))},onSwitchWorkspace:()=>{fe(null),oe(!1),se(!1),ue(!1)},onCreateWorkspace:()=>xe(!0),onImportFromNotion:()=>Le(!0)}),null),g(r,i(h,{get when(){return _()},get children(){var e=kc();return g(e,i(m,{get each(){return $()},children:(e,t)=>{return[i(h,{get when(){return t()>0},get children(){var e=Oc();return v(()=>p(e,gc)),e}}),(n=Nc(),n.$$click=()=>Me(e),g(n,()=>e.title),v(()=>p(n,uc)),n)];var n}})),v(()=>p(e,cc)),e}}),null),g(s,i(Xa,{onProfile:()=>{fe({type:"profile"}),ue(!1),oe(!1),y(null),window.history.pushState(null,"",Ln("user"))}})),g(e,i(h,{get when(){return ce()},get children(){return i(Er,{onBack:()=>window.history.back(),onOrgSettings:e=>{x(()=>{se(!0),de(e.organization_id),ue(!1)}),window.history.pushState(null,"",In(e.organization_id,e.organization_name))}})}}),null),g(e,i(h,{get when(){return re()},get children(){return i(wi,{onBack:()=>window.history.back(),onOpenOrgSettings:()=>{const e=a(),t=e?.organization_id,n=e?.organizations?.find(e=>e.organization_id===t),i=n?.organization_name;t&&(se(!0),de(t),oe(!1),window.history.pushState(null,"",In(t,i)))}})}}),null),g(e,i(h,{get when(){return f(()=>!!ae())()&&le()},get children(){return i(Vi,{get orgId(){return le()},onBack:()=>window.history.back()})}}),null),g(e,i(h,{get when(){return me()},children:e=>i(jd,{get route(){return e()},onClose:()=>{fe(null);const e=a()?.workspace_id,t=a()?.workspace_name;e&&window.history.pushState(null,"",$n(e,t))}})}),null),g(e,i(h,{get when(){return f(()=>!(ce()||re()||ae()))()&&!me()},get children(){var e=Tc(),n=e.firstChild;return g(e,i(h,{get when(){return ye()},get children(){var e=Sc();return e.$$click=()=>ke(!1),v(()=>p(e,yc)),e}}),n),g(e,i(ve,{get isOpen(){return ye()},get loading(){return I()},nodes:c,get selectedNodeId(){return _()},onCreatePage:()=>{Oe(null),We("document"),ke(!1)},onCreateTable:()=>{Oe(null),We("table"),ke(!1)},onCreateChildPage:e=>{Oe(e),We("document",e),ke(!1)},onCreateChildTable:e=>{Oe(e),We("table",e),ke(!1)},onSelectNode:Me,onCloseMobileSidebar:()=>ke(!1),onFetchChildren:A,onDeleteNode:Ue,onShowHistory:e=>{e!==_()?q(e).then(()=>V(e)):V(e)}}),n),g(n,i(h,{get when(){return E()},fallback:null,get children(){var e=Cc();return g(e,E),v(()=>p(e,Jd)),e}}),null),g(n,i(h,{get when(){return _()},get children(){var e=Rc(),n=e.firstChild,r=n.firstChild,o=r.nextSibling,a=n.nextSibling;return r.$$input=e=>J(e.target.value),g(o,i(h,{get when(){return f(()=>!!U())()&&"idle"===j()},get children(){var e=$c();return e.firstChild,g(e,()=>t("editor.unsaved"),null),v(()=>p(e,tc)),e}}),null),g(o,i(h,{get when(){return"saving"===j()},get children(){var e=xc();return e.firstChild,g(e,()=>t("common.saving"),null),v(()=>p(e,nc)),e}}),null),g(o,i(h,{get when(){return"saved"===j()},get children(){var e=Ic();return e.firstChild,g(e,()=>t("common.saved"),null),v(()=>p(e,ic)),e}}),null),g(e,i(h,{get when(){return H()},get children(){var e=zc(),n=e.firstChild,r=n.nextSibling;return g(n,()=>t("editor.versionHistory")),g(r,i(m,{get each(){return G()},children:e=>{return t=Dc(),n=t.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,t.$$click=()=>{const t=_();t&&Y(t,e.hash)},g(i,()=>new Date(e.timestamp).toLocaleString()),g(r,()=>e.hash.substring(0,7)),g(o,()=>e.message),v(e=>{var a=pc,s=_c,l=mc,d=fc,c=bc;return a!==e.e&&p(t,e.e=a),s!==e.t&&p(n,e.t=s),l!==e.a&&p(i,e.a=l),d!==e.o&&p(r,e.o=d),c!==e.i&&p(o,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t;var t,n,i,r,o}}),null),g(r,i(h,{get when(){return 0===G().length},get children(){var e=Lc();return g(e,()=>t("editor.noHistory")),v(()=>p(e,pc)),e}}),null),v(t=>{var n=hc,i=vc;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(r,t.t=i),t},{e:void 0,t:void 0}),e}}),a),g(a,i(h,{get when(){return k()?.has_page},get children(){return i(R,{get fallback(){return e=Sc(),g(e,()=>t("common.loading")),v(()=>p(e,Zd)),e;var e},get children(){return i(qc,{get content(){return M()},get nodeId(){return _()??void 0},get assetUrls(){return F()},onChange:X})}})}}),null),g(a,i(h,{get when(){return k()?.has_table},get children(){var e=Ec(),n=e.firstChild,r=n.firstChild,o=r.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.nextSibling,d=l.nextSibling;return g(r,()=>t("table.records")),a.$$click=()=>we("table"),g(a,()=>t("table.table")),s.$$click=()=>we("grid"),g(s,()=>t("table.grid")),l.$$click=()=>we("gallery"),g(l,()=>t("table.gallery")),d.$$click=()=>we("board"),g(d,()=>t("table.board")),g(e,i(h,{get when(){return"table"===be()},get children(){return i(ot,{get tableId(){return _()||""},get columns(){return k()?.properties||[]},get records(){return Z()},onAddRecord:te,onUpdateRecord:ne,onDeleteRecord:ie,onLoadMore:ee,get hasMore(){return Q()}})}}),null),g(e,i(h,{get when(){return"grid"===be()},get children(){return i(kt,{get records(){return Z()},get columns(){return k()?.properties||[]},onUpdateRecord:ne,onDeleteRecord:ie})}}),null),g(e,i(h,{get when(){return"gallery"===be()},get children(){return i(Wt,{get records(){return Z()},get columns(){return k()?.properties||[]},onUpdateRecord:ne,onDeleteRecord:ie})}}),null),g(e,i(h,{get when(){return"board"===be()},get children(){return i(ln,{get records(){return Z()},get columns(){return k()?.properties||[]},onUpdateRecord:ne,onDeleteRecord:ie})}}),null),v(t=>{var i=ac,r=sc,c=lc,u={[`${dc}`]:"table"===be()},g={[`${dc}`]:"grid"===be()},h={[`${dc}`]:"gallery"===be()},v={[`${dc}`]:"board"===be()};return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),c!==t.a&&p(o,t.a=c),t.o=w(a,u,t.o),t.i=w(s,g,t.i),t.n=w(l,h,t.n),t.s=w(d,v,t.s),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),v(i=>{var s=Xd,l=Qd,d=t("editor.titlePlaceholder")||"Title",c=rc,u=ec,g=oc;return s!==i.e&&p(e,i.e=s),l!==i.t&&p(n,i.t=l),d!==i.a&&b(r,"placeholder",i.a=d),c!==i.o&&p(r,i.o=c),u!==i.i&&p(o,i.i=u),g!==i.n&&p(a,i.n=g),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>r.value=W()),e}}),null),v(t=>{var i=Yd,r=Kd;return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(t=>{var i=Fd,a=Hd,l=Gd,d=wc,c=Vd;return i!==t.e&&p(e,t.e=i),a!==t.t&&p(n,t.t=a),l!==t.a&&p(r,t.a=l),d!==t.o&&p(o,t.o=d),c!==t.i&&p(s,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}})}})}}),i(zo,{}),i(h,{get when(){return Se()},get children(){return i(Mo,{onClose:()=>Ce(!1),onCreate:O})}}),i(h,{get when(){return $e()},get children(){return i(Ho,{onClose:()=>xe(!1),onCreate:N,isFirstWorkspace:!0})}}),i(h,{get when(){return Ie()},get children(){return i(la,{onClose:()=>Le(!1),onImport:qe})}})]}function Bc(){return i($s,{get children(){return i(kn,{get children(){return i(En,{get children(){return i(Pn,{get children(){return i(Nn,{get children(){return i(Ac,{})}})}})}})}})}})}d(["click","input"]);const Wc=localStorage.getItem("mddb_locale"),Mc=Wc&&["en","fr","de","es"].includes(Wc)?Wc:"en",Uc=document.getElementById("app");Uc&&P(()=>i(A,{initialLocale:Mc,get children(){return i(Bc,{})}}),Uc);export{Na as a,B as u};
