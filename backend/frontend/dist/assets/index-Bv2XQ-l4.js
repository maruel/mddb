import{c as e,j as t,l as i,e as n,S as r,m as s,n as a,F as l,p as o,q as d,s as u,x as g,h as v,d as c,o as p,D as _}from"./vendor-g8mwYROu.js";import{u as h,a as m,s as b,W as f,O as w,e as y,w as S}from"./index-DufU8XKI.js";const x="_navItemWrapper_1177w_3",$="_navItem_1177w_3",k="_active_1177w_27",C="_section_1177w_34",I="_expandIcon_1177w_56",R="_expanded_1177w_74",z="_expandSpacer_1177w_78",q="_label_1177w_84",L="_children_1177w_91";var E=g("<span>▶"),T=g("<div>"),O=g("<div><a><span>"),P=g("<span>");function U(g){const v=()=>g.item.children&&g.item.children.length>0,c=()=>{if(!v())return!1;const e=g.currentRoute,t=i=>{for(const n of i){if(g.isActive(n.url,e))return!0;if(n.children&&t(n.children))return!0}return!1};return t(g.item.children||[])},[p,_]=e(0===g.depth||c());t(()=>{g.currentRoute&&c()&&_(!0)});const h=e=>{e.preventDefault(),v()&&!g.item.url?_(!p()):g.item.url&&(v()&&_(!0),g.onNavigate(g.item.url))},m=e=>{e.preventDefault(),e.stopPropagation(),_(!p())};return b=O(),f=b.firstChild,w=f.firstChild,f.$$click=h,i(f,n(r,{get when(){return v()},get fallback(){return e=P(),s(()=>a(e,z)),e;var e},get children(){var e=E();return e.$$click=m,s(()=>a(e,(()=>{let e=I;return p()&&(e+=" "+R),e})())),e}}),w),i(w,()=>g.item.label),i(b,n(r,{get when(){return o(()=>!!p())()&&v()},get children(){var e=T();return i(e,n(l,{get each(){return g.item.children},children:e=>n(U,{item:e,get depth(){return g.depth+1},get isActive(){return g.isActive},get onNavigate(){return g.onNavigate},get currentRoute(){return g.currentRoute}})})),s(()=>a(e,L)),e}}),null),s(e=>{var t=x,i=g.item.url||"#",n=(()=>{let e=$;return g.isActive(g.item.url,g.currentRoute)&&(e+=" "+k),0===g.depth&&v()&&(e+=" "+C),e})(),r=12*g.depth+16+"px",s=q;return t!==e.e&&a(b,e.e=t),i!==e.t&&d(f,"href",e.t=i),n!==e.a&&a(f,e.a=n),r!==e.o&&u(f,"padding-left",e.o=r),s!==e.i&&a(w,e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),b;var b,f,w}v(["click"]);const D="_sidebar_dpyfy_3",N="_nav_dpyfy_13",A="_mobileOpen_dpyfy_31";var B=g("<aside><nav>");function W(e){const{t:t}=h(),{user:r}=m(),o=(e,t)=>{if(!e)return!1;if("/settings/user"===e&&"profile"===t.type)return!0;if("/settings/server"===e&&"server"===t.type)return!0;if("workspace"===t.type&&t.id){const i=e.match(/^\/settings\/workspace\/([^+/]+)/);if(i&&i[1]===t.id){const[,i]=e.split("#");return i?t.section===i:!t.section}}if("org"===t.type&&t.id){const i=e.match(/^\/settings\/org\/([^+/]+)/);if(i&&i[1]===t.id){const[,i]=e.split("#");return i?t.section===i:!t.section}}return!1};return d=B(),u=d.firstChild,i(u,n(l,{get each(){return(()=>{const e=[],i=r();if(!i)return e;e.push({id:"user",label:t("settings.personal"),url:b("user")});const n=i.workspaces||[];if(n.length>0){const i=n.map(e=>{const i=e.workspace_id,n=e.workspace_name||i,r=e.role===f,s=[{id:`ws-${i}-members`,label:t("settings.members"),url:b("workspace",i,n)+"#members"},{id:`ws-${i}-settings`,label:t("settings.settings"),url:b("workspace",i,n)+"#settings"}];return r&&s.push({id:`ws-${i}-sync`,label:t("settings.gitSync"),url:b("workspace",i,n)+"#sync"}),{id:`ws-${i}`,label:n,url:b("workspace",i,n),children:s}});e.push({id:"workspaces",label:t("settings.workspaces"),url:"",children:i})}const s=(i.organizations||[]).filter(e=>e.role===w||e.role===y);if(s.length>0){const i=s.map(e=>{const i=e.organization_id,n=e.organization_name||i;return{id:`org-${i}`,label:n,url:b("org",i,n),children:[{id:`org-${i}-members`,label:t("settings.members"),url:b("org",i,n)+"#members"},{id:`org-${i}-settings`,label:t("settings.settings"),url:b("org",i,n)+"#settings"}]}});e.push({id:"organizations",label:t("settings.organizations"),url:"",children:i})}return i.is_global_admin&&e.push({id:"server",label:t("server.serverSettings"),url:b("server")}),e})()},children:t=>n(U,{item:t,depth:0,isActive:o,get onNavigate(){return e.onNavigate},get currentRoute(){return e.currentRoute}})})),s(t=>{var i=`${D} ${e.isOpen?A:""}`,n=N;return i!==t.e&&a(d,t.e=i),n!==t.t&&a(u,t.t=n),t},{e:void 0,t:void 0}),d;var d,u}const F="_profile_vysi4_3",M="_userInfoSection_vysi4_7",G="_avatarLarge_vysi4_17",j="_avatarImageLarge_vysi4_29",H="_initialsLarge_vysi4_35",V="_userDetails_vysi4_41",J="_userName_vysi4_45",K="_userEmail_vysi4_51",Q="_userRole_vysi4_56",X="_section_vysi4_66",Y="_error_vysi4_75",Z="_success_vysi4_83",ee="_settingsForm_vysi4_91",te="_formItem_vysi4_98",ie="_checkboxLabel_vysi4_117",ne="_saveButton_vysi4_130",re="_orgList_vysi4_149",se="_orgItem_vysi4_155",ae="_orgInfo_vysi4_165",le="_orgName_vysi4_171",oe="_orgNameLink_vysi4_175",de="_orgRole_vysi4_185",ue="_emptyState_vysi4_194";var ge=g("<div>"),ve=g("<span>"),ce=g("<section><div></div><div><h3></h3><p>"),pe=g("<section><h3>"),_e=g("<div><label><input type=checkbox>"),he=g("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),me=g("<img referrerpolicy=no-referrer>"),be=g("<p>"),fe=g("<a>"),we=g("<div><div><span>");function ye(){const{t:o}=h(),{user:u,api:g,wsApi:v}=m(),[c,p]=e("light"),[_,f]=e("en"),[S,x]=e(!0),[$,k]=e(!1),[C,I]=e(null),[R,z]=e(null),q=()=>{const e=u(),t=e?.name||e?.email||"",i=t.split(/[\s@]+/);return i.length>=2&&i[0]&&i[1]?((i[0][0]||"")+(i[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};t(()=>{const e=u();p(e?.settings?.theme||"light"),f(e?.settings?.language||"en")});t(()=>{(async()=>{const e=u();if(e)try{k(!0),I(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&x(t.settings?.notifications??!0)}catch(t){I(`${o("errors.failedToLoad")}: ${t}`)}finally{k(!1)}})()});const L=async e=>{e.preventDefault();const t=v();try{k(!0),I(null),z(null);const e={theme:c(),language:_()},i=[g().auth.updateUserSettings({settings:e})];if(t){const e={notifications:S()};i.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(i),z(o("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(i){I(`${o("errors.failedToSave")}: ${i}`)}finally{k(!1)}};return E=ge(),i(E,n(r,{get when(){return C()},get children(){var e=ge();return i(e,C),s(()=>a(e,Y)),e}}),null),i(E,n(r,{get when(){return R()},get children(){var e=ge();return i(e,R),s(()=>a(e,Z)),e}}),null),i(E,n(r,{get when(){return u()},children:e=>{return[(W=ce(),F=W.firstChild,Y=F.nextSibling,Z=Y.firstChild,ye=Z.nextSibling,i(F,n(r,{get when(){return(()=>{const e=u()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=ve(),i(e,q),s(()=>a(e,H)),e;var e},children:t=>{return i=me(),s(n=>{var r=t(),s=e().name||"User",l=j;return r!==n.e&&d(i,"src",n.e=r),s!==n.t&&d(i,"alt",n.t=s),l!==n.a&&a(i,n.a=l),n},{e:void 0,t:void 0,a:void 0}),i;var i}})),i(Z,()=>e().name),i(ye,()=>e().email),i(Y,n(r,{get when(){return e().workspace_role},get children(){var t=ve();return i(t,()=>e().workspace_role),s(()=>a(t,Q)),t}}),null),s(e=>{var t=M,i=G,n=V,r=J,s=K;return t!==e.e&&a(W,e.e=t),i!==e.t&&a(F,e.t=i),n!==e.a&&a(Y,e.a=n),r!==e.o&&a(Z,e.o=r),s!==e.i&&a(ye,e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),W),(A=pe(),B=A.firstChild,i(B,()=>o("profile.myOrganizations")),i(A,n(r,{get when(){return e().organizations?.length},get fallback(){return e=be(),i(e,()=>o("profile.noOrganizations")),s(()=>a(e,ue)),e;var e},get children(){var t=ge();return i(t,n(l,{get each(){return e().organizations},children:e=>{const t=e.organization_name||e.organization_id;return l=we(),o=l.firstChild,u=o.firstChild,i(o,n(r,{get when(){return e.role===w||e.role===y},get fallback(){return e=ve(),i(e,t),s(()=>a(e,le)),e;var e},get children(){var n=fe();return n.$$click=t=>{t.preventDefault(),(e=>{window.history.pushState(null,"",b("org",e.organization_id,e.organization_name)),window.dispatchEvent(new PopStateEvent("popstate"))})(e)},i(n,t),s(t=>{var i=b("org",e.organization_id,e.organization_name),r=oe;return i!==t.e&&d(n,"href",t.e=i),r!==t.t&&a(n,t.t=r),t},{e:void 0,t:void 0}),n}}),u),i(u,()=>e.role),s(e=>{var t=se,i=ae,n=de;return t!==e.e&&a(l,e.e=t),i!==e.t&&a(o,e.t=i),n!==e.a&&a(u,e.a=n),e},{e:void 0,t:void 0,a:void 0}),l;var l,o,u}})),s(()=>a(t,re)),t}}),null),s(()=>a(A,X)),A),(t=he(),g=t.firstChild,v=g.nextSibling,h=v.firstChild,m=h.firstChild,k=m.nextSibling,C=k.firstChild,I=C.nextSibling,R=I.nextSibling,z=h.nextSibling,E=z.firstChild,T=E.nextSibling,O=T.firstChild,P=O.nextSibling,U=P.nextSibling,D=U.nextSibling,N=z.nextSibling,i(g,()=>o("settings.personalSettings")),v.addEventListener("submit",L),i(m,()=>o("settings.theme")),k.addEventListener("change",e=>p(e.target.value)),i(C,()=>o("settings.themeLight")),i(I,()=>o("settings.themeDark")),i(R,()=>o("settings.themeSystem")),i(E,()=>o("settings.language")),T.addEventListener("change",e=>f(e.target.value)),i(O,()=>o("settings.languageEn")),i(P,()=>o("settings.languageFr")),i(U,()=>o("settings.languageDe")),i(D,()=>o("settings.languageEs")),i(v,n(r,{get when(){return e().workspace_id},get children(){var e=_e(),t=e.firstChild,n=t.firstChild;return n.addEventListener("change",e=>x(e.currentTarget.checked)),i(t,()=>o("settings.enableNotifications"),null),s(i=>{var n=te,r=ie;return n!==i.e&&a(e,i.e=n),r!==i.t&&a(t,i.t=r),i},{e:void 0,t:void 0}),s(()=>n.checked=S()),e}}),N),i(N,()=>o("settings.saveChanges")),s(e=>{var i=X,n=ee,r=te,s=te,l=ne,o=$();return i!==e.e&&a(t,e.e=i),n!==e.t&&a(v,e.t=n),r!==e.a&&a(h,e.a=r),s!==e.o&&a(z,e.o=s),l!==e.i&&a(N,e.i=l),o!==e.n&&(N.disabled=e.n=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),s(()=>k.value=c()),s(()=>T.value=_()),t)];var t,g,v,h,m,k,C,I,R,z,E,T,O,P,U,D,N,A,B,W,F,Y,Z,ye}}),null),s(()=>a(E,F)),E;var E}v(["click"]);const Se="_table_rjyw4_3",xe="_roleSelect_rjyw4_21";var $e=g("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),ke=g("<select>"),Ce=g("<tr><td></td><td></td><td>"),Ie=g("<option>");function Re(e){const{t:t}=h(),o=t=>("workspace_role"===e.roleField?t.workspace_role:t.org_role)||"";return d=$e(),u=d.firstChild,g=u.firstChild.firstChild,v=g.nextSibling,c=v.nextSibling,p=u.nextSibling,i(g,()=>t("settings.nameColumn")),i(v,()=>t("settings.emailColumn")),i(c,()=>t("settings.roleColumn")),i(p,n(l,{get each(){return e.members},children:t=>{return d=Ce(),u=d.firstChild,g=u.nextSibling,v=g.nextSibling,i(u,()=>t.name),i(g,()=>t.email),i(v,n(r,{get when(){return t.id!==e.currentUserId},get fallback(){return o(t)},get children(){var r=ke();return r.addEventListener("change",i=>e.onUpdateRole(t.id,i.target.value)),i(r,n(l,{get each(){return e.roleOptions},children:e=>{return t=Ie(),i(t,()=>e.label),s(()=>t.value=e.value),t;var t}})),s(t=>{var i=xe,n=e.loading;return i!==t.e&&a(r,t.e=i),n!==t.t&&(r.disabled=t.t=n),t},{e:void 0,t:void 0}),s(()=>r.value=o(t)),r}})),d;var d,u,g,v}})),s(()=>a(d,Se)),d;var d,u,g,v,c,p}const ze="_inviteSection_toc48_3",qe="_inviteForm_toc48_7",Le="_formGroup_toc48_17",Ee="_pendingSection_toc48_57",Te="_table_toc48_65";var Oe=g("<div><h4></h4><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Pe=g("<div><form><h4></h4><div><input type=email required><select></select><button type=submit>"),Ue=g("<option>"),De=g("<tr><td></td><td></td><td>");function Ne(t){const{t:o}=h(),[u,g]=e(""),[v,c]=e(t.defaultRole),p=async e=>{e.preventDefault(),u()&&(await t.onInvite(u(),v()),g(""))};return _=Pe(),m=_.firstChild,b=m.firstChild,f=b.nextSibling,w=f.firstChild,y=w.nextSibling,S=y.nextSibling,m.addEventListener("submit",p),i(b,()=>o("settings.inviteNewMember")),w.$$input=e=>g(e.target.value),y.addEventListener("change",e=>c(e.target.value)),i(y,n(l,{get each(){return t.roleOptions},children:e=>{return t=Ue(),i(t,()=>e.label),s(()=>t.value=e.value),t;var t}})),i(S,()=>o("common.invite")),i(_,n(r,{get when(){return t.pendingInvitations.length>0},get children(){var e=Oe(),r=e.firstChild,d=r.nextSibling,u=d.firstChild,g=u.firstChild.firstChild,v=g.nextSibling,c=v.nextSibling,p=u.nextSibling;return i(r,()=>o("settings.pendingInvitations")),i(g,()=>o("settings.emailColumn")),i(v,()=>o("settings.roleColumn")),i(c,()=>o("settings.sentColumn")),i(p,n(l,{get each(){return t.pendingInvitations},children:e=>{return t=De(),n=t.firstChild,r=n.nextSibling,s=r.nextSibling,i(n,()=>e.email),i(r,()=>e.role),i(s,()=>new Date(e.created).toLocaleDateString()),t;var t,n,r,s}})),s(t=>{var i=Ee,n=Te;return i!==t.e&&a(e,t.e=i),n!==t.t&&a(d,t.t=n),t},{e:void 0,t:void 0}),e}}),null),s(e=>{var i=ze,n=qe,r=Le,s=o("settings.emailPlaceholder")||"Email address",l=t.loading,u=t.loading,g=t.loading;return i!==e.e&&a(_,e.e=i),n!==e.t&&a(m,e.t=n),r!==e.a&&a(f,e.a=r),s!==e.o&&d(w,"placeholder",e.o=s),l!==e.i&&(w.disabled=e.i=l),u!==e.n&&(y.disabled=e.n=u),g!==e.s&&(S.disabled=e.s=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),s(()=>w.value=u()),s(()=>y.value=v()),_;var _,m,b,f,w,y,S}v(["input"]);const Ae="_panel_1dwg0_3",Be="_tabs_1dwg0_7",We="_activeTab_1dwg0_29",Fe="_section_1dwg0_34",Me="_error_1dwg0_43",Ge="_success_1dwg0_51",je="_settingsForm_1dwg0_59",He="_formItem_1dwg0_66",Ve="_saveButton_1dwg0_86",Je="_hint_1dwg0_105",Ke="_table_1dwg0_111",Qe="_actions_1dwg0_129",Xe="_smallButton_1dwg0_134",Ye="_deleteButtonSmall_1dwg0_148",Ze="_addRemoteSection_1dwg0_162",et="_orgLink_1dwg0_174",tt="_linkButton_1dwg0_188";var it=g("<button>"),nt=g("<div>"),rt=g("<section><h3>"),st=g("<form><div><label></label><input type=text required></div><button type=submit>"),at=g("<section><h3></h3><div><p></p><button> →"),lt=g("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),ot=g("<section><h3></h3><p>"),dt=g("<div><div><button></button><button>"),ut=g("<p>"),gt=g("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function vt(l){const{t:o}=h(),{user:u,orgApi:g,wsApi:v}=m(),[c,p]=e("settings"===l.section?"settings":"sync"===l.section?"sync":"members"),[_,b]=e([]),[w,y]=e([]),[S,x]=e(null),[$,k]=e(""),[C,I]=e(""),[R,z]=e(""),[q,L]=e(""),[E,T]=e(!1),[O,P]=e(null),[U,D]=e(null),N=()=>u()?.workspace_role===f,A=e=>{p(e);const t="members"===e?"":`#${e}`,i=window.location.pathname;window.history.replaceState(null,"",i+t)},B=async()=>{const e=g();if(e)try{T(!0),P(null);const t=v();if("members"===c()&&N()){const[i,n]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);b(i.users?.filter(e=>!!e)||[]),y(n.invitations?.filter(e=>!!e)||[])}if("settings"===c()&&t){const e=await t.workspaces.getWorkspace();z(e.name),L(e.name)}if("sync"===c()&&N()&&t)try{const e=await t.settings.git.getGitRemote();x(e)}catch{x(null)}}catch(t){P(`${o("errors.failedToLoad")}: ${t}`)}finally{T(!1)}};t(()=>{B()}),t(()=>{const e=l.section;"settings"===e?p("settings"):"sync"===e?p("sync"):"members"!==e&&e||p("members")});const W=async(e,t)=>{const i=v();if(i)try{T(!0),await i.invitations.createWSInvitation({email:e,role:t}),D(o("success.invitationSent")||"Invitation sent successfully"),B()}catch(n){P(`${o("errors.failedToInvite")}: ${n}`)}finally{T(!1)}},F=async(e,t)=>{const i=v();if(i)try{T(!0),await i.users.updateWSMemberRole({user_id:e,role:t}),D(o("success.roleUpdated")||"Role updated"),B()}catch(n){P(`${o("errors.failedToUpdateRole")}: ${n}`)}finally{T(!1)}},M=async e=>{e.preventDefault();const t=v();if(t)try{T(!0),P(null),D(null),R()!==q()&&R().trim()&&await t.workspaces.updateWorkspace({name:R().trim()}),L(R().trim()),D(o("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(i){P(`${o("errors.failedToSave")}: ${i}`)}finally{T(!1)}},G=async e=>{e.preventDefault();const t=v();if(t)try{T(!0),P(null);const e=await t.settings.git.updateGitRemote({url:$(),token:C(),type:"custom",auth_type:C()?"token":"none"});x(e),D(o("success.remoteAdded")||"Git remote configured"),k(""),I("")}catch(i){P(`${o("errors.failedToAddRemote")}: ${i}`)}finally{T(!1)}},j=async()=>{const e=v();if(e)try{T(!0),P(null),D(null),await e.settings.git.pushGit(),D(o("success.pushSuccessful")||"Push successful"),B()}catch(t){P(`${o("errors.pushFailed")}: ${t}`)}finally{T(!1)}},H=async()=>{if(!confirm(o("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=v();if(e)try{T(!0),P(null),await e.settings.git.deleteGitRemote(),x(null),D(o("success.remoteRemoved")||"Remote removed")}catch(t){P(`${o("errors.failedToRemoveRemote")}: ${t}`)}finally{T(!1)}},V=[{value:"admin",label:o("settings.roleAdmin")},{value:"editor",label:o("settings.roleEditor")},{value:"viewer",label:o("settings.roleViewer")}];return J=dt(),K=J.firstChild,Q=K.firstChild,X=Q.nextSibling,Q.$$click=()=>A("members"),i(Q,()=>o("settings.members")),X.$$click=()=>A("settings"),i(X,()=>o("settings.workspace")),i(K,n(r,{get when(){return N()},get children(){var e=it();return e.$$click=()=>A("sync"),i(e,()=>o("settings.gitSync")),s(()=>a(e,"sync"===c()?We:"")),e}}),null),i(J,n(r,{get when(){return O()},get children(){var e=nt();return i(e,O),s(()=>a(e,Me)),e}}),null),i(J,n(r,{get when(){return U()},get children(){var e=nt();return i(e,U),s(()=>a(e,Ge)),e}}),null),i(J,n(r,{get when(){return"members"===c()},get children(){var e=rt(),t=e.firstChild;return i(t,()=>o("settings.members")),i(e,n(r,{get when(){return N()},get fallback(){return e=ut(),i(e,()=>o("settings.adminOnlyMembers")),e;var e},get children(){return[n(Re,{get members(){return _()},get currentUserId(){return u()?.id||""},roleOptions:V,roleField:"workspace_role",onUpdateRole:F,get loading(){return E()}}),n(Ne,{roleOptions:V,defaultRole:"viewer",get pendingInvitations(){return w().map(e=>({email:e.email,role:e.role,created:e.created}))},onInvite:W,get loading(){return E()}})]}}),null),s(()=>a(e,Fe)),e}}),null),i(J,n(r,{get when(){return"settings"===c()},get children(){var e=at(),t=e.firstChild,d=t.nextSibling,g=d.firstChild,v=g.nextSibling,c=v.firstChild;return i(t,()=>o("settings.workspaceSettings")),i(e,n(r,{get when(){return N()},get fallback(){return e=ut(),i(e,()=>o("settings.adminOnlyWorkspace")),e;var e},get children(){var e=st(),t=e.firstChild,n=t.firstChild,r=n.nextSibling,l=t.nextSibling;return e.addEventListener("submit",M),i(n,()=>o("settings.workspaceName")),r.$$input=e=>z(e.target.value),i(l,()=>o("settings.saveWorkspaceSettings")),s(i=>{var n=je,r=He,s=Ve,o=E();return n!==i.e&&a(e,i.e=n),r!==i.t&&a(t,i.t=r),s!==i.a&&a(l,i.a=s),o!==i.o&&(l.disabled=i.o=o),i},{e:void 0,t:void 0,a:void 0,o:void 0}),s(()=>r.value=R()),e}}),d),i(g,()=>o("settings.orgSettingsHint")),v.$$click=()=>{const e=u(),t=e?.organization_id,i=e?.organizations?.find(e=>e.organization_id===t),n=i?.organization_name||"";t&&l.onNavigateToOrgSettings(t,n)},i(v,()=>o("settings.openOrgSettings"),c),s(t=>{var i=Fe,n=et,r=tt;return i!==t.e&&a(e,t.e=i),n!==t.t&&a(d,t.t=n),r!==t.a&&a(v,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),i(J,n(r,{get when(){return"sync"===c()},get children(){var e=ot(),t=e.firstChild,l=t.nextSibling;return i(t,()=>o("settings.gitSynchronization")),i(l,()=>o("settings.gitSyncHint")),i(e,n(r,{get when(){return S()},children:e=>{const t=e().last_sync;return n=gt(),r=n.firstChild,l=r.firstChild.firstChild,d=l.nextSibling,u=d.nextSibling,g=r.nextSibling.firstChild.firstChild,v=g.nextSibling,c=v.nextSibling,p=c.firstChild,_=p.nextSibling,i(l,()=>o("settings.urlColumn")),i(d,()=>o("settings.lastSyncColumn")),i(u,()=>o("common.actions")),i(g,()=>e().url),i(v,()=>t?new Date(t).toLocaleString():o("settings.never")),p.$$click=j,i(p,()=>o("common.push")),_.$$click=H,i(_,()=>o("common.remove")),s(e=>{var t=Ke,i=Qe,r=E(),s=Xe,l=E(),o=Ye;return t!==e.e&&a(n,e.e=t),i!==e.t&&a(c,e.t=i),r!==e.a&&(p.disabled=e.a=r),s!==e.o&&a(p,e.o=s),l!==e.i&&(_.disabled=e.i=l),o!==e.n&&a(_,e.n=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n;var n,r,l,d,u,g,v,c,p,_}}),null),i(e,n(r,{get when(){return!S()},get children(){var e=lt(),t=e.firstChild,n=t.nextSibling,r=n.firstChild,l=r.firstChild,u=l.nextSibling,g=r.nextSibling,v=g.firstChild,c=v.nextSibling,p=c.nextSibling,_=g.nextSibling;return i(t,()=>o("settings.addNewRemote")),n.addEventListener("submit",G),i(l,()=>o("settings.repositoryUrl")),u.$$input=e=>k(e.target.value),i(v,()=>o("settings.personalAccessToken")),c.$$input=e=>I(e.target.value),i(p,()=>o("settings.tokenHint")),i(_,()=>o("settings.addRemote")),s(t=>{var i=Ze,s=je,l=He,v=o("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",h=He,m=o("settings.tokenPlaceholder")||"ghp_...",b=Je,f=Ve,w=E();return i!==t.e&&a(e,t.e=i),s!==t.t&&a(n,t.t=s),l!==t.a&&a(r,t.a=l),v!==t.o&&d(u,"placeholder",t.o=v),h!==t.i&&a(g,t.i=h),m!==t.n&&d(c,"placeholder",t.n=m),b!==t.s&&a(p,t.s=b),f!==t.h&&a(_,t.h=f),w!==t.r&&(_.disabled=t.r=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),s(()=>u.value=$()),s(()=>c.value=C()),e}}),null),s(t=>{var i=Fe,n=Je;return i!==t.e&&a(e,t.e=i),n!==t.t&&a(l,t.t=n),t},{e:void 0,t:void 0}),e}}),null),s(e=>{var t=Ae,i=Be,n="members"===c()?We:"",r="settings"===c()?We:"";return t!==e.e&&a(J,e.e=t),i!==e.t&&a(K,e.t=i),n!==e.a&&a(Q,e.a=n),r!==e.o&&a(X,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),J;var J,K,Q,X}v(["click","input"]);const ct="_panel_1e73u_3",pt="_tabs_1e73u_7",_t="_activeTab_1e73u_29",ht="_section_1e73u_34",mt="_error_1e73u_43",bt="_success_1e73u_51",ft="_settingsForm_1e73u_59",wt="_formItem_1e73u_66",yt="_saveButton_1e73u_84";var St=g("<div>"),xt=g("<section><h3>"),$t=g("<form><div><label></label><input type=text required></div><button type=submit>"),kt=g("<div><div><button></button><button>"),Ct=g("<p>");function It(l){const{t:o}=h(),{user:d,api:u}=m(),[g,v]=e("settings"===l.section?"settings":"members"),[p,_]=e([]),[b,f]=e([]),[S,x]=e(""),[$,k]=e(""),[C,I]=e(!1),[R,z]=e(null),[q,L]=e(null),E=c(()=>u().org(l.orgId)),T=c(()=>{const e=d()?.organizations?.find(e=>e.organization_id===l.orgId);return e?.role}),O=c(()=>{const e=T();return e===y||e===w}),P=e=>{v(e);const t="members"===e?"":`#${e}`,i=window.location.pathname;window.history.replaceState(null,"",i+t)},U=async()=>{const e=E();try{if(I(!0),z(null),"members"===g()&&O()){const[t,i]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);_(t.users?.filter(e=>!!e)||[]),f(i.invitations?.filter(e=>!!e)||[])}if("settings"===g()){const t=await e.organizations.getOrganization();x(t.name),k(t.name)}}catch(t){z(`${o("errors.failedToLoad")}: ${t}`)}finally{I(!1)}};t(()=>{U()}),t(()=>{const e=l.section;"settings"===e?v("settings"):"members"!==e&&e||v("members")});const D=async(e,t)=>{const i=E();try{I(!0),await i.invitations.createOrgInvitation({email:e,role:t}),L(o("success.invitationSent")||"Invitation sent successfully"),U()}catch(n){z(`${o("errors.failedToInvite")}: ${n}`)}finally{I(!1)}},N=async(e,t)=>{const i=E();try{I(!0),await i.users.updateOrgMemberRole({user_id:e,role:t}),L(o("success.roleUpdated")||"Role updated"),U()}catch(n){z(`${o("errors.failedToUpdateRole")}: ${n}`)}finally{I(!1)}},A=async e=>{e.preventDefault();const t=E();try{I(!0),z(null),L(null),S()!==$()&&S().trim()&&await t.organizations.updateOrganization({name:S().trim()}),k(S().trim()),L(o("success.orgSettingsSaved")||"Organization settings saved")}catch(i){z(`${o("errors.failedToSave")}: ${i}`)}finally{I(!1)}},B=[{value:"owner",label:o("settings.roleOwner")},{value:"admin",label:o("settings.roleAdmin")},{value:"member",label:o("settings.roleMember")}],W=[{value:"admin",label:o("settings.roleAdmin")},{value:"member",label:o("settings.roleMember")}];return F=kt(),M=F.firstChild,G=M.firstChild,j=G.nextSibling,G.$$click=()=>P("members"),i(G,()=>o("settings.members")),j.$$click=()=>P("settings"),i(j,()=>o("settings.settings")),i(F,n(r,{get when(){return R()},get children(){var e=St();return i(e,R),s(()=>a(e,mt)),e}}),null),i(F,n(r,{get when(){return q()},get children(){var e=St();return i(e,q),s(()=>a(e,bt)),e}}),null),i(F,n(r,{get when(){return"members"===g()},get children(){var e=xt(),t=e.firstChild;return i(t,()=>o("settings.organizationMembers")),i(e,n(r,{get when(){return O()},get fallback(){return e=Ct(),i(e,()=>o("settings.adminOnlyMembers")),e;var e},get children(){return[n(Re,{get members(){return p()},get currentUserId(){return d()?.id||""},roleOptions:B,roleField:"org_role",onUpdateRole:N,get loading(){return C()}}),n(Ne,{roleOptions:W,defaultRole:"member",get pendingInvitations(){return b().map(e=>({email:e.email,role:e.role,created:e.created}))},onInvite:D,get loading(){return C()}})]}}),null),s(()=>a(e,ht)),e}}),null),i(F,n(r,{get when(){return"settings"===g()},get children(){var e=xt(),t=e.firstChild;return i(t,()=>o("settings.organizationPreferences")),i(e,n(r,{get when(){return O()},get fallback(){return e=Ct(),i(e,()=>o("settings.adminOnlySettings")),e;var e},get children(){var e=$t(),t=e.firstChild,n=t.firstChild,r=n.nextSibling,l=t.nextSibling;return e.addEventListener("submit",A),i(n,()=>o("settings.organizationName")),r.$$input=e=>x(e.target.value),i(l,()=>o("common.save")),s(i=>{var n=ft,r=wt,s=yt,o=C();return n!==i.e&&a(e,i.e=n),r!==i.t&&a(t,i.t=r),s!==i.a&&a(l,i.a=s),o!==i.o&&(l.disabled=i.o=o),i},{e:void 0,t:void 0,a:void 0,o:void 0}),s(()=>r.value=S()),e}}),null),s(()=>a(e,ht)),e}}),null),s(e=>{var t=ct,i=pt,n="members"===g()?_t:"",r="settings"===g()?_t:"";return t!==e.e&&a(F,e.e=t),i!==e.t&&a(M,e.t=i),n!==e.a&&a(G,e.a=n),r!==e.o&&a(j,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),F;var F,M,G,j}v(["click","input"]);const Rt="_panel_125xp_3",zt="_tabs_125xp_12",qt="_activeTab_125xp_34",Lt="_section_125xp_39",Et="_error_125xp_43",Tt="_success_125xp_51",Ot="_statusBadge_125xp_59",Pt="_enabled_125xp_63",Ut="_disabled_125xp_73",Dt="_settingsForm_125xp_83",Nt="_formGrid_125xp_90",At="_formItem_125xp_97",Bt="_saveButton_125xp_121",Wt="_hint_125xp_140";var Ft=g("<div>"),Mt=g("<span>"),Gt=g("<section><div></div><form><div><label></label><input type=text placeholder=smtp.example.com></div><div><label></label><input type=number min=1 max=65535></div><div><label></label><input type=text placeholder=user@example.com></div><div><label></label><input type=password placeholder=••••••••><p></p></div><div><label></label><input type=email placeholder=noreply@example.com></div><button type=submit>"),jt=g("<section><form><div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div><div><label></label><input type=number min=0></div></div><button type=submit>"),Ht=g("<div><h2></h2><div><button></button><button>");function Vt(){const{t:l}=h(),{api:o}=m(),[d,u]=e("smtp"),[g,v]=e(null),[c,p]=e(""),[_,b]=e(587),[f,w]=e(""),[y,S]=e(""),[x,$]=e(""),[k,C]=e(0),[I,R]=e(0),[z,q]=e(0),[L,E]=e(0),[T,O]=e(0),[P,U]=e(0),[D,N]=e(0),[A,B]=e(0),[W,F]=e(0),[M,G]=e(!1),[j,H]=e(null),[V,J]=e(null),K=async()=>{try{G(!0),H(null);const e=await o().server.getConfig();v(e),p(e.smtp.host||""),b(e.smtp.port||587),w(e.smtp.username||""),$(e.smtp.from||""),S(""),C(e.quotas.max_request_body_bytes),R(e.quotas.max_sessions_per_user),q(e.quotas.max_tables_per_workspace),E(e.quotas.max_columns_per_table),O(e.quotas.max_rows_per_table),U(e.quotas.max_organizations),N(e.quotas.max_workspaces),B(e.quotas.max_users),F(e.quotas.max_total_storage_bytes)}catch(e){H(`${l("errors.failedToLoad")}: ${e}`)}finally{G(!1)}};t(()=>{K()});const Q=async e=>{e.preventDefault();try{G(!0),H(null),J(null),await o().server.updateConfig({smtp:{host:c(),port:_(),username:f(),password:y(),from:x()}}),J(l("server.configurationSaved")),await K()}catch(t){H(`${l("errors.failedToSave")}: ${t}`)}finally{G(!1)}},X=async e=>{e.preventDefault();try{G(!0),H(null),J(null),await o().server.updateConfig({quotas:{max_request_body_bytes:k(),max_sessions_per_user:I(),max_tables_per_workspace:z(),max_columns_per_table:L(),max_rows_per_table:T(),max_organizations:P(),max_workspaces:D(),max_users:A(),max_total_storage_bytes:W()}}),J(l("server.configurationSaved"))}catch(t){H(`${l("errors.failedToSave")}: ${t}`)}finally{G(!1)}};return Y=Ht(),Z=Y.firstChild,ee=Z.nextSibling,te=ee.firstChild,ie=te.nextSibling,i(Z,()=>l("server.serverSettings")),te.$$click=()=>u("smtp"),i(te,()=>l("server.smtpConfiguration")),ie.$$click=()=>u("quotas"),i(ie,()=>l("server.quotas")),i(Y,n(r,{get when(){return j()},get children(){var e=Ft();return i(e,j),s(()=>a(e,Et)),e}}),null),i(Y,n(r,{get when(){return V()},get children(){var e=Ft();return i(e,V),s(()=>a(e,Tt)),e}}),null),i(Y,n(r,{get when(){return"smtp"===d()},get children(){var e=Gt(),t=e.firstChild,o=t.nextSibling,d=o.firstChild,u=d.firstChild,v=u.nextSibling,h=d.nextSibling,m=h.firstChild,k=m.nextSibling,C=h.nextSibling,I=C.firstChild,R=I.nextSibling,z=C.nextSibling,q=z.firstChild,L=q.nextSibling,E=L.nextSibling,T=z.nextSibling,O=T.firstChild,P=O.nextSibling,U=T.nextSibling;return i(t,n(r,{get when(){return g()?.smtp.host},get fallback(){return e=Mt(),i(e,()=>l("server.smtpDisabled")),s(()=>a(e,Ut)),e;var e},get children(){var e=Mt();return i(e,()=>l("server.smtpEnabled")),s(()=>a(e,Pt)),e}})),o.addEventListener("submit",Q),i(u,()=>l("server.smtpHost")),v.$$input=e=>p(e.target.value),i(m,()=>l("server.smtpPort")),k.$$input=e=>b(parseInt(e.target.value)||587),i(I,()=>l("server.smtpUsername")),R.$$input=e=>w(e.target.value),i(q,()=>l("server.smtpPassword")),L.$$input=e=>S(e.target.value),i(E,()=>l("server.smtpPasswordHint")),i(O,()=>l("server.smtpFrom")),P.$$input=e=>$(e.target.value),i(U,()=>l("server.saveConfiguration")),s(i=>{var n=Lt,r=Ot,s=Dt,l=At,u=At,g=At,v=At,c=Wt,p=At,_=Bt,m=M();return n!==i.e&&a(e,i.e=n),r!==i.t&&a(t,i.t=r),s!==i.a&&a(o,i.a=s),l!==i.o&&a(d,i.o=l),u!==i.i&&a(h,i.i=u),g!==i.n&&a(C,i.n=g),v!==i.s&&a(z,i.s=v),c!==i.h&&a(E,i.h=c),p!==i.r&&a(T,i.r=p),_!==i.d&&a(U,i.d=_),m!==i.l&&(U.disabled=i.l=m),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),s(()=>v.value=c()),s(()=>k.value=_()),s(()=>R.value=f()),s(()=>L.value=y()),s(()=>P.value=x()),e}}),null),i(Y,n(r,{get when(){return"quotas"===d()},get children(){var e=jt(),t=e.firstChild,n=t.firstChild,r=n.firstChild,o=r.firstChild,d=o.nextSibling,u=r.nextSibling,g=u.firstChild,v=g.nextSibling,c=u.nextSibling,p=c.firstChild,_=p.nextSibling,h=c.nextSibling,m=h.firstChild,b=m.nextSibling,f=h.nextSibling,w=f.firstChild,y=w.nextSibling,S=f.nextSibling,x=S.firstChild,$=x.nextSibling,G=S.nextSibling,j=G.firstChild,H=j.nextSibling,V=G.nextSibling,J=V.firstChild,K=J.nextSibling,Q=V.nextSibling,Y=Q.firstChild,Z=Y.nextSibling,ee=n.nextSibling;return t.addEventListener("submit",X),i(o,()=>l("server.maxRequestBodyBytes")),d.$$input=e=>C(parseInt(e.target.value)||0),i(g,()=>l("server.maxSessionsPerUser")),v.$$input=e=>R(parseInt(e.target.value)||0),i(p,()=>l("server.maxTablesPerWorkspace")),_.$$input=e=>q(parseInt(e.target.value)||0),i(m,()=>l("server.maxColumnsPerTable")),b.$$input=e=>E(parseInt(e.target.value)||0),i(w,()=>l("server.maxRowsPerTable")),y.$$input=e=>O(parseInt(e.target.value)||0),i(x,()=>l("server.maxOrganizations")),$.$$input=e=>U(parseInt(e.target.value)||0),i(j,()=>l("server.maxWorkspaces")),H.$$input=e=>N(parseInt(e.target.value)||0),i(J,()=>l("server.maxUsers")),K.$$input=e=>B(parseInt(e.target.value)||0),i(Y,()=>l("server.maxTotalStorageBytes")),Z.$$input=e=>F(parseInt(e.target.value)||0),i(ee,()=>l("server.saveConfiguration")),s(i=>{var s=Lt,l=Dt,o=Nt,d=At,g=At,v=At,p=At,_=At,m=At,b=At,w=At,y=At,x=Bt,$=M();return s!==i.e&&a(e,i.e=s),l!==i.t&&a(t,i.t=l),o!==i.a&&a(n,i.a=o),d!==i.o&&a(r,i.o=d),g!==i.i&&a(u,i.i=g),v!==i.n&&a(c,i.n=v),p!==i.s&&a(h,i.s=p),_!==i.h&&a(f,i.h=_),m!==i.r&&a(S,i.r=m),b!==i.d&&a(G,i.d=b),w!==i.l&&a(V,i.l=w),y!==i.u&&a(Q,i.u=y),x!==i.c&&a(ee,i.c=x),$!==i.w&&(ee.disabled=i.w=$),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),s(()=>d.value=k()),s(()=>v.value=I()),s(()=>_.value=z()),s(()=>b.value=L()),s(()=>y.value=T()),s(()=>$.value=P()),s(()=>H.value=D()),s(()=>K.value=A()),s(()=>Z.value=W()),e}}),null),s(e=>{var t=Rt,i=zt,n="smtp"===d()?qt:"",r="quotas"===d()?qt:"";return t!==e.e&&a(Y,e.e=t),i!==e.t&&a(ee,e.t=i),n!==e.a&&a(te,e.a=n),r!==e.o&&a(ie,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),Y;var Y,Z,ee,te,ie}v(["click","input"]);const Jt="_settingsPage_1eedq_3",Kt="_header_1eedq_10",Qt="_headerLeft_1eedq_21",Xt="_hamburger_1eedq_27",Yt="_backButton_1eedq_37",Zt="_title_1eedq_53",ei="_layout_1eedq_64",ti="_content_1eedq_70",ii="_error_1eedq_81",ni="_mobileBackdrop_1eedq_88";var ri=g("<div>"),si=g('<div><header><div><button aria-label="Toggle settings menu">☰</button><button>← </button><h1></h1></div></header><div><main>');function ai(l){const{t:d}=h(),{user:u}=m(),[g,v]=e(!1),c=e=>{"Escape"===e.key&&g()&&v(!1)};p(()=>{window.addEventListener("keydown",c),_(()=>window.removeEventListener("keydown",c))}),t(()=>{"redirect"===l.route.type&&l.route.id&&(window.history.replaceState(null,"",l.route.id),window.dispatchEvent(new PopStateEvent("popstate")))});const f=e=>{v(!1),window.history.pushState(null,"",e),window.dispatchEvent(new PopStateEvent("popstate"))},w=()=>{window.history.back()},y=()=>{const e=u()?.workspace_id,t=u()?.workspace_name;e&&(l.onClose(),window.history.pushState(null,"",S(e,t)),window.dispatchEvent(new PopStateEvent("popstate")))};return(()=>{var e=si(),t=e.firstChild,c=t.firstChild,p=c.firstChild,_=p.nextSibling;_.firstChild;var h=_.nextSibling,m=t.nextSibling,S=m.firstChild;return p.$$click=()=>v(!g()),_.$$click=w,i(_,()=>d("common.back"),null),h.$$click=y,i(h,()=>d("settings.title")),i(m,n(r,{get when(){return g()},get children(){var e=ri();return e.$$click=()=>v(!1),s(()=>a(e,ni)),e}}),S),i(m,n(W,{get isOpen(){return g()},get currentRoute(){return l.route},onNavigate:f}),S),i(S,n(r,{get when(){return"profile"===l.route.type},get children(){return n(ye,{})}}),null),i(S,n(r,{get when(){return o(()=>!("workspace"!==l.route.type||!l.route.id))()?l.route.id:null},children:e=>n(r,{get when(){return(e=>{const t=u()?.workspaces?.find(t=>t.workspace_id===e);return t?{id:e,name:t.workspace_name||e}:null})(e())},get fallback(){return e=ri(),i(e,()=>d("errors.failedToLoad")),s(()=>a(e,ii)),e;var e},get children(){return n(vt,{get wsId(){return e()},get section(){return l.route.section},onNavigateToOrgSettings:(e,t)=>{f(b("org",e,t))}})}})}),null),i(S,n(r,{get when(){return o(()=>!("org"!==l.route.type||!l.route.id))()?l.route.id:null},children:e=>n(r,{get when(){return(e=>{const t=u()?.organizations?.find(t=>t.organization_id===e);return t?{id:e,name:t.organization_name||e}:null})(e())},get fallback(){return e=ri(),i(e,()=>d("errors.failedToLoad")),s(()=>a(e,ii)),e;var e},get children(){return n(It,{get orgId(){return e()},get section(){return l.route.section}})}})}),null),i(S,n(r,{get when(){return"server"===l.route.type},get children(){return n(Vt,{})}}),null),s(i=>{var n=Jt,r=Kt,s=Qt,l=Xt,o=Yt,d=Zt,u=ei,g=ti;return n!==i.e&&a(e,i.e=n),r!==i.t&&a(t,i.t=r),s!==i.a&&a(c,i.a=s),l!==i.o&&a(p,i.o=l),o!==i.i&&a(_,i.i=o),d!==i.n&&a(h,i.n=d),u!==i.s&&a(m,i.s=u),g!==i.h&&a(S,i.h=g),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),e})()}v(["click"]);export{Ne as InviteForm,Re as MembersTable,It as OrgSettingsPanel,ye as ProfileSettings,ai as Settings,U as SettingsNavItem,W as SettingsSidebar,vt as WorkspaceSettingsPanel};
