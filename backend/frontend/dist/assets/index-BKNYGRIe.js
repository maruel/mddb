import{u as e,c as t,a as i,b as n,d as r,t as o,e as a,r as s,f as l,g as d,o as c,i as u,S as h,h as v,j as g,s as p,F as _,m as f,k as m,l as b,n as w,p as y,M as k,q as $,v as S,w as C,x,y as L,z as T,A as I,B as E,C as P}from"./vendor-CG0C_70u.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const R={},O=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),r=i?.nonce||i?.getAttribute("nonce");n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in R)return;R[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise((t,i)=>{n.addEventListener("load",t),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};async function z(e){const t=await((e,t,i)=>{const n=e[t];return n?"function"==typeof n?n():Promise.resolve(n):new Promise((e,n)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>O(()=>import("./de-zBhnUBWL.js"),[]),"./dictionaries/en.ts":()=>O(()=>import("./en-ia8u4gn_.js"),[]),"./dictionaries/es.ts":()=>O(()=>import("./es-5cCiwVBE.js"),[]),"./dictionaries/fr.ts":()=>O(()=>import("./fr-BPZKLz60.js"),[])}),`./dictionaries/${e}.ts`,3);return l(t.dict)}const W=a(),D=e=>{const[a,l]=t(e.initialLocale||"en"),[d]=i(a,z),c=o(d,s),u=e=>{const t=`errors.${e}`,i=c(t);return i&&i!==t?i:c("errors.unknown")||"An error occurred"},h=n(()=>({locale:a,setLocale:l,t:c,translateError:u}));return r(W.Provider,{get value(){return h()},get children(){return e.children}})};function N(){const t=e(W);if(!t)throw new Error("useI18n must be used within I18nProvider");return t}const B="_sidebarNodeWrapper_1ghv5_1",M="_childList_1ghv5_2",A="_pageItem_1ghv5_12",U="_active_1ghv5_27",j="_nodeIcon_1ghv5_33",F="_pageTitleText_1ghv5_40",q="_expandIcon_1ghv5_48",H="_hidden_1ghv5_64",V="_expanded_1ghv5_68",G="_contextMenu_1ghv5_77",Y="_contextMenuItem_1ghv5_89";var K=b("<div><button>ðŸ“„ </button><button>ðŸ“Š "),J=b("<ul>"),X=b("<li><div><span>â–¶</span><span></span><span>");function Z(e){const{t:i}=N(),[n,o]=t(!0),[a,s]=t(!1),[l,d]=t({x:0,y:0});c(()=>{const e=()=>{s(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)});const b=e=>{e.stopPropagation(),o(!n())},w=e=>{e.preventDefault(),e.stopPropagation(),d({x:e.clientX,y:e.clientY}),s(!0)};return y=X(),k=y.firstChild,$=k.firstChild,S=$.nextSibling,C=S.nextSibling,k.$$contextmenu=w,k.$$click=()=>e.onSelect(e.node),$.$$click=b,u(S,()=>e.node.has_table&&!e.node.has_page?"ðŸ“Š":"ðŸ“„"),u(C,()=>e.node.title),u(y,r(h,{get when(){return a()},get children(){var t=K(),n=t.firstChild;n.firstChild;var r=n.nextSibling;return r.firstChild,t.$$click=e=>e.stopPropagation(),n.$$click=()=>{e.onCreateChildPage(e.node.id),s(!1)},u(n,()=>i("app.createSubPage"),null),r.$$click=()=>{e.onCreateChildTable(e.node.id),s(!1)},u(r,()=>i("app.createSubTable"),null),v(e=>{var i=G,o=`${l().x}px`,a=`${l().y}px`,s=Y,d=Y;return i!==e.e&&g(t,e.e=i),o!==e.t&&p(t,"left",e.t=o),a!==e.a&&p(t,"top",e.a=a),s!==e.o&&g(n,e.o=s),d!==e.i&&g(r,e.i=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t}}),null),u(y,r(h,{get when(){return f(()=>!!n())()&&e.node.children?.length},get children(){var t=J();return u(t,r(_,{get each(){return e.node.children?.filter(e=>!!e)},children:t=>r(Z,{node:t,get selectedId(){return e.selectedId},get onSelect(){return e.onSelect},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get depth(){return e.depth+1}})})),v(()=>g(t,M)),t}}),null),v(t=>{var i=B,r=A,o={[`${U}`]:e.selectedId===e.node.id},a=12*e.depth+8+"px",s=q,l={[`${V}`]:n(),[`${H}`]:!e.node.children?.length},d=j,c=F;return i!==t.e&&g(y,t.e=i),r!==t.t&&g(k,t.t=r),t.a=m(k,o,t.a),a!==t.o&&p(k,"padding-left",t.o=a),s!==t.i&&g($,t.i=s),t.n=m($,l,t.n),d!==t.s&&g(S,t.s=d),c!==t.h&&g(C,t.h=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),y;var y,k,$,S,C}d(["click","contextmenu"]);const Q="_sidebar_9ooik_1",ee="_sidebarHeader_9ooik_9",te="_loading_9ooik_42",ie="_pageList_9ooik_48",ne="_sidebarFooter_9ooik_54",re="_sidebarActions_9ooik_70",oe="_mobileOpen_9ooik_103";var ae=b("<p>"),se=b('<aside><div><h2></h2><div><button>âš™</button><button>+P</button><button>+D</button></div></div><ul></ul><div><a href=/privacy></a><span style="margin:0 0.5rem;color:#ccc">|</span><a href=/terms>');function le(e){const{t:t}=N();return i=se(),n=i.firstChild,o=n.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,d=l.nextSibling,c=n.nextSibling,p=c.nextSibling,m=p.firstChild,b=m.nextSibling.nextSibling,u(o,()=>t("app.workspace")),w(s,"click",e.onToggleSettings),w(l,"click",e.onCreatePage),w(d,"click",e.onCreateTable),u(i,r(h,{get when(){return f(()=>!!e.loading)()&&0===e.nodes.length},fallback:null,get children(){var e=ae();return u(e,()=>t("common.loading")),v(()=>g(e,te)),e}}),c),u(c,r(_,{get each(){return e.nodes},children:t=>r(Z,{node:t,get selectedId(){return e.selectedNodeId},get onSelect(){return e.onSelectNode},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},depth:0})})),m.$$click=t=>{t.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()},u(m,()=>t("app.privacyPolicy")),b.$$click=t=>{t.preventDefault(),window.history.pushState(null,"","/terms"),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()},u(b,()=>t("app.terms")),v(r=>{var o=`${Q} ${e.isOpen?oe:""}`,u=ee,h=re,v=t("app.settings")||"Workspace Settings",_=t("app.newPage")||"New Page",f=t("app.newTable")||"New Table",m=ie,b=ne;return o!==r.e&&g(i,r.e=o),u!==r.t&&g(n,r.t=u),h!==r.a&&g(a,r.a=h),v!==r.o&&y(s,"title",r.o=v),_!==r.i&&y(l,"title",r.i=_),f!==r.n&&y(d,"title",r.n=f),m!==r.s&&g(c,r.s=m),b!==r.h&&g(p,r.h=b),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),i;var i,n,o,a,s,l,d,c,p,m,b}d(["click"]);const de="_preview_1jukq_1";var ce=b('<div role=region aria-label="Markdown preview">');const ue=new k({html:!0,linkify:!0,typographer:!0}),he=ue.renderer.rules.image||function(e,t,i,n,r){return r.renderToken(e,t,i)};function ve(e){return t=ce(),v(i=>{var n=de,r=(()=>{const t=ue.render(e.content,{orgId:e.orgId});return $.sanitize(t)})();return n!==i.e&&g(t,i.e=n),r!==i.t&&(t.innerHTML=i.t=r),i},{e:void 0,t:void 0}),t;var t}ue.renderer.rules.image=(e,t,i,n,r)=>{const o=e[t];if(!o)return he(e,t,i,n,r);const a=o.attrIndex("src"),s=o.attrs,l=n?.orgId,d=s?.[a];if(d&&l){let e=d[1];if(e.startsWith("assets/")){const t=e.split("/");t.length>=2&&(e=`/assets/${l}/${t.slice(1).join("/")}`,d[1]=e)}}return he(e,t,i,n,r)};const ge="select",pe="google",_e="microsoft",fe="github",me="_container_1fe2r_1",be="_tableWrapper_1fe2r_10",we="_table_1fe2r_10",ye="_headerRow_1fe2r_24",ke="_headerCell_1fe2r_32",$e="_row_1fe2r_44",Se="_cell_1fe2r_53",Ce="_editing_1fe2r_65",xe="_cellContent_1fe2r_70",Le="_editContainer_1fe2r_75",Te="_input_1fe2r_81",Ie="_editActions_1fe2r_94",Ee="_saveBtn_1fe2r_99",Pe="_cancelBtn_1fe2r_100",Re="_actionsCell_1fe2r_119",Oe="_deleteBtn_1fe2r_127",ze="_addBtn_1fe2r_141",We="_newRow_1fe2r_155",De="_required_1fe2r_164",Ne="_empty_1fe2r_169",Be="_loadMore_1fe2r_176";var Me=b("<input type=checkbox>"),Ae=b("<select><option value>--"),Ue=b("<option>"),je=b("<input type=text>"),Fe=b("<input type=number>"),qe=b("<input type=date>"),He=b("<tr><td><button>+"),Ve=b("<div>"),Ge=b("<div><button>"),Ye=b("<div><div><table><thead><tr><th></th></tr></thead><tbody>"),Ke=b("<span>*"),Je=b("<th>"),Xe=b("<button>âœ•"),Ze=b("<tr><td>"),Qe=b("<div><div><button>âœ“</button><button>âœ•"),et=b("<td>");function tt(e){const{t:i}=N(),[n,o]=t(null),[a,s]=t(""),[l,d]=t({}),c=e=>{s(e)},p=()=>{e.onAddRecord&&Object.keys(l()).length>0&&(e.onAddRecord(l()),d({}))},f=(t,i)=>{const n=((t,i)=>{const n=e.columns.find(e=>e.name===i);return n?t.data[n.name]??"":""})(t,i.name);switch(i.type){case"checkbox":return n?"âœ“":"";case"select":case"multi_select":case"number":default:return String(n);case"date":return n?new Date(n).toLocaleDateString():""}},b=(e,t)=>{switch(e.type){case"checkbox":return(l=Me()).addEventListener("change",e=>c(String(e.target.checked))),l.checked="true"===t,v(()=>g(l,Te)),l;case ge:return e.options&&e.options.length>0?((s=Ae()).firstChild,s.addEventListener("change",e=>c(e.target.value)),s.value=t,u(s,r(_,{get each(){return e.options},children:e=>{return t=Ue(),u(t,()=>e.name),v(()=>t.value=e.id),t;var t}}),null),v(()=>g(s,Te)),s):((a=je()).$$input=e=>c(e.target.value),a.value=t,v(()=>g(a,Te)),a);case"number":return(o=Fe()).$$input=e=>c(e.target.value),o.value=t,v(()=>g(o,Te)),o;case"date":return(n=qe()).$$input=e=>c(e.target.value),n.value=t,v(()=>g(n,Te)),n;default:return(i=je()).$$input=e=>c(e.target.value),i.value=t,v(()=>g(i,Te)),i}var i,n,o,a,s,l};return w=Ye(),k=w.firstChild,$=k.firstChild,S=$.firstChild,C=S.firstChild,x=C.firstChild,L=S.nextSibling,u(x,()=>i("common.actions")),u(C,r(_,{get each(){return e.columns},children:e=>{return t=Je(),u(t,()=>e.name,null),u(t,r(h,{get when(){return e.required},get children(){var e=Ke();return v(()=>g(e,De)),e}}),null),v(()=>g(t,ke)),t;var t}}),null),u(L,r(_,{get each(){return e.records},children:t=>{return l=Ze(),d=l.firstChild,u(d,r(h,{get when(){return e.onDeleteRecord},get children(){var n=Xe();return n.$$click=()=>e.onDeleteRecord?.(t.id),v(e=>{var t=Oe,r=i("table.deleteRecord")||"Delete record";return t!==e.e&&g(n,e.e=t),r!==e.t&&y(n,"title",e.t=r),e},{e:void 0,t:void 0}),n}})),u(l,r(_,{get each(){return e.columns},children:i=>{const l=()=>n()?.recordId===t.id&&n()?.columnId===i.name;return(d=et()).$$click=()=>((t,i)=>{const n=e.columns.find(e=>e.name===i),r=e.records.find(e=>e.id===t)?.data[n?.name??""]??"";o({recordId:t,columnId:i}),s(String(r))})(t.id,i.name),u(d,r(h,{get when(){return l()},get fallback(){return e=Ve(),u(e,()=>f(t,i)),v(()=>g(e,xe)),e;var e},get children(){var n=Qe(),r=n.firstChild,s=r.firstChild,l=s.nextSibling;return u(n,()=>b(i,a()),r),s.$$click=()=>((t,i)=>{const n=e.columns.find(e=>e.name===i);if(!n||!e.onUpdateRecord)return;const r=e.records.find(e=>e.id===t);if(!r)return;const s={...r.data};s[n.name]=a(),e.onUpdateRecord(t,s),o(null)})(t.id,i.name),l.$$click=()=>o(null),v(e=>{var t=Le,i=Ie,o=Ee,a=Pe;return t!==e.e&&g(n,e.e=t),i!==e.t&&g(r,e.t=i),o!==e.a&&g(s,e.a=o),a!==e.o&&g(l,e.o=a),e},{e:void 0,t:void 0,a:void 0,o:void 0}),n}})),v(e=>{var t=Se,i={[`${Ce}`]:l()};return t!==e.e&&g(d,e.e=t),e.t=m(d,i,e.t),e},{e:void 0,t:void 0}),d;var d}}),null),v(e=>{var t=$e,i=Re;return t!==e.e&&g(l,e.e=t),i!==e.t&&g(d,e.t=i),e},{e:void 0,t:void 0}),l;var l,d}}),null),u(L,r(h,{get when(){return e.onAddRecord},get children(){var t=He(),i=t.firstChild,n=i.firstChild;return n.$$click=p,u(t,r(_,{get each(){return e.columns},children:e=>{return t=et(),u(t,()=>b(e,String(l()[e.name]??""))),v(()=>g(t,Se)),t;var t}}),null),v(e=>{var r=We,o=Re,a=ze;return r!==e.e&&g(t,e.e=r),o!==e.t&&g(i,e.t=o),a!==e.a&&g(n,e.a=a),e},{e:void 0,t:void 0,a:void 0}),t}}),null),u(w,r(h,{get when(){return 0===e.records.length},get children(){var e=Ve();return u(e,()=>i("table.noRecords")),v(()=>g(e,Ne)),e}}),null),u(w,r(h,{get when(){return e.hasMore},get children(){var t=Ge(),n=t.firstChild;return n.$$click=()=>e.onLoadMore?.(),u(n,()=>i("table.loadMore")),v(()=>g(t,Be)),t}}),null),v(e=>{var t=me,i=be,n=we,r=ye,o=ke;return t!==e.e&&g(w,e.e=t),i!==e.t&&g(k,e.t=i),n!==e.a&&g($,e.a=n),r!==e.o&&g(C,e.o=r),o!==e.i&&g(x,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),w;var w,k,$,S,C,x,L}d(["input","click"]);const it="_grid_3ff2z_1",nt="_card_3ff2z_8",rt="_cardHeader_3ff2z_20",ot="_deleteBtn_3ff2z_28",at="_cardBody_3ff2z_40",st="_field_3ff2z_46",lt="_fieldName_3ff2z_51",dt="_titleInput_3ff2z_58",ct="_fieldValueInput_3ff2z_75";var ut=b("<div>"),ht=b("<div><div><strong><input type=text></strong><button>âœ•</button></div><div>"),vt=b("<div><span>:</span><input type=text>");function gt(e){const{t:t}=N(),i=(t,i,n)=>{if(t.data[i]===n||!e.onUpdateRecord)return;const r={...t.data,[i]:n};e.onUpdateRecord(t.id,r)};return n=ut(),u(n,r(_,{get each(){return e.records},children:n=>{return o=ht(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=s.nextSibling,c=a.nextSibling,l.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},l.addEventListener("blur",t=>e.columns[0]&&i(n,e.columns[0].name,t.target.value)),d.$$click=()=>e.onDeleteRecord(n.id),u(c,r(_,{get each(){return e.columns.slice(1,4)},children:e=>{return t=vt(),r=t.firstChild,o=r.firstChild,a=r.nextSibling,u(r,()=>e.name,o),a.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},a.addEventListener("blur",t=>i(n,e.name,t.target.value)),v(e=>{var i=st,n=lt,o=ct;return i!==e.e&&g(t,e.e=i),n!==e.t&&g(r,e.t=n),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=String(n.data[e.name]||"")),t;var t,r,o,a}})),v(e=>{var i=nt,n=rt,r=t("table.untitled")||"Untitled",s=dt,u=ot,h=at;return i!==e.e&&g(o,e.e=i),n!==e.t&&g(a,e.t=n),r!==e.a&&y(l,"placeholder",e.a=r),s!==e.o&&g(l,e.o=s),u!==e.i&&g(d,e.i=u),h!==e.n&&g(c,e.n=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>l.value=String((e.columns[0]?n.data[e.columns[0].name]:null)||"")),o;var o,a,s,l,d,c}})),v(()=>g(n,it)),n;var n}d(["keydown","click"]);const pt="_gallery_1i7ro_1",_t="_card_1i7ro_8",ft="_imageContainer_1i7ro_23",mt="_image_1i7ro_23",bt="_imagePlaceholder_1i7ro_38",wt="_cardContent_1i7ro_43",yt="_cardHeader_1i7ro_47",kt="_deleteBtn_1i7ro_54",$t="_cardBody_1i7ro_67",St="_field_1i7ro_71",Ct="_fieldName_1i7ro_77",xt="_titleInput_1i7ro_83",Lt="_fieldValueInput_1i7ro_100";var Tt=b("<div>"),It=b("<div><div><div><strong><input type=text></strong><button>âœ•</button></div><div>"),Et=b("<img>"),Pt=b("<div><span>:</span><input type=text>");function Rt(e){const{t:t}=N(),i=(t,i,n)=>{if(t.data[i]===n||!e.onUpdateRecord)return;const r={...t.data,[i]:n};e.onUpdateRecord(t.id,r)};return n=Tt(),u(n,r(_,{get each(){return e.records},children:n=>{const o=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return a=It(),s=a.firstChild,l=s.firstChild,d=l.firstChild,c=d.firstChild,p=d.nextSibling,f=l.nextSibling,u(a,r(h,{when:o,children:i=>{return o=Tt(),u(o,r(h,{get when(){return n.data[i().name]},get fallback(){return e=Tt(),u(e,()=>t("table.noImage")),v(()=>g(e,bt)),e;var e},get children(){var t=Et();return v(r=>{var o=String(n.data[i().name]),a=String((e.columns[0]?n.data[e.columns[0].name]:null)||"Record"),s=mt;return o!==r.e&&y(t,"src",r.e=o),a!==r.t&&y(t,"alt",r.t=a),s!==r.a&&g(t,r.a=s),r},{e:void 0,t:void 0,a:void 0}),t}})),v(()=>g(o,ft)),o;var o}}),s),c.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},c.addEventListener("blur",t=>e.columns[0]&&i(n,e.columns[0].name,t.target.value)),p.$$click=()=>e.onDeleteRecord(n.id),u(f,r(_,{get each(){return e.columns.slice(1,3)},children:e=>{return t=Pt(),r=t.firstChild,o=r.firstChild,a=r.nextSibling,u(r,()=>e.name,o),a.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},a.addEventListener("blur",t=>i(n,e.name,t.target.value)),v(e=>{var i=St,n=Ct,o=Lt;return i!==e.e&&g(t,e.e=i),n!==e.t&&g(r,e.t=n),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=String(n.data[e.name]||"")),t;var t,r,o,a}})),v(e=>{var i=_t,n=wt,r=yt,o=t("table.untitled")||"Untitled",d=xt,u=kt,h=$t;return i!==e.e&&g(a,e.e=i),n!==e.t&&g(s,e.t=n),r!==e.a&&g(l,e.a=r),o!==e.o&&y(c,"placeholder",e.o=o),d!==e.i&&g(c,e.i=d),u!==e.n&&g(p,e.n=u),h!==e.s&&g(f,e.s=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>c.value=String((e.columns[0]?n.data[e.columns[0].name]:null)||"")),a;var a,s,l,d,c,p,f}})),v(()=>g(n,pt)),n;var n}d(["keydown","click"]);const Ot="_board_ojcu7_1",zt="_noGroup_ojcu7_7",Wt="_columns_ojcu7_16",Dt="_column_ojcu7_16",Nt="_columnHeader_ojcu7_31",Bt="_columnName_ojcu7_38",Mt="_columnCount_ojcu7_45",At="_cards_ojcu7_53",Ut="_card_ojcu7_53",jt="_cardHeader_ojcu7_68",Ft="_deleteBtn_ojcu7_80",qt="_cardBody_ojcu7_93",Ht="_field_ojcu7_97",Vt="_fieldName_ojcu7_103",Gt="_titleInput_ojcu7_108",Yt="_fieldValueInput_ojcu7_125";var Kt=b("<div>"),Jt=b("<div><div><span></span><span></span></div><div>"),Xt=b("<div><div><strong><input type=text></strong><button>âœ•</button></div><div>"),Zt=b("<div><span>:</span><input type=text>");function Qt(e){const{t:t}=N(),i=(t,i,n)=>{if(t.data[i]===n||!e.onUpdateRecord)return;const r={...t.data,[i]:n};e.onUpdateRecord(t.id,r)},o=()=>e.columns.find(e=>e.type===ge||"multi_select"===e.type),a=n(()=>{const i=o();if(!i)return[{name:"All Records",records:e.records,fromOptions:!0}];const n={};return i.options&&i.options.forEach(e=>{n[e.id]={name:e.name,records:[],fromOptions:!0}}),n.__none__={name:t("table.noGroup")||"No Group",records:[],fromOptions:!0},e.records.forEach(e=>{const t=e.data[i.name];t&&"string"==typeof t?(n[t]||(n[t]={name:t,records:[]}),n[t].records.push(e)):n.__none__?.records.push(e)}),Object.values(n).filter(e=>e.records.length>0||e.fromOptions)});return s=Kt(),u(s,r(h,{get when(){return o()},get fallback(){return e=Kt(),u(e,()=>t("table.addSelectColumn")),v(()=>g(e,zt)),e;var e},get children(){var n=Kt();return u(n,r(_,{get each(){return a()},children:n=>{return a=Jt(),s=a.firstChild,l=s.firstChild,d=l.nextSibling,c=s.nextSibling,u(l,()=>n.name),u(d,()=>n.records.length),u(c,r(_,{get each(){return n.records},children:n=>{return a=Xt(),s=a.firstChild,l=s.firstChild,d=l.firstChild,c=l.nextSibling,h=s.nextSibling,d.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},d.addEventListener("blur",t=>e.columns[0]&&i(n,e.columns[0].name,t.target.value)),c.$$click=()=>e.onDeleteRecord(n.id),u(h,r(_,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==o()?.name)},children:e=>{return t=Zt(),r=t.firstChild,o=r.firstChild,a=r.nextSibling,u(r,()=>e.name,o),a.$$keydown=e=>{"Enter"===e.key&&e.currentTarget.blur()},a.addEventListener("blur",t=>i(n,e.name,t.target.value)),v(e=>{var i=Ht,n=Vt,o=Yt;return i!==e.e&&g(t,e.e=i),n!==e.t&&g(r,e.t=n),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=String(n.data[e.name]||"")),t;var t,r,o,a}})),v(e=>{var i=Ut,n=jt,r=t("table.untitled")||"Untitled",o=Gt,l=Ft,u=qt;return i!==e.e&&g(a,e.e=i),n!==e.t&&g(s,e.t=n),r!==e.a&&y(d,"placeholder",e.a=r),o!==e.o&&g(d,e.o=o),l!==e.i&&g(c,e.i=l),u!==e.n&&g(h,e.n=u),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>d.value=String((e.columns[0]?n.data[e.columns[0].name]:null)||"")),a;var a,s,l,d,c,h}})),v(e=>{var t=Dt,i=Nt,n=Bt,r=Mt,o=At;return t!==e.e&&g(a,e.e=t),i!==e.t&&g(s,e.t=i),n!==e.a&&g(l,e.a=n),r!==e.o&&g(d,e.o=r),o!==e.i&&g(c,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),a;var a,s,l,d,c}})),v(()=>g(n,Wt)),n}})),v(()=>g(s,Ot)),s;var s}d(["keydown","click"]);class ei extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function ti(e,t){const i=await e(t);if(!i.ok){const e=await i.json();throw new ei(i.status,e)}return i.json()}async function ii(e,t,i){const n={method:"POST"};i&&(n.headers={"Content-Type":"application/json"},n.body=JSON.stringify(i));const r=await e(t,n);if(!r.ok){const e=await r.json();throw new ei(r.status,e)}return r.json()}function ni(e){return{admin:{organizations:{listAllOrgs:()=>ti(e,"/api/admin/organizations")},getAdminStats:()=>ti(e,"/api/admin/stats"),listAllUsers:()=>ti(e,"/api/admin/users")},auth:{invitations:{acceptOrgInvitation:t=>ii(e,"/api/auth/invitations/org/accept",t),acceptWSInvitation:t=>ii(e,"/api/auth/invitations/ws/accept",t)},sessions:{listSessions:()=>ti(e,"/api/auth/sessions"),revokeAllSessions:()=>ii(e,"/api/auth/sessions/revoke-all"),revokeSession:t=>ii(e,"/api/auth/sessions/revoke",t)},changeEmail:t=>ii(e,"/api/auth/email",t),getMe:()=>ti(e,"/api/auth/me"),listProviders:()=>ti(e,"/api/auth/providers"),login:t=>ii(e,"/api/auth/login",t),logout:()=>ii(e,"/api/auth/logout"),register:t=>ii(e,"/api/auth/register",t),switchOrg:t=>ii(e,"/api/auth/switch-org",t),switchWorkspace:t=>ii(e,"/api/auth/switch-workspace",t),updateUserSettings:t=>ii(e,"/api/auth/settings",t)},organizations:{createOrganization:t=>ii(e,"/api/organizations",t)},getHealth:()=>ti(e,"/api/health"),org:t=>({invitations:{createOrgInvitation:i=>ii(e,`/api/organizations/${t}/invitations`,i),listOrgInvitations:()=>ti(e,`/api/organizations/${t}/invitations`)},organizations:{getOrganization:()=>ti(e,`/api/organizations/${t}`),updateOrganization:i=>ii(e,`/api/organizations/${t}`,i)},settings:{updateOrgPreferences:i=>ii(e,`/api/organizations/${t}/settings`,i)},users:{listUsers:()=>ti(e,`/api/organizations/${t}/users`),updateOrgMemberRole:i=>ii(e,`/api/organizations/${t}/users/role`,i)},workspaces:{createWorkspace:i=>ii(e,`/api/organizations/${t}/workspaces`,i)}}),ws:t=>({invitations:{createWSInvitation:i=>ii(e,`/api/workspaces/${t}/invitations`,i),listWSInvitations:()=>ti(e,`/api/workspaces/${t}/invitations`)},nodes:{assets:{deleteNodeAsset:(i,n)=>ii(e,`/api/workspaces/${t}/nodes/${i}/assets/${n}/delete`),listNodeAssets:i=>ti(e,`/api/workspaces/${t}/nodes/${i}/assets`)},history:{getNodeVersion:(i,n)=>ti(e,`/api/workspaces/${t}/nodes/${i}/history/${n}`),async listNodeVersions(i,n){const r=new URLSearchParams;n.Limit&&r.set("limit",String(n.Limit));const o=`/api/workspaces/${t}/nodes/${i}/history`+(r.toString()?`?${r}`:"");return ti(e,o)}},page:{createPage:(i,n)=>ii(e,`/api/workspaces/${t}/nodes/${i}/page/create`,n),deletePage:i=>ii(e,`/api/workspaces/${t}/nodes/${i}/page/delete`),getPage:i=>ti(e,`/api/workspaces/${t}/nodes/${i}/page`),updatePage:(i,n)=>ii(e,`/api/workspaces/${t}/nodes/${i}/page`,n)},table:{records:{createRecord:(i,n)=>ii(e,`/api/workspaces/${t}/nodes/${i}/table/records/create`,n),deleteRecord:(i,n)=>ii(e,`/api/workspaces/${t}/nodes/${i}/table/records/${n}/delete`),getRecord:(i,n)=>ti(e,`/api/workspaces/${t}/nodes/${i}/table/records/${n}`),async listRecords(i,n){const r=new URLSearchParams;n.Offset&&r.set("offset",String(n.Offset)),n.Limit&&r.set("limit",String(n.Limit));const o=`/api/workspaces/${t}/nodes/${i}/table/records`+(r.toString()?`?${r}`:"");return ti(e,o)},updateRecord:(i,n,r)=>ii(e,`/api/workspaces/${t}/nodes/${i}/table/records/${n}`,r)},createTable:(i,n)=>ii(e,`/api/workspaces/${t}/nodes/${i}/table/create`,n),deleteTable:i=>ii(e,`/api/workspaces/${t}/nodes/${i}/table/delete`),getTable:i=>ti(e,`/api/workspaces/${t}/nodes/${i}/table`),updateTable:(i,n)=>ii(e,`/api/workspaces/${t}/nodes/${i}/table`,n)},deleteNode:i=>ii(e,`/api/workspaces/${t}/nodes/${i}/delete`),getNode:i=>ti(e,`/api/workspaces/${t}/nodes/${i}`),listNodeChildren:i=>ti(e,`/api/workspaces/${t}/nodes/${i}/children`),listNodes:()=>ti(e,`/api/workspaces/${t}/nodes`)},settings:{git:{deleteGitRemote:()=>ii(e,`/api/workspaces/${t}/settings/git/delete`),getGitRemote:()=>ti(e,`/api/workspaces/${t}/settings/git`),pushGit:()=>ii(e,`/api/workspaces/${t}/settings/git/push`),updateGitRemote:i=>ii(e,`/api/workspaces/${t}/settings/git`,i)},updateWSMembershipSettings:i=>ii(e,`/api/workspaces/${t}/settings/membership`,i)},users:{updateWSMemberRole:i=>ii(e,`/api/workspaces/${t}/users/role`,i)},workspaces:{getWorkspace:()=>ti(e,`/api/workspaces/${t}`),updateWorkspace:i=>ii(e,`/api/workspaces/${t}`,i)},search:i=>ii(e,`/api/workspaces/${t}/search`,i)})}}const ri=3,oi=1e3,ai=3e4;function si(e){return 429===e||e>=500&&e<600}function li(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const i=Date.parse(e);return isNaN(i)?null:Math.max(0,i-Date.now())}function di(e,t){if(null!==t)return Math.min(t,ai);const i=oi*Math.pow(2,e);return Math.min(i,ai)}function ci(e,t){return i=async(i,n)=>{const r=e(),o={...n?.headers};r&&(o.Authorization=`Bearer ${r}`);const a=await fetch(i,{...n,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let n=0;for(;;){const r=await i(e,t);if(!si(r.status)||n>=ri)return r;const o=di(n,li(r.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),n++}};var i}function ui(e,t){return ni(ci(e,t))}const hi="_settings_i6mpl_1",vi="_header_i6mpl_7",gi="_closeButton_i6mpl_16",pi="_section_i6mpl_28",_i="_table_i6mpl_37",fi="_roleSelect_i6mpl_55",mi="_error_i6mpl_61",bi="_success_i6mpl_69",wi="_tabs_i6mpl_77",yi="_activeTab_i6mpl_99",ki="_settingsForm_i6mpl_104",$i="_formItem_i6mpl_111",Si="_checkboxLabel_i6mpl_130",Ci="_saveButton_i6mpl_143",xi="_hint_i6mpl_162",Li="_inviteSection_i6mpl_168",Ti="_inviteForm_i6mpl_172",Ii="_formGroup_i6mpl_183",Ei="_addRemoteSection_i6mpl_212",Pi="_actions_i6mpl_224",Ri="_smallButton_i6mpl_229",Oi="_deleteButtonSmall_i6mpl_243";var zi=b("<button>"),Wi=b("<div>"),Di=b("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Ni=b("<h4>"),Bi=b("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=editor></option><option value=viewer></option></select><button type=submit>"),Mi=b("<section><h3>"),Ai=b("<form><div><label></label><input type=text required></div><div><label></label><input type=text required></div><div><label><input type=checkbox></label></div><div><label></label><input type=text><p></p></div><button type=submit>"),Ui=b("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),ji=b("<section><h3></h3><p>"),Fi=b("<div><header><h2></h2><button>&times;</button></header><div><button></button><button>"),qi=b("<p>"),Hi=b("<select><option value=admin></option><option value=editor></option><option value=viewer>"),Vi=b("<tr><td></td><td></td><td>"),Gi=b("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function Yi(e){const{t:i}=N(),[o,a]=t("members"),[s,l]=t([]),[d,c]=t([]),[p,f]=t(null),[m,b]=t(""),[w,k]=t(""),[$,C]=t(""),[x,L]=t("viewer"),[T,I]=t(""),[E,P]=t(""),[R,O]=t(""),[z,W]=t(""),[D,B]=t(!1),[M,A]=t(""),[U,j]=t(!1),[F,q]=t(null),[H,V]=t(null),G=n(()=>ui(()=>e.token)),Y=n(()=>{const t=e.user.organization_id;return t?G().org(t):null}),K=n(()=>{const t=e.user.workspace_id;return t?G().ws(t):null}),J=async()=>{const t=Y();if(t)try{j(!0),q(null);const i=K();if("members"===o()&&"admin"===e.user.workspace_role){const[e,n]=await Promise.all([t.users.listUsers(),i?i.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);l(e.users?.filter(e=>!!e)||[]),c(n.invitations?.filter(e=>!!e)||[])}if("workspace"===o()){const[e,n]=await Promise.all([t.organizations.getOrganization(),i?i.workspaces.getWorkspace():Promise.resolve(null)]);I(e.name),P(e.name),n&&(O(n.name),W(n.name)),B(!1),A(e.settings?.allowed_email_domains?.join(", ")||"")}if("sync"===o()&&"admin"===e.user.workspace_role&&i)try{const e=await i.settings.git.getGitRemote();f(e)}catch{f(null)}}catch(n){q(`${i("errors.failedToLoad")}: ${n}`)}finally{j(!1)}};S(()=>{J()});const X=async e=>{e.preventDefault();const t=K();if($()&&t)try{j(!0),await t.invitations.createWSInvitation({email:$(),role:x()}),C(""),V(i("success.invitationSent")||"Invitation sent successfully"),J()}catch(n){q(`${i("errors.failedToInvite")}: ${n}`)}finally{j(!1)}},Z=async e=>{e.preventDefault();const t=Y(),n=K();if(t)try{j(!0),q(null),V(null);const e={allowed_email_domains:M()?M().split(",").map(e=>e.trim()):[],require_sso:!1,default_workspace_quotas:{max_pages:1e3,max_storage_mb:1024,max_records_per_table:1e4,max_asset_size_mb:50}},r=[t.settings.updateOrgPreferences({settings:e})];T()!==E()&&T().trim()&&r.push(t.organizations.updateOrganization({name:T().trim()})),n&&R()!==z()&&R().trim()&&r.push(n.workspaces.updateWorkspace({name:R().trim()})),await Promise.all(r),P(T().trim()),W(R().trim()),V(i("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(r){q(`${i("errors.failedToSave")}: ${r}`)}finally{j(!1)}},Q=async e=>{e.preventDefault();const t=K();if(t)try{j(!0),q(null);const e=await t.settings.git.updateGitRemote({url:m(),token:w(),type:"custom",auth_type:w()?"token":"none"});f(e),V(i("success.remoteAdded")||"Git remote configured"),b(""),k("")}catch(n){q(`${i("errors.failedToAddRemote")}: ${n}`)}finally{j(!1)}},ee=async()=>{const e=K();if(e)try{j(!0),q(null),V(null),await e.settings.git.pushGit(),V(i("success.pushSuccessful")||"Push successful"),J()}catch(t){q(`${i("errors.pushFailed")}: ${t}`)}finally{j(!1)}},te=async()=>{if(!confirm(i("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=K();if(e)try{j(!0),q(null),await e.settings.git.deleteGitRemote(),f(null),V(i("success.remoteRemoved")||"Remote removed")}catch(t){q(`${i("errors.failedToRemoveRemote")}: ${t}`)}finally{j(!1)}};return ie=Fi(),ne=ie.firstChild,re=ne.firstChild,oe=re.nextSibling,ae=ne.nextSibling,se=ae.firstChild,le=se.nextSibling,u(re,()=>i("settings.title")),oe.$$click=()=>e.onClose(),se.$$click=()=>a("members"),u(se,()=>i("settings.members")),le.$$click=()=>a("workspace"),u(le,()=>i("settings.workspace")),u(ae,r(h,{get when(){return"admin"===e.user.workspace_role},get children(){var e=zi();return e.$$click=()=>a("sync"),u(e,()=>i("settings.gitSync")),v(()=>g(e,"sync"===o()?yi:"")),e}}),null),u(ie,r(h,{get when(){return F()},get children(){var e=Wi();return u(e,F),v(()=>g(e,mi)),e}}),null),u(ie,r(h,{get when(){return H()},get children(){var e=Wi();return u(e,H),v(()=>g(e,bi)),e}}),null),u(ie,r(h,{get when(){return"members"===o()},get children(){var t=Mi(),n=t.firstChild;return u(n,()=>i("settings.members")),u(t,r(h,{get when(){return"admin"===e.user.workspace_role},get fallback(){return e=qi(),u(e,()=>i("settings.adminOnlyMembers")),e;var e},get children(){return[(w=Di(),k=w.firstChild,S=k.firstChild.firstChild,T=S.nextSibling,I=T.nextSibling,E=k.nextSibling,u(S,()=>i("settings.nameColumn")),u(T,()=>i("settings.emailColumn")),u(I,()=>i("settings.roleColumn")),u(E,r(_,{get each(){return s()},children:t=>{return n=Vi(),o=n.firstChild,a=o.nextSibling,s=a.nextSibling,u(o,()=>t.name),u(a,()=>t.email),u(s,r(h,{get when(){return t.id!==e.user.id},get fallback(){return t.workspace_role},get children(){var e=Hi(),n=e.firstChild,r=n.nextSibling,o=r.nextSibling;return e.addEventListener("change",e=>(async(e,t)=>{const n=K();if(n)try{j(!0),await n.users.updateWSMemberRole({user_id:e,role:t}),V(i("success.roleUpdated")||"Role updated"),J()}catch(r){q(`${i("errors.failedToUpdateRole")}: ${r}`)}finally{j(!1)}})(t.id,e.target.value)),u(n,()=>i("settings.roleAdmin")),u(r,()=>i("settings.roleEditor")),u(o,()=>i("settings.roleViewer")),v(()=>g(e,fi)),v(()=>e.value=t.workspace_role),e}})),n;var n,o,a,s}})),v(()=>g(w,_i)),w),(t=Bi(),n=t.firstChild,o=n.firstChild,a=o.nextSibling,l=a.firstChild,c=l.nextSibling,p=c.firstChild,f=p.nextSibling,m=f.nextSibling,b=c.nextSibling,n.addEventListener("submit",X),u(o,()=>i("settings.inviteNewMember")),l.$$input=e=>C(e.target.value),c.addEventListener("change",e=>L(e.target.value)),u(p,()=>i("settings.roleAdmin")),u(f,()=>i("settings.roleEditor")),u(m,()=>i("settings.roleViewer")),u(b,()=>i("common.invite")),u(t,r(h,{get when(){return d().length>0},get children(){return[(l=Ni(),u(l,()=>i("settings.pendingInvitations")),l),(e=Di(),t=e.firstChild,n=t.firstChild.firstChild,o=n.nextSibling,a=o.nextSibling,s=t.nextSibling,u(n,()=>i("settings.emailColumn")),u(o,()=>i("settings.roleColumn")),u(a,()=>i("settings.sentColumn")),u(s,r(_,{get each(){return d()},children:e=>{return t=Vi(),i=t.firstChild,n=i.nextSibling,r=n.nextSibling,u(i,()=>e.email),u(n,()=>e.role),u(r,()=>new Date(e.created).toLocaleDateString()),t;var t,i,n,r}})),v(()=>g(e,_i)),e)];var e,t,n,o,a,s,l}}),null),v(e=>{var r=Li,o=Ti,s=Ii,d=i("settings.emailPlaceholder")||"Email address",c=U();return r!==e.e&&g(t,e.e=r),o!==e.t&&g(n,e.t=o),s!==e.a&&g(a,e.a=s),d!==e.o&&y(l,"placeholder",e.o=d),c!==e.i&&(b.disabled=e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>l.value=$()),v(()=>c.value=x()),t)];var t,n,o,a,l,c,p,f,m,b,w,k,S,T,I,E}}),null),v(()=>g(t,pi)),t}}),null),u(ie,r(h,{get when(){return"workspace"===o()},get children(){var t=Mi(),n=t.firstChild;return u(n,()=>i("settings.workspaceSettings")),u(t,r(h,{get when(){return"admin"===e.user.workspace_role},get fallback(){return e=qi(),u(e,()=>i("settings.adminOnlyWorkspace")),e;var e},get children(){var e=Ai(),t=e.firstChild,n=t.firstChild,r=n.nextSibling,o=t.nextSibling,a=o.firstChild,s=a.nextSibling,l=o.nextSibling,d=l.firstChild,c=d.firstChild,h=l.nextSibling,p=h.firstChild,_=p.nextSibling,f=_.nextSibling,m=h.nextSibling;return e.addEventListener("submit",Z),u(n,()=>i("settings.organizationName")),r.$$input=e=>I(e.target.value),u(a,()=>i("settings.workspaceName")),s.$$input=e=>O(e.target.value),c.addEventListener("change",e=>B(e.currentTarget.checked)),u(d,()=>i("settings.allowPublicAccess"),null),u(p,()=>i("settings.allowedDomains")),_.$$input=e=>A(e.target.value),u(f,()=>i("settings.allowedDomainsHint")),u(m,()=>i("settings.saveWorkspaceSettings")),v(n=>{var r=ki,a=$i,s=$i,c=$i,u=Si,v=$i,p=i("settings.allowedDomainsPlaceholder")||"example.com, company.org",b=xi,w=Ci,k=U();return r!==n.e&&g(e,n.e=r),a!==n.t&&g(t,n.t=a),s!==n.a&&g(o,n.a=s),c!==n.o&&g(l,n.o=c),u!==n.i&&g(d,n.i=u),v!==n.n&&g(h,n.n=v),p!==n.s&&y(_,"placeholder",n.s=p),b!==n.h&&g(f,n.h=b),w!==n.r&&g(m,n.r=w),k!==n.d&&(m.disabled=n.d=k),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),v(()=>r.value=T()),v(()=>s.value=R()),v(()=>c.checked=D()),v(()=>_.value=M()),e}}),null),v(()=>g(t,pi)),t}}),null),u(ie,r(h,{get when(){return"sync"===o()},get children(){var e=ji(),t=e.firstChild,n=t.nextSibling;return u(t,()=>i("settings.gitSynchronization")),u(n,()=>i("settings.gitSyncHint")),u(e,r(h,{get when(){return p()},children:e=>{const t=e().last_sync;return n=Gi(),r=n.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,h=c.firstChild,p=h.nextSibling,u(o,()=>i("settings.urlColumn")),u(a,()=>i("settings.lastSyncColumn")),u(s,()=>i("common.actions")),u(l,()=>e().url),u(d,()=>t?new Date(t).toLocaleString():i("settings.never")),h.$$click=ee,u(h,()=>i("common.push")),p.$$click=te,u(p,()=>i("common.remove")),v(e=>{var t=_i,i=Pi,r=U(),o=Ri,a=U(),s=Oi;return t!==e.e&&g(n,e.e=t),i!==e.t&&g(c,e.t=i),r!==e.a&&(h.disabled=e.a=r),o!==e.o&&g(h,e.o=o),a!==e.i&&(p.disabled=e.i=a),s!==e.n&&g(p,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n;var n,r,o,a,s,l,d,c,h,p}}),null),u(e,r(h,{get when(){return!p()},get children(){var e=Ui(),t=e.firstChild,n=t.nextSibling,r=n.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,h=s.nextSibling;return u(t,()=>i("settings.addNewRemote")),n.addEventListener("submit",Q),u(o,()=>i("settings.repositoryUrl")),a.$$input=e=>b(e.target.value),u(l,()=>i("settings.personalAccessToken")),d.$$input=e=>k(e.target.value),u(c,()=>i("settings.tokenHint")),u(h,()=>i("settings.addRemote")),v(t=>{var o=Ei,l=ki,u=$i,v=i("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",p=$i,_=i("settings.tokenPlaceholder")||"ghp_...",f=xi,m=Ci,b=U();return o!==t.e&&g(e,t.e=o),l!==t.t&&g(n,t.t=l),u!==t.a&&g(r,t.a=u),v!==t.o&&y(a,"placeholder",t.o=v),p!==t.i&&g(s,t.i=p),_!==t.n&&y(d,"placeholder",t.n=_),f!==t.s&&g(c,t.s=f),m!==t.h&&g(h,t.h=m),b!==t.r&&(h.disabled=t.r=b),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>a.value=m()),v(()=>d.value=w()),e}}),null),v(t=>{var i=pi,r=xi;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(e=>{var t=hi,i=vi,n=gi,r=wi,a="members"===o()?yi:"",s="workspace"===o()?yi:"";return t!==e.e&&g(ie,e.e=t),i!==e.t&&g(ne,e.t=i),n!==e.a&&g(oe,e.a=n),r!==e.o&&g(ae,e.o=r),a!==e.i&&g(se,e.i=a),s!==e.n&&g(le,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),ie;var ie,ne,re,oe,ae,se,le}d(["click","input"]);const Ki="_profile_1tpii_1",Ji="_header_1tpii_7",Xi="_closeButton_1tpii_16",Zi="_userInfoSection_1tpii_28",Qi="_avatarLarge_1tpii_38",en="_avatarImageLarge_1tpii_50",tn="_initialsLarge_1tpii_56",nn="_userDetails_1tpii_62",rn="_userName_1tpii_66",on="_userEmail_1tpii_72",an="_userRole_1tpii_77",sn="_section_1tpii_87",ln="_error_1tpii_96",dn="_success_1tpii_104",cn="_settingsForm_1tpii_112",un="_formItem_1tpii_119",hn="_checkboxLabel_1tpii_138",vn="_saveButton_1tpii_151";var gn=b("<div>"),pn=b("<span>"),_n=b("<div><label><input type=checkbox>"),fn=b("<div><header><h2></h2><button>&times;</button></header><section><div></div><div><h3></h3><p></p></div></section><section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),mn=b("<img referrerpolicy=no-referrer>");function bn(e){const{t:i}=N(),[o,a]=t("light"),[s,l]=t("en"),[d,c]=t(!0),[p,_]=t(!1),[f,m]=t(null),[b,w]=t(null),k=n(()=>ui(()=>e.token)),$=n(()=>{const t=e.user.workspace_id;return t?k().ws(t):null}),C=()=>{const t=e.user.name||e.user.email||"",i=t.split(/[\s@]+/);return i.length>=2&&i[0]&&i[1]?((i[0][0]||"")+(i[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};S(()=>{a(e.user.settings?.theme||"light"),l(e.user.settings?.language||"en")});S(()=>{(async()=>{try{_(!0),m(null);const t=e.user.workspaces?.find(t=>t.workspace_id===e.user.workspace_id);t&&c(t.settings?.notifications??!0)}catch(t){m(`${i("errors.failedToLoad")}: ${t}`)}finally{_(!1)}})()});const x=async e=>{e.preventDefault();const t=$();try{_(!0),m(null),w(null);const e={theme:o(),language:s()},n=[k().auth.updateUserSettings({settings:e})];if(t){const e={notifications:d()};n.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(n),w(i("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(n){m(`${i("errors.failedToSave")}: ${n}`)}finally{_(!1)}};return L=fn(),T=L.firstChild,I=T.firstChild,E=I.nextSibling,P=T.nextSibling,R=P.firstChild,O=R.nextSibling,z=O.firstChild,W=z.nextSibling,D=P.nextSibling,B=D.firstChild,M=B.nextSibling,A=M.firstChild,U=A.firstChild,j=U.nextSibling,F=j.firstChild,q=F.nextSibling,H=q.nextSibling,V=A.nextSibling,G=V.firstChild,Y=G.nextSibling,K=Y.firstChild,J=K.nextSibling,X=J.nextSibling,Z=X.nextSibling,Q=V.nextSibling,u(I,()=>i("profile.title")),E.$$click=()=>e.onClose(),u(L,r(h,{get when(){return f()},get children(){var e=gn();return u(e,f),v(()=>g(e,ln)),e}}),P),u(L,r(h,{get when(){return b()},get children(){var e=gn();return u(e,b),v(()=>g(e,dn)),e}}),P),u(R,r(h,{get when(){return(()=>{const t=e.user.oauth_identities;if(!t)return null;for(const e of t)if(e.avatar_url)return e.avatar_url;return null})()},get fallback(){return e=pn(),u(e,C),v(()=>g(e,tn)),e;var e},children:t=>{return i=mn(),v(n=>{var r=t(),o=e.user.name||"User",a=en;return r!==n.e&&y(i,"src",n.e=r),o!==n.t&&y(i,"alt",n.t=o),a!==n.a&&g(i,n.a=a),n},{e:void 0,t:void 0,a:void 0}),i;var i}})),u(z,()=>e.user.name),u(W,()=>e.user.email),u(O,r(h,{get when(){return e.user.workspace_role},get children(){var t=pn();return u(t,()=>e.user.workspace_role),v(()=>g(t,an)),t}}),null),u(B,()=>i("settings.personalSettings")),M.addEventListener("submit",x),u(U,()=>i("settings.theme")),j.addEventListener("change",e=>a(e.target.value)),u(F,()=>i("settings.themeLight")),u(q,()=>i("settings.themeDark")),u(H,()=>i("settings.themeSystem")),u(G,()=>i("settings.language")),Y.addEventListener("change",e=>l(e.target.value)),u(K,()=>i("settings.languageEn")),u(J,()=>i("settings.languageFr")),u(X,()=>i("settings.languageDe")),u(Z,()=>i("settings.languageEs")),u(M,r(h,{get when(){return e.user.workspace_id},get children(){var e=_n(),t=e.firstChild,n=t.firstChild;return n.addEventListener("change",e=>c(e.currentTarget.checked)),u(t,()=>i("settings.enableNotifications"),null),v(i=>{var n=un,r=hn;return n!==i.e&&g(e,i.e=n),r!==i.t&&g(t,i.t=r),i},{e:void 0,t:void 0}),v(()=>n.checked=d()),e}}),Q),u(Q,()=>i("settings.saveChanges")),v(e=>{var t=Ki,i=Ji,n=Xi,r=Zi,o=Qi,a=nn,s=rn,l=on,d=sn,c=cn,u=un,h=un,v=vn,_=p();return t!==e.e&&g(L,e.e=t),i!==e.t&&g(T,e.t=i),n!==e.a&&g(E,e.a=n),r!==e.o&&g(P,e.o=r),o!==e.i&&g(R,e.i=o),a!==e.n&&g(O,e.n=a),s!==e.s&&g(z,e.s=s),l!==e.h&&g(W,e.h=l),d!==e.r&&g(D,e.r=d),c!==e.d&&g(M,e.d=c),u!==e.l&&g(A,e.l=u),h!==e.u&&g(V,e.u=h),v!==e.c&&g(Q,e.c=v),_!==e.w&&(Q.disabled=e.w=_),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),v(()=>j.value=o()),v(()=>Y.value=s()),L;var L,T,I,E,P,R,O,z,W,D,B,M,A,U,j,F,q,H,V,G,Y,K,J,X,Z,Q}d(["click"]);const wn="_authContainer_1ksl8_1",yn="_authForm_1ksl8_9",kn="_formGroup_1ksl8_24",$n="_error_1ksl8_62",Sn="_toggle_1ksl8_72",Cn="_authFooter_1ksl8_87",xn="_oauthSection_1ksl8_104",Ln="_divider_1ksl8_108",Tn="_oauthButtons_1ksl8_127",In="_oauthIcon_1ksl8_133",En="_googleButton_1ksl8_140",Pn="_microsoftButton_1ksl8_141",Rn="_githubButton_1ksl8_142",On="_oauthButton_1ksl8_127";var zn=b('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),Wn=b('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),Dn=b('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),Nn=b("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),Bn=b("<div><div><span></span></div><div>"),Mn=b("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),An=b("<div>"),Un=b("<a>");const jn={[pe]:function(){return e=zn(),v(()=>y(e,"class",In)),e;var e},[_e]:function(){return e=Wn(),v(()=>y(e,"class",In)),e;var e},[fe]:function(){return e=Dn(),v(()=>y(e,"class",In)),e;var e}},Fn={[pe]:{style:En,labelKey:"auth.loginWithGoogle"},[_e]:{style:Pn,labelKey:"auth.loginWithMicrosoft"},[fe]:{style:Rn,labelKey:"auth.loginWithGitHub"}};const qn=ni((e,t)=>fetch(e,t));function Hn(e){const{t:n}=N(),[o]=i(()=>qn.auth.listProviders().then(e=>e.providers)),[a,s]=t(!1),[l,d]=t(""),[c,p]=t(""),[m,b]=t(""),[w,k]=t(null),[$,S]=t(!1),C=async t=>{t.preventDefault(),k(null),S(!0);try{const t=a()?await qn.auth.register({email:l(),password:c(),name:m()}):await qn.auth.login({email:l(),password:c()});t.token&&t.user?e.onLogin(t.token,t.user):k("Invalid response from server")}catch(i){k(i instanceof ei?i.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{S(!1)}};return P=Mn(),R=P.firstChild,O=R.firstChild,z=O.nextSibling,W=z.firstChild,D=W.nextSibling,B=z.nextSibling,M=B.firstChild,A=M.nextSibling,U=B.nextSibling,j=U.nextSibling,F=j.firstChild,q=j.nextSibling,H=q.firstChild,R.addEventListener("submit",C),u(O,(x=f(()=>!!a()),()=>x()?n("auth.createAccount"):n("auth.loginTitle"))),u(R,(L=f(()=>!!w()),()=>{return L()&&(e=An(),u(e,w),v(()=>g(e,$n)),e);var e}),z),u(R,r(h,{get when(){return a()},get children(){var e=Nn(),t=e.firstChild,i=t.nextSibling;return u(t,()=>n("auth.name")),i.$$input=e=>b(e.target.value),v(()=>g(e,kn)),v(()=>i.value=m()),e}}),z),u(W,()=>n("auth.email")),D.$$input=e=>d(e.target.value),u(M,()=>n("auth.password")),A.$$input=e=>p(e.target.value),u(U,(T=f(()=>!!$()),()=>T()?n("auth.pleaseWait"):f(()=>!!a())()?n("auth.register"):n("auth.login"))),u(R,r(h,{get when(){return(o()??[]).length>0},get children(){var e=Bn(),t=e.firstChild,i=t.firstChild,a=t.nextSibling;return u(i,()=>n("auth.or")),u(a,r(_,{get each(){return o()},children:e=>{const t=function(e){const t=Fn[e];return t?{style:t.style,label:t.labelKey}:{style:On,label:e.charAt(0).toUpperCase()+e.slice(1)}}(e),i=e in Fn,o=jn[e];return a=Un(),y(a,"href",`/api/auth/oauth/${e}`),u(a,o&&r(o,{}),null),u(a,()=>i?n(t.label):t.label,null),v(()=>g(a,t.style)),a;var a}})),v(i=>{var n=xn,r=Ln,o=Tn;return n!==i.e&&g(e,i.e=n),r!==i.t&&g(t,i.t=r),o!==i.a&&g(a,i.a=o),i},{e:void 0,t:void 0,a:void 0}),e}}),j),u(j,(I=f(()=>!!a()),()=>I()?n("auth.alreadyHaveAccount"):n("auth.dontHaveAccount")),F),F.$$click=()=>s(!a()),u(F,(E=f(()=>!!a()),()=>E()?n("auth.login"):n("auth.register"))),H.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},u(H,()=>n("app.privacyPolicy")),v(e=>{var t=wn,i=yn,n=kn,r=kn,o=a()?"new-password":"current-password",s=$(),l=Sn,d=Cn;return t!==e.e&&g(P,e.e=t),i!==e.t&&g(R,e.t=i),n!==e.a&&g(z,e.a=n),r!==e.o&&g(B,e.o=r),o!==e.i&&y(A,"autocomplete",e.i=o),s!==e.n&&(U.disabled=e.n=s),l!==e.s&&g(j,e.s=l),d!==e.h&&g(q,e.h=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),v(()=>D.value=l()),v(()=>A.value=c()),P;var x,L,T,I,E,P,R,O,z,W,D,B,M,A,U,j,F,q,H}d(["input","click"]);const Vn="_container_mfa6v_1",Gn="_content_mfa6v_9",Yn="_header_mfa6v_19",Kn="_section_mfa6v_36",Jn="_footer_mfa6v_49",Xn="_backButton_mfa6v_57";var Zn=b("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and tables are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function Qn(){return e=Zn(),t=e.firstChild,i=t.firstChild,n=i.nextSibling,r=n.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(l=s.firstChild).$$click=()=>window.history.back(),v(d=>{var c=Vn,u=Gn,h=Yn,v=Kn,p=Kn,_=Kn,f=Kn,m=Jn,b=Xn;return c!==d.e&&g(e,d.e=c),u!==d.t&&g(t,d.t=u),h!==d.a&&g(i,d.a=h),v!==d.o&&g(n,d.o=v),p!==d.i&&g(r,d.i=p),_!==d.n&&g(o,d.n=_),f!==d.s&&g(a,d.s=f),m!==d.h&&g(s,d.h=m),b!==d.r&&g(l,d.r=b),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,i,n,r,o,a,s,l}d(["click"]);const er="_container_mfa6v_1",tr="_content_mfa6v_9",ir="_header_mfa6v_19",nr="_section_mfa6v_36",rr="_footer_mfa6v_49",or="_backButton_mfa6v_57";var ar=b("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, data, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the â€œContentâ€) and the trademarks, service marks, and logos contained therein (the â€œMarksâ€) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function sr(){return e=ar(),t=e.firstChild,i=t.firstChild,n=i.nextSibling,r=n.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,(d=l.firstChild).$$click=()=>window.history.back(),v(c=>{var u=er,h=tr,v=ir,p=nr,_=nr,f=nr,m=nr,b=nr,w=rr,y=or;return u!==c.e&&g(e,c.e=u),h!==c.t&&g(t,c.t=h),v!==c.a&&g(i,c.a=v),p!==c.o&&g(n,c.o=p),_!==c.i&&g(r,c.i=_),f!==c.n&&g(o,c.n=f),m!==c.s&&g(a,c.s=m),b!==c.h&&g(s,c.h=b),w!==c.r&&g(l,c.r=w),y!==c.d&&g(d,c.d=y),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,i,n,r,o,a,s,l,d}d(["click"]);const lr="_banner_172qk_1",dr="_content_172qk_23",cr="_title_172qk_27",ur="_message_172qk_32",hr="_actions_172qk_37",vr="_installButton_172qk_42",gr="_dismissButton_172qk_56";var pr=b("<div><div><div></div><div></div></div><div><button></button><button>");const _r="mddb_pwa_dismissed";function fr(){const{t:e}=N(),[i,n]=t(null),[o,a]=t(!1);c(()=>{if(function(){const e=localStorage.getItem(_r);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),n(e),a(!0)},t=()=>{a(!1),n(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),C(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=i();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),n(null)},l=()=>{localStorage.setItem(_r,(new Date).toISOString()),a(!1)};return r(h,{get when(){return f(()=>!!o())()&&i()},get children(){var t=pr(),i=t.firstChild,n=i.firstChild,r=n.nextSibling,o=i.nextSibling,a=o.firstChild,d=a.nextSibling;return u(n,()=>e("pwa.installTitle")),u(r,()=>e("pwa.installMessage")),a.$$click=l,u(a,()=>e("pwa.dismissButton")),d.$$click=s,u(d,()=>e("pwa.installButton")),v(e=>{var s=lr,l=dr,c=cr,u=ur,h=hr,v=gr,p=vr;return s!==e.e&&g(t,e.e=s),l!==e.t&&g(i,e.t=l),c!==e.a&&g(n,e.a=c),u!==e.o&&g(r,e.o=u),h!==e.i&&g(o,e.i=h),v!==e.n&&g(a,e.n=v),p!==e.s&&g(d,e.s=p),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}})}d(["click"]);const mr="_overlay_v0iwf_1",br="_modal_v0iwf_11",wr="_header_v0iwf_28",yr="_formGroup_v0iwf_53",kr="_primaryButton_v0iwf_76",$r="_secondaryButton_v0iwf_99",Sr="_actions_v0iwf_113",Cr="_error_v0iwf_127";var xr=b("<button type=button>"),Lr=b("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Tr=b("<div>");function Ir(e){const{t:i}=N(),[n,o]=t(""),[a,s]=t(!1),[l,d]=t(null),c=async t=>{if(t.preventDefault(),n().trim())try{s(!0),d(null),await e.onCreate({name:n().trim()}),e.onClose()}catch(i){d(String(i))}finally{s(!1)}},p=t=>{e.isFirstOrg||t.target!==t.currentTarget||e.onClose()};return $=Lr(),S=$.firstChild,C=S.firstChild,L=C.firstChild,T=L.nextSibling,I=C.nextSibling,E=I.firstChild,P=E.firstChild,R=P.nextSibling,O=E.nextSibling,z=O.firstChild,$.$$click=p,u(L,(_=f(()=>!!e.isFirstOrg),()=>_()?i("createOrg.firstOrgTitle"):i("createOrg.title"))),u(T,(m=f(()=>!!e.isFirstOrg),()=>m()?i("createOrg.firstOrgDescription"):i("createOrg.description"))),u(S,(b=f(()=>!!l()),()=>{return b()&&(e=Tr(),u(e,l),v(()=>g(e,Cr)),e);var e}),I),I.addEventListener("submit",c),u(P,()=>i("createOrg.nameLabel")),R.$$input=e=>o(e.target.value),u(O,r(h,{get when(){return!e.isFirstOrg},get children(){var t=xr();return w(t,"click",e.onClose),u(t,()=>i("common.cancel")),v(()=>g(t,$r)),t}}),z),u(z,(k=f(()=>!!a()),()=>k()?i("common.creating"):i("createOrg.create"))),v(t=>{var r=mr,o=br,s=wr,l=yr,d=i("createOrg.namePlaceholder")||"",c=Sr,u=kr,h=!n().trim()||a(),v=e.isFirstOrg?{flex:1}:void 0;return r!==t.e&&g($,t.e=r),o!==t.t&&g(S,t.t=o),s!==t.a&&g(C,t.a=s),l!==t.o&&g(E,t.o=l),d!==t.i&&y(R,"placeholder",t.i=d),c!==t.n&&g(O,t.n=c),u!==t.s&&g(z,t.s=u),h!==t.h&&(z.disabled=t.h=h),t.r=x(z,v,t.r),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>R.value=n()),$;var _,m,b,k,$,S,C,L,T,I,E,P,R,O,z}d(["click","input"]);var Er=b("<button type=button>"),Pr=b("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Rr=b("<div>");function Or(e){const{t:i}=N(),[n,o]=t(""),[a,s]=t(!1),[l,d]=t(null),c=async t=>{if(t.preventDefault(),n().trim())try{s(!0),d(null),await e.onCreate({name:n().trim()}),e.onClose()}catch(i){d(String(i))}finally{s(!1)}},p=t=>{e.isFirstWorkspace||t.target!==t.currentTarget||e.onClose()};return $=Pr(),S=$.firstChild,C=S.firstChild,L=C.firstChild,T=L.nextSibling,I=C.nextSibling,E=I.firstChild,P=E.firstChild,R=P.nextSibling,O=E.nextSibling,z=O.firstChild,$.$$click=p,u(L,(_=f(()=>!!e.isFirstWorkspace),()=>_()?i("createWorkspace.firstWorkspaceTitle"):i("createWorkspace.title"))),u(T,(m=f(()=>!!e.isFirstWorkspace),()=>m()?i("createWorkspace.firstWorkspaceDescription"):i("createWorkspace.description"))),u(S,(b=f(()=>!!l()),()=>{return b()&&(e=Rr(),u(e,l),v(()=>g(e,Cr)),e);var e}),I),I.addEventListener("submit",c),u(P,()=>i("createWorkspace.nameLabel")),R.$$input=e=>o(e.target.value),u(O,r(h,{get when(){return!e.isFirstWorkspace},get children(){var t=Er();return w(t,"click",e.onClose),u(t,()=>i("common.cancel")),v(()=>g(t,$r)),t}}),z),u(z,(k=f(()=>!!a()),()=>k()?i("common.creating"):i("createWorkspace.create"))),v(t=>{var r=mr,o=br,s=wr,l=yr,d=i("createWorkspace.namePlaceholder")||"",c=Sr,u=kr,h=!n().trim()||a(),v=e.isFirstWorkspace?{flex:1}:void 0;return r!==t.e&&g($,t.e=r),o!==t.t&&g(S,t.t=o),s!==t.a&&g(C,t.a=s),l!==t.o&&g(E,t.o=l),d!==t.i&&y(R,"placeholder",t.i=d),c!==t.n&&g(O,t.n=c),u!==t.s&&g(z,t.s=u),h!==t.h&&(z.disabled=t.h=h),t.r=x(z,v,t.r),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>R.value=n()),$;var _,m,b,k,$,S,C,L,T,I,E,P,R,O,z}d(["click","input"]);const zr="_userMenu_o60yu_1",Wr="_avatarButton_o60yu_5",Dr="_avatarImage_o60yu_24",Nr="_initials_o60yu_30",Br="_dropdown_o60yu_37",Mr="_userInfo_o60yu_50",Ar="_userName_o60yu_57",Ur="_userEmail_o60yu_63",jr="_userRole_o60yu_68",Fr="_divider_o60yu_78",qr="_menuItem_o60yu_83";var Hr=b("<span>"),Vr=b("<div><div><span></span><span></span></div><div></div><button></button><button>"),Gr=b("<div><button>"),Yr=b("<img referrerpolicy=no-referrer>");function Kr(e){const{t:i}=N(),[n,o]=t(!1);let a;const s=()=>{const t=e.user.name||e.user.email||"",i=t.split(/[\s@]+/);return i.length>=2&&i[0]&&i[1]?((i[0][0]||"")+(i[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},l=e=>{a&&!a.contains(e.target)&&o(!1)};c(()=>{document.addEventListener("mousedown",l),C(()=>{document.removeEventListener("mousedown",l)})});const d=()=>{o(!1),e.onLogout()},p=()=>{o(!1),e.onProfile()};return _=Gr(),f=_.firstChild,"function"==typeof a?L(a,_):a=_,f.$$click=()=>o(!n()),u(f,r(h,{get when(){return(()=>{const t=e.user.oauth_identities;if(!t)return null;for(const e of t)if(e.avatar_url)return e.avatar_url;return null})()},get fallback(){return e=Hr(),u(e,s),v(()=>g(e,Nr)),e;var e},children:t=>{return i=Yr(),v(n=>{var r=t(),o=e.user.name||"User",a=Dr;return r!==n.e&&y(i,"src",n.e=r),o!==n.t&&y(i,"alt",n.t=o),a!==n.a&&g(i,n.a=a),n},{e:void 0,t:void 0,a:void 0}),i;var i}})),u(_,r(h,{get when(){return n()},get children(){var t=Vr(),n=t.firstChild,o=n.firstChild,a=o.nextSibling,s=n.nextSibling,l=s.nextSibling,c=l.nextSibling;return u(o,()=>e.user.name),u(a,()=>e.user.email),u(n,r(h,{get when(){return e.user.workspace_role},get children(){var t=Hr();return u(t,()=>e.user.workspace_role),v(()=>g(t,jr)),t}}),null),l.$$click=p,u(l,()=>i("userMenu.profile")),c.$$click=d,u(c,()=>i("userMenu.logout")),v(e=>{var i=Br,r=Mr,d=Ar,u=Ur,h=Fr,v=qr,p=qr;return i!==e.e&&g(t,e.e=i),r!==e.t&&g(n,e.t=r),d!==e.a&&g(o,e.a=d),u!==e.o&&g(a,e.o=u),h!==e.i&&g(s,e.i=h),v!==e.n&&g(l,e.n=v),p!==e.s&&g(c,e.s=p),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}}),null),v(t=>{var i=zr,n=Wr,r=e.user.name||e.user.email;return i!==t.e&&g(_,t.e=i),n!==t.t&&g(f,t.t=n),r!==t.a&&y(f,"title",t.a=r),t},{e:void 0,t:void 0,a:void 0}),_;var _,f}d(["click"]);const Jr="_orgMenu_bblo4_1",Xr="_orgButton_bblo4_5",Zr="_orgName_bblo4_23",Qr="_chevron_bblo4_31",eo="_dropdown_bblo4_36",to="_orgList_bblo4_49",io="_orgItem_bblo4_54",no="_active_bblo4_73",ro="_orgItemName_bblo4_77",oo="_checkmark_bblo4_83",ao="_divider_bblo4_88",so="_createOrgItem_bblo4_93",lo="_plusIcon_bblo4_112";var co=b("<div><div></div><div></div><button><span>+"),uo=b("<div><button><span></span><span>"),ho=b("<span>âœ“"),vo=b("<button><span>");function go(e){const{t:i}=N(),[n,o]=t(!1);let a;const s=()=>{const t=e.memberships.find(t=>t.organization_id===e.currentOrgId);return t?.organization_name||i("app.myOrg")},l=e=>{a&&!a.contains(e.target)&&o(!1)};c(()=>{document.addEventListener("mousedown",l),C(()=>{document.removeEventListener("mousedown",l)})});const d=()=>{o(!1),e.onCreateOrg()};return p=uo(),f=p.firstChild,m=f.firstChild,b=m.nextSibling,"function"==typeof a?L(a,p):a=p,f.$$click=()=>o(!n()),u(m,s),u(b,()=>n()?"â–²":"â–¼"),u(p,r(h,{get when(){return n()},get children(){var t=co(),n=t.firstChild,a=n.nextSibling,s=a.nextSibling,l=s.firstChild;return u(n,r(_,{get each(){return e.memberships},children:t=>{return i=vo(),n=i.firstChild,i.$$click=()=>{return i=t.organization_id,o(!1),void(i!==e.currentOrgId&&e.onSwitchOrg(i));var i},u(n,()=>t.organization_name||t.organization_id),u(i,r(h,{get when(){return t.organization_id===e.currentOrgId},get children(){var e=ho();return v(()=>g(e,oo)),e}}),null),v(r=>{var o=`${io} ${t.organization_id===e.currentOrgId?no:""}`,a=ro;return o!==r.e&&g(i,r.e=o),a!==r.t&&g(n,r.t=a),r},{e:void 0,t:void 0}),i;var i,n}})),s.$$click=d,u(s,()=>i("createOrg.title"),null),v(e=>{var i=eo,r=to,o=ao,d=so,c=lo;return i!==e.e&&g(t,e.e=i),r!==e.t&&g(n,e.t=r),o!==e.a&&g(a,e.a=o),d!==e.o&&g(s,e.o=d),c!==e.i&&g(l,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t}}),null),v(e=>{var t=Jr,i=Xr,n=s(),r=Zr,o=Qr;return t!==e.e&&g(p,e.e=t),i!==e.t&&g(f,e.t=i),n!==e.a&&y(f,"title",e.a=n),r!==e.o&&g(m,e.o=r),o!==e.i&&g(b,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),p;var p,f,m,b}d(["click"]);const po="_app_f5oot_13",_o="_header_f5oot_19",fo="_headerTitle_f5oot_28",mo="_userInfo_f5oot_33",bo="_container_f5oot_40",wo="_main_f5oot_46",yo="_error_f5oot_54",ko="_welcome_f5oot_62",$o="_createForm_f5oot_78",So="_editor_f5oot_86",Co="_editorHeader_f5oot_92",xo="_editorStatus_f5oot_101",Lo="_unsavedIndicator_f5oot_109",To="_savingIndicator_f5oot_114",Io="_savedIndicator_f5oot_119",Eo="_titleInput_f5oot_129",Po="_editorActions_f5oot_139",Ro="_createButton_f5oot_145",Oo="_welcomeActions_f5oot_167",zo="_nodeContent_f5oot_173",Wo="_editorContent_f5oot_180",Do="_tableView_f5oot_187",No="_tableHeader_f5oot_195",Bo="_viewToggle_f5oot_202",Mo="_active_f5oot_218",Ao="_breadcrumbs_f5oot_223",Uo="_breadcrumbItem_f5oot_233",jo="_breadcrumbSeparator_f5oot_242",Fo="_contentInput_f5oot_246",qo="_historyPanel_f5oot_262",Ho="_historyList_f5oot_276",Vo="_historyItem_f5oot_283",Go="_historyMeta_f5oot_296",Yo="_historyDate_f5oot_304",Ko="_historyHash_f5oot_308",Jo="_historyMessage_f5oot_315",Xo="_hamburger_f5oot_323",Zo="_mobileBackdrop_f5oot_334";var Qo=b("<div>"),ea=b("<nav>"),ta=b("<span>â— "),ia=b("<span>âŸ³ "),na=b("<span>âœ“ "),ra=b("<li>"),oa=b("<div><h3></h3><ul>"),aa=b("<div><textarea>"),sa=b("<div><div><h3></h3><div><button></button><button></button><button></button><button>"),la=b("<div><div><input type=text><div></div><div><button></button><button></button><button></button></div></div><div>"),da=b('<div><header><div><button aria-label="Toggle menu">â˜°</button><h1></h1></div><div></div></header><div><main>'),ca=b("<span>/"),ua=b("<span>"),ha=b("<div><h2></h2><p></p><div><input type=text><div><button></button><button>"),va=b("<li><div><span></span><span></span></div><div>");const ga=e=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");function pa(){const{t:e,locale:i,setLocale:o}=N(),[a,s]=t(null),[l,d]=t(localStorage.getItem("mddb_token")),[p,b]=T([]),[w,k]=t([]),[$,x]=t(null),[L,P]=t(!1),[R,O]=t(!1),[z,W]=t(!1),[D,B]=t(!1),[M,A]=t("table"),[U,j]=t(""),[F,q]=t(""),[H,V]=t(!1),[G,Y]=t(null),[K,J]=t(!1),[X,Z]=t("idle"),[Q,ee]=t(null),[te,ie]=t(!1),[ne,re]=t(!1),[oe,ae]=t(!1),[se,de]=t(!1),[ce,ue]=t(!1),[he,ge]=t([]),[pe,_e]=t(!1),fe=async()=>{const e=l();if(e)try{const t=ui(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),d(null),s(null),window.history.pushState(null,"","/")},me=n(()=>ui(()=>l(),fe)),be=n(()=>{const e=a()?.workspace_id;return e?me().ws(e):null}),we=(e,t)=>{localStorage.setItem("mddb_token",e),d(e),s(t)};async function ye(t,i=!0){try{V(!0);const e=await me().auth.switchOrg({org_id:t});if(!e.user)throw new Error("No user data returned");if(we(e.token,e.user),x(null),i){const t=e.user.workspace_id,i=e.user.workspace_name;if(t){const e=ga(i||"workspace");window.history.pushState(null,"",`/w/${t}+${e}/`)}else window.history.pushState(null,"","/")}await Ie()}catch(n){Y(n instanceof ei?`${e("errors.failedToSwitch")}: ${n.message}`:`${e("errors.failedToSwitch")}: ${n}`)}finally{V(!1)}}async function ke(t,i=!0){try{V(!0);const e=await me().auth.switchWorkspace({ws_id:t});if(!e.user)throw new Error("No user data returned");if(we(e.token,e.user),x(null),i){const t=e.user.workspace_id,i=e.user.workspace_name;if(t){const e=ga(i||"workspace");window.history.pushState(null,"",`/w/${t}+${e}/`)}else window.history.pushState(null,"","/")}await Ie()}catch(n){Y(n instanceof ei?`${e("errors.failedToSwitch")}: ${n.message}`:`${e("errors.failedToSwitch")}: ${n}`)}finally{V(!1)}}async function $e(e){const t=await me().organizations.createOrganization({name:e.name});await ye(t.id)}async function Se(e){const t=a();if(!t||!t.organization_id)throw new Error("No organization selected");const i=await me().org(t.organization_id).workspaces.createWorkspace({name:e.name}),n=await me().auth.getMe();s(n),await ke(i.id)}function Ce(){const e=a();if(!e?.name)return"";return e.name.split(" ")[0]||e.name}const xe=function(e,t){let i=null;return(...n)=>{null!==i&&clearTimeout(i),i=setTimeout(()=>{e(...n),i=null},t)}}(async()=>{const t=$(),i=be();if(t&&K()&&i)try{Z("saving"),await i.nodes.page.updatePage(t,{title:U(),content:F()}),J(!1),Z("saved");const e=ga(U()),n=a()?.workspace_id,r=a()?.workspace_name;if(n){const i=window.location.pathname,o=`/w/${n}+${ga(r||"workspace")}/${t}${e?"+"+e:""}`;i!==o&&window.history.replaceState(null,"",o)}setTimeout(()=>{"saved"===X()&&Z("idle")},2e3)}catch(n){Y(`${e("errors.autoSaveFailed")}: ${n}`),Z("idle")}},2e3);S(()=>{const e=a(),t=e?.settings?.language;t&&["en","fr","de","es"].includes(t)&&t!==i()&&(o(t),localStorage.setItem("mddb_locale",t))}),S(()=>{const t=a();if(t&&!se()){de(!0);const i=t.organizations||[];if(0===i.length)return void async function(){try{V(!0);const t=Ce(),i=t?e("onboarding.defaultOrgName",{name:t}):e("onboarding.defaultOrgNameFallback");await $e({name:i||"My Organization"})}catch(t){Y(`${e("errors.failedToCreate")}: ${t}`)}finally{V(!1)}}();const n=i[0];if(n){if(0===(t.workspaces?.filter(e=>e.organization_id===n.organization_id)||[]).length&&("admin"===n.role||"owner"===n.role))return void async function(){try{V(!0);const t=Ce(),i=t?e("onboarding.defaultWorkspaceName",{name:t}):e("onboarding.defaultWorkspaceNameFallback");await Se({name:i||"Main"})}catch(t){Y(`${e("errors.failedToCreate")}: ${t}`)}finally{V(!1)}}()}const r=t.workspace_id,o=t.workspace_name;if(r&&(async function(){const t=be(),i=a();if(t&&i&&("admin"===i.workspace_role||"editor"===i.workspace_role))try{V(!0);const i=await t.nodes.listNodes();if(!((i.nodes?.filter(Boolean)||[]).length>0)){const i=await t.nodes.page.createPage("0",{title:e("welcome.welcomePageTitle")});await Ie(),i?.id&&Ee(String(i.id))}}catch(n){Y(`${e("errors.failedToCreate")}: ${n}`)}finally{V(!1)}}(),"/"===window.location.pathname)){const e=ga(o||"workspace");window.history.replaceState(null,"",`/w/${r}+${e}/`)}}}),c(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),d(e),window.history.replaceState({},document.title,window.location.pathname))});let Le=!1;S(()=>{const e=l(),t=a();!e||t||Le||(Le=!0,(async()=>{try{const e=await me().auth.getMe();s(e)}catch(e){console.error("Failed to load user",e),e instanceof ei&&401===e.status&&(localStorage.removeItem("mddb_token"),d(null))}finally{Le=!1}})())});const Te=async()=>{const t=window.location.pathname;if("/privacy"===t)return W(!0),B(!1),void O(!1);if("/terms"===t)return B(!0),W(!1),void O(!1);if("/profile"===t)return O(!0),W(!1),B(!1),void P(!1);O(!1),W(!1),B(!1);const i=t.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/([a-zA-Z0-9_-]+)(?:\+.*)?$/);if(i&&i[1]&&i[2]){const t=i[1],n=i[2];if(a()&&a()?.workspace_id!==t)try{const i=a()?.workspaces?.some(e=>e.workspace_id===t);if(!i)return void Y(e("errors.noAccessToWs")||"You do not have access to this workspace");await ke(t,!1)}catch{return}return void(n!==$()&&Ee(n,!1))}const n=t.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/);if(n&&n[1]){const t=n[1];if(a()&&a()?.workspace_id!==t)try{const i=a()?.workspaces?.some(e=>e.workspace_id===t);if(!i)return void Y(e("errors.noAccessToWs")||"You do not have access to this workspace");await ke(t,!1)}catch{return}return x(null),j(""),void q("")}x(null),j(""),q("")};async function Ie(){const t=be();if(t)try{V(!0);const e=await t.nodes.listNodes(),i=e.nodes?.filter(Boolean)||[];b(E(i)),Y(null)}catch(i){Y(`${e("errors.failedToLoad")}: ${i}`)}finally{V(!1)}}async function Ee(t,i=!0){const n=be();if(n)try{V(!0),ue(!1);const e=await n.nodes.getNode(t);x(e.id),j(e.title),q(e.content||""),J(!1),Z("idle"),Y(null);const r=ga(e.title),o=a()?.workspace_id,s=a()?.workspace_name;if(o){const t=`/w/${o}+${ga(s||"workspace")}/${e.id}${r?"+"+r:""}`;i?window.location.pathname!==t&&window.history.pushState(null,"",t):window.location.pathname!==t&&window.history.replaceState(null,"",t)}if(e.has_table){const e=(await n.nodes.table.records.listRecords(t,{Offset:0,Limit:50})).records||[];k(e),_e(50===e.length)}else k([]),_e(!1)}catch(r){Y(`${e("errors.failedToLoad")}: ${r}`)}finally{V(!1)}}async function Pe(t="document",i){if(!U().trim())return void Y(e("errors.titleRequired")||"Title is required");const n=be();if(n)try{V(!0);const e=i||Q()||"0";let r;if("table"===t){r=(await n.nodes.table.createTable(e,{title:U(),properties:[]})).id}else{r=(await n.nodes.page.createPage(e,{title:U()})).id}await Ie(),Ee(String(r)),j(""),q(""),J(!1),Z("idle"),Y(null),ee(null)}catch(r){Y(`${e("errors.failedToCreate")}: ${r}`)}finally{V(!1)}}async function Re(){const t=$(),i=be();if(t&&i)try{V(!0),await i.nodes.page.updatePage(t,{title:U(),content:F()}),await Ie(),J(!1),Z("idle"),Y(null);const e=ga(U()),n=window.location.pathname,r=a()?.workspace_id,o=a()?.workspace_name;if(r){const i=`/w/${r}+${ga(o||"workspace")}/${t}${e?"+"+e:""}`;n!==i&&window.history.replaceState(null,"",i)}}catch(n){Y(`${e("errors.failedToSave")}: ${n}`)}finally{V(!1)}}async function Oe(){const t=$(),i=be();if(t&&i&&confirm(e("table.confirmDeleteRecord")||"Delete this record?"))try{V(!0),await i.nodes.deleteNode(t),await Ie(),x(null),j(""),q(""),J(!1),Z("idle"),Y(null);const e=a()?.workspace_id,n=a()?.workspace_name;if(e){const t=ga(n||"workspace");window.history.pushState(null,"",`/w/${e}+${t}/`)}else window.history.pushState(null,"","/")}catch(n){Y(`${e("errors.failedToDelete")}: ${n}`)}finally{V(!1)}}c(()=>{window.addEventListener("popstate",Te),C(()=>window.removeEventListener("popstate",Te))}),S(()=>{a()?(Ie(),Te()):Te()});const ze=e=>{Ee(e.id),ae(!1)},We=e=>{if(!e)return;const t=i=>{for(const n of i){if(n.id===e)return n;if(n.children){const e=t(n.children.filter(e=>!!e));if(e)return e}}};return t(p)};async function De(t){const i=$(),n=be();if(i&&n)try{V(!0),await n.nodes.table.records.createRecord(i,{data:t}),Ee(i),Y(null)}catch(r){Y(`${e("errors.failedToCreate")}: ${r}`)}finally{V(!1)}}async function Ne(t){const i=$(),n=be();if(i&&n&&confirm(e("table.confirmDeleteRecord")||"Delete this record?"))try{V(!0),await n.nodes.table.records.deleteRecord(i,t),Ee(i),Y(null)}catch(r){Y(`${e("errors.failedToDelete")}: ${r}`)}finally{V(!1)}}async function Be(t,i){const n=$(),r=be();if(n&&r)try{V(!0),await r.nodes.table.records.updateRecord(n,t,{data:i});const e=await r.nodes.table.records.listRecords(n,{Offset:0,Limit:50});k(e.records||[]),Y(null)}catch(o){Y(`${e("errors.failedToSave")}: ${o}`)}finally{V(!1)}}async function Me(){const t=$(),i=be();if(t&&!H()&&i)try{V(!0);const e=w().length,n=(await i.nodes.table.records.listRecords(t,{Offset:e,Limit:50})).records||[];k([...w(),...n]),_e(50===n.length)}catch(n){Y(`${e("errors.failedToLoad")}: ${n}`)}finally{V(!1)}}return[r(h,{get when(){return!z()},get fallback(){return r(Qn,{})},get children(){return r(h,{get when(){return!D()},get fallback(){return r(sr,{})},get children(){return r(h,{get when(){return a()},get fallback(){return r(Hn,{onLogin:we})},get children(){var t=da(),i=t.firstChild,n=i.firstChild,o=n.firstChild,s=o.nextSibling,d=n.nextSibling,c=i.nextSibling,k=c.firstChild;return o.$$click=()=>ae(!oe()),u(s,()=>e("app.title")),u(d,r(h,{get when(){return(a()?.organizations?.length??0)>0},get children(){return r(go,{get memberships(){return a()?.organizations||[]},get currentOrgId(){return a()?.organization_id||""},onSwitchOrg:e=>ye(e),onCreateOrg:()=>ie(!0)})}}),null),u(d,r(Kr,{get user(){return a()},onLogout:fe,onProfile:()=>{O(!0),P(!1),x(null),window.history.pushState(null,"","/profile")}}),null),u(c,r(h,{get when(){return oe()},get children(){var e=Qo();return e.$$click=()=>ae(!1),v(()=>g(e,Zo)),e}}),k),u(c,r(le,{get isOpen(){return oe()},get loading(){return H()},nodes:p,get selectedNodeId(){return $()},onToggleSettings:()=>{P(!0),x(null),ae(!1)},onCreatePage:()=>{P(!1),ee(null),Pe("document"),ae(!1)},onCreateTable:()=>{P(!1),ee(null),Pe("table"),ae(!1)},onCreateChildPage:e=>{P(!1),ee(e),Pe("document",e),ae(!1)},onCreateChildTable:e=>{P(!1),ee(e),Pe("table",e),ae(!1)},onSelectNode:ze,onCloseMobileSidebar:()=>ae(!1)}),k),u(k,r(h,{get when(){return f(()=>!(!L()||!a()))()&&l()},get children(){return r(Yi,{get user(){return a()},get token(){return l()},onClose:()=>P(!1)})}}),null),u(k,r(h,{get when(){return f(()=>!(!R()||!a()))()&&l()},get children(){return r(bn,{get user(){return a()},get token(){return l()},onClose:()=>{O(!1);const e=a()?.workspace_id,t=a()?.workspace_name;if(e){const i=ga(t||"workspace");window.history.pushState(null,"",`/${e}+${i}/`)}else window.history.pushState(null,"","/")}})}}),null),u(k,r(h,{get when(){return f(()=>!L())()&&!R()},get children(){return[r(h,{get when(){return $()},get children(){var e=ea();return u(e,r(_,{get each(){return(e=>{if(!e)return[];const t=[],i=(e,n)=>{for(const r of e){if(r.id===n)return t.push(r),!0;if(r.children&&i(r.children.filter(e=>!!e),n))return t.unshift(r),!0}return!1};return i(p,e),t})($())},children:(e,t)=>{return[r(h,{get when(){return t()>0},get children(){var e=ca();return v(()=>g(e,jo)),e}}),(i=ua(),i.$$click=()=>ze(e),u(i,()=>e.title),v(()=>g(i,Uo)),i)];var i}})),v(()=>g(e,Ao)),e}}),r(h,{get when(){return G()},fallback:null,get children(){var e=Qo();return u(e,G),v(()=>g(e,yo)),e}}),r(h,{get when(){return $()},get fallback(){return t=ha(),i=t.firstChild,n=i.nextSibling,r=n.nextSibling,o=r.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,u(i,()=>e("welcome.title")),u(n,()=>e("welcome.subtitle")),o.$$input=e=>j(e.target.value),s.$$click=()=>Pe("document"),u(s,()=>e("welcome.createPage")),l.$$click=()=>Pe("table"),u(l,()=>e("welcome.createTable")),v(i=>{var n=ko,d=$o,c=e("editor.titlePlaceholder")||"Title",u=Eo,h=Oo,v=Ro,p=Ro;return n!==i.e&&g(t,i.e=n),d!==i.t&&g(r,i.t=d),c!==i.a&&y(o,"placeholder",i.a=c),u!==i.o&&g(o,i.o=u),h!==i.i&&g(a,i.i=h),v!==i.n&&g(s,i.n=v),p!==i.s&&g(l,i.s=p),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>o.value=U()),t;var t,i,n,r,o,a,s,l},get children(){var t,i,n=la(),o=n.firstChild,s=o.firstChild,l=s.nextSibling,d=l.nextSibling,c=d.firstChild,p=c.nextSibling,k=p.nextSibling,S=o.nextSibling;return s.$$input=e=>{j(e.target.value);const t=$();var i,n;t&&(i=t,n=e.target.value,b(I(e=>{const t=e=>{for(const r of e){if(r.id===i)return r.title=n,!0;if(r.children&&t(r.children))return!0}return!1};t(e)}))),J(!0),xe()},u(l,r(h,{get when(){return K()},get children(){var t=ta();return t.firstChild,u(t,()=>e("editor.unsaved"),null),v(()=>g(t,Lo)),t}}),null),u(l,r(h,{get when(){return"saving"===X()},get children(){var t=ia();return t.firstChild,u(t,()=>e("common.saving"),null),v(()=>g(t,To)),t}}),null),u(l,r(h,{get when(){return"saved"===X()},get children(){var t=na();return t.firstChild,u(t,()=>e("common.saved"),null),v(()=>g(t,Io)),t}}),null),c.$$click=()=>{const t=$();t&&async function(t){if(ce())return void ue(!1);const i=be();if(i)try{V(!0);const e=await i.nodes.history.listNodeVersions(t,{Limit:100});ge(e.history?.filter(Boolean)||[]),ue(!0)}catch(n){Y(`${e("errors.failedToLoad")}: ${n}`)}finally{V(!1)}}(t)},u(c,(t=f(()=>!!ce()),()=>t()?e("editor.hideHistory"):e("editor.history"))),p.$$click=Re,u(p,(i=f(()=>!!H()),()=>i()?e("common.saving"):e("common.save"))),k.$$click=Oe,u(k,()=>e("common.delete")),u(n,r(h,{get when(){return ce()},get children(){var t=oa(),i=t.firstChild,n=i.nextSibling;return u(i,()=>e("editor.versionHistory")),u(n,r(_,{get each(){return he()},children:t=>{return i=va(),n=i.firstChild,r=n.firstChild,o=r.nextSibling,a=n.nextSibling,i.$$click=()=>{const i=$();i&&async function(t,i){if(!confirm(e("editor.restoreConfirm")||"This will replace current editor content. Continue?"))return;const n=be();if(n)try{V(!0);const e=await n.nodes.history.getNodeVersion(t,i);q(e.content||""),J(!0),ue(!1)}catch(r){Y(`${e("errors.failedToLoad")}: ${r}`)}finally{V(!1)}}(i,t.hash)},u(r,()=>new Date(t.timestamp).toLocaleString()),u(o,()=>t.hash.substring(0,7)),u(a,()=>t.message),v(e=>{var t=Vo,s=Go,l=Yo,d=Ko,c=Jo;return t!==e.e&&g(i,e.e=t),s!==e.t&&g(n,e.t=s),l!==e.a&&g(r,e.a=l),d!==e.o&&g(o,e.o=d),c!==e.i&&g(a,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),i;var i,n,r,o,a}}),null),u(n,r(h,{get when(){return 0===he().length},get children(){var t=ra();return u(t,()=>e("editor.noHistory")),v(()=>g(t,Vo)),t}}),null),v(e=>{var i=qo,r=Ho;return i!==e.e&&g(t,e.e=i),r!==e.t&&g(n,e.t=r),e},{e:void 0,t:void 0}),t}}),S),u(S,r(h,{get when(){return We($())?.has_page},get children(){var t=aa(),i=t.firstChild;return i.$$input=e=>{q(e.target.value),J(!0),xe()},u(t,r(ve,{get content(){return F()},get orgId(){return a()?.organization_id}}),null),v(n=>{var r=Wo,o=e("editor.contentPlaceholder")||"Write your content in markdown...",a=Fo;return r!==n.e&&g(t,n.e=r),o!==n.t&&y(i,"placeholder",n.t=o),a!==n.a&&g(i,n.a=a),n},{e:void 0,t:void 0,a:void 0}),v(()=>i.value=F()),t}}),null),u(S,r(h,{get when(){return We($())?.has_table},get children(){var t=sa(),i=t.firstChild,n=i.firstChild,o=n.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.nextSibling,d=l.nextSibling;return u(n,()=>e("table.records")),a.$$click=()=>A("table"),u(a,()=>e("table.table")),s.$$click=()=>A("grid"),u(s,()=>e("table.grid")),l.$$click=()=>A("gallery"),u(l,()=>e("table.gallery")),d.$$click=()=>A("board"),u(d,()=>e("table.board")),u(t,r(h,{get when(){return"table"===M()},get children(){return r(tt,{get tableId(){return $()||""},get columns(){return We($())?.properties||[]},get records(){return w()},onAddRecord:De,onUpdateRecord:Be,onDeleteRecord:Ne,onLoadMore:Me,get hasMore(){return pe()}})}}),null),u(t,r(h,{get when(){return"grid"===M()},get children(){return r(gt,{get records(){return w()},get columns(){return We($())?.properties||[]},onUpdateRecord:Be,onDeleteRecord:Ne})}}),null),u(t,r(h,{get when(){return"gallery"===M()},get children(){return r(Rt,{get records(){return w()},get columns(){return We($())?.properties||[]},onUpdateRecord:Be,onDeleteRecord:Ne})}}),null),u(t,r(h,{get when(){return"board"===M()},get children(){return r(Qt,{get records(){return w()},get columns(){return We($())?.properties||[]},onUpdateRecord:Be,onDeleteRecord:Ne})}}),null),v(e=>{var n=Do,r=No,c=Bo,u={[`${Mo}`]:"table"===M()},h={[`${Mo}`]:"grid"===M()},v={[`${Mo}`]:"gallery"===M()},p={[`${Mo}`]:"board"===M()};return n!==e.e&&g(t,e.e=n),r!==e.t&&g(i,e.t=r),c!==e.a&&g(o,e.a=c),e.o=m(a,u,e.o),e.i=m(s,h,e.i),e.n=m(l,v,e.n),e.s=m(d,p,e.s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}}),null),v(t=>{var i=So,r=Co,a=e("editor.titlePlaceholder")||"Title",u=Eo,h=xo,v=Po,_=H(),f=H(),m=H(),b=zo;return i!==t.e&&g(n,t.e=i),r!==t.t&&g(o,t.t=r),a!==t.a&&y(s,"placeholder",t.a=a),u!==t.o&&g(s,t.o=u),h!==t.i&&g(l,t.i=h),v!==t.n&&g(d,t.n=v),_!==t.s&&(c.disabled=t.s=_),f!==t.h&&(p.disabled=t.h=f),m!==t.r&&(k.disabled=t.r=m),b!==t.d&&g(S,t.d=b),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),v(()=>s.value=U()),n}})]}}),null),v(e=>{var r=po,a=_o,s=fo,l=Xo,u=mo,h=bo,v=wo;return r!==e.e&&g(t,e.e=r),a!==e.t&&g(i,e.t=a),s!==e.a&&g(n,e.a=s),l!==e.o&&g(o,e.o=l),u!==e.i&&g(d,e.i=u),h!==e.n&&g(c,e.n=h),v!==e.s&&g(k,e.s=v),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}})}})}}),r(fr,{}),r(h,{get when(){return te()},get children(){return r(Ir,{onClose:()=>ie(!1),onCreate:$e})}}),r(h,{get when(){return ne()},get children(){return r(Or,{onClose:()=>re(!1),onCreate:Se,isFirstWorkspace:!0})}})]}d(["click","input"]);const _a=localStorage.getItem("mddb_locale"),fa=_a&&["en","fr","de","es"].includes(_a)?_a:"en",ma=document.getElementById("app");ma&&P(()=>r(D,{initialLocale:fa,get children(){return r(pa,{})}}),ma);
