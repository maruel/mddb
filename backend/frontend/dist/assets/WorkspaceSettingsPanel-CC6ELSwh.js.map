{"version":3,"file":"WorkspaceSettingsPanel-CC6ELSwh.js","sources":["../../../../frontend/src/components/settings/WorkspaceSettingsPanel.tsx"],"sourcesContent":["// Workspace settings panel for managing workspace members, settings, and git sync.\n\nimport { createSignal, createEffect, Show } from 'solid-js';\nimport { useNavigate, useLocation } from '@solidjs/router';\nimport { useAuth } from '../../contexts';\nimport { useI18n } from '../../i18n';\nimport {\n  WSRoleAdmin,\n  type UserResponse,\n  type WSInvitationResponse,\n  type WorkspaceRole,\n  type GitRemoteResponse,\n} from '@sdk/types.gen';\nimport MembersTable from './MembersTable';\nimport InviteForm from './InviteForm';\nimport styles from './WorkspaceSettingsPanel.module.css';\n\ninterface WorkspaceSettingsPanelProps {\n  wsId: string;\n  section?: string;\n  onNavigateToOrgSettings: (orgId: string, orgName: string) => void;\n}\n\ntype Tab = 'members' | 'settings' | 'sync';\n\nexport default function WorkspaceSettingsPanel(props: WorkspaceSettingsPanelProps) {\n  const { t } = useI18n();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, orgApi, wsApi } = useAuth();\n\n  // Determine initial tab from section prop\n  const getInitialTab = (): Tab => {\n    if (props.section === 'settings') return 'settings';\n    if (props.section === 'sync') return 'sync';\n    return 'members';\n  };\n\n  const [activeTab, setActiveTab] = createSignal<Tab>(getInitialTab());\n  const [members, setMembers] = createSignal<UserResponse[]>([]);\n  const [invitations, setInvitations] = createSignal<WSInvitationResponse[]>([]);\n\n  // Git Remote state\n  const [gitRemote, setGitRemote] = createSignal<GitRemoteResponse | null>(null);\n  const [newRemoteURL, setNewRemoteURL] = createSignal('');\n  const [newRemoteToken, setNewRemoteToken] = createSignal('');\n\n  // Workspace Settings states\n  const [wsName, setWsName] = createSignal('');\n  const [originalWsName, setOriginalWsName] = createSignal('');\n\n  // Workspace Quotas\n  const [maxPages, setMaxPages] = createSignal(0);\n  const [maxStorageBytes, setMaxStorageBytes] = createSignal(0);\n  const [maxRecordsPerTable, setMaxRecordsPerTable] = createSignal(0);\n  const [maxAssetSizeBytes, setMaxAssetSizeBytes] = createSignal(0);\n  const [maxTablesPerWorkspace, setMaxTablesPerWorkspace] = createSignal(0);\n  const [maxColumnsPerTable, setMaxColumnsPerTable] = createSignal(0);\n\n  const [loading, setLoading] = createSignal(false);\n  const [error, setError] = createSignal<string | null>(null);\n  const [success, setSuccess] = createSignal<string | null>(null);\n\n  const isAdmin = () => user()?.workspace_role === WSRoleAdmin;\n\n  // Update URL hash when tab changes\n  const handleTabChange = (tab: Tab) => {\n    setActiveTab(tab);\n    const newHash = tab === 'members' ? '' : `#${tab}`;\n    navigate(location.pathname + newHash, { replace: true });\n  };\n\n  const loadData = async () => {\n    const org = orgApi();\n    if (!org) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n\n      const ws = wsApi();\n      if (activeTab() === 'members' && isAdmin()) {\n        const [membersData, invsData] = await Promise.all([\n          org.users.listUsers(),\n          ws ? ws.invitations.listWSInvitations() : Promise.resolve({ invitations: [] }),\n        ]);\n        setMembers(membersData.users?.filter((u): u is UserResponse => !!u) || []);\n        setInvitations(invsData.invitations?.filter((i): i is WSInvitationResponse => !!i) || []);\n      }\n\n      if (activeTab() === 'settings' && ws) {\n        const wsData = await ws.workspaces.getWorkspace();\n        setWsName(wsData.name);\n        setOriginalWsName(wsData.name);\n        // Load quotas\n        setMaxPages(wsData.quotas.max_pages);\n        setMaxStorageBytes(wsData.quotas.max_storage_bytes);\n        setMaxRecordsPerTable(wsData.quotas.max_records_per_table);\n        setMaxAssetSizeBytes(wsData.quotas.max_asset_size_bytes);\n        setMaxTablesPerWorkspace(wsData.quotas.max_tables_per_workspace);\n        setMaxColumnsPerTable(wsData.quotas.max_columns_per_table);\n      }\n\n      if (activeTab() === 'sync' && isAdmin() && ws) {\n        try {\n          const remoteData = await ws.settings.git.getGitRemote();\n          setGitRemote(remoteData);\n        } catch {\n          setGitRemote(null);\n        }\n      }\n    } catch (err) {\n      setError(`${t('errors.failedToLoad')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  createEffect(() => {\n    loadData();\n  });\n\n  // Update tab when section prop changes\n  createEffect(() => {\n    const section = props.section;\n    if (section === 'settings') setActiveTab('settings');\n    else if (section === 'sync') setActiveTab('sync');\n    else if (section === 'members' || !section) setActiveTab('members');\n  });\n\n  const handleInvite = async (email: string, role: string) => {\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      await ws.invitations.createWSInvitation({ email, role: role as 'admin' | 'editor' | 'viewer' });\n      setSuccess(t('success.invitationSent') || 'Invitation sent successfully');\n      loadData();\n    } catch (err) {\n      setError(`${t('errors.failedToInvite')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateRole = async (userId: string, role: string) => {\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      await ws.users.updateWSMemberRole({ user_id: userId, role: role as WorkspaceRole });\n      setSuccess(t('success.roleUpdated') || 'Role updated');\n      loadData();\n    } catch (err) {\n      setError(`${t('errors.failedToUpdateRole')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const saveWorkspaceSettings = async (e: Event) => {\n    e.preventDefault();\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      setSuccess(null);\n\n      // Update name if changed\n      if (wsName() !== originalWsName() && wsName().trim()) {\n        await ws.workspaces.updateWorkspace({ name: wsName().trim() });\n        setOriginalWsName(wsName().trim());\n      }\n\n      // Update quotas\n      await ws.workspaces.updateWorkspace({\n        quotas: {\n          max_pages: maxPages(),\n          max_storage_bytes: maxStorageBytes(),\n          max_records_per_table: maxRecordsPerTable(),\n          max_asset_size_bytes: maxAssetSizeBytes(),\n          max_tables_per_workspace: maxTablesPerWorkspace(),\n          max_columns_per_table: maxColumnsPerTable(),\n        },\n      });\n\n      setSuccess(t('success.workspaceSettingsSaved') || 'Workspace settings saved successfully');\n    } catch (err) {\n      setError(`${t('errors.failedToSave')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddOrUpdateRemote = async (e: Event) => {\n    e.preventDefault();\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      const remoteData = await ws.settings.git.updateGitRemote({\n        url: newRemoteURL(),\n        token: newRemoteToken(),\n        type: 'custom',\n        auth_type: newRemoteToken() ? 'token' : 'none',\n      });\n      setGitRemote(remoteData);\n      setSuccess(t('success.remoteAdded') || 'Git remote configured');\n      setNewRemoteURL('');\n      setNewRemoteToken('');\n    } catch (err) {\n      setError(`${t('errors.failedToAddRemote')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePush = async () => {\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      setSuccess(null);\n      await ws.settings.git.pushGit();\n      setSuccess(t('success.pushSuccessful') || 'Push successful');\n      loadData();\n    } catch (err) {\n      setError(`${t('errors.pushFailed')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteRemote = async () => {\n    if (!confirm(t('settings.confirmRemoveRemote') || 'Are you sure you want to remove this remote?')) return;\n\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      await ws.settings.git.deleteGitRemote();\n      setGitRemote(null);\n      setSuccess(t('success.remoteRemoved') || 'Remote removed');\n    } catch (err) {\n      setError(`${t('errors.failedToRemoveRemote')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const wsRoleOptions = [\n    { value: 'admin', label: t('settings.roleAdmin') },\n    { value: 'editor', label: t('settings.roleEditor') },\n    { value: 'viewer', label: t('settings.roleViewer') },\n  ];\n\n  const pendingInvitations = () =>\n    invitations().map((inv) => ({\n      email: inv.email,\n      role: inv.role,\n      created: inv.created,\n    }));\n\n  return (\n    <div class={styles.panel}>\n      <div class={styles.tabs}>\n        <button class={activeTab() === 'members' ? styles.activeTab : ''} onClick={() => handleTabChange('members')}>\n          {t('settings.members')}\n        </button>\n        <button class={activeTab() === 'settings' ? styles.activeTab : ''} onClick={() => handleTabChange('settings')}>\n          {t('settings.workspace')}\n        </button>\n        <Show when={isAdmin()}>\n          <button class={activeTab() === 'sync' ? styles.activeTab : ''} onClick={() => handleTabChange('sync')}>\n            {t('settings.gitSync')}\n          </button>\n        </Show>\n      </div>\n\n      <Show when={error()}>\n        <div class={styles.error}>{error()}</div>\n      </Show>\n      <Show when={success()}>\n        <div class={styles.success}>{success()}</div>\n      </Show>\n\n      <Show when={activeTab() === 'members'}>\n        <section class={styles.section}>\n          <h3>{t('settings.members')}</h3>\n          <Show when={isAdmin()} fallback={<p>{t('settings.adminOnlyMembers')}</p>}>\n            <MembersTable\n              members={members()}\n              currentUserId={user()?.id || ''}\n              roleOptions={wsRoleOptions}\n              roleField=\"workspace_role\"\n              onUpdateRole={handleUpdateRole}\n              loading={loading()}\n            />\n            <InviteForm\n              roleOptions={wsRoleOptions}\n              defaultRole=\"viewer\"\n              pendingInvitations={pendingInvitations()}\n              onInvite={handleInvite}\n              loading={loading()}\n            />\n          </Show>\n        </section>\n      </Show>\n\n      <Show when={activeTab() === 'settings'}>\n        <section class={styles.section}>\n          <h3>{t('settings.workspaceSettings')}</h3>\n          <Show when={isAdmin()} fallback={<p>{t('settings.adminOnlyWorkspace')}</p>}>\n            <form onSubmit={saveWorkspaceSettings} class={styles.settingsForm}>\n              <div class={styles.formItem}>\n                <label>{t('settings.workspaceName')}</label>\n                <input type=\"text\" value={wsName()} onInput={(e) => setWsName(e.target.value)} required />\n              </div>\n\n              <h4>{t('settings.workspaceQuotas')}</h4>\n              <div class={styles.formGrid}>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxPages')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxPages()}\n                    onInput={(e) => setMaxPages(parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxStorageBytes')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxStorageBytes()}\n                    onInput={(e) => setMaxStorageBytes(parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxRecordsPerTable')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxRecordsPerTable()}\n                    onInput={(e) => setMaxRecordsPerTable(parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxAssetSizeBytes')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxAssetSizeBytes()}\n                    onInput={(e) => setMaxAssetSizeBytes(parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxTablesPerWorkspace')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxTablesPerWorkspace()}\n                    onInput={(e) => setMaxTablesPerWorkspace(parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxColumnsPerTable')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxColumnsPerTable()}\n                    onInput={(e) => setMaxColumnsPerTable(parseInt(e.target.value) || 0)}\n                    min=\"0\"\n                  />\n                </div>\n              </div>\n\n              <button type=\"submit\" class={styles.saveButton} disabled={loading()}>\n                {t('settings.saveWorkspaceSettings')}\n              </button>\n            </form>\n          </Show>\n\n          <div class={styles.orgLink}>\n            <p>{t('settings.orgSettingsHint')}</p>\n            <button\n              onClick={() => {\n                const u = user();\n                const orgId = u?.organization_id;\n                const orgMembership = u?.organizations?.find((m) => m.organization_id === orgId);\n                const orgName = orgMembership?.organization_name || '';\n                if (orgId) {\n                  props.onNavigateToOrgSettings(orgId, orgName);\n                }\n              }}\n              class={styles.linkButton}\n            >\n              {t('settings.openOrgSettings')} â†’\n            </button>\n          </div>\n        </section>\n      </Show>\n\n      <Show when={activeTab() === 'sync'}>\n        <section class={styles.section}>\n          <h3>{t('settings.gitSynchronization')}</h3>\n          <p class={styles.hint}>{t('settings.gitSyncHint')}</p>\n\n          <Show when={gitRemote()}>\n            {(remote) => {\n              const lastSync = remote().last_sync;\n              return (\n                <table class={styles.table}>\n                  <thead>\n                    <tr>\n                      <th>{t('settings.urlColumn')}</th>\n                      <th>{t('settings.lastSyncColumn')}</th>\n                      <th>{t('common.actions')}</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td>{remote().url}</td>\n                      <td>{lastSync ? new Date(lastSync).toLocaleString() : t('settings.never')}</td>\n                      <td class={styles.actions}>\n                        <button onClick={handlePush} disabled={loading()} class={styles.smallButton}>\n                          {t('common.push')}\n                        </button>\n                        <button onClick={handleDeleteRemote} disabled={loading()} class={styles.deleteButtonSmall}>\n                          {t('common.remove')}\n                        </button>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              );\n            }}\n          </Show>\n\n          <Show when={!gitRemote()}>\n            <div class={styles.addRemoteSection}>\n              <h4>{t('settings.addNewRemote')}</h4>\n              <form onSubmit={handleAddOrUpdateRemote} class={styles.settingsForm}>\n                <div class={styles.formItem}>\n                  <label>{t('settings.repositoryUrl')}</label>\n                  <input\n                    type=\"url\"\n                    value={newRemoteURL()}\n                    onInput={(e) => setNewRemoteURL(e.target.value)}\n                    placeholder={t('settings.repositoryUrlPlaceholder') || 'https://github.com/user/repo.git'}\n                    required\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.personalAccessToken')}</label>\n                  <input\n                    type=\"password\"\n                    value={newRemoteToken()}\n                    onInput={(e) => setNewRemoteToken(e.target.value)}\n                    placeholder={t('settings.tokenPlaceholder') || 'ghp_...'}\n                  />\n                  <p class={styles.hint}>{t('settings.tokenHint')}</p>\n                </div>\n                <button type=\"submit\" class={styles.saveButton} disabled={loading()}>\n                  {t('settings.addRemote')}\n                </button>\n              </form>\n            </div>\n          </Show>\n        </section>\n      </Show>\n    </div>\n  );\n}\n"],"names":["WorkspaceSettingsPanel","props","t","useI18n","navigate","useNavigate","location","useLocation","user","orgApi","wsApi","useAuth","activeTab","setActiveTab","createSignal","section","members","setMembers","invitations","setInvitations","gitRemote","setGitRemote","newRemoteURL","setNewRemoteURL","newRemoteToken","setNewRemoteToken","wsName","setWsName","originalWsName","setOriginalWsName","maxPages","setMaxPages","maxStorageBytes","setMaxStorageBytes","maxRecordsPerTable","setMaxRecordsPerTable","maxAssetSizeBytes","setMaxAssetSizeBytes","maxTablesPerWorkspace","setMaxTablesPerWorkspace","maxColumnsPerTable","setMaxColumnsPerTable","loading","setLoading","error","setError","success","setSuccess","isAdmin","workspace_role","WSRoleAdmin","handleTabChange","tab","newHash","pathname","replace","loadData","async","org","ws","membersData","invsData","Promise","all","users","listUsers","listWSInvitations","resolve","filter","u","i","wsData","workspaces","getWorkspace","name","quotas","max_pages","max_storage_bytes","max_records_per_table","max_asset_size_bytes","max_tables_per_workspace","max_columns_per_table","remoteData","settings","git","getGitRemote","err","createEffect","handleInvite","email","role","createWSInvitation","handleUpdateRole","userId","updateWSMemberRole","user_id","saveWorkspaceSettings","e","preventDefault","trim","updateWorkspace","handleAddOrUpdateRemote","updateGitRemote","url","token","type","auth_type","handlePush","pushGit","handleDeleteRemote","confirm","deleteGitRemote","wsRoleOptions","value","label","_el$","_tmpl$8","_el$2","firstChild","_el$3","_el$4","nextSibling","$$click","_$insert","_$createComponent","Show","when","children","_el$5","_tmpl$","_$effect","_$className","styles","_el$6","_tmpl$2","_el$7","_el$8","_tmpl$3","_el$9","fallback","_el$53","_tmpl$9","MembersTable","currentUserId","id","roleOptions","roleField","onUpdateRole","InviteForm","defaultRole","pendingInvitations","map","inv","created","onInvite","_el$0","_tmpl$5","_el$1","_el$35","_el$36","_el$37","_el$38","_el$54","_el$10","_tmpl$4","_el$11","_el$12","_el$13","_el$14","_el$15","_el$16","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","_el$23","_el$24","_el$25","_el$26","_el$27","_el$28","_el$29","_el$30","_el$31","_el$32","_el$33","_el$34","addEventListener","$$input","target","parseInt","_p$","_v$","_v$2","_v$3","_v$4","_v$5","_v$6","_v$7","_v$8","_v$9","_v$0","_v$1","a","o","n","s","h","r","d","l","disabled","undefined","orgId","organization_id","orgMembership","organizations","find","m","orgName","organization_name","onNavigateToOrgSettings","_v$10","_v$11","_v$12","_el$39","_tmpl$7","_el$40","_el$41","remote","lastSync","last_sync","_el$55","_tmpl$0","_el$56","_el$58","_el$59","_el$60","_el$63","_el$64","_el$65","_el$66","_el$67","Date","toLocaleString","_v$28","_v$29","_v$30","_v$31","_v$32","_v$33","_el$42","_tmpl$6","_el$43","_el$44","_el$45","_el$46","_el$47","_el$48","_el$49","_el$50","_el$51","_el$52","_v$13","_v$14","_v$15","_v$16","_v$17","_v$18","_v$19","_v$20","_v$21","_$setAttribute","_v$22","_v$23","_v$24","_v$25","_v$26","_v$27","_$delegateEvents"],"mappings":"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"}