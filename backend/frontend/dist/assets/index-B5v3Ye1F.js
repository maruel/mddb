const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProfileSettings-d713nBbG.js","assets/vendor-cxaUT27-.js","assets/OAuthIcons-DWJpMu2F.js","assets/editor-vendor-5UabxMD0.js","assets/ProfileSettings-LfhlssOg.css","assets/WorkspaceSettingsPanel-Cj4L0DBW.js","assets/InviteForm-CDBr-8PP.js","assets/InviteForm-DFlHotPL.css","assets/WorkspaceSettingsPanel-OEEG3RNx.css","assets/OrgSettingsPanel-BJzQ9rNF.js","assets/OrgSettingsPanel-DAbswSRk.css","assets/ServerSettingsPanel-CuNdLLgl.js","assets/ServerSettingsPanel-CwAILPxT.css","assets/Editor-vtYC6vkG.js","assets/Editor-C3i5BWlf.css","assets/Auth-CmLSGrZy.js","assets/Auth-D9cCVgJl.css","assets/Privacy-BD64DTD1.js","assets/Privacy-COJkLvXG.css","assets/Terms-D7Pv_YDh.js","assets/Onboarding-mWmeZIy8.js"])))=>i.map(i=>d[i]);
import{u as e,c as t,a as n,d as r,e as i,t as o,r as a,f as s,g as l,o as d,h as c,i as u,j as p,l as g,m as h,p as v,n as _,q as f,s as m,E as w,v as b,w as k,x as y,y as $,S as C,z as x,A as S,B as I,F as E,C as N,D,G as T,N as L,H as R,I as P,J as A,K as O,L as M,P as W,M as V,Q as U,T as z,U as B,V as H,W as F,X as j,Y as q,Z as G,_ as K,$ as J,a0 as X,a1 as Y,a2 as Z,a3 as Q,a4 as ee,a5 as te,a6 as ne,a7 as re,a8 as ie,a9 as oe,aa as ae,ab as se,ac as le,ad as de,ae as ce}from"./vendor-cxaUT27-.js";import{M as ue}from"./editor-vendor-5UabxMD0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const pe={},ge=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=n?.nonce||n?.getAttribute("nonce");r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in pe)return;pe[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,i&&r.setAttribute("nonce",i),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};async function he(e){const t=await((e,t,n)=>{const r=e[t];return r?"function"==typeof r?r():Promise.resolve(r):new Promise((e,r)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>ge(()=>import("./de-OKXjRURK.js"),[]),"./dictionaries/en.ts":()=>ge(()=>import("./en-C3TpOtlB.js"),[]),"./dictionaries/es.ts":()=>ge(()=>import("./es-BM_5c8P_.js"),[]),"./dictionaries/fr.ts":()=>ge(()=>import("./fr-Cgyc9BlC.js"),[])}),`./dictionaries/${e}.ts`,3);return s(t.dict)}const ve=i(),_e=e=>{const[i,s]=t(e.initialLocale||"en"),[l]=n(i,he),d=o(l,a),c=(e,...t)=>(l(),d(e,...t)),u={locale:i,setLocale:s,t:c,translateError:e=>{const t=`errors.${e}`,n=c(t);return n&&n!==t?n:c("errors.unknown")||"An error occurred"},ready:()=>"ready"===l.state};return r(ve.Provider,{value:u,get children(){return e.children}})};function fe(){const t=e(ve);if(!t)throw new Error("useI18n must be used within I18nProvider");return t}class me extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function we(e,t){const n=await e(t);if(!n.ok){const e=await n.json();throw new me(n.status,e)}return n.json()}async function be(e,t,n){const r={method:"POST"};n&&(r.headers={"Content-Type":"application/json"},r.body=JSON.stringify(n));const i=await e(t,r);if(!i.ok){const e=await i.json();throw new me(i.status,e)}return i.json()}function ke(e){return{admin:{getServerDetail:()=>we(e,"/api/v1/admin/server")},auth:{email:{changeEmail:t=>be(e,"/api/v1/auth/email",t),sendVerificationEmail:()=>be(e,"/api/v1/auth/email/send-verification")},invitations:{acceptOrgInvitation:t=>be(e,"/api/v1/auth/invitations/org/accept",t),acceptWSInvitation:t=>be(e,"/api/v1/auth/invitations/ws/accept",t)},sessions:{listSessions:()=>we(e,"/api/v1/auth/sessions"),revokeAllSessions:()=>be(e,"/api/v1/auth/sessions/revoke-all"),revokeSession:t=>be(e,"/api/v1/auth/sessions/revoke",t)},getMe:()=>we(e,"/api/v1/auth/me"),listProviders:()=>we(e,"/api/v1/auth/providers"),login:t=>be(e,"/api/v1/auth/login",t),logout:()=>be(e,"/api/v1/auth/logout"),register:t=>be(e,"/api/v1/auth/register",t),setPassword:t=>be(e,"/api/v1/auth/password",t),switchWorkspace:t=>be(e,"/api/v1/auth/switch-workspace",t),updateUserSettings:t=>be(e,"/api/v1/auth/settings",t)},githubApp:{isGitHubAppAvailable:()=>we(e,"/api/v1/github-app/available"),listGitHubAppInstallations:()=>we(e,"/api/v1/github-app/installations"),listGitHubAppRepos:t=>be(e,"/api/v1/github-app/repos",t)},notifications:{preferences:{getNotificationPrefs:()=>we(e,"/api/v1/notifications/preferences"),updateNotificationPrefs:t=>be(e,"/api/v1/notifications/preferences",t)},readAll:{markAllNotificationsRead:()=>be(e,"/api/v1/notifications/read-all")},vapidKey:{getVAPIDPublicKey:()=>we(e,"/api/v1/notifications/vapid-key")},deleteNotification:t=>be(e,`/api/v1/notifications/${t}/delete`),getUnreadCount:()=>we(e,"/api/v1/notifications/unread-count"),async listNotifications(t){const n=new URLSearchParams;t.Limit&&n.set("limit",String(t.Limit)),t.Offset&&n.set("offset",String(t.Offset)),t.UnreadOnly&&n.set("unread_only",String(t.UnreadOnly));const r="/api/v1/notifications"+(n.toString()?`?${n}`:"");return we(e,r)},markNotificationRead:t=>be(e,`/api/v1/notifications/${t}/read`),subscribePush:t=>be(e,"/api/v1/notifications/subscribe",t),unsubscribePush:t=>be(e,"/api/v1/notifications/unsubscribe",t)},organizations:{createOrganization:t=>be(e,"/api/v1/organizations",t)},server:{getConfig:()=>we(e,"/api/v1/server/config"),updateConfig:t=>be(e,"/api/v1/server/config",t)},getHealth:()=>we(e,"/api/v1/health"),org:t=>({invitations:{createOrgInvitation:n=>be(e,`/api/v1/organizations/${t}/invitations`,n),listOrgInvitations:()=>we(e,`/api/v1/organizations/${t}/invitations`)},notion:{getStatus:n=>we(e,`/api/v1/organizations/${t}/notion/import/${n}/status`),startImport:n=>be(e,`/api/v1/organizations/${t}/notion/import`,n)},organizations:{getOrganization:()=>we(e,`/api/v1/organizations/${t}`),updateOrganization:n=>be(e,`/api/v1/organizations/${t}`,n)},settings:{updateOrgPreferences:n=>be(e,`/api/v1/organizations/${t}/settings`,n)},users:{listUsers:()=>we(e,`/api/v1/organizations/${t}/users`),removeOrgMember:n=>be(e,`/api/v1/organizations/${t}/users/remove`,n),updateOrgMemberRole:n=>be(e,`/api/v1/organizations/${t}/users/role`,n)},workspaces:{createWorkspace:n=>be(e,`/api/v1/organizations/${t}/workspaces`,n)}}),ws:t=>({invitations:{createWSInvitation:n=>be(e,`/api/v1/workspaces/${t}/invitations`,n),listWSInvitations:()=>we(e,`/api/v1/workspaces/${t}/invitations`)},nodes:{assets:{deleteNodeAsset:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/assets/${r}/delete`),listNodeAssets:n=>we(e,`/api/v1/workspaces/${t}/nodes/${n}/assets`)},history:{getNodeVersion:(n,r)=>we(e,`/api/v1/workspaces/${t}/nodes/${n}/history/${r}`),async listNodeVersions(n,r){const i=new URLSearchParams;r.Limit&&i.set("limit",String(r.Limit));const o=`/api/v1/workspaces/${t}/nodes/${n}/history`+(i.toString()?`?${i}`:"");return we(e,o)}},page:{createPage:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/page/create`,r),deletePage:n=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/page/delete`),getPage:n=>we(e,`/api/v1/workspaces/${t}/nodes/${n}/page`),updatePage:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/page`,r)},table:{records:{createRecord:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/table/records/create`,r),deleteRecord:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/table/records/${r}/delete`),getRecord:(n,r)=>we(e,`/api/v1/workspaces/${t}/nodes/${n}/table/records/${r}`),async listRecords(n,r){const i=new URLSearchParams;r.ViewID&&i.set("view_id",r.ViewID),r.Filters&&i.set("filters",r.Filters),r.Sorts&&i.set("sorts",r.Sorts),r.Offset&&i.set("offset",String(r.Offset)),r.Limit&&i.set("limit",String(r.Limit));const o=`/api/v1/workspaces/${t}/nodes/${n}/table/records`+(i.toString()?`?${i}`:"");return we(e,o)},updateRecord:(n,r,i)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/table/records/${r}`,i)},createTable:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/table/create`,r),deleteTable:n=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/table/delete`),getTable:n=>we(e,`/api/v1/workspaces/${t}/nodes/${n}/table`),updateTable:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/table`,r)},views:{createView:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/views/create`,r),deleteView:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/views/${r}/delete`),updateView:(n,r,i)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/views/${r}`,i)},deleteNode:n=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/delete`),getNode:n=>we(e,`/api/v1/workspaces/${t}/nodes/${n}`),async getNodeTitles(n){const r=new URLSearchParams;n.IDs&&r.set("ids",n.IDs);const i=`/api/v1/workspaces/${t}/nodes/titles`+(r.toString()?`?${r}`:"");return we(e,i)},listNodeChildren:n=>we(e,`/api/v1/workspaces/${t}/nodes/${n}/children`),moveNode:(n,r)=>be(e,`/api/v1/workspaces/${t}/nodes/${n}/move`,r)},notion:{cancelImport:()=>be(e,`/api/v1/workspaces/${t}/notion/import/cancel`)},settings:{git:{deleteGitRemote:()=>be(e,`/api/v1/workspaces/${t}/settings/git/delete`),getGitRemote:()=>we(e,`/api/v1/workspaces/${t}/settings/git`),getSyncStatus:()=>we(e,`/api/v1/workspaces/${t}/settings/git/status`),pullGit:()=>be(e,`/api/v1/workspaces/${t}/settings/git/pull`),pushGit:()=>be(e,`/api/v1/workspaces/${t}/settings/git/push`),setupGitHubAppRemote:n=>be(e,`/api/v1/workspaces/${t}/settings/git/github-app`,n),updateGitRemote:n=>be(e,`/api/v1/workspaces/${t}/settings/git`,n)},updateWSMembershipSettings:n=>be(e,`/api/v1/workspaces/${t}/settings/membership`,n)},users:{updateWSMemberRole:n=>be(e,`/api/v1/workspaces/${t}/users/role`,n)},workspaces:{getWorkspace:()=>we(e,`/api/v1/workspaces/${t}`),updateWorkspace:n=>be(e,`/api/v1/workspaces/${t}`,n)},search:n=>be(e,`/api/v1/workspaces/${t}/search`,n)})}}const ye=3,$e=1e3,Ce=3e4;function xe(e){return 429===e||e>=500&&e<600}function Se(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const n=Date.parse(e);return isNaN(n)?null:Math.max(0,n-Date.now())}function Ie(e,t){if(null!==t)return Math.min(t,Ce);const n=$e*Math.pow(2,e);return Math.min(n,Ce)}function Ee(e,t){return n=async(n,r)=>{const i=e(),o={...r?.headers};i&&(o.Authorization=`Bearer ${i}`);const a=await fetch(n,{...r,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let r=0;for(;;){const i=await n(e,t);if(!xe(i.status)||r>=ye)return i;const o=Ie(r,Se(i.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),r++}};var n}function Ne(e,t){return ke(Ee(e,t))}const De=i(),Te=e=>{const[n,i]=t(null),[o,a]=t(localStorage.getItem("mddb_token")),[s,p]=t(!1),g=async()=>{const e=o();if(e)try{const t=Ne(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),a(null),i(null)},h=l(()=>Ne(()=>o(),g)),v=l(()=>{const e=n()?.workspace_id;return e?h().ws(e):null}),_=l(()=>{const e=n()?.organization_id;return e?h().org(e):null});d(async()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),a(e),window.history.replaceState({},document.title,window.location.pathname));if(e||localStorage.getItem("mddb_token"))try{const e=await h().auth.getMe();i(e)}catch(t){console.error("Failed to load user",t),t instanceof me&&401===t.status&&(localStorage.removeItem("mddb_token"),a(null))}p(!0)}),c(u(()=>[o(),n()],([e,t])=>{e&&!t&&(async()=>{try{const e=await h().auth.getMe();i(e)}catch(e){console.error("Failed to load user",e),e instanceof me&&401===e.status&&(localStorage.removeItem("mddb_token"),a(null))}})()},{defer:!0}));const f={user:n,token:o,ready:s,api:h,wsApi:v,orgApi:_,login:(e,t)=>{localStorage.setItem("mddb_token",e),a(e),i(t)},logout:g,setUser:i,refreshUser:async()=>{try{const e=await h().auth.getMe();i(e)}catch(e){console.error("Failed to refresh user",e),e instanceof me&&401===e.status&&(localStorage.removeItem("mddb_token"),a(null),i(null))}}};return r(De.Provider,{value:f,get children(){return e.children}})};function Le(){const t=e(De);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const Re="select",Pe="org:owner",Ae="org:admin",Oe="ws:admin",Me="google",We="microsoft",Ve="github";function Ue(e){let t=e;t.startsWith("@")&&(t=t.substring(1));const n=t.indexOf("+");return n>=0?t.substring(0,n):t}function ze(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}function Be(e,t){return`/w/@${e}+${ze(t||"workspace")}/`}function He(e,t,n,r){const i=ze(t||"workspace"),o=r?ze(r):"";return`/w/@${e}+${i}/@${n}${o?"+"+o:""}`}function Fe(e,t,n){if(!e||"user"===e)return"/settings/user";if("server"===e)return"/settings/server";return`/settings/${e}/@${t}+${ze(n||e)}`}const je=i(),qe=e=>{const{t:n,ready:i}=fe(),o=p(),{user:a,setUser:s,api:d,wsApi:u,login:f}=Le(),[m,w]=g([]),[b,k]=t(null),[y,$]=t(null),[C,x]=t([]),[S,I]=t(!1),[E,N]=t(null),[D,T]=t(!1),[L,R]=t(null),[P,A]=t(null),[O,M]=t(!1),[W,V]=t(null),[U,z]=t(null),B=l(()=>S()||null!==E()||D()||null!==L()||null!==P()||O()),[H,F]=t(!1),[j,q]=t(!1),[G,K]=t(null),[J,X]=t(null);function Y(){const e=a();if(!e?.name)return"";return e.name.split(" ")[0]||e.name}async function Z(e){await d().organizations.createOrganization({name:e.name});const t=await d().auth.getMe();s(t)}async function Q(e){const t=a();if(!t||!t.organization_id)throw new Error("No organization selected");const n=await d().org(t.organization_id).workspaces.createWorkspace({name:e.name}),r=await d().auth.getMe();s(r),await ee(n.id)}async function ee(e){try{T(!0);const t=await d().auth.switchWorkspace({ws_id:e});if(!t.user)throw new Error("No user data returned");f(t.token,t.user),_(()=>{k(null),$(null),x([])}),X(null),K(null),await te();const n=a();n?.workspace_id&&o(Be(n.workspace_id,n.workspace_name))}catch(t){V(`${n("errors.failedToSwitch")}: ${t}`)}finally{T(!1)}}async function te(e=!1){const t=u(),r=a()?.workspace_id;if(t&&!S()&&!(!e&&r&&G()===r&&m.length>0))try{I(!0);const e=await t.nodes.listNodeChildren("0");let i=e?.nodes||[];if(0===i.length&&H()){const e=await async function(){const e=u(),t=a();if(!e||!t)return null;if(t.workspace_role!==Oe&&"ws:editor"!==t.workspace_role)return null;try{const t=await e.nodes.page.createPage("0",{title:n("welcome.welcomePageTitle"),content:n("welcome.welcomePageContent")});return t?.id?String(t.id):null}catch(r){return z(`${n("errors.failedToCreate")}: ${r}`),null}}();if(e){const e=await t.nodes.listNodeChildren("0");i=e?.nodes||[]}}w(h(i)),K(r||null),V(null)}catch(i){V(`${n("errors.failedToLoad")}: ${i}`)}finally{I(!1)}}c(()=>{const e=a();if(!e||!i()||H()||j())return;const t=e.organizations||[];if(0===t.length)return q(!0),void async function(){try{M(!0);const e=Y(),t=e?n("onboarding.defaultOrgName",{name:e}):n("onboarding.defaultOrgNameFallback");await Z({name:t})}catch(e){z(`${n("errors.failedToCreate")}: ${e}`)}finally{M(!1)}}().finally(()=>q(!1));const r=t[0];if(r){if(0===(e.workspaces?.filter(e=>e.organization_id===r.organization_id)||[]).length&&(r.role===Ae||r.role===Pe))return q(!0),void async function(){try{M(!0);const e=Y(),t=e?n("onboarding.defaultWorkspaceName",{name:e}):n("onboarding.defaultWorkspaceNameFallback");await Q({name:t})}catch(e){z(`${n("errors.failedToCreate")}: ${e}`)}finally{M(!1)}}().finally(()=>q(!1))}e.workspace_id&&F(!0)}),c(()=>{a()&&te()}),c(()=>{const e=a()?.workspace_id;e&&G()!==e&&X(null)});const ne={nodes:m,setNodes:e=>{w(v(e))},selectedNodeId:b,setSelectedNodeId:k,selectedNodeData:y,setSelectedNodeData:$,breadcrumbPath:C,setBreadcrumbPath:x,loadingNodes:S,loadingNodeId:E,switchingWorkspace:D,savingNodeId:L,setSavingNodeId:R,deletingNodeId:P,setDeletingNodeId:A,creatingNode:O,setCreatingNode:M,loadError:W,setLoadError:V,saveError:U,setSaveError:z,loading:B,firstLoginCheckDone:H,setFirstLoginCheckDone:F,switchWorkspace:ee,createOrganization:Z,createWorkspace:Q,loadNodes:te,loadNode:async function(e){const t=u();if(t&&E()!==e&&J()!==e)try{N(e);const n=await t.nodes.getNode(e);_(()=>{k(n.id),$(n)}),X(n.id),V(null);const r=[n];let i=n;for(;i.parent_id&&"0"!==i.parent_id;)try{const e=await t.nodes.getNode(i.parent_id);r.unshift(e),i=e}catch{break}return x(r),n}catch(r){return void V(`${n("errors.failedToLoad")}: ${r}`)}finally{N(null)}},fetchNodeChildren:async function(e){const t=u();if(t)try{const n=await t.nodes.listNodeChildren(e),r=n.nodes?.filter(Boolean)||[];w(v(t=>{const n=t=>{for(const i of t){if(i.id===e)return i.children=r,i.has_children=r.length>0,!0;if(i.children&&n(i.children))return!0}return!1};n(t)}))}catch(n){console.error("Failed to fetch children:",n)}},removeNode:e=>{w(v(t=>{const n=t=>{const r=t.findIndex(t=>t.id===e);if(-1!==r)return t.splice(r,1),!0;for(const e of t)if(e.children&&n(e.children))return 0===e.children.length&&(e.has_children=!1),!0;return!1};n(t)}))},updateNodeTitle:(e,t)=>{w(v(n=>{const r=n=>{for(const i of n){if(i.id===e)return i.title=t,!0;if(i.children&&r(i.children))return!0}return!1};r(n)})),x(n=>n.map(n=>n.id===e?{...n,title:t}:n))},moveNode:async function(e,t){const r=u();if(r)try{await r.nodes.moveNode(e,{new_parent_id:t}),w(v(n=>{let r=null;const i=t=>{const n=t.findIndex(t=>t.id===e);if(-1!==n)return r={...t[n]},t.splice(n,1),!0;for(const e of t)if(e.children&&i(e.children))return 0===e.children.length&&(e.has_children=!1),!0;return!1};if(i(n),!r)return;const o=r;if("0"===t)n.push(o);else{const e=n=>{for(const r of n){if(r.id===t)return r.children||(r.children=[]),r.children.push(o),r.has_children=!0,!0;if(r.children&&e(r.children))return!0}return!1};e(n)}})),z(null)}catch(i){z(`${n("errors.failedToMove")}: ${i}`)}},clearErrors:()=>{V(null),z(null)}};return r(je.Provider,{value:ne,get children(){return e.children}})};function Ge(){const t=e(je);if(!t)throw new Error("useWorkspace must be used within a WorkspaceProvider");return t}function Ke(e,t){let n=null,r=null;const i=(...i)=>{r=i,null!==n&&clearTimeout(n),n=setTimeout(()=>{n=null,r=null,e(...i)},t)};return i.flush=()=>{if(null!==n&&null!==r){clearTimeout(n);const t=r;n=null,r=null,e(...t)}},i.cancel=()=>{null!==n&&(clearTimeout(n),n=null,r=null)},i.pending=()=>null!==n,i}const Je=/\[([^\]]*)\]\(([^)]+\/index\.md)\)/g;function Xe(e,t){return e&&t&&e.includes("/index.md)")?e.replace(Je,(e,n,r)=>{if(r.startsWith("/")||r.startsWith("http"))return e;const i=r.lastIndexOf("/");if(i<0)return e;const o=r.substring(0,i),a=o.lastIndexOf("/"),s=a>=0?o.substring(a+1):o;return s&&/^[A-Z0-9]+$/.test(s)?`[${n}](/w/@${t}/@${s})`:e}):e}const Ye=/\[([^\]]*)\]\(\/w\/@([^/+]+)(?:\+[^/]*)?\/@([A-Za-z0-9]+)(?:\+[^)]*)?\)/g;const Ze=i(),Qe=e=>{const{t:n}=fe(),{user:i,wsApi:o}=Le(),{selectedNodeId:a,selectedNodeData:s,updateNodeTitle:l,setLoadError:d,setSaveError:u}=Ge(),[p,g]=t(""),[h,v]=t(""),[_,m]=t(!1),[w,b]=t("idle"),[k,y]=t({}),[$,C]=t(!1),[x,S]=t([]),I=Ke(async()=>{const e=a(),t=o();if(e&&_()&&t)try{b("saving");const n=i()?.workspace_id||"",r=function(e,t){return e&&t&&e.includes("/w/@")?e.replace(new RegExp(Ye.source,"g"),(e,n,r,i)=>r!==t?e:`[${n}](../${i}/index.md)`):e}(h(),n);await t.nodes.page.updatePage(e,{title:p(),content:r}),m(!1),b("saved");const o=i()?.workspace_name;if(n){const t=window.location.pathname,r=He(n,o,e,p());t!==r&&window.history.replaceState(null,"",r)}setTimeout(()=>{"saved"===w()&&b("idle")},2e3)}catch(r){u(`${n("errors.autoSaveFailed")}: ${r}`),b("idle")}},2e3);async function E(e){const t=o(),n=i()?.workspace_id;if(!t||!n||!e)return void y({});const r=function(e,t){if(!e||!t)return[];const n=new Set,r=new RegExp(Ye.source,"g");let i;for(;null!==(i=r.exec(e));){const e=i[2],r=i[3];e===t&&r&&!n.has(r)&&n.add(r)}return Array.from(n)}(e,n);if(0!==r.length)try{const e=await t.nodes.getNodeTitles({IDs:r.join(",")});y(e.titles||{})}catch{y({})}else y({})}function N(){g(""),v(""),m(!1),b("idle"),C(!1),S([]),y({})}f(()=>{I.flush()}),c(()=>{const e=s();if(e){g(e.title);const t=i()?.workspace_id||"",n=Xe(e.content||"",t);v(n),m(!1),b("idle"),C(!1),E(n)}else N()});const[D,T]=t(!1);const L={title:p,setTitle:g,content:h,setContent:v,hasUnsavedChanges:_,setHasUnsavedChanges:m,autoSaveStatus:w,assetUrls:()=>s()?.asset_urls||{},linkedNodeTitles:k,showHistory:$,setShowHistory:C,history:x,loadHistory:async function(e){if($())return void C(!1);const t=o();if(t)try{T(!0);const n=await t.nodes.history.listNodeVersions(e,{Limit:100});S(n.history?.filter(Boolean)||[]),C(!0)}catch(r){d(`${n("errors.failedToLoad")}: ${r}`)}finally{T(!1)}},triggerAutoSave:I,flushAutoSave:I.flush,resetEditor:N,handleTitleChange:function(e){g(e);const t=a();t&&l(t,e),m(!0),I()},handleContentChange:function(e){v(e),m(!0),I()}};return r(Ze.Provider,{value:L,get children(){return e.children}})};function et(){const t=e(Ze);if(!t)throw new Error("useEditor must be used within an EditorProvider");return t}const tt=i(),nt=e=>{const{t:n}=fe(),{wsApi:i}=Le(),{selectedNodeId:o,selectedNodeData:a}=Ge(),[s,d]=t([]),[u,p]=t(!1),[g,h]=t(null),[v,m]=t([]),[w,b]=t(),[k,y]=t([]),[$,C]=t([]),[x,S]=t(!1),[I,E]=t(null),[N,D]=t(null),[T,L]=t(!1),[R,P]=t(null),[A,O]=t(null),M=l(()=>x()||null!==I()||null!==N()||T()),W="__default__";function V(e,t){if(t.and&&t.and.length>0)return t.and.every(t=>V(e,t));if(t.or&&t.or.length>0)return t.or.some(t=>V(e,t));if(!t.property)return!0;const n=e.data?.[t.property],r=t.value;switch(t.operator){case"equals":return n===r;case"not_equals":return n!==r;case"contains":return"string"==typeof n&&"string"==typeof r&&n.toLowerCase().includes(r.toLowerCase());case"not_contains":return"string"==typeof n&&"string"==typeof r&&!n.toLowerCase().includes(r.toLowerCase());case"starts_with":return"string"==typeof n&&"string"==typeof r&&n.toLowerCase().startsWith(r.toLowerCase());case"ends_with":return"string"==typeof n&&"string"==typeof r&&n.toLowerCase().endsWith(r.toLowerCase());case"is_empty":return null==n||""===n;case"is_not_empty":return null!=n&&""!==n;case"gt":return"number"==typeof n&&"number"==typeof r&&n>r;case"gte":return"number"==typeof n&&"number"==typeof r&&n>=r;case"lt":return"number"==typeof n&&"number"==typeof r&&n<r;case"lte":return"number"==typeof n&&"number"==typeof r&&n<=r;default:return!0}}function U(e,t){return 0===t.length?e:e.filter(e=>t.every(t=>V(e,t)))}const z=Ke(e=>{F(e)},300);function B(){z.cancel(),d([]),p(!1),h(null),m([]),b(void 0),y([]),C([])}function H(e){if(e===w())return;const t=v().find(t=>t.id===e);_(()=>{b(e),t?(y(t.filters||[]),C(t.sorts||[])):(y([]),C([]))}),q()}async function F(e){const t=i();if(t)try{S(!0);const n=k().length>0?JSON.stringify(k()):void 0,r=$().length>0?JSON.stringify($()):void 0,i=w(),o=i===W?"":i||"",a=(await t.nodes.table.records.listRecords(e,{Offset:0,Limit:50,ViewID:o,Filters:n||"",Sorts:r||""})).records||[];d(a);const s=50===a.length;p(s),s||0!==k().length||0!==$().length?h(null):h(a),P(null)}catch(r){P(`${n("errors.failedToLoad")}: ${r}`)}finally{S(!1)}}async function j(e){z.cancel(),await F(e)}function q(){const e=g();if(null!==e){const r=U(e,k()),i=(t=r,0===(n=$()).length?t:[...t].sort((e,t)=>{for(const r of n){const n=e.data?.[r.property],i=t.data?.[r.property];let o;if(o=n===i?0:null==n?1:null==i?-1:"string"==typeof n&&"string"==typeof i?n.localeCompare(i):"number"==typeof n&&"number"==typeof i?n-i:String(n).localeCompare(String(i)),0!==o)return"desc"===r.direction?-o:o}return 0}));d(i),p(!1)}else{const e=o();e&&z(e)}var t,n}f(()=>{z.cancel()}),c(()=>{const e=a();e?.has_table?(_(()=>{const t=e.views||[];if(t.length>0){m(t);const e=t.find(e=>e.default)||t[0];e&&(b(e.id),y(e.filters||[]),C(e.sorts||[]))}else{const e={id:W,name:n("table.all")||"All",type:"table",default:!0,filters:[],sorts:[],columns:[],groups:[]};m([e]),b(W),y([]),C([])}}),j(e.id)):B()});const G={records:s,hasMore:u,views:v,activeViewId:w,activeFilters:k,activeSorts:$,loadingRecords:x,savingRecordId:I,deletingRecordId:N,savingView:T,loadError:R,setLoadError:P,saveError:A,setSaveError:O,loading:M,loadRecords:j,loadMoreRecords:async function(){const e=o(),t=i();if(e&&!x()&&t)try{S(!0);const n=s().length,r=k().length>0?JSON.stringify(k()):void 0,i=$().length>0?JSON.stringify($()):void 0,o=w(),a=o===W?"":o||"",l=(await t.nodes.table.records.listRecords(e,{Offset:n,Limit:50,ViewID:a,Filters:r||"",Sorts:i||""})).records||[],c=[...s(),...l];d(c);const u=50===l.length;p(u),u||0!==k().length||0!==$().length||h(c),P(null)}catch(r){P(`${n("errors.failedToLoad")}: ${r}`)}finally{S(!1)}},addRecord:async function(e){const t=o(),r=i();if(t&&r)try{E("__new__"),h(null),await r.nodes.table.records.createRecord(t,{data:e}),await j(t),O(null)}catch(a){O(`${n("errors.failedToCreate")}: ${a}`)}finally{E(null)}},updateRecord:async function(e,t){const r=o(),a=i();if(r&&a)try{E(e),h(null),await a.nodes.table.records.updateRecord(r,e,{data:t}),await j(r),O(null)}catch(s){O(`${n("errors.failedToSave")}: ${s}`)}finally{E(null)}},deleteRecord:async function(e){const t=o(),r=i();if(t&&r&&confirm(n("table.confirmDeleteRecord")||"Delete this record?"))try{D(e),h(null),await r.nodes.table.records.deleteRecord(t,e),await j(t),O(null)}catch(a){O(`${n("errors.failedToDelete")}: ${a}`)}finally{D(null)}},clearRecords:B,setActiveViewId:H,setFilters:function(e){y(e),q()},setSorts:function(e){C(e),q()},createView:async function(e,t){const r=o(),a=i();if(r&&a)try{L(!0);const n=await a.nodes.views.createView(r,{name:e,type:t}),i={id:n.id,name:e,type:t,default:!1,filters:[],sorts:[],columns:[],groups:[]};_(()=>{m([...v(),i]),b(n.id),y([]),C([])}),O(null)}catch(s){O(`${n("errors.failedToCreate")}: ${s}`)}finally{L(!1)}},updateView:async function(e,t){const r=o(),a=i();if(r&&a)try{L(!0),await a.nodes.views.updateView(r,e,t),m(v().map(n=>n.id===e?{...n,...t}:n)),e===w()&&(t.filters&&y(t.filters),t.sorts&&C(t.sorts),(t.filters||t.sorts)&&q()),O(null)}catch(s){O(`${n("errors.failedToSave")}: ${s}`)}finally{L(!1)}},deleteView:async function(e){const t=o(),r=i();if(t&&r&&confirm(n("table.confirmDeleteView")||"Delete this view?"))try{L(!0),await r.nodes.views.deleteView(t,e);const n=v().filter(t=>t.id!==e);if(m(n),w()===e){const e=n[0];H(e?e.id:void 0)}O(null)}catch(a){O(`${n("errors.failedToDelete")}: ${a}`)}finally{L(!1)}},clearErrors:()=>{P(null),O(null)}};return r(tt.Provider,{value:G,get children(){return e.children}})};function rt(){const t=e(tt);if(!t)throw new Error("useRecords must be used within a RecordsProvider");return t}async function it(){if(!("serviceWorker"in navigator))return null;try{return await navigator.serviceWorker.ready}catch(e){return console.error("SW registration failed:",e),null}}async function ot(e,t,n){if("granted"!==await Notification.requestPermission())return null;const r=function(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t),i=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r.buffer}),o=i.toJSON(),a=o.endpoint??"",s=o.keys?.p256dh??"",l=o.keys?.auth??"";return a&&s&&l?(await n.notifications.subscribePush({endpoint:a,p256dh:s,auth:l}),i):null}const at=i(),st=e=>{const[n,i]=t([]),[o,a]=t(0),[s,l]=t(!1),[c,u]=t(!1),[p,g]=t(!1);let h,v=null,_=null;const m=async()=>{try{const t=await e.api().notifications.getUnreadCount();a(t.count)}catch{}},w=async(t=0)=>{l(!0);try{const n=await e.api().notifications.listNotifications({Limit:20,Offset:t,UnreadOnly:!1});i(0===t?n.notifications??[]:e=>[...e,...n.notifications??[]]),a(n.unread_count),g((n.notifications?.length??0)>=20)}catch{}finally{l(!1)}};d(async()=>{if(await m(),v=await it(),v){const e=await v.pushManager.getSubscription();e&&(_=e,u(!0))}h=window.setInterval(m,6e4)}),f(()=>{h&&window.clearInterval(h)});const b={notifications:n,unreadCount:o,isLoading:s,pushEnabled:c,markAsRead:async t=>{try{await e.api().notifications.markNotificationRead(t),i(e=>e.map(e=>e.id===t?{...e,read:!0}:e)),a(e=>Math.max(0,e-1))}catch{}},markAllAsRead:async()=>{try{await e.api().notifications.readAll.markAllNotificationsRead(),i(e=>e.map(e=>({...e,read:!0}))),a(0)}catch{}},deleteNotification:async t=>{try{const r=n().find(e=>e.id===t);await e.api().notifications.deleteNotification(t),i(e=>e.filter(e=>e.id!==t)),r&&!r.read&&a(e=>Math.max(0,e-1))}catch{}},enablePush:async()=>{try{if(v||(v=await it()),!v)return!1;const t=await e.api().notifications.vapidKey.getVAPIDPublicKey();return _=await ot(v,t.public_key,e.api()),!!_&&(u(!0),!0)}catch{return!1}},disablePush:async()=>{try{_&&(await async function(e,t){await t.notifications.unsubscribePush({endpoint:e.endpoint}),await e.unsubscribe()}(_,e.api()),_=null),u(!1)}catch{}},refresh:async()=>{await w(0)},loadMore:async()=>{await w(n().length)},hasMore:p};return r(at.Provider,{value:b,get children(){return e.children}})};function lt(){const t=e(at);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t}const dt="_errorBoundary_1gyxj_3",ct="_errorMessage_1gyxj_21",ut="_errorDetails_1gyxj_27",pt="_retryButton_1gyxj_51";var gt=$("<div role=alert><h2>Something went wrong</h2><p></p><details><summary>Technical details</summary><pre></pre></details><button>Try again");function ht(e){return t=gt(),n=t.firstChild.nextSibling,r=n.nextSibling,i=r.firstChild.nextSibling,o=r.nextSibling,b(n,()=>e.error.message),b(i,()=>e.error.stack),o.$$click=()=>e.reset(),k(e=>{var i=dt,a=ct,s=ut,l=pt;return i!==e.e&&y(t,e.e=i),a!==e.t&&y(n,e.t=a),s!==e.a&&y(r,e.a=s),l!==e.o&&y(o,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t;var t,n,r,i,o}const vt=e=>r(w,{fallback:(e,t)=>r(ht,{error:e,reset:t}),get children(){return e.children}});m(["click"]);const _t="_banner_172qk_1",ft="_content_172qk_23",mt="_title_172qk_27",wt="_message_172qk_32",bt="_actions_172qk_37",kt="_installButton_172qk_42",yt="_dismissButton_172qk_56";var $t=$("<div><div><div></div><div></div></div><div><button></button><button>");const Ct="mddb_pwa_dismissed";function xt(){const{t:e}=fe(),[n,i]=t(null),[o,a]=t(!1);d(()=>{if(function(){const e=localStorage.getItem(Ct);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),i(e),a(!0)},t=()=>{a(!1),i(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),f(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=n();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),i(null)},l=()=>{localStorage.setItem(Ct,(new Date).toISOString()),a(!1)};return r(C,{get when(){return x(()=>!!o())()&&n()},get children(){var t=$t(),n=t.firstChild,r=n.firstChild,i=r.nextSibling,o=n.nextSibling,a=o.firstChild,d=a.nextSibling;return b(r,()=>e("pwa.installTitle")),b(i,()=>e("pwa.installMessage")),a.$$click=l,b(a,()=>e("pwa.dismissButton")),d.$$click=s,b(d,()=>e("pwa.installButton")),k(e=>{var s=_t,l=ft,c=mt,u=wt,p=bt,g=yt,h=kt;return s!==e.e&&y(t,e.e=s),l!==e.t&&y(n,e.t=l),c!==e.a&&y(r,e.a=c),u!==e.o&&y(i,e.o=u),p!==e.i&&y(o,e.i=p),g!==e.n&&y(a,e.n=g),h!==e.s&&y(d,e.s=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}})}m(["click"]);const St="_navItemWrapper_1ac4m_3",It="_navItem_1ac4m_3",Et="_active_1ac4m_27",Nt="_section_1ac4m_34",Dt="_separator_1ac4m_56",Tt="_expandIcon_1ac4m_62",Lt="_expanded_1ac4m_80",Rt="_expandSpacer_1ac4m_84",Pt="_label_1ac4m_90",At="_children_1ac4m_97";var Ot=$("<span>"),Mt=$("<div>"),Wt=$("<div><a><span>");function Vt(e){const n=()=>e.item.children&&e.item.children.length>0,i=()=>{if(!n())return!1;const t=e.currentRoute,r=n=>{for(const i of n){if(e.isActive(i.url,t))return!0;if(i.children&&r(i.children))return!0}return!1};return r(e.item.children||[])},[o,a]=t(S(()=>0===e.depth||i()));c(()=>{e.currentRoute&&i()&&a(!0)});const s=t=>{t.preventDefault(),n()&&!e.item.url?a(!o()):e.item.url&&(n()&&a(!0),e.onNavigate(e.item.url))},l=e=>{e.preventDefault(),e.stopPropagation(),a(!o())};return d=Wt(),u=d.firstChild,p=u.firstChild,u.$$click=s,b(u,r(C,{get when(){return n()},get fallback(){return e=Ot(),k(()=>y(e,Rt)),e;var e},get children(){var e=Ot();return e.$$click=l,b(e,r(I,{})),k(()=>y(e,(()=>{let e=Tt;return o()&&(e+=" "+Lt),e})())),e}}),p),b(p,()=>e.item.label),b(d,r(C,{get when(){return x(()=>!!o())()&&n()},get children(){var t=Mt();return b(t,r(E,{get each(){return e.item.children},children:t=>r(Vt,{item:t,get depth(){return e.depth+1},get isActive(){return e.isActive},get onNavigate(){return e.onNavigate},get currentRoute(){return e.currentRoute}})})),k(()=>y(t,At)),t}}),null),k(t=>{var r=St,i=e.item.url||"#",o=(()=>{let t=It;return e.isActive(e.item.url,e.currentRoute)&&(t+=" "+Et),0===e.depth&&n()&&(t+=" "+Nt),e.item.separator&&(t+=" "+Dt),t})(),a=12*e.depth+16+"px",s=Pt;return r!==t.e&&y(d,t.e=r),i!==t.t&&N(u,"href",t.t=i),o!==t.a&&y(u,t.a=o),a!==t.o&&D(u,"padding-left",t.o=a),s!==t.i&&y(p,t.i=s),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),d;var d,u,p}m(["click"]);const Ut="_sidebar_dpyfy_3",zt="_nav_dpyfy_13",Bt="_mobileOpen_dpyfy_31";var Ht=$("<aside><nav>");function Ft(e){const{t:t}=fe(),{user:n}=Le(),i=T(),o=p(),a=()=>e.currentRoute??(()=>{const e=i.pathname,t=i.hash?.slice(1)||void 0;if("/settings/user"===e||"/settings/user/"===e)return{type:"profile"};if("/settings/server"===e||"/settings/server/"===e)return{type:"server"};const n=e.match(/^\/settings\/workspace\/([^+/]+)/);if(n)return{type:"workspace",id:n[1],section:t};const r=e.match(/^\/settings\/org\/([^+/]+)/);return r?{type:"org",id:r[1],section:t}:{type:"profile"}})(),s=t=>{e.onNavigate?e.onNavigate(t):o(t)},l=(e,t)=>{if(!e)return!1;if("/settings/user"===e&&"profile"===t.type)return!0;if("/settings/server"===e&&"server"===t.type)return!0;if("workspace"===t.type&&t.id){const n=e.match(/^\/settings\/workspace\/([^+/]+)/);if(n&&n[1]===t.id){const[,n]=e.split("#");return n?t.section===n:!t.section}}if("org"===t.type&&t.id){const n=e.match(/^\/settings\/org\/([^+/]+)/);if(n&&n[1]===t.id){const[,n]=e.split("#");return n?t.section===n:!t.section}}return!1};return d=Ht(),c=d.firstChild,b(c,r(E,{get each(){return(()=>{const e=[],r=n();if(!r)return e;e.push({id:"user",label:t("settings.personal"),url:Fe("user")});const i=r.workspaces||[];if(i.length>0){const n=i.map(e=>{const n=e.workspace_id,r=e.workspace_name||n,i=e.role===Oe,o=[{id:`ws-${n}-members`,label:t("settings.members"),url:Fe("workspace",n,r)+"#members"},{id:`ws-${n}-settings`,label:t("settings.settings"),url:Fe("workspace",n,r)+"#settings"}];return i&&o.push({id:`ws-${n}-sync`,label:t("settings.gitSync"),url:Fe("workspace",n,r)+"#sync"}),{id:`ws-${n}`,label:r,url:Fe("workspace",n,r),children:o}});e.push({id:"workspaces",label:t("settings.workspaces"),url:"",children:n})}const o=(r.organizations||[]).filter(e=>e.role===Ae||e.role===Pe);if(o.length>0){const n=o.map(e=>{const n=e.organization_id,r=e.organization_name||n;return{id:`org-${n}`,label:r,url:Fe("org",n,r),children:[{id:`org-${n}-members`,label:t("settings.members"),url:Fe("org",n,r)+"#members"},{id:`org-${n}-settings`,label:t("settings.settings"),url:Fe("org",n,r)+"#settings"}]}});e.push({id:"organizations",label:t("settings.organizations"),url:"",children:n})}return r.is_global_admin&&e.push({id:"server",label:t("server.serverSettings"),url:Fe("server")}),e.push({id:"privacy",label:t("app.privacyPolicy"),url:"/privacy",separator:!0}),e.push({id:"terms",label:t("app.terms"),url:"/terms"}),e})()},children:e=>r(Vt,{item:e,depth:0,isActive:l,onNavigate:s,get currentRoute(){return a()}})})),k(t=>{var n=`${Ut} ${e.isOpen?Bt:""}`,r=zt;return n!==t.e&&y(d,t.e=n),r!==t.t&&y(c,t.t=r),t},{e:void 0,t:void 0}),d;var d,c}const jt="_settingsPage_1ihhv_3",qt="_header_1ihhv_10",Gt="_headerLeft_1ihhv_21",Kt="_hamburger_1ihhv_27",Jt="_backButton_1ihhv_37",Xt="_title_1ihhv_53",Yt="_layout_1ihhv_64",Zt="_content_1ihhv_70",Qt="_mobileBackdrop_1ihhv_81";var en=$("<div>"),tn=$('<div><header><div><button aria-label="Toggle settings menu">&#9776;</button><button>&larr; </button><h1></h1></div></header><div><main>');function nn(e){const{t:n}=fe(),{user:i}=Le(),o=p(),a=T(),[s,l]=t(!1),c=e=>{"Escape"===e.key&&s()&&l(!1)};d(()=>{window.addEventListener("keydown",c),f(()=>window.removeEventListener("keydown",c))});const u=()=>{o(-1)},g=()=>{const e=i()?.workspace_id,t=i()?.workspace_name;e&&o(Be(e,t))},h=e=>{l(!1),o(e)};return(()=>{var t=tn(),i=t.firstChild,o=i.firstChild,d=o.firstChild,c=d.nextSibling;c.firstChild;var p=c.nextSibling,v=i.nextSibling,_=v.firstChild;return d.$$click=()=>l(!s()),c.$$click=u,b(c,()=>n("common.back"),null),p.$$click=g,b(p,()=>n("settings.title")),b(v,r(C,{get when(){return s()},get children(){var e=en();return e.$$click=()=>l(!1),k(()=>y(e,Qt)),e}}),_),b(v,r(Ft,{get isOpen(){return s()},get currentRoute(){return(()=>{const e=a.pathname,t=a.hash?.slice(1)||void 0;if("/settings/user"===e||"/settings/user/"===e)return{type:"profile"};if("/settings/server"===e||"/settings/server/"===e)return{type:"server"};const n=e.match(/^\/settings\/workspace\/([^+/]+)/);if(n)return{type:"workspace",id:n[1],section:t};const r=e.match(/^\/settings\/org\/([^+/]+)/);return r?{type:"org",id:r[1],section:t}:{type:"profile"}})()},onNavigate:h}),_),b(_,()=>e.children),k(e=>{var n=jt,r=qt,a=Gt,s=Kt,l=Jt,u=Xt,g=Yt,h=Zt;return n!==e.e&&y(t,e.e=n),r!==e.t&&y(i,e.t=r),a!==e.a&&y(o,e.a=a),s!==e.o&&y(d,e.o=s),l!==e.i&&y(c,e.i=l),u!==e.n&&y(p,e.n=u),g!==e.s&&y(v,e.s=g),h!==e.h&&y(_,e.h=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),t})()}m(["click"]);var rn=$("<div style=padding:2rem;color:var(--c-text-light)>");const on=A(()=>ge(()=>import("./ProfileSettings-d713nBbG.js"),__vite__mapDeps([0,1,2,3,4]))),an=A(()=>ge(()=>import("./WorkspaceSettingsPanel-Cj4L0DBW.js"),__vite__mapDeps([5,1,6,7,3,8]))),sn=A(()=>ge(()=>import("./OrgSettingsPanel-BJzQ9rNF.js"),__vite__mapDeps([9,1,6,7,3,10]))),ln=A(()=>ge(()=>import("./ServerSettingsPanel-CuNdLLgl.js"),__vite__mapDeps([11,1,3,12])));function dn(){const{t:e}=fe();return t=rn(),b(t,()=>e("common.loading")),t;var t}function cn(){const{user:e}=Le();return r(C,{get when(){return e()?.is_global_admin},get fallback(){return r(L,{href:"/settings/user"})},get children(){return r(R,{get fallback(){return r(dn,{})},get children(){return r(ln,{})}})}})}function un(){const e=P(),t=T(),n=p(),{user:i}=Le(),o=()=>Ue(e.wsId||""),a=(e,t)=>{n(Fe("org",e,t))};return r(C,{get when(){return(()=>{const e=i();return e?.workspaces?.some(e=>e.workspace_id===o())})()},get fallback(){return r(L,{href:"/settings/user"})},get children(){return r(R,{get fallback(){return r(dn,{})},get children(){return r(an,{get wsId(){return o()},get section(){return t.hash?.slice(1)||void 0},onNavigateToOrgSettings:a})}})}})}function pn(){const e=P(),t=T(),{user:n}=Le(),i=()=>Ue(e.orgId||"");return r(C,{get when(){return(()=>{const e=n();return e?.organizations?.some(e=>e.organization_id===i())})()},get fallback(){return r(L,{href:"/settings/user"})},get children(){return r(R,{get fallback(){return r(dn,{})},get children(){return r(sn,{get orgId(){return i()},get section(){return t.hash?.slice(1)||void 0}})}})}})}function gn(){return r(R,{get fallback(){return r(dn,{})},get children(){return r(on,{})}})}function hn(){return r(L,{href:"/settings/user"})}function vn(e){return r(nn,{get children(){return e.children}})}const _n="_handle_15xkm_1",fn="_icon_15xkm_30";var mn=$('<div draggable=true aria-label="Drag handle"data-testid=row-handle><svg viewBox="0 0 12 16"fill=currentColor xmlns=http://www.w3.org/2000/svg><circle cx=3 cy=3 r=1.5></circle><circle cx=3 cy=8 r=1.5></circle><circle cx=3 cy=13 r=1.5></circle><circle cx=9 cy=3 r=1.5></circle><circle cx=9 cy=8 r=1.5></circle><circle cx=9 cy=13 r=1.5>');function wn(e){const t=t=>{e.onDragStart(t,e.rowId)},n=t=>{t.preventDefault(),e.onContextMenu(t,e.rowId)},r=t=>{e.onClick?.(t,e.rowId)};return i=mn(),o=i.firstChild,i.$$click=r,i.$$contextmenu=n,i.addEventListener("dragstart",t),k(t=>{var n=`${_n} ${e.class||""}`,r=fn;return n!==t.e&&y(i,t.e=n),r!==t.t&&N(o,"class",t.t=r),t},{e:void 0,t:void 0}),i;var i,o}m(["contextmenu","click"]);const bn="_menu_1y3gs_1",kn="_separator_1y3gs_14",yn="_item_1y3gs_20",$n="_focused_1y3gs_36",Cn="_disabled_1y3gs_40",xn="_danger_1y3gs_50",Sn="_icon_1y3gs_59",In="_label_1y3gs_73",En="_shortcut_1y3gs_80";var Nn=$('<div role=menu tabindex=-1 aria-label="Context menu">'),Dn=$("<div role=separator>"),Tn=$("<span>"),Ln=$("<button role=menuitem tabindex=-1><span>");function Rn(e){let n;const[i,o]=t(0),[a,s]=t({x:0,y:0});c(()=>{if(!n)return;const t=n.getBoundingClientRect(),r=window.innerWidth,i=window.innerHeight;let o=e.position.x,a=e.position.y;o+t.width>r-8&&(o=Math.max(8,r-t.width-8)),a+t.height>i-8&&(a=Math.max(8,i-t.height-8)),s({x:o,y:a})}),c(()=>{const t=t=>{n&&!n.contains(t.target)&&e.onClose()},r=setTimeout(()=>{document.addEventListener("click",t),document.addEventListener("contextmenu",t)},0);f(()=>{clearTimeout(r),document.removeEventListener("click",t),document.removeEventListener("contextmenu",t)})}),c(()=>{const t=t=>{const n=e.actions.map((e,t)=>({action:e,i:t})).filter(({action:e})=>!e.disabled).map(({i:e})=>e);if(0!==n.length)switch(t.key){case"Escape":t.preventDefault(),e.onClose();break;case"ArrowDown":{t.preventDefault();const e=n.indexOf(i()),r=n[e>=0?(e+1)%n.length:0];void 0!==r&&o(r);break}case"ArrowUp":{t.preventDefault();const e=n.indexOf(i()),r=n[e>=0?(e-1+n.length)%n.length:n.length-1];void 0!==r&&o(r);break}case"Enter":case" ":t.preventDefault();{const t=e.actions[i()];t&&!t.disabled&&(e.onAction(t.id),e.onClose())}break;case"Tab":t.preventDefault()}};document.addEventListener("keydown",t),f(()=>document.removeEventListener("keydown",t))}),c(()=>{n?.focus()});return r(W,{get children(){var t=Nn();return O(e=>n=e,t),b(t,r(E,{get each(){return e.actions},children:(t,n)=>{return[r(C,{get when(){return t.separator},get children(){var e=Dn();return k(()=>y(e,kn)),e}}),(a=Ln(),s=a.firstChild,a.addEventListener("mouseenter",()=>o(n())),a.$$click=()=>(t=>{t.disabled||(e.onAction(t.id),e.onClose())})(t),b(a,r(C,{get when(){return t.icon},get children(){var e=Tn();return b(e,()=>t.icon),k(()=>y(e,Sn)),e}}),s),b(s,()=>t.label),b(a,r(C,{get when(){return t.shortcut},get children(){var e=Tn();return b(e,()=>t.shortcut),k(()=>y(e,En)),e}}),null),k(e=>{var r=((e,t)=>({[yn]:!0,[xn]:e.danger,[Cn]:e.disabled,[$n]:i()===t()}))(t,n),o=t.disabled,l=t.disabled,d=`context-menu-${t.id}`,c=In;return e.e=M(a,r,e.e),o!==e.t&&(a.disabled=e.t=o),l!==e.a&&N(a,"aria-disabled",e.a=l),d!==e.o&&N(a,"data-testid",e.o=d),c!==e.i&&y(s,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),a)];var a,s}})),k(e=>{var n=bn,r=`${a().x}px`,i=`${a().y}px`;return n!==e.e&&y(t,e.e=n),r!==e.t&&D(t,"left",e.t=r),i!==e.a&&D(t,"top",e.a=i),e},{e:void 0,t:void 0,a:void 0}),t}})}m(["click"]);const Pn="_sidebarNodeWrapper_e1ddu_1",An="_childList_e1ddu_2",On="_pageItem_e1ddu_13",Mn="_active_e1ddu_28",Wn="_iconSlot_e1ddu_34",Vn="_hasChildren_e1ddu_44",Un="_nodeIcon_e1ddu_48",zn="_expandIcon_e1ddu_60",Bn="_pageTitleText_e1ddu_65",Hn="_loading_e1ddu_93",Fn="_expanded_e1ddu_98",jn="_hoverDeleteButton_e1ddu_123",qn="_dragging_e1ddu_148",Gn="_dropTarget_e1ddu_152";var Kn=$("<ul>"),Jn=$("<li><div draggable=true><span><span></span><span></span></span><span></span><button data-testid=delete-node-button>");let Xn=null;function Yn(e){const{t:n}=fe(),i=S(()=>0===e.depth||e.ancestorIds.includes(e.node.id)),[o,a]=t(i),[s,l]=t(!1),[d,p]=t({x:0,y:0}),[g,h]=t(!1),v=()=>e.node.children??[],_=()=>!!(e.node.children&&e.node.children.length>0)||!0===e.node.has_children;c(()=>{const t=e.selectedId,n=v();t&&n.some(e=>e.id===t)&&a(!0)});const[f,m]=t(!1);c(u(()=>e.ancestorIds.length,(t,n)=>{(void 0===n||0===n)&&t>0&&!f()&&e.ancestorIds.includes(e.node.id)&&(m(!0),a(!0))})),c(()=>{o()&&_()&&!e.node.children&&e.onFetchChildren&&(h(!0),e.onFetchChildren(e.node.id).finally(()=>h(!1)))});const w=e=>{e.preventDefault(),e.stopPropagation(),p({x:e.clientX,y:e.clientY}),l(!0)};let $;const[T,L]=t(!1),[R,P]=t(!1);let A;const W=t=>{t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",e.node.id),Xn={nodeId:e.node.id,element:$},L(!0))},H=()=>{Xn=null,L(!1),P(!1),clearTimeout(A)},F=t=>{Xn&&Xn.nodeId!==e.node.id&&(Xn.element.contains(t.currentTarget)||(t.preventDefault(),t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.dropEffect="move"),P(!0),A||!_()||o()||(A=setTimeout(()=>{a(!0),!e.node.children&&e.onFetchChildren&&(h(!0),e.onFetchChildren(e.node.id).finally(()=>h(!1)))},600))))},j=e=>{const t=e.relatedTarget;t&&e.currentTarget.contains(t)||(P(!1),clearTimeout(A),A=void 0)},q=t=>{t.preventDefault(),t.stopPropagation(),P(!1),clearTimeout(A),A=void 0,Xn&&Xn.nodeId!==e.node.id&&e.onMoveNode?.(Xn.nodeId,e.node.id)};return J=Jn(),X=J.firstChild,Y=X.firstChild,Z=Y.firstChild,Q=Z.nextSibling,ee=Y.nextSibling,te=ee.nextSibling,O(e=>$=e,J),X.addEventListener("drop",q),X.addEventListener("dragleave",j),X.addEventListener("dragover",F),X.addEventListener("dragend",H),X.addEventListener("dragstart",W),X.$$contextmenu=w,X.$$click=()=>e.onSelect(e.node),Y.$$click=e=>_()&&(e=>{e.stopPropagation(),a(!o())})(e),b(Z,(G=x(()=>!(!e.node.has_table||e.node.has_page)),()=>G()?r(V,{}):r(U,{}))),b(Q,(K=x(()=>!!g()),()=>K()?"â—‹":r(I,{}))),b(ee,()=>e.node.title),te.$$click=t=>{t.stopPropagation(),e.onDeleteNode?.(e.node.id)},b(te,r(z,{})),b(J,r(C,{get when(){return s()},get children(){return r(Rn,{get position(){return d()},get actions(){return[{id:"create-subpage",label:n("app.createSubPage")||"Create sub-page",icon:r(U,{})},{id:"create-subtable",label:n("app.createSubTable")||"Create sub-table",icon:r(V,{})},{id:"history",label:n("editor.history")||"History",icon:r(B,{}),separator:!0}]},onAction:t=>{switch(t){case"create-subpage":e.onCreateChildPage(e.node.id);break;case"create-subtable":e.onCreateChildTable(e.node.id);break;case"history":e.onShowHistory?.(e.node.id)}},onClose:()=>l(!1)})}}),null),b(J,r(C,{get when(){return x(()=>!!o())()&&v().length>0},get children(){var t=Kn();return b(t,r(E,{get each(){return v()},children:t=>r(Yn,{node:t,get selectedId(){return e.selectedId},get ancestorIds(){return e.ancestorIds},get onSelect(){return e.onSelect},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},get onMoveNode(){return e.onMoveNode},get depth(){return e.depth+1}})})),k(()=>y(t,An)),t}}),null),k(t=>{var r=Pn,i=`sidebar-node-${e.node.id}`,a=On,s={[`${Mn}`]:e.selectedId===e.node.id,[`${qn}`]:T(),[`${Gn}`]:R()},l=12*e.depth+8+"px",d=Wn,c={[`${Vn}`]:_()},u=`expand-icon-${e.node.id}`,p=Un,h=zn,v={[`${Fn}`]:o(),[`${Hn}`]:g()},f=Bn,m=jn,w=n("common.delete")||"Delete";return r!==t.e&&y(J,t.e=r),i!==t.t&&N(J,"data-testid",t.t=i),a!==t.a&&y(X,t.a=a),t.o=M(X,s,t.o),l!==t.i&&D(X,"padding-left",t.i=l),d!==t.n&&y(Y,t.n=d),t.s=M(Y,c,t.s),u!==t.h&&N(Y,"data-testid",t.h=u),p!==t.r&&y(Z,t.r=p),h!==t.d&&y(Q,t.d=h),t.l=M(Q,v,t.l),f!==t.u&&y(ee,t.u=f),m!==t.c&&y(te,t.c=m),w!==t.w&&N(te,"title",t.w=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),J;var G,K,J,X,Y,Z,Q,ee,te}m(["click","contextmenu"]);const Zn="_sidebar_1kttr_1",Qn="_open_1kttr_16",er="_collapseButton_1kttr_20",tr="_workspaceHeader_1kttr_43",nr="_workspaceName_1kttr_52",rr="_editable_1kttr_63",ir="_workspaceNameInput_1kttr_74",or="_settingsButton_1kttr_92",ar="_loading_1kttr_122",sr="_pageList_1kttr_128",lr="_rootDropTarget_1kttr_137",dr="_otherWorkspaces_1kttr_142",cr="_otherWorkspacesToggle_1kttr_147",ur="_toggleChevron_1kttr_165",pr="_expanded_1kttr_176",gr="_otherWorkspacesList_1kttr_180",hr="_orgLabel_1kttr_184",vr="_otherWorkspaceItem_1kttr_193",_r="_sidebarActions_1kttr_214",fr="_actionButton_1kttr_220",mr="_actionIcon_1kttr_242";var wr=$("<input type=text>"),br=$("<p>"),kr=$("<button><span>"),yr=$("<div>"),$r=$("<aside><div><button data-testid=workspace-settings-button></button><button></button></div><ul></ul><div><div><button data-testid=create-workspace-button><span></span></button><button data-testid=import-notion-button><span>"),Cr=$("<span>"),xr=$("<button>");function Sr(e){const{t:n}=fe(),{user:i,wsApi:o,refreshUser:a}=Le(),{switchWorkspace:s}=Ge(),[d,c]=t(!1),[u,p]=t(!1),[g,h]=t(""),[v,_]=t(!1),f=()=>i()?.workspace_id||"",m=()=>{const e=i();if(!e)return n("app.workspace");const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);return t?.workspace_name||n("app.workspace")},w=()=>i()?.workspace_role===Oe,$=()=>{w()&&(h(m()),p(!0))},S=()=>{p(!1),h("")},D=async()=>{const e=o(),t=g().trim();if(e&&t&&t!==m())try{_(!0),await e.workspaces.updateWorkspace({name:t}),await a(),p(!1)}catch(n){console.error("Failed to update workspace name:",n)}finally{_(!1)}else S()},T=e=>{"Enter"===e.key?(e.preventDefault(),D()):"Escape"===e.key&&(e.preventDefault(),S())},L=l(()=>{const e=i();if(!e)return[];const t=new Map,n=e.organizations||[],r=e.workspaces||[];for(const i of n)t.set(i.organization_id,{orgId:i.organization_id,orgName:i.organization_name||i.organization_id,workspaces:[]});for(const i of r){const e=t.get(i.organization_id);e&&e.workspaces.push(i)}return Array.from(t.values()).filter(e=>e.workspaces.length>0)}),R=l(()=>{const e=f();return L().flatMap(t=>t.workspaces.filter(t=>t.workspace_id!==e))}),P=l(()=>L().length>1),[A,W]=t(!1),V=e=>{e.target===e.currentTarget&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),W(!0))},U=e=>{e.target===e.currentTarget&&W(!1)},z=t=>{if(t.target!==t.currentTarget)return;t.preventDefault(),W(!1);const n=t.dataTransfer?.getData("text/plain");n&&e.onMoveNode?.(n,"0")};return B=$r(),G=B.firstChild,K=G.firstChild,J=K.nextSibling,X=G.nextSibling,Y=X.nextSibling,Z=Y.firstChild,Q=Z.firstChild,ee=Q.firstChild,te=Q.nextSibling,ne=te.firstChild,b(G,r(C,{get when(){return u()},get fallback(){return(e=Cr()).$$click=$,b(e,m),k(t=>{var r=`${nr} ${w()?rr:""}`,i=w()?n("settings.clickToEditName")||"Click to edit name":void 0;return r!==t.e&&y(e,t.e=r),i!==t.t&&N(e,"title",t.t=i),t},{e:void 0,t:void 0}),e;var e},get children(){var e=wr();return e.addEventListener("blur",D),e.$$keydown=T,e.$$input=e=>h(e.target.value),O(e=>setTimeout(()=>e.focus(),0),e),k(t=>{var n=ir,r=v();return n!==t.e&&y(e,t.e=n),r!==t.t&&(e.disabled=t.t=r),t},{e:void 0,t:void 0}),k(()=>e.value=g()),e}}),K),K.$$click=()=>e.onOpenSettings(),b(K,r(H,{})),J.$$click=()=>e.onCloseMobileSidebar(),b(J,r(F,{})),b(B,r(C,{get when(){return x(()=>!!e.loading)()&&0===e.nodes.length},get children(){var e=br();return b(e,()=>n("common.loading")),k(()=>y(e,ar)),e}}),X),X.addEventListener("drop",z),X.addEventListener("dragleave",U),X.addEventListener("dragover",V),b(X,r(E,{get each(){return e.nodes},children:t=>r(Yn,{node:t,get selectedId(){return e.selectedNodeId},get ancestorIds(){return e.ancestorIds},get onSelect(){return e.onSelectNode},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},get onMoveNode(){return e.onMoveNode},depth:0})})),b(Y,r(C,{get when(){return R().length>0},get children(){return[(e=kr(),t=e.firstChild,e.$$click=()=>c(!d()),b(t,r(I,{})),b(e,()=>n("app.otherWorkspaces")||"Other workspaces",null),k(n=>{var r=cr,i=`${ur} ${d()?pr:""}`;return r!==n.e&&y(e,n.e=r),i!==n.t&&y(t,n.t=i),n},{e:void 0,t:void 0}),e),r(C,{get when(){return d()},get children(){var e=yr();return b(e,r(E,{get each(){return L()},children:e=>[r(C,{get when(){return P()},get children(){var t=yr();return b(t,()=>e.orgName),k(()=>y(t,hr)),t}}),r(E,{get each(){return e.workspaces.filter(e=>e.workspace_id!==f())},children:e=>{return(t=xr()).$$click=()=>{var t;(t=e.workspace_id)!==f()&&s(t)},b(t,()=>e.workspace_name||e.workspace_id),k(()=>y(t,vr)),t;var t}})]})),k(()=>y(e,gr)),e}})];var e,t}}),Z),Q.$$click=()=>e.onCreateWorkspace(),b(ee,r(j,{})),b(Q,()=>n("createWorkspace.title")||"Create workspace",null),te.$$click=()=>e.onImportFromNotion(),b(ne,r(q,{})),b(te,()=>n("notionImport.title")||"Import from Notion",null),k(t=>{var r=`${Zn} ${e.isOpen?Qn:""}`,i=tr,o=or,a=n("app.settings")||"Settings",s=er,l=n("app.collapseSidebar")||"Collapse sidebar",d=sr,c={[`${lr}`]:A()},u=dr,p=_r,g=fr,h=mr,v=fr,_=mr;return r!==t.e&&y(B,t.e=r),i!==t.t&&y(G,t.t=i),o!==t.a&&y(K,t.a=o),a!==t.o&&N(K,"title",t.o=a),s!==t.i&&y(J,t.i=s),l!==t.n&&N(J,"title",t.n=l),d!==t.s&&y(X,t.s=d),t.h=M(X,c,t.h),u!==t.r&&y(Y,t.r=u),p!==t.d&&y(Z,t.d=p),g!==t.l&&y(Q,t.l=g),h!==t.u&&y(ee,t.u=h),v!==t.c&&y(te,t.c=v),_!==t.w&&y(ne,t.w=_),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),B;var B,G,K,J,X,Y,Z,Q,ee,te,ne}function Ir(e,t){d(()=>{const n=n=>{const r=e();r&&!r.contains(n.target)&&t()};document.addEventListener("mousedown",n),f(()=>{document.removeEventListener("mousedown",n)})})}m(["input","keydown","click"]);const Er="_userMenu_1thns_1",Nr="_avatarButton_1thns_5",Dr="_avatarImage_1thns_24",Tr="_initials_1thns_30",Lr="_dropdown_1thns_37",Rr="_userInfo_1thns_50",Pr="_userName_1thns_57",Ar="_userEmail_1thns_63",Or="_userRole_1thns_68",Mr="_divider_1thns_78",Wr="_menuItem_1thns_83";var Vr=$("<span>"),Ur=$("<div role=menu><div><span></span><span></span></div><div></div><button role=menuitem></button><button role=menuitem>"),zr=$("<div><button aria-haspopup=menu data-testid=user-menu-button>"),Br=$("<img referrerpolicy=no-referrer>");function Hr(e){const n=p(),{t:i}=fe(),{user:o,logout:a}=Le(),[s,l]=t(!1);let d;const c=()=>{const e=o();if(!e)return"";const t=e.name||e.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},u=()=>o()?.name||"",g=()=>o()?.email||"",h=()=>o()?.workspace_role;Ir(()=>d,()=>l(!1));const v=async()=>{l(!1),await a(),n("/")},_=()=>{l(!1),e.onProfile()};return f=zr(),m=f.firstChild,O(e=>d=e,f),m.$$click=()=>l(!s()),b(m,r(C,{get when(){return(()=>{const e=o();if(!e)return null;const t=e.oauth_identities;if(!t)return null;for(const n of t)if(n.avatar_url)return n.avatar_url;return null})()},get fallback(){return e=Vr(),b(e,c),k(()=>y(e,Tr)),e;var e},children:e=>{return t=Br(),k(n=>{var r=e(),i=u()||"User",o=Dr;return r!==n.e&&N(t,"src",n.e=r),i!==n.t&&N(t,"alt",n.t=i),o!==n.a&&y(t,n.a=o),n},{e:void 0,t:void 0,a:void 0}),t;var t}})),b(f,r(C,{get when(){return s()},get children(){var e=Ur(),t=e.firstChild,n=t.firstChild,o=n.nextSibling,a=t.nextSibling,s=a.nextSibling,l=s.nextSibling;return b(n,u),b(o,g),b(t,r(C,{get when(){return h()},get children(){var e=Vr();return b(e,h),k(()=>y(e,Or)),e}}),null),s.$$click=_,b(s,()=>i("userMenu.profile")),l.$$click=v,b(l,()=>i("userMenu.logout")),k(r=>{var i=Lr,d=Rr,c=Pr,u=Ar,p=Mr,g=Wr,h=Wr;return i!==r.e&&y(e,r.e=i),d!==r.t&&y(t,r.t=d),c!==r.a&&y(n,r.a=c),u!==r.o&&y(o,r.o=u),p!==r.i&&y(a,r.i=p),g!==r.n&&y(s,r.n=g),h!==r.s&&y(l,r.s=h),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),k(e=>{var t=Er,n=Nr,r=u()||g(),o=i("userMenu.profile")||"User menu",a=s();return t!==e.e&&y(f,e.e=t),n!==e.t&&y(m,e.t=n),r!==e.a&&N(m,"title",e.a=r),o!==e.o&&N(m,"aria-label",e.o=o),a!==e.i&&N(m,"aria-expanded",e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),f;var f,m}m(["click"]);const Fr="_bellWrapper_13di6_3",jr="_bellButton_13di6_7",qr="_badge_13di6_30",Gr="_panel_13di6_49",Kr="_panelHeader_13di6_65",Jr="_markAllButton_13di6_80",Xr="_panelBody_13di6_94",Yr="_empty_13di6_99",Zr="_item_13di6_106",Qr="_unread_13di6_124",ei="_itemTitle_13di6_128",ti="_itemContent_13di6_132",ni="_itemBody_13di6_145",ri="_itemMeta_13di6_154",ii="_actor_13di6_162",oi="_deleteButton_13di6_166",ai="_loadMoreButton_13di6_194";var si=$("<span>"),li=$("<button>"),di=$("<div role=dialog><div><h3></h3></div><div>"),ci=$("<div><button aria-haspopup=true>"),ui=$("<div>"),pi=$("<div><div><div></div><div><span></span></div></div><button>");function gi(){const{t:e}=fe(),{notifications:n,unreadCount:i,isLoading:o,markAsRead:a,markAllAsRead:s,deleteNotification:l,refresh:d,loadMore:c,hasMore:u}=lt(),[p,g]=t(!1);let h;Ir(()=>h,()=>g(!1));const v=e=>{"Escape"===e.key&&g(!1)},_=async()=>{const e=!p();g(e),e?(await d(),document.addEventListener("keydown",v)):document.removeEventListener("keydown",v)};f(()=>{document.removeEventListener("keydown",v)});return m=ci(),w=m.firstChild,O(e=>h=e,m),w.$$click=_,b(w,r(G,{}),null),b(w,r(C,{get when(){return i()>0},get children(){var e,t=si();return b(t,(e=x(()=>i()>99),()=>e()?"99+":i())),k(()=>y(t,qr)),t}}),null),b(m,r(C,{get when(){return p()},get children(){var t=di(),d=t.firstChild,p=d.firstChild,g=d.nextSibling;return b(p,()=>e("notifications.title")),b(d,r(C,{get when(){return i()>0},get children(){var t=li();return K(t,"click",s,!0),b(t,()=>e("notifications.markAllRead")),k(()=>y(t,Jr)),t}}),null),b(g,r(C,{get when(){return n().length>0},get fallback(){return n=ui(),b(n,(t=x(()=>!!o()),()=>t()?e("common.loading"):e("notifications.empty"))),k(()=>y(n,Yr)),n;var t,n},get children(){return[r(E,{get each(){return n()},children:t=>{return n=pi(),i=n.firstChild,o=i.firstChild,s=o.nextSibling,d=s.firstChild,c=i.nextSibling,n.$$click=()=>(async e=>{e.read||await a(e.id)})(t),b(o,()=>t.title),b(i,r(C,{get when(){return t.body},get children(){var e=ui();return b(e,()=>t.body),k(()=>y(e,ni)),e}}),s),b(d,()=>function(e,t){const n=Date.now()-e,r=Math.floor(n/6e4);if(r<1)return t("notifications.timeJustNow")||"just now";if(r<60)return t("notifications.timeMinutesAgo",{count:String(r)})||`${r}m ago`;const i=Math.floor(r/60);if(i<24)return t("notifications.timeHoursAgo",{count:String(i)})||`${i}h ago`;const o=Math.floor(i/24);return t("notifications.timeDaysAgo",{count:String(o)})||`${o}d ago`}(t.created_at,e)),b(s,r(C,{get when(){return t.actor_name},get children(){var e=si();return b(e,()=>t.actor_name),k(()=>y(e,ii)),e}}),null),c.$$click=e=>(async(e,t)=>{e.stopPropagation(),await l(t)})(e,t.id),b(c,r(J,{})),k(r=>{var a=`${Zr} ${t.read?"":Qr}`,l=ti,d=ei,u=ri,p=oi,g=e("common.delete")||"Delete";return a!==r.e&&y(n,r.e=a),l!==r.t&&y(i,r.t=l),d!==r.a&&y(o,r.a=d),u!==r.o&&y(s,r.o=u),p!==r.i&&y(c,r.i=p),g!==r.n&&N(c,"aria-label",r.n=g),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n;var n,i,o,s,d,c}}),r(C,{get when(){return u()},get children(){var t=li();return K(t,"click",c,!0),b(t,()=>e("notifications.loadMore")),k(e=>{var n=ai,r=o();return n!==e.e&&y(t,e.e=n),r!==e.t&&(t.disabled=e.t=r),e},{e:void 0,t:void 0}),t}})]}})),k(n=>{var r=Gr,i=e("notifications.title")||"Notifications",o=Kr,a=Xr;return r!==n.e&&y(t,n.e=r),i!==n.t&&N(t,"aria-label",n.t=i),o!==n.a&&y(d,n.a=o),a!==n.o&&y(g,n.o=a),n},{e:void 0,t:void 0,a:void 0,o:void 0}),t}}),null),k(t=>{var n=Fr,r=jr,i=e("notifications.title")||"Notifications",o=p();return n!==t.e&&y(m,t.e=n),r!==t.t&&y(w,t.t=r),i!==t.a&&N(w,"aria-label",t.a=i),o!==t.o&&N(w,"aria-expanded",t.o=o),t},{e:void 0,t:void 0,a:void 0,o:void 0}),m;var m,w}m(["click"]);const hi="_banner_tmw21_1",vi="_success_tmw21_11",_i="_error_tmw21_16",fi="_cancelled_tmw21_21",mi="_icon_tmw21_26",wi="_content_tmw21_30",bi="_message_tmw21_37",ki="_progress_tmw21_41",yi="_stats_tmw21_46",$i="_stat_tmw21_46",Ci="_statValue_tmw21_58",xi="_actions_tmw21_63",Si="_cancelButton_tmw21_68",Ii="_dismissButton_tmw21_82",Ei="_spinner_tmw21_95";var Ni=$("<span>&#x21BB;"),Di=$("<span>&#x2713;"),Ti=$("<span>&#x2717;"),Li=$("<span>&#x26A0;"),Ri=$("<span>/<!>: "),Pi=$("<span><span></span> "),Ai=$("<div>"),Oi=$("<span>"),Mi=$("<button>"),Wi=$("<div><span></span><div><span></span></div><div>");function Vi(e){const{t:t}=fe(),n=()=>e.status,i=()=>{switch(n().status){case"running":return t("notionImport.importInProgress");case"completed":return t("notionImport.importCompleted");case"failed":return t("notionImport.importFailed");case"cancelled":return t("notionImport.importCancelled");default:return""}},o=()=>{switch(n().status){case"running":return e=Ni(),k(()=>y(e,Ei)),e;case"completed":return Di();case"failed":return Ti();case"cancelled":return Li();default:return null}var e},a=()=>["completed","failed","cancelled"].includes(n().status);return s=Wi(),l=s.firstChild,d=l.nextSibling,c=d.firstChild,u=d.nextSibling,b(l,o),b(c,i),b(d,r(C,{get when(){return x(()=>"running"===n().status)()&&n().message},get children(){var e=Ri(),t=e.firstChild,r=t.nextSibling;return r.nextSibling,b(e,()=>n().progress,t),b(e,()=>n().total,r),b(e,()=>n().message,null),k(()=>y(e,ki)),e}}),null),b(d,r(C,{get when(){return x(()=>!!a())()&&(n().pages||n().databases||n().records)},get children(){var e=Ai();return b(e,r(C,{get when(){return n().pages},get children(){var e=Pi(),r=e.firstChild;return r.nextSibling,b(r,()=>n().pages),b(e,()=>t("notionImport.pagesImported"),null),k(t=>{var n=$i,i=Ci;return n!==t.e&&y(e,t.e=n),i!==t.t&&y(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),b(e,r(C,{get when(){return n().databases},get children(){var e=Pi(),r=e.firstChild;return r.nextSibling,b(r,()=>n().databases),b(e,()=>t("notionImport.databasesImported"),null),k(t=>{var n=$i,i=Ci;return n!==t.e&&y(e,t.e=n),i!==t.t&&y(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),b(e,r(C,{get when(){return n().records},get children(){var e=Pi(),r=e.firstChild;return r.nextSibling,b(r,()=>n().records),b(e,()=>t("notionImport.recordsImported"),null),k(t=>{var n=$i,i=Ci;return n!==t.e&&y(e,t.e=n),i!==t.t&&y(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),b(e,r(C,{get when(){return n().assets},get children(){var e=Pi(),r=e.firstChild;return r.nextSibling,b(r,()=>n().assets),b(e,()=>t("notionImport.assetsImported"),null),k(t=>{var n=$i,i=Ci;return n!==t.e&&y(e,t.e=n),i!==t.t&&y(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),b(e,r(C,{get when(){return n().errors},get children(){var e=Pi(),r=e.firstChild;return r.nextSibling,b(r,()=>n().errors),b(e,()=>t("notionImport.errorsEncountered"),null),k(t=>{var n=$i,i=Ci;return n!==t.e&&y(e,t.e=n),i!==t.t&&y(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),k(()=>y(e,yi)),e}}),null),b(d,r(C,{get when(){return x(()=>"failed"===n().status)()&&n().message},get children(){var e=Oi();return b(e,()=>n().message),k(()=>y(e,ki)),e}}),null),b(u,r(C,{get when(){return"running"===n().status},get children(){var n=Mi();return n.$$click=()=>e.onCancel(),b(n,()=>t("notionImport.cancel")),k(()=>y(n,Si)),n}}),null),b(u,r(C,{get when(){return a()},get children(){var n=Mi();return n.$$click=()=>e.onDismiss(),b(n,()=>t("notionImport.dismiss")),k(()=>y(n,Ii)),n}}),null),k(e=>{var t=(()=>{switch(n().status){case"completed":return`${hi} ${vi}`;case"failed":return`${hi} ${_i}`;case"cancelled":return`${hi} ${fi}`;default:return hi}})(),r=mi,i=wi,o=bi,a=xi;return t!==e.e&&y(s,e.e=t),r!==e.t&&y(l,e.t=r),i!==e.a&&y(d,e.a=i),o!==e.o&&y(c,e.o=o),a!==e.i&&y(u,e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s;var s,l,d,c,u}m(["click"]);const Ui="_overlay_v0iwf_1",zi="_modal_v0iwf_11",Bi="_header_v0iwf_28",Hi="_formGroup_v0iwf_53",Fi="_primaryButton_v0iwf_76",ji="_secondaryButton_v0iwf_99",qi="_actions_v0iwf_113",Gi="_error_v0iwf_127";var Ki=$("<button type=button>"),Ji=$("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Xi=$("<div>");function Yi(e){const{t:n}=fe(),[i,o]=t(""),[a,s]=t(!1),[l,d]=t(null),c=async t=>{if(t.preventDefault(),i().trim())try{s(!0),d(null),await e.onCreate({name:i().trim()}),e.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=t=>{e.isFirstWorkspace||t.target!==t.currentTarget||e.onClose()};return _=Ji(),f=_.firstChild,m=f.firstChild,w=m.firstChild,$=w.nextSibling,S=m.nextSibling,I=S.firstChild,E=I.firstChild,D=E.nextSibling,T=I.nextSibling,L=T.firstChild,_.$$click=u,b(w,(p=x(()=>!!e.isFirstWorkspace),()=>p()?n("createWorkspace.firstWorkspaceTitle"):n("createWorkspace.title"))),b($,(g=x(()=>!!e.isFirstWorkspace),()=>g()?n("createWorkspace.firstWorkspaceDescription"):n("createWorkspace.description"))),b(f,(h=x(()=>!!l()),()=>{return h()&&(e=Xi(),b(e,l),k(()=>y(e,Gi)),e);var e}),S),S.addEventListener("submit",c),b(E,()=>n("createWorkspace.nameLabel")),D.$$input=e=>o(e.target.value),b(T,r(C,{get when(){return!e.isFirstWorkspace},get children(){var t=Ki();return t.$$click=()=>e.onClose(),b(t,()=>n("common.cancel")),k(()=>y(t,ji)),t}}),L),b(L,(v=x(()=>!!a()),()=>v()?n("common.creating"):n("createWorkspace.create"))),k(t=>{var r=Ui,o=zi,s=Bi,l=Hi,d=n("createWorkspace.namePlaceholder")||"",c=qi,u=Fi,p=!i().trim()||a(),g=e.isFirstWorkspace?{flex:1}:void 0;return r!==t.e&&y(_,t.e=r),o!==t.t&&y(f,t.t=o),s!==t.a&&y(m,t.a=s),l!==t.o&&y(I,t.o=l),d!==t.i&&N(D,"placeholder",t.i=d),c!==t.n&&y(T,t.n=c),u!==t.s&&y(L,t.s=u),p!==t.h&&(L.disabled=t.h=p),t.r=X(L,g,t.r),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),k(()=>D.value=i()),_;var p,g,h,v,_,f,m,w,$,S,I,E,D,T,L}m(["click","input"]);const Zi="_overlay_1l8b3_1",Qi="_modal_1l8b3_11",eo="_header_1l8b3_28",to="_error_1l8b3_43",no="_setupBox_1l8b3_53",ro="_setupHeader_1l8b3_61",io="_setupTitle_1l8b3_70",oo="_createLink_1l8b3_75",ao="_setupSteps_1l8b3_93",so="_subSteps_1l8b3_109",lo="_formGroup_1l8b3_119",co="_actions_1l8b3_137",uo="_primaryButton_1l8b3_143",po="_secondaryButton_1l8b3_166";var go=$('<div><div><header><h2></h2><p></p></header><div><div><span></span><a href=https://www.notion.so/profile/integrations/form/new-integration target=_blank rel="noopener noreferrer"> &#x2197;</a></div><ol><li><ol><li></li><li></li><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li></ol></div><form><div><label></label><input type=password autofocus></div><div><button type=button></button><button type=submit>'),ho=$("<div>");function vo(e){const{t:n}=fe(),[r,i]=t(""),[o,a]=t(!1),[s,l]=t(null),c=t=>{"Escape"!==t.key||o()||e.onClose()};d(()=>{document.addEventListener("keydown",c)}),f(()=>{document.removeEventListener("keydown",c)});const u=async t=>{if(t.preventDefault(),r().trim())try{a(!0),l(null),await e.onImport({notionToken:r().trim()}),e.onClose()}catch(n){l(String(n))}finally{a(!1)}},p=t=>{t.target===t.currentTarget&&e.onClose()};return v=go(),_=v.firstChild,m=_.firstChild,w=m.firstChild,$=w.nextSibling,C=m.nextSibling,S=C.firstChild,I=S.firstChild,E=I.nextSibling,D=E.firstChild,T=S.nextSibling,L=T.firstChild,R=L.firstChild,P=R.firstChild,A=P.nextSibling,O=A.nextSibling,M=O.nextSibling,W=L.nextSibling,V=W.firstChild,U=V.firstChild,z=U.nextSibling,B=W.nextSibling,H=B.firstChild,F=H.firstChild,j=F.nextSibling,q=C.nextSibling,G=q.firstChild,K=G.firstChild,J=K.nextSibling,X=G.nextSibling,Y=X.firstChild,Z=Y.nextSibling,v.$$click=p,b(w,()=>n("notionImport.title")),b($,()=>n("notionImport.description")),b(_,(g=x(()=>!!s()),()=>{return g()&&(e=ho(),b(e,s),k(()=>y(e,to)),e);var e}),C),b(I,()=>n("notionImport.setupTitle")),b(E,()=>n("notionImport.createIntegration"),D),b(L,()=>n("notionImport.step1Header"),R),b(P,()=>n("notionImport.step1a")),b(A,()=>n("notionImport.step1b")),b(O,()=>n("notionImport.step1c")),b(M,()=>n("notionImport.step1d")),b(W,()=>n("notionImport.step2Header"),V),b(U,()=>n("notionImport.step2a")),b(z,()=>n("notionImport.step2b")),b(B,()=>n("notionImport.step3Header"),H),b(F,()=>n("notionImport.step3a")),b(j,()=>n("notionImport.step3b")),q.addEventListener("submit",u),b(K,()=>n("notionImport.notionToken")),J.$$input=e=>i(e.target.value),Y.$$click=()=>e.onClose(),b(Y,()=>n("common.cancel")),b(Z,(h=x(()=>!!o()),()=>h()?n("notionImport.importing"):n("notionImport.startImport"))),k(e=>{var t=Zi,i=Qi,a=eo,s=no,l=ro,d=io,c=oo,u=ao,p=so,g=so,h=so,f=lo,w=n("notionImport.notionTokenPlaceholder")||"",b=co,k=po,$=uo,x=!r().trim()||o();return t!==e.e&&y(v,e.e=t),i!==e.t&&y(_,e.t=i),a!==e.a&&y(m,e.a=a),s!==e.o&&y(C,e.o=s),l!==e.i&&y(S,e.i=l),d!==e.n&&y(I,e.n=d),c!==e.s&&y(E,e.s=c),u!==e.h&&y(T,e.h=u),p!==e.r&&y(R,e.r=p),g!==e.d&&y(V,e.d=g),h!==e.l&&y(H,e.l=h),f!==e.u&&y(G,e.u=f),w!==e.c&&N(J,"placeholder",e.c=w),b!==e.w&&y(X,e.w=b),k!==e.m&&y(Y,e.m=k),$!==e.f&&y(Z,e.f=$),x!==e.y&&(Z.disabled=e.y=x),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),k(()=>J.value=r()),v;var g,h,v,_,m,w,$,C,S,I,E,D,T,L,R,P,A,O,M,W,V,U,z,B,H,F,j,q,G,K,J,X,Y,Z}m(["click","input"]);const _o="_app_agixi_3",fo="_sidebarOpen_agixi_11",mo="_hamburger_agixi_15",wo="_header_agixi_19",bo="_headerLeft_agixi_31",ko="_userInfo_agixi_39",yo="_container_agixi_46",$o="_main_agixi_52",Co="_error_agixi_60",xo="_editor_agixi_68",So="_editorLoading_agixi_76",Io="_editorHeader_agixi_81",Eo="_editorStatus_agixi_90",No="_unsavedIndicator_agixi_98",Do="_savingIndicator_agixi_103",To="_savedIndicator_agixi_108",Lo="_titleInput_agixi_118",Ro="_nodeContent_agixi_128",Po="_tableView_agixi_135",Ao="_breadcrumbs_agixi_143",Oo="_breadcrumbItem_agixi_154",Mo="_breadcrumbSeparator_agixi_165",Wo="_historyPanel_agixi_170",Vo="_historyList_agixi_184",Uo="_historyItem_agixi_191",zo="_activeHistoryItem_agixi_204",Bo="_historyMeta_agixi_209",Ho="_historyDate_agixi_217",Fo="_historyHash_agixi_221",jo="_historyMessage_agixi_228",qo="_mobileBackdrop_agixi_247",Go="_mobileBackdropVisible_agixi_251",Ko="_previewPane_agixi_305",Jo="_previewHeader_agixi_315",Xo="_previewInfo_agixi_324",Yo="_previewMeta_agixi_335",Zo="_closePreviewButton_agixi_340",Qo="_previewContent_agixi_355";var ea=$("<nav>"),ta=$("<div role=alert aria-live=polite>"),na=$('<div><header><div><button aria-label="Toggle menu"></button></div><div></div></header><div><div></div><main>'),ra=$("<span>/"),ia=$("<span>");const oa=e=>{const{t:n}=fe(),i=p(),{user:o,wsApi:a,orgApi:s}=Le(),{nodes:l,selectedNodeId:d,breadcrumbPath:c,loading:u,setCreatingNode:g,setDeletingNodeId:h,loadError:v,saveError:_,setSaveError:m,switchWorkspace:w,createWorkspace:$,loadNodes:x,fetchNodeChildren:S,removeNode:I,moveNode:N}=Ge(),{flushAutoSave:D,loadHistory:T}=et(),[L,R]=t(window.innerWidth>768),[P,A]=t(!1),[O,M]=t(!1),[W,V]=t(null),[U,z]=t(null),[B,H]=t(null);let F;const j=async e=>{const t=s();if(!t)return;const n=await t.notion.startImport({notion_token:e.notionToken});var r;await w(n.workspace_id),r=n.workspace_id,z(r),F=window.setInterval(async()=>{const e=s();if(e)try{const t=await e.notion.getStatus(r);V(t),["completed","failed","cancelled"].includes(t.status)&&(window.clearInterval(F),F=void 0,"completed"===t.status&&x(!0))}catch{window.clearInterval(F),F=void 0}},2e3),V({status:"running",progress:0,total:0})},q=async()=>{const e=a(),t=U();if(e&&t)try{await e.notion.cancelImport(),V(e=>e?{...e,status:"cancelled"}:null)}catch{}},G=()=>{F&&(window.clearInterval(F),F=void 0),V(null),z(null)};function K(e,t=l,n=null){const r=t.findIndex(t=>t.id===e);if(-1!==r)return{parent:n,siblings:t,index:r};for(const i of t)if(i.children){const t=K(e,i.children,i);if(t)return t}return null}async function J(e="document",t){const r=a();if(r)try{g(!0);const a=t||B()||"0";let s;const l="table"===e?n("welcome.untitledTable")||"Untitled Table":n("welcome.untitledPage")||"Untitled Page";if("table"===e){s=(await r.nodes.table.createTable(a,{title:l,properties:[{name:"Name",type:"text",required:!1}]})).id}else{s=(await r.nodes.page.createPage(a,{title:l})).id}await x(!0);const d=o(),c=d?.workspace_id,u=d?.workspace_name;c&&i(He(c,u,String(s),l)),m(null),H(null)}catch(s){m(`${n("errors.failedToCreate")}: ${s}`)}finally{g(!1)}}f(()=>{F&&window.clearInterval(F)});const X=e=>{D();const t=o(),n=t?.workspace_id,r=t?.workspace_name;n&&i(He(n,r,e.id,e.title)),window.innerWidth<=768&&R(!1)};async function Z(e){const t=a();if(!t)return;if(!confirm(n("table.confirmDeleteRecord")||"Delete this item?"))return;let r=null;if(e===d()){const t=K(e);if(t){const{parent:e,siblings:n,index:i}=t;e&&"0"!==e.id?r=e:i>0?r=n[i-1]??null:n.length>1&&(r=n[1]??null)}}try{if(h(e),await t.nodes.deleteNode(e),I(e),e===d()){const e=o(),t=e?.workspace_id,n=e?.workspace_name;r&&t?i(He(t,n,r.id,r.title)):t&&(await x(!0),i(`/w/@${t}+${n||"workspace"}/`))}m(null)}catch(s){m(`${n("errors.failedToDelete")}: ${s}`)}finally{h(null)}}async function Q(e,t){await N(e,t)}return ee=na(),te=ee.firstChild,ne=te.firstChild,re=ne.firstChild,ie=ne.nextSibling,oe=te.nextSibling,ae=oe.firstChild,se=ae.nextSibling,b(ee,r(C,{get when(){return W()},keyed:!0,children:e=>r(Vi,{status:e,onCancel:q,onDismiss:G})}),te),re.$$click=()=>R(!L()),b(re,r(Y,{})),b(ne,r(C,{get when(){return d()},get children(){var e=ea();return b(e,r(E,{get each(){return c()},children:(e,t)=>{return[r(C,{get when(){return t()>0},get children(){var e=ra();return k(()=>y(e,Mo)),e}}),(n=ia(),n.$$click=()=>X(e),b(n,()=>e.title),k(()=>y(n,Oo)),n)];var n}})),k(()=>y(e,Ao)),e}}),null),b(ie,r(gi,{}),null),b(ie,r(Hr,{onProfile:()=>{i(Fe("user"))}}),null),ae.$$click=()=>R(!1),b(oe,r(Sr,{get isOpen(){return L()},get loading(){return u()},nodes:l,get selectedNodeId(){return d()},get ancestorIds(){return c().map(e=>e.id)},onCreatePage:()=>{H(null),J("document"),R(!1)},onCreateTable:()=>{H(null),J("table"),R(!1)},onCreateChildPage:e=>{H(e),J("document",e),R(!1)},onCreateChildTable:e=>{H(e),J("table",e),R(!1)},onSelectNode:X,onCloseMobileSidebar:()=>R(!1),onFetchChildren:S,onDeleteNode:Z,onShowHistory:e=>{const t=o(),n=t?.workspace_id,r=t?.workspace_name;e!==d()&&n?(i(He(n,r,e)),setTimeout(()=>T(e),100)):T(e)},onOpenSettings:()=>{const e=o()?.workspace_id,t=o()?.workspace_name;e&&(R(!1),i(Fe("workspace",e,t)))},onCreateWorkspace:()=>A(!0),onImportFromNotion:()=>M(!0),onMoveNode:Q}),se),b(se,r(C,{get when(){return v()||_()},get children(){var e=ta();return b(e,()=>v()||_()),k(()=>y(e,Co)),e}}),null),b(se,()=>e.children,null),b(ee,r(C,{get when(){return P()},get children(){return r(Yi,{onClose:()=>A(!1),onCreate:$,isFirstWorkspace:!0})}}),null),b(ee,r(C,{get when(){return O()},get children(){return r(vo,{onClose:()=>M(!1),onImport:j})}}),null),k(e=>{var t=`${_o} ${L()?fo:""}`,n=wo,r=bo,i=mo,o=ko,a=yo,s=`${qo} ${L()?Go:""}`,l=$o;return t!==e.e&&y(ee,e.e=t),n!==e.t&&y(te,e.t=n),r!==e.a&&y(ne,e.a=r),i!==e.o&&y(re,e.o=i),o!==e.i&&y(ie,e.i=o),a!==e.n&&y(oe,e.n=a),s!==e.s&&y(ae,e.s=s),l!==e.h&&y(se,e.h=l),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),ee;var ee,te,ne,re,ie,oe,ae,se};function aa(){const e=p(),t=P(),{user:n}=Le(),{nodes:r,loading:i}=Ge();return c(()=>{if(i())return;const o=r;if(o.length>0&&o[0]){const r=o[0],i=n(),a=i?.workspace_id||Ue(t.wsId),s=i?.workspace_name;a&&e(He(a,s,r.id,r.title),{replace:!0})}}),null}m(["click"]);const sa="_container_1eiss_3",la="_tableWrapper_1eiss_11",da="_table_1eiss_11",ca="_headerRow_1eiss_23",ua="_headerCell_1eiss_31",pa="_row_1eiss_43",ga="_actionsCell_1eiss_51",ha="_deleteBtn_1eiss_51",va="_actionsHeader_1eiss_56",_a="_handleHeader_1eiss_70",fa="_handleCell_1eiss_76",ma="_required_1eiss_114",wa="_newRow_1eiss_121",ba="_newRowPlaceholder_1eiss_129",ka="_empty_1eiss_140",ya="_loadMore_1eiss_147",$a="_row_9rnv3_3",Ca="_handleWrapper_9rnv3_10",xa="_dragging_9rnv3_28",Sa="_dropIndicator_9rnv3_33";var Ia=$("<div>");const Ea="application/x-table-record";function Na(e){const{t:n}=fe(),[i,o]=t(null),a=(t,n)=>{t.dataTransfer?.setData(Ea,e.recordId),t.dataTransfer&&(t.dataTransfer.effectAllowed="move"),e.onDragStart?.(e.recordId,t)},s=(e,t)=>{o({x:e.clientX,y:e.clientY})},l=t=>{switch(t){case"open":e.onOpen?.(e.recordId);break;case"duplicate":e.onDuplicate?.(e.recordId);break;case"delete":e.onDelete?.(e.recordId)}o(null)};return[r(C,{get when(){return e.showDropIndicator},get children(){var e=Ia();return k(()=>y(e,Sa)),e}}),r(Z,{get component(){return"tr"===e.as?"tr":"div"},get class(){return`${$a} row-with-handle ${e.isDragging?xa:""} ${e.class||""}`.trim()},onDragOver:t=>{t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move"),e.onDragOver?.(e.recordId,t)},onDrop:t=>{t.preventDefault(),e.onDrop?.(e.recordId,t)},get children(){return[(t=Ia(),b(t,r(wn,{get rowId(){return e.recordId},onDragStart:a,onContextMenu:s})),k(()=>y(t,Ca)),t),x(()=>e.children)];var t}}),r(C,{get when(){return i()},children:t=>r(Rn,{get position(){return t()},get actions(){return(()=>{const t=[];return e.onOpen&&t.push({id:"open",label:n("table.openRecord")||"Open"}),e.onDuplicate&&t.push({id:"duplicate",label:n("table.duplicateRecord")||"Duplicate",shortcut:"âŒ˜D"}),e.onDelete&&t.push({id:"delete",label:n("table.deleteRecord")||"Delete",shortcut:"âŒ«",danger:!0,separator:t.length>0}),t})()},onAction:l,onClose:()=>o(null)})})]}const Da="_cell_12zrv_3",Ta="_editing_12zrv_11",La="_cellContent_12zrv_16",Ra="_input_12zrv_27";var Pa=$("<input type=checkbox>"),Aa=$("<select><option value>--"),Oa=$("<option>"),Ma=$("<input type=text>"),Wa=$("<input type=number>"),Va=$("<input type=date>"),Ua=$("<td>"),za=$("<div>");function Ba(e){const[n,i]=t(""),[o,a]=t(!1);let s;const l=()=>e.record.data[e.column.name]??"",d=()=>{e.isEditing()||(i(String(l())),a(!1),e.onStartEdit())},c=()=>{const t=l();switch(e.column.type){case"checkbox":return t?"âœ“":"";case"select":case"multi_select":case"number":default:return String(t);case"date":return t?new Date(t).toLocaleDateString():""}},u=()=>{!o()&&e.isEditing()&&e.onSave(n())},p=()=>s?s instanceof HTMLInputElement&&"checkbox"===s.type?String(s.checked):s.value:n(),g=()=>{i(p()),u()},h=()=>{i(p()),o()?a(!1):u()},v=t=>{"Enter"!==t.key&&"Tab"!==t.key||i(p()),(t=>{"Enter"!==t.key||t.shiftKey?"Escape"===t.key?(t.preventDefault(),a(!0),e.onCancel()):"Tab"===t.key&&u():(t.preventDefault(),u())})(t)},_=e=>{s=e,setTimeout(()=>{e.focus(),e instanceof HTMLInputElement&&"text"===e.type&&e.select()},0)};return(f=Ua()).$$click=d,b(f,r(C,{get when(){return e.isEditing()},get fallback(){return e=za(),b(e,c),k(()=>y(e,La)),e;var e},get children(){return(()=>{const t=n();switch(e.column.type){case"checkbox":return(d=Pa()).$$keydown=v,d.addEventListener("change",g),O(_,d),d.checked="true"===t,k(()=>y(d,Ra)),d;case Re:return e.column.options&&e.column.options.length>0?((l=Aa()).firstChild,l.$$keydown=v,l.addEventListener("blur",h),l.addEventListener("change",g),O(_,l),l.value=t,b(l,r(E,{get each(){return e.column.options},children:e=>{return t=Oa(),b(t,()=>e.name),k(()=>t.value=e.id),t;var t}}),null),k(()=>y(l,Ra)),l):((s=Ma()).$$keydown=v,s.addEventListener("blur",h),O(_,s),s.value=t,k(()=>y(s,Ra)),s);case"number":return(a=Wa()).$$keydown=v,a.addEventListener("blur",h),O(_,a),a.value=t,k(()=>y(a,Ra)),a;case"date":return(o=Va()).$$keydown=v,o.addEventListener("blur",h),O(_,o),o.value=t,k(()=>y(o,Ra)),o;default:return(i=Ma()).$$keydown=v,i.addEventListener("blur",h),O(_,i),i.value=t,k(()=>y(i,Ra)),i}var i,o,a,s,l,d})()}})),k(()=>y(f,`${Da}${e.isEditing()?` ${Ta}`:""}`)),f;var f}m(["keydown","click"]);const Ha="_addColumnCell_emrrp_3",Fa="_addColumnWrapper_emrrp_8",ja="_addColumnBtn_emrrp_13",qa="_addColumnDropdown_emrrp_34",Ga="_columnNameInput_emrrp_51",Ka="_columnTypeSelect_emrrp_52",Ja="_addColumnActions_emrrp_68",Xa="_addColumnConfirm_emrrp_74",Ya="_addColumnCancel_emrrp_75";var Za=$("<div><input type=text autofocus><select></select><div><button></button><button>"),Qa=$("<th><div><button>+"),es=$("<option>");const ts=[{type:"text",labelKey:"table.typeText"},{type:"number",labelKey:"table.typeNumber"},{type:"checkbox",labelKey:"table.typeCheckbox"},{type:"date",labelKey:"table.typeDate"},{type:"select",labelKey:"table.typeSelect"},{type:"url",labelKey:"table.typeUrl"},{type:"email",labelKey:"table.typeEmail"}];function ns(e){const{t:n}=fe(),[i,o]=t(!1),[a,s]=t(""),[l,d]=t("text"),c=()=>{const t=a().trim();if(!t)return;const n={name:t,type:l(),required:!1};e.onAddColumn(n),s(""),d("text"),o(!1)};return u=Qa(),p=u.firstChild,(g=p.firstChild).$$click=()=>o(!i()),b(p,r(C,{get when(){return i()},get children(){var e=Za(),t=e.firstChild,i=t.nextSibling,u=i.nextSibling,p=u.firstChild,g=p.nextSibling;return t.$$input=e=>s(e.target.value),i.addEventListener("change",e=>d(e.target.value)),b(i,r(E,{each:ts,children:e=>{return t=es(),b(t,()=>n(e.labelKey)||e.type),k(()=>t.value=e.type),t;var t}})),p.$$click=c,b(p,()=>n("common.confirm")||"Add"),g.$$click=()=>o(!1),b(g,()=>n("common.cancel")||"Cancel"),k(r=>{var o=qa,a=n("table.columnName")||"Column Name",s=Ga,l=Ka,d=Ja,c=Xa,h=Ya;return o!==r.e&&y(e,r.e=o),a!==r.t&&N(t,"placeholder",r.t=a),s!==r.a&&y(t,r.a=s),l!==r.o&&y(i,r.o=l),d!==r.i&&y(u,r.i=d),c!==r.n&&y(p,r.n=c),h!==r.s&&y(g,r.s=h),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),k(()=>t.value=a()),k(()=>i.value=l()),e}}),null),k(e=>{var t=Ha,r=Fa,i=ja,o=n("table.addColumn")||"Add Column";return t!==e.e&&y(u,e.e=t),r!==e.t&&y(p,e.t=r),i!==e.a&&y(g,e.a=i),o!==e.o&&N(g,"title",e.o=o),e},{e:void 0,t:void 0,a:void 0,o:void 0}),u;var u,p,g}m(["click","input"]);var rs=$("<th>"),is=$("<tr><td>+ "),os=$("<span> "),as=$("<div>"),ss=$("<div><button>"),ls=$("<div><div><table><thead><tr><th></th></tr></thead><tbody>"),ds=$("<span>*"),cs=$("<td><button>âœ•"),us=$("<tr><td>");function ps(e){const{t:n}=fe(),[i,o]=t(null),[a,s]=t(null),l=()=>{e.onAddRecord&&e.columns.length>0&&e.onAddRecord({})},d=(e,t)=>{e.dataTransfer?.setData(Ea,t),e.dataTransfer&&(e.dataTransfer.effectAllowed="move")},c=e=>{e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")},u=(e,t)=>{s({recordId:t,x:e.clientX,y:e.clientY})},p=t=>{const n=a();if(n){switch(t){case"open":e.onOpenRecord?.(n.recordId);break;case"duplicate":e.onDuplicateRecord?.(n.recordId);break;case"delete":e.onDeleteRecord?.(n.recordId)}s(null)}};return g=ls(),h=g.firstChild,v=h.firstChild,_=v.firstChild,f=_.firstChild,m=f.firstChild,w=_.nextSibling,b(f,r(C,{get when(){return e.onDeleteRecord},get children(){var e=rs();return k(()=>y(e,va)),e}}),null),b(f,r(E,{get each(){return e.columns},children:e=>{return t=rs(),b(t,()=>e.name,null),b(t,r(C,{get when(){return e.required},get children(){var e=ds();return k(()=>y(e,ma)),e}}),null),k(()=>y(t,ua)),t;var t}}),null),b(f,r(C,{get when(){return e.onAddColumn},children:e=>r(ns,{get onAddColumn(){return e()}})}),null),b(w,r(E,{get each(){return e.records},children:t=>{return a=us(),s=a.firstChild,a.addEventListener("dragover",c),b(s,r(wn,{get rowId(){return t.id},onDragStart:d,onContextMenu:u})),b(a,r(C,{get when(){return e.onDeleteRecord},get children(){var r=cs(),i=r.firstChild;return i.$$click=()=>e.onDeleteRecord?.(t.id),k(e=>{var t=ga,o=ha,a=n("table.deleteRecord")||"Delete";return t!==e.e&&y(r,e.e=t),o!==e.t&&y(i,e.t=o),a!==e.a&&N(i,"title",e.a=a),e},{e:void 0,t:void 0,a:void 0}),r}}),null),b(a,r(E,{get each(){return e.columns},children:n=>r(Ba,{record:t,column:n,isEditing:()=>i()?.recordId===t.id&&i()?.columnId===n.name,onStartEdit:()=>o({recordId:t.id,columnId:n.name}),onSave:r=>((t,n,r)=>{const i=e.columns.find(e=>e.name===n);if(!i||!e.onUpdateRecord)return void o(null);const a=e.records.find(e=>e.id===t);if(!a)return void o(null);const s={...a.data};s[i.name]=r,e.onUpdateRecord(t,s),o(null)})(t.id,n.name,r),onCancel:()=>o(null)})}),null),k(e=>{var t=pa,n=fa;return t!==e.e&&y(a,e.e=t),n!==e.t&&y(s,e.t=n),e},{e:void 0,t:void 0}),a;var a,s}}),null),b(w,r(C,{get when(){return x(()=>!!e.onAddRecord)()&&e.columns.length>0},get children(){var t=is(),r=t.firstChild;return r.firstChild,r.$$click=l,b(r,()=>n("table.addRecord")||"New",null),k(n=>{var i=wa,o=ba,a=e.columns.length+1+(e.onDeleteRecord?1:0)+(e.onAddColumn?1:0);return i!==n.e&&y(t,n.e=i),o!==n.t&&y(r,n.t=o),a!==n.a&&N(r,"colspan",n.a=a),n},{e:void 0,t:void 0,a:void 0}),t}}),null),b(g,r(C,{get when(){return 0===e.columns.length},get children(){var t=as();return b(t,()=>n("table.noColumns"),null),b(t,r(C,{get when(){return e.onAddColumn},get children(){var e=os();return e.firstChild,b(e,()=>n("table.addColumnFirst")||"Click + to add a column.",null),e}}),null),k(()=>y(t,ka)),t}}),null),b(g,r(C,{get when(){return e.hasMore},get children(){var t=ss(),r=t.firstChild;return r.$$click=()=>e.onLoadMore?.(),b(r,()=>n("table.loadMore")),k(()=>y(t,ya)),t}}),null),b(g,r(C,{get when(){return a()},children:t=>r(Rn,{get position(){return{x:t().x,y:t().y}},get actions(){return(()=>{const t=[];return e.onOpenRecord&&t.push({id:"open",label:n("table.openRecord")||"Open"}),e.onDuplicateRecord&&t.push({id:"duplicate",label:n("table.duplicateRecord")||"Duplicate",shortcut:"âŒ˜D"}),e.onDeleteRecord&&t.push({id:"delete",label:n("table.deleteRecord")||"Delete",shortcut:"âŒ«",danger:!0,separator:t.length>0}),t})()},onAction:p,onClose:()=>s(null)})}),null),k(e=>{var t=sa,n=la,r=da,i=ca,o=_a;return t!==e.e&&y(g,e.e=t),n!==e.t&&y(h,e.t=n),r!==e.a&&y(v,e.a=r),i!==e.o&&y(f,e.o=i),o!==e.i&&y(m,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),g;var g,h,v,_,f,m,w}function gs(e,t,n,r){if(e.data[t]===n||!r)return;const i={...e.data,[t]:n};r(e.id,i)}function hs(e){"Enter"===e.key&&e.currentTarget.blur()}function vs(e,t){if(!t)return"";const n=e.data[t];return null!=n?String(n):""}function _s(e,t){const n=t[0];return n?vs(e,n.name):""}m(["click"]);const fs="_grid_b2hmw_1",ms="_card_b2hmw_8",ws="_cardHeader_b2hmw_20",bs="_cardBody_b2hmw_28",ks="_field_b2hmw_34",ys="_fieldName_b2hmw_39",$s="_titleInput_b2hmw_46",Cs="_fieldValueInput_b2hmw_63";var xs=$("<div>"),Ss=$("<div><strong><input type=text>"),Is=$("<div><span>:</span><input type=text>");function Es(e){const{t:t}=fe();return n=xs(),b(n,r(E,{get each(){return e.records},children:n=>r(Na,{get recordId(){return n.id},get onDelete(){return e.onDeleteRecord},get onDuplicate(){return e.onDuplicateRecord},get onOpen(){return e.onOpenRecord},get class(){return ms},get children(){return[(o=Ss(),a=o.firstChild.firstChild,K(a,"keydown",hs,!0),a.addEventListener("blur",t=>e.columns[0]&&gs(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),k(e=>{var n=ws,r=t("table.untitled")||"Untitled",i=$s;return n!==e.e&&y(o,e.e=n),r!==e.t&&N(a,"placeholder",e.t=r),i!==e.a&&y(a,e.a=i),e},{e:void 0,t:void 0,a:void 0}),k(()=>a.value=_s(n,e.columns)),o),(i=xs(),b(i,r(E,{get each(){return e.columns.slice(1,4)},children:t=>{return r=Is(),i=r.firstChild,o=i.firstChild,a=i.nextSibling,b(i,()=>t.name,o),K(a,"keydown",hs,!0),a.addEventListener("blur",r=>gs(n,t.name,r.target.value,e.onUpdateRecord)),k(e=>{var t=ks,n=ys,o=Cs;return t!==e.e&&y(r,e.e=t),n!==e.t&&y(i,e.t=n),o!==e.a&&y(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),k(()=>a.value=vs(n,t.name)),r;var r,i,o,a}})),k(()=>y(i,bs)),i)];var i,o,a}})})),k(()=>y(n,fs)),n;var n}m(["keydown"]);const Ns="_gallery_59dut_1",Ds="_card_59dut_8",Ts="_imageContainer_59dut_23",Ls="_image_59dut_23",Rs="_imagePlaceholder_59dut_38",Ps="_cardContent_59dut_43",As="_cardHeader_59dut_47",Os="_cardBody_59dut_54",Ms="_field_59dut_58",Ws="_fieldName_59dut_64",Vs="_titleInput_59dut_70",Us="_fieldValueInput_59dut_87";var zs=$("<div>"),Bs=$("<div><div><strong><input type=text></strong></div><div>"),Hs=$("<img>"),Fs=$("<div><span>:</span><input type=text>");function js(e){const{t:t}=fe();return n=zs(),b(n,r(E,{get each(){return e.records},children:n=>{const i=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return r(Na,{get recordId(){return n.id},get onDelete(){return e.onDeleteRecord},get onDuplicate(){return e.onDuplicateRecord},get onOpen(){return e.onOpenRecord},get class(){return Ds},get children(){return[r(C,{when:i,children:i=>{return o=zs(),b(o,r(C,{get when(){return n.data[i().name]},get fallback(){return e=zs(),b(e,()=>t("table.noImage")),k(()=>y(e,Rs)),e;var e},get children(){var t=Hs();return k(r=>{var o=String(n.data[i().name]),a=_s(n,e.columns)||"Record",s=Ls;return o!==r.e&&N(t,"src",r.e=o),a!==r.t&&N(t,"alt",r.t=a),s!==r.a&&y(t,r.a=s),r},{e:void 0,t:void 0,a:void 0}),t}})),k(()=>y(o,Ts)),o;var o}}),(o=Bs(),a=o.firstChild,s=a.firstChild.firstChild,l=a.nextSibling,K(s,"keydown",hs,!0),s.addEventListener("blur",t=>e.columns[0]&&gs(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),b(l,r(E,{get each(){return e.columns.slice(1,3)},children:t=>{return r=Fs(),i=r.firstChild,o=i.firstChild,a=i.nextSibling,b(i,()=>t.name,o),K(a,"keydown",hs,!0),a.addEventListener("blur",r=>gs(n,t.name,r.target.value,e.onUpdateRecord)),k(e=>{var t=Ms,n=Ws,o=Us;return t!==e.e&&y(r,e.e=t),n!==e.t&&y(i,e.t=n),o!==e.a&&y(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),k(()=>a.value=vs(n,t.name)),r;var r,i,o,a}})),k(e=>{var n=Ps,r=As,i=t("table.untitled")||"Untitled",d=Vs,c=Os;return n!==e.e&&y(o,e.e=n),r!==e.t&&y(a,e.t=r),i!==e.a&&N(s,"placeholder",e.a=i),d!==e.o&&y(s,e.o=d),c!==e.i&&y(l,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),k(()=>s.value=_s(n,e.columns)),o)];var o,a,s,l}})}})),k(()=>y(n,Ns)),n;var n}m(["keydown"]);const qs="_board_riuur_1",Gs="_noGroup_riuur_7",Ks="_columns_riuur_16",Js="_column_riuur_16",Xs="_columnHeader_riuur_31",Ys="_columnName_riuur_38",Zs="_columnCount_riuur_45",Qs="_cards_riuur_53",el="_card_riuur_53",tl="_cardHeader_riuur_68",nl="_cardBody_riuur_80",rl="_field_riuur_84",il="_fieldName_riuur_90",ol="_titleInput_riuur_95",al="_fieldValueInput_riuur_112";var sl=$("<div>"),ll=$("<div><div><span></span><span></span></div><div>"),dl=$("<div><strong><input type=text>"),cl=$("<div><span>:</span><input type=text>");function ul(e){const{t:t}=fe(),n=l(()=>e.columns.find(e=>e.type===Re||"multi_select"===e.type)),i=l(()=>{const r=n();if(!r)return[{name:"All Records",records:e.records,fromOptions:!0}];const i={};return r.options&&r.options.forEach(e=>{i[e.id]={name:e.name,records:[],fromOptions:!0}}),i.__none__={name:t("table.noGroup")||"No Group",records:[],fromOptions:!0},e.records.forEach(e=>{const t=e.data[r.name];t&&"string"==typeof t?(i[t]||(i[t]={name:t,records:[]}),i[t].records.push(e)):i.__none__?.records.push(e)}),Object.values(i).filter(e=>e.records.length>0||e.fromOptions)});return o=sl(),b(o,r(C,{get when(){return n()},get fallback(){return e=sl(),b(e,()=>t("table.addSelectColumn")),k(()=>y(e,Gs)),e;var e},get children(){var o=sl();return b(o,r(E,{get each(){return i()},children:i=>{return o=ll(),a=o.firstChild,s=a.firstChild,l=s.nextSibling,d=a.nextSibling,b(s,()=>i.name),b(l,()=>i.records.length),b(d,r(E,{get each(){return i.records},children:i=>r(Na,{get recordId(){return i.id},get onDelete(){return e.onDeleteRecord},get onDuplicate(){return e.onDuplicateRecord},get onOpen(){return e.onOpenRecord},get class(){return el},get children(){return[(a=dl(),s=a.firstChild.firstChild,K(s,"keydown",hs,!0),s.addEventListener("blur",t=>e.columns[0]&&gs(i,e.columns[0].name,t.target.value,e.onUpdateRecord)),k(e=>{var n=tl,r=t("table.untitled")||"Untitled",i=ol;return n!==e.e&&y(a,e.e=n),r!==e.t&&N(s,"placeholder",e.t=r),i!==e.a&&y(s,e.a=i),e},{e:void 0,t:void 0,a:void 0}),k(()=>s.value=_s(i,e.columns)),a),(o=sl(),b(o,r(E,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==n()?.name)},children:t=>{return n=cl(),r=n.firstChild,o=r.firstChild,a=r.nextSibling,b(r,()=>t.name,o),K(a,"keydown",hs,!0),a.addEventListener("blur",n=>gs(i,t.name,n.target.value,e.onUpdateRecord)),k(e=>{var t=rl,i=il,o=al;return t!==e.e&&y(n,e.e=t),i!==e.t&&y(r,e.t=i),o!==e.a&&y(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),k(()=>a.value=vs(i,t.name)),n;var n,r,o,a}})),k(()=>y(o,nl)),o)];var o,a,s}})})),k(e=>{var t=Js,n=Xs,r=Ys,i=Zs,c=Qs;return t!==e.e&&y(o,e.e=t),n!==e.t&&y(a,e.t=n),r!==e.a&&y(s,e.a=r),i!==e.o&&y(l,e.o=i),c!==e.i&&y(d,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,a,s,l,d}})),k(()=>y(o,Ks)),o}})),k(()=>y(o,qs)),o;var o}m(["keydown"]);const pl="_container_h2cgk_3",gl="_tabs_h2cgk_7",hl="_tab_h2cgk_7",vl="_active_h2cgk_35",_l="_icon_h2cgk_41",fl="_name_h2cgk_52",ml="_defaultBadge_h2cgk_58",wl="_addWrapper_h2cgk_67",bl="_addButton_h2cgk_71",kl="_dropdown_h2cgk_93",yl="_overlay_h2cgk_125",$l="_contextMenu_h2cgk_131",Cl="_deleteAction_h2cgk_158";var xl=$("<div data-testid=view-type-menu><button data-testid=view-type-table><span></span></button><button data-testid=view-type-list><span></span></button><button data-testid=view-type-gallery><span></span></button><button data-testid=view-type-board><span>"),Sl=$("<div>"),Il=$("<div><div><div><button data-testid=add-view-button>"),El=$("<span>"),Nl=$("<button><span></span><span>"),Dl=$("<div><button>");const Tl={table:re,board:ne,gallery:te,list:ee,calendar:Q};function Ll(){const{t:e}=fe(),{views:n,activeViewId:i,setActiveViewId:o,createView:a,deleteView:s}=rt(),[l,d]=t(!1),[c,u]=t(null),[p,g]=t(null),h=t=>{const n=e("table.newView")||"New View";a(n,t),d(!1)},v=()=>{const e=c();e&&s(e.id),u(null),g(null)},_=()=>{d(!1),u(null),g(null)};return f=Il(),m=f.firstChild,w=m.firstChild,$=w.firstChild,b(m,r(E,{get each(){return n()},children:t=>{const n=Tl[t.type]||re;return a=Nl(),s=a.firstChild,l=s.nextSibling,a.$$contextmenu=e=>((e,t)=>{e.preventDefault(),u(t),g({x:e.clientX,y:e.clientY})})(e,t),a.$$click=()=>{return e=t.id,void o(e);var e},b(s,r(n,{})),b(l,()=>t.name),b(a,r(C,{get when(){return t.default},get children(){var t=El();return b(t,()=>e("table.defaultView")||"Default"),k(()=>y(t,ml)),t}}),null),k(e=>{var n=hl,r={[`${vl}`]:t.id===i()},o=t.name,d=_l,c=fl;return n!==e.e&&y(a,e.e=n),e.t=M(a,r,e.t),o!==e.a&&N(a,"title",e.a=o),d!==e.o&&y(s,e.o=d),c!==e.i&&y(l,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),a;var a,s,l}}),w),$.$$click=()=>d(!l()),b($,r(j,{})),b(w,r(C,{get when(){return l()},get children(){var t=xl(),n=t.firstChild,i=n.firstChild,o=n.nextSibling,a=o.firstChild,s=o.nextSibling,l=s.firstChild,d=s.nextSibling,c=d.firstChild;return n.$$click=()=>h("table"),b(i,r(re,{})),b(n,()=>e("table.table"),null),o.$$click=()=>h("list"),b(a,r(ee,{})),b(o,()=>e("table.list"),null),s.$$click=()=>h("gallery"),b(l,r(te,{})),b(s,()=>e("table.gallery"),null),d.$$click=()=>h("board"),b(c,r(ne,{})),b(d,()=>e("table.board"),null),k(e=>{var n=kl,r=_l,o=_l,s=_l,d=_l;return n!==e.e&&y(t,e.e=n),r!==e.t&&y(i,e.t=r),o!==e.a&&y(a,e.a=o),s!==e.o&&y(l,e.o=s),d!==e.i&&y(c,e.i=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t}}),null),b(f,r(C,{get when(){return p()},children:t=>r(C,{get when(){return c()},get children(){return[(i=Sl(),i.$$click=_,k(()=>y(i,yl)),i),(n=Dl(),r=n.firstChild,r.$$click=v,b(r,()=>e("common.delete")),k(e=>{var i=$l,o=`${t().x}px`,a=`${t().y}px`,s=Cl;return i!==e.e&&y(n,e.e=i),o!==e.t&&D(n,"left",e.t=o),a!==e.a&&D(n,"top",e.a=a),s!==e.o&&y(r,e.o=s),e},{e:void 0,t:void 0,a:void 0,o:void 0}),n)];var n,r,i}})}),null),b(f,r(C,{get when(){return l()},get children(){var e=Sl();return e.$$click=_,k(()=>y(e,yl)),e}}),null),k(t=>{var n=pl,r=gl,i=wl,o=bl,a=e("table.newView")||"New View";return n!==t.e&&y(f,t.e=n),r!==t.t&&y(m,t.t=r),i!==t.a&&y(w,t.a=i),o!==t.o&&y($,t.o=o),a!==t.i&&N($,"title",t.i=a),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),f;var f,m,w,$}m(["click","contextmenu"]);const Rl="_preview_1ozpw_1";var Pl=$('<div role=region aria-label="Markdown preview">');const Al=new ue({html:!0,linkify:!0,typographer:!0});Al.core.ruler.after("inline","task_list",e=>{const t=e.tokens;for(let n=0;n<t.length;n++){const r=t[n];if(r&&"list_item_open"===r.type){const i=t[n+2];if(i&&"inline"===i.type&&i.children){const t=i.children[0];if(t&&"text"===t.type&&t.content){const n=t.content.match(/^\[([ xX])\]\s*/);if(n&&n[1]){r.attrSet("class","task-list-item"),r.attrSet("data-checked","x"===n[1].toLowerCase()?"true":"false"),t.content=t.content.slice(n[0].length);const o=new e.Token("checkbox","",0);o.attrSet("checked","x"===n[1].toLowerCase()?"true":"false"),i.children.unshift(o)}}}}}return!0}),Al.renderer.rules.checkbox=(e,t)=>{const n=e[t];if(!n)return"";return`<input type="checkbox" class="task-checkbox" disabled${"true"===n.attrGet("checked")?" checked":""}> `};const Ol=Al.renderer.rules.image||function(e,t,n,r,i){return i.renderToken(e,t,n)};function Ml(e){const t=t=>{const n=t.target.closest("a");if(!n)return;const r=n.getAttribute("href");return r?(e=>e.startsWith("/")&&!e.startsWith("/api/"))(r)&&e.onNavigate?(t.preventDefault(),void e.onNavigate(r)):void((r.startsWith("http://")||r.startsWith("https://"))&&(t.preventDefault(),window.open(r,"_blank","noopener,noreferrer"))):void 0};return(n=Pl()).$$click=t,k(t=>{var r=Rl,i=(()=>{const t=Al.render(e.content,{assetUrls:e.assetUrls});return ie.sanitize(t)})();return r!==t.e&&y(n,t.e=r),i!==t.t&&(n.innerHTML=t.t=i),t},{e:void 0,t:void 0}),n;var n}Al.renderer.rules.image=(e,t,n,r,i)=>{const o=e[t];if(!o)return Ol(e,t,n,r,i);const a=o.attrIndex("src"),s=o.attrs,l=r?.assetUrls,d=s?.[a];if(d&&l){const e=d[1];if(!e.includes("://")&&!e.startsWith("/")){const t=l[e];t&&(d[1]=t)}}return Ol(e,t,n,r,i)},m(["click"]);var Wl=$("<span>â— "),Vl=$("<span>âŸ³ "),Ul=$("<span>âœ“ "),zl=$("<div><input type=text><div>"),Bl=$("<li>"),Hl=$("<div><h3></h3><ul>"),Fl=$("<div>"),jl=$("<div><div><div><h4></h4><span> â€¢ </span></div><button></button></div><div>"),ql=$("<li><div><span></span><span></span></div><div> &lt;<!>&gt;");const Gl=A(()=>ge(()=>import("./Editor-vtYC6vkG.js"),__vite__mapDeps([13,1,3,14])));function Kl(){const{t:e}=fe(),n=p(),i=P(),{user:o,token:a,wsApi:s}=Le(),{selectedNodeId:d,selectedNodeData:u,setSavingNodeId:g,setLoadError:h,setSaveError:v,loadNode:_}=Ge(),{title:f,content:m,hasUnsavedChanges:w,autoSaveStatus:$,assetUrls:S,showHistory:I,history:D,flushAutoSave:T,handleTitleChange:L,handleContentChange:A,linkedNodeTitles:O}=et(),{records:W,hasMore:V,loadMoreRecords:U,addRecord:z,updateRecord:B,deleteRecord:H,views:F,activeViewId:j}=rt(),[q,G]=t(null),[K,J]=t(null),X=l(()=>F().find(e=>e.id===j())),Y=l(()=>X()?.type||"table");c(()=>{const e=Ue(i.nodeId);e&&e!==d()&&(T(),_(e),G(null),J(null))}),c(()=>{if(I()){if(D().length>0&&!K()){const e=d(),t=D()[0];e&&t&&te(e,t)}}else G(null),J(null)});const[Z,Q]=t(!1);async function ee(t){const n=d(),r=u(),i=s();if(n&&r&&i)try{g(n);const e=[...r.properties||[],t];await i.nodes.table.updateTable(n,{title:r.title,properties:e}),await _(n),v(null)}catch(o){v(`${e("errors.failedToSave")}: ${o}`)}finally{g(null)}}async function te(t,n){const r=s();if(r)try{Q(!0);const e=await r.nodes.history.getNodeVersion(t,n.hash),i=o()?.workspace_id||"";G(Xe(e.content||"",i)),J(n)}catch(i){h(`${e("errors.failedToLoad")}: ${i}`)}finally{Q(!1)}}const ne=e=>{T();const t=o(),r=t?.workspace_id,i=t?.workspace_name;r&&n(He(r,i,e))};return r(C,{get when(){return d()},get children(){var t=Fl();return b(t,r(C,{get when(){return!K()},get children(){var t=zl(),n=t.firstChild,i=n.nextSibling;return n.$$input=e=>L(e.target.value),b(i,r(C,{get when(){return x(()=>!!w())()&&"idle"===$()},get children(){var t=Wl();return t.firstChild,b(t,()=>e("editor.unsaved"),null),k(()=>y(t,No)),t}}),null),b(i,r(C,{get when(){return"saving"===$()},get children(){var t=Vl();return t.firstChild,b(t,()=>e("common.saving"),null),k(()=>y(t,Do)),t}}),null),b(i,r(C,{get when(){return"saved"===$()},get children(){var t=Ul();return t.firstChild,b(t,()=>e("common.saved"),null),k(()=>y(t,To)),t}}),null),k(r=>{var o=Io,a=e("editor.titlePlaceholder")||"Title",s=Lo,l=Eo;return o!==r.e&&y(t,r.e=o),a!==r.t&&N(n,"placeholder",r.t=a),s!==r.a&&y(n,r.a=s),l!==r.o&&y(i,r.o=l),r},{e:void 0,t:void 0,a:void 0,o:void 0}),k(()=>n.value=f()),t}}),null),b(t,r(C,{get when(){return I()},get children(){var t=Hl(),n=t.firstChild,i=n.nextSibling;return b(n,()=>e("editor.versionHistory")),b(i,r(E,{get each(){return D()},children:e=>{return t=ql(),n=t.firstChild,r=n.firstChild,i=r.nextSibling,o=n.nextSibling,a=o.firstChild,(s=a.nextSibling).nextSibling,t.$$click=()=>{const t=d();t&&te(t,e)},b(r,()=>new Date(e.timestamp).toLocaleString()),b(i,()=>e.hash.substring(0,7)),b(o,()=>e.author_name,a),b(o,()=>e.author_email,s),k(a=>{var s=Uo,l={[zo]:K()?.hash===e.hash},d=Bo,c=Ho,u=Fo,p=jo;return s!==a.e&&y(t,a.e=s),a.t=M(t,l,a.t),d!==a.a&&y(n,a.a=d),c!==a.o&&y(r,a.o=c),u!==a.i&&y(i,a.i=u),p!==a.n&&y(o,a.n=p),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),t;var t,n,r,i,o,a,s}}),null),b(i,r(C,{get when(){return 0===D().length},get children(){var t=Bl();return b(t,()=>e("editor.noHistory")),k(()=>y(t,Uo)),t}}),null),k(e=>{var n=Wo,r=Vo;return n!==e.e&&y(t,e.e=n),r!==e.t&&y(i,e.t=r),e},{e:void 0,t:void 0}),t}}),null),b(t,r(C,{get when(){return!K()},get children(){var t=Fl();return b(t,r(C,{get when(){return u()?.has_page},get children(){return r(R,{get fallback(){return t=Fl(),b(t,()=>e("common.loading")),k(()=>y(t,So)),t;var t},get children(){return r(Gl,{get content(){return m()},get nodeId(){return d()??void 0},get assetUrls(){return S()},get linkedNodeTitles(){return O()},onChange:A,get wsId(){return o()?.workspace_id},getToken:()=>a(),onAssetUploaded:()=>{const e=d();e&&_(e)},onError:v,onNavigateToNode:ne})}})}}),null),b(t,r(C,{get when(){return u()?.has_table},get children(){var e=Fl();return b(e,r(Ll,{}),null),b(e,r(C,{get when(){return"table"===Y()},get children(){return r(ps,{get tableId(){return d()||""},get columns(){return u()?.properties||[]},get records(){return W()},onAddRecord:z,onUpdateRecord:B,onDeleteRecord:H,onAddColumn:ee,onLoadMore:U,get hasMore(){return V()}})}}),null),b(e,r(C,{get when(){return"list"===Y()},get children(){return r(Es,{get records(){return W()},get columns(){return u()?.properties||[]},onUpdateRecord:B,onDeleteRecord:H})}}),null),b(e,r(C,{get when(){return"gallery"===Y()},get children(){return r(js,{get records(){return W()},get columns(){return u()?.properties||[]},onUpdateRecord:B,onDeleteRecord:H})}}),null),b(e,r(C,{get when(){return"board"===Y()},get children(){return r(ul,{get records(){return W()},get columns(){return u()?.properties||[]},onUpdateRecord:B,onDeleteRecord:H})}}),null),k(()=>y(e,Po)),e}}),null),k(()=>y(t,Ro)),t}}),null),b(t,r(C,{get when(){return x(()=>null!==q())()&&K()},get children(){var t=jl(),i=t.firstChild,o=i.firstChild,a=o.firstChild,s=a.nextSibling,l=s.firstChild,d=o.nextSibling,c=i.nextSibling;return b(a,()=>e("editor.versionPreview")),b(s,()=>K()?.author_name,l),b(s,()=>new Date(K()?.timestamp||0).toLocaleString(),null),d.$$click=()=>{G(null),J(null)},b(d,()=>e("editor.closePreview")),b(c,r(Ml,{get content(){return q()||""},get assetUrls(){return S()},onNavigate:n})),k(e=>{var n=Ko,r=Jo,a=Xo,l=Yo,u=Zo,p=Qo;return n!==e.e&&y(t,e.e=n),r!==e.t&&y(i,e.t=r),a!==e.a&&y(o,e.a=a),l!==e.o&&y(s,e.o=l),u!==e.i&&y(d,e.i=u),p!==e.n&&y(c,e.n=p),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),t}}),null),k(()=>y(t,xo)),t}})}m(["input","click"]);const Jl=e=>r(qe,{get children(){return r(Qe,{get children(){return r(nt,{get children(){return e.children}})}})}});var Xl=$("<div style=padding:2rem;text-align:center>Loading..."),Yl=$("<div style=padding:2rem;text-align:center><h1>Page Not Found</h1><p>The path <code></code> doesn't exist.");const Zl=A(()=>ge(()=>import("./Auth-CmLSGrZy.js"),__vite__mapDeps([15,1,2,3,16]))),Ql=A(()=>ge(()=>import("./Privacy-BD64DTD1.js"),__vite__mapDeps([17,1,18]))),ed=A(()=>ge(()=>import("./Terms-D7Pv_YDh.js"),__vite__mapDeps([19,1,18]))),td=A(()=>ge(()=>import("./Onboarding-mWmeZIy8.js"),__vite__mapDeps([20,1,3])));function nd(){return Xl()}function rd(){const e=window.location.pathname;return console.error("404: Route not found:",e),t=Yl(),n=t.firstChild.nextSibling.firstChild.nextSibling,b(n,e),b(t,r(de,{href:"/login",children:"Go to login"}),null),t;var t,n}const id=e=>{const{user:t,ready:n,api:i}=Le();return r(C,{get when(){return n()},get fallback(){return r(nd,{})},get children(){return r(C,{get when(){return t()},get fallback(){return r(L,{href:"/login"})},get children(){return r(st,{api:i,get children(){return e.children}})}})}})};function od(){const{user:e,login:t,ready:n}=Le();return r(le,{get fallback(){return r(nd,{})},get children(){return[r(se,{get when(){return x(()=>!!n())()&&e()?.workspace_id},get children(){return r(L,{get href(){return`/w/@${e()?.workspace_id}`}})}}),r(se,{get when(){return x(()=>!(!n()||!e()))()&&!e()?.workspace_id},get children(){return r(L,{href:"/onboarding"})}}),r(se,{get when(){return x(()=>!!n())()&&!e()},get children(){return r(R,{get fallback(){return r(nd,{})},get children(){return r(Zl,{onLogin:t})}})}})]}})}function ad(){const{user:e,ready:t}=Le();return r(le,{get fallback(){return r(nd,{})},get children(){return[r(se,{get when(){return x(()=>!!t())()&&e()?.workspace_id},get children(){return r(L,{get href(){return`/w/@${e()?.workspace_id}`}})}}),r(se,{get when(){return x(()=>!(!t()||!e()))()&&!e()?.workspace_id},get children(){return r(L,{href:"/onboarding"})}}),r(se,{get when(){return x(()=>!!t())()&&!e()},get children(){return r(L,{href:"/login"})}})]}})}const sd=e=>r(id,{get children(){return r(R,{get fallback(){return r(nd,{})},get children(){return r(vn,{get children(){return e.children}})}})}}),ld=e=>r(id,{get children(){return r(R,{get fallback(){return r(nd,{})},get children(){return r(Jl,{get children(){return e.children}})}})}});function dd(){return r(ae,{explicitLinks:!0,get children(){return[r(oe,{path:"/login",component:od}),r(oe,{path:"/onboarding",component:()=>r(id,{get children(){return r(R,{get fallback(){return r(nd,{})},get children(){return r(td,{})}})}})}),r(oe,{path:"/privacy",component:()=>r(R,{get fallback(){return r(nd,{})},get children(){return r(Ql,{})}})}),r(oe,{path:"/terms",component:()=>r(R,{get fallback(){return r(nd,{})},get children(){return r(ed,{})}})}),r(oe,{path:"/settings",component:sd,get children(){return[r(oe,{path:"/",component:hn}),r(oe,{path:"/user",component:gn}),r(oe,{path:"/server",component:cn}),r(oe,{path:"/workspace/:wsId",component:un}),r(oe,{path:"/org/:orgId",component:pn})]}}),r(oe,{path:"/w/:wsId",component:ld,get children(){return r(oe,{path:"/",component:oa,get children(){return[r(oe,{path:"/",component:aa}),r(oe,{path:"/:nodeId",component:Kl})]}})}}),r(oe,{path:"/",component:ad}),r(oe,{path:"*",component:rd})]}})}function cd(){return r(vt,{get children(){return r(Te,{get children(){return[r(dd,{}),r(xt,{})]}})}})}const ud=localStorage.getItem("mddb_locale"),pd=ud&&["en","fr","de","es"].includes(ud)?ud:"en",gd=document.getElementById("app");gd&&ce(()=>r(_e,{initialLocale:pd,get children(){return r(cd,{})}}),gd);export{me as A,Rn as C,Me as O,wn as R,Oe as W,ge as _,Ve as a,We as b,ke as c,Le as d,lt as e,Ae as f,Pe as g,Ge as h,et as i,Ir as j,He as n,Fe as s,fe as u,Be as w};
//# sourceMappingURL=index-B5v3Ye1F.js.map
