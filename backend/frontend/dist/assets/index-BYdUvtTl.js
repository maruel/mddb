import{c as e,a as t,b as n,d as i,u as r,e as o,t as a,r as s,f as l,g as d,h as c,o as u,i as h,S as v,j as g,k as p,s as _,F as f,m,l as b,n as w,p as k,q as y,v as S,w as $,M as C,x,y as I,z as L,E as z,A as T,B as E,C as M,D as P,G as B,H as R,I as N,P as O,J as D,K as j,L as A,N as W,O as q,Q as U,R as F,T as H,U as V,V as G,W as K,X as Y,Y as J,Z as X,_ as Q,$ as Z,a0 as ee,a1 as te,a2 as ne,a3 as ie,a4 as re,a5 as oe,a6 as ae,a7 as se,a8 as le,a9 as de,aa as ce,ab as ue,ac as he,ad as ve}from"./vendor-DpDcc8_c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ge={},pe=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in ge)return;ge[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};async function _e(e){const t=await((e,t,n)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>pe(()=>import("./de-UfWgaL2g.js"),[]),"./dictionaries/en.ts":()=>pe(()=>import("./en-lksZFkaq.js"),[]),"./dictionaries/es.ts":()=>pe(()=>import("./es-CPnkdq9f.js"),[]),"./dictionaries/fr.ts":()=>pe(()=>import("./fr-DnKdNZbS.js"),[])}),`./dictionaries/${e}.ts`,3);return l(t.dict)}const fe=o(),me=r=>{const[o,l]=e(r.initialLocale||"en"),[d]=t(o,_e),c=a(d,s),u=e=>{const t=`errors.${e}`,n=c(t);return n&&n!==t?n:c("errors.unknown")||"An error occurred"},h=n(()=>({locale:o,setLocale:l,t:c,translateError:u}));return i(fe.Provider,{get value(){return h()},get children(){return r.children}})};function be(){const e=r(fe);if(!e)throw new Error("useI18n must be used within I18nProvider");return e}const we="_sidebarNodeWrapper_i1nam_1",ke="_childList_i1nam_2",ye="_pageItem_i1nam_13",Se="_active_i1nam_28",$e="_nodeIcon_i1nam_34",Ce="_pageTitleText_i1nam_41",xe="_expandIcon_i1nam_49",Ie="_hidden_i1nam_67",Le="_loading_i1nam_67",ze="_expanded_i1nam_72",Te="_contextMenu_i1nam_95",Ee="_contextMenuItem_i1nam_107",Me="_contextMenuDivider_i1nam_124",Pe="_hoverDeleteButton_i1nam_131";var Be=k("<div><button>üìÑ </button><button>üìä </button><div></div><button>üïê "),Re=k("<ul>"),Ne=k("<li><div><span></span><span></span><span></span><button>üóë");function Oe(t){const{t:n}=be(),[r,o]=e(0===t.depth),[a,s]=e(!1),[l,d]=e({x:0,y:0}),[k,y]=e(null),[S,$]=e(!1),[C,x]=c({}),I=()=>{const e=t.prefetchedChildren?.[t.node.id];if(e)return e;const n=k();return null!==n?n:[]},L=()=>{const e=k();if(null!==e)return e.length>0;const n=t.prefetchedChildren?.[t.node.id];return n?n.length>0:!0===t.node.has_children};u(()=>{const e=()=>{s(!1)};if(document.addEventListener("click",e),L()&&t.onFetchChildren){const e=t.prefetchedChildren?.[t.node.id];e?(y(e),z(e)):null===k()&&(async()=>{if(t.onFetchChildren&&null===k()&&!S()){$(!0);try{const e=await t.onFetchChildren(t.node.id);y(e),z(e)}catch(e){console.error("Failed to load children:",e),y([])}finally{$(!1)}}})()}return()=>document.removeEventListener("click",e)});const z=e=>{if(t.onFetchChildren)for(const n of e)C[n.id]||!0!==n.has_children||t.onFetchChildren(n.id).then(e=>{x(n.id,e)}).catch(()=>{})},T=async e=>{e.stopPropagation(),o(!r())},E=e=>{e.preventDefault(),e.stopPropagation(),d({x:e.clientX,y:e.clientY}),s(!0)};return M=Ne(),P=M.firstChild,B=P.firstChild,R=B.nextSibling,N=R.nextSibling,O=N.nextSibling,P.$$contextmenu=E,P.$$click=()=>t.onSelect(t.node),B.$$click=T,h(B,()=>S()?"‚óã":"‚ñ∂"),h(R,()=>t.node.has_table&&!t.node.has_page?"üìä":"üìÑ"),h(N,()=>t.node.title),O.$$click=e=>{e.stopPropagation(),t.onDeleteNode?.(t.node.id)},h(M,i(v,{get when(){return a()},get children(){var e=Be(),i=e.firstChild;i.firstChild;var r=i.nextSibling;r.firstChild;var o=r.nextSibling,a=o.nextSibling;return a.firstChild,e.$$click=e=>e.stopPropagation(),i.$$click=()=>{t.onCreateChildPage(t.node.id),s(!1)},h(i,()=>n("app.createSubPage"),null),r.$$click=()=>{t.onCreateChildTable(t.node.id),s(!1)},h(r,()=>n("app.createSubTable"),null),a.$$click=()=>{t.onShowHistory?.(t.node.id),s(!1)},h(a,()=>n("editor.history"),null),g(t=>{var n=Te,s=`${l().x}px`,d=`${l().y}px`,c=Ee,u=Ee,h=Me,v=Ee;return n!==t.e&&p(e,t.e=n),s!==t.t&&_(e,"left",t.t=s),d!==t.a&&_(e,"top",t.a=d),c!==t.o&&p(i,t.o=c),u!==t.i&&p(r,t.i=u),h!==t.n&&p(o,t.n=h),v!==t.s&&p(a,t.s=v),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),h(M,i(v,{get when(){return m(()=>!!r())()&&I().length>0},get children(){var e=Re();return h(e,i(f,{get each(){return I()},children:e=>i(Oe,{node:e,get selectedId(){return t.selectedId},get onSelect(){return t.onSelect},get onCreateChildPage(){return t.onCreateChildPage},get onCreateChildTable(){return t.onCreateChildTable},get onFetchChildren(){return t.onFetchChildren},get onDeleteNode(){return t.onDeleteNode},get onShowHistory(){return t.onShowHistory},get depth(){return t.depth+1},prefetchedChildren:C})})),g(()=>p(e,ke)),e}}),null),g(e=>{var i=we,o=`sidebar-node-${t.node.id}`,a=ye,s={[`${Se}`]:t.selectedId===t.node.id},l=12*t.depth+8+"px",d=xe,c={[`${ze}`]:r(),[`${Ie}`]:!L(),[`${Le}`]:S()},u=`expand-icon-${t.node.id}`,h=$e,v=Ce,g=Pe,f=n("common.delete")||"Delete";return i!==e.e&&p(M,e.e=i),o!==e.t&&b(M,"data-testid",e.t=o),a!==e.a&&p(P,e.a=a),e.o=w(P,s,e.o),l!==e.i&&_(P,"padding-left",e.i=l),d!==e.n&&p(B,e.n=d),e.s=w(B,c,e.s),u!==e.h&&b(B,"data-testid",e.h=u),h!==e.r&&p(R,e.r=h),v!==e.d&&p(N,e.d=v),g!==e.l&&p(O,e.l=g),f!==e.u&&b(O,"title",e.u=f),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),M;var M,P,B,R,N,O}d(["click","contextmenu"]);const De="_sidebar_1ddhe_1",je="_sidebarHeader_1ddhe_9",Ae="_loading_1ddhe_42",We="_pageList_1ddhe_48",qe="_sidebarFooter_1ddhe_55",Ue="_footerSeparator_1ddhe_71",Fe="_sidebarActions_1ddhe_76",He="_mobileOpen_1ddhe_115";var Ve=k("<p>"),Ge=k("<aside><div><h2></h2><div><button>+P</button><button>+D</button></div></div><ul></ul><div><a href=/privacy></a><span>|</span><a href=/terms>");function Ke(e){const{t:t}=be(),n=(t,n)=>{t.preventDefault(),window.history.pushState(null,"",n),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()};return r=Ge(),o=r.firstChild,a=o.firstChild,s=a.nextSibling,l=s.firstChild,d=l.nextSibling,c=o.nextSibling,u=c.nextSibling,_=u.firstChild,w=_.nextSibling,k=w.nextSibling,h(a,()=>t("app.workspace")),y(l,"click",e.onCreatePage),y(d,"click",e.onCreateTable),h(r,i(v,{get when(){return m(()=>!!e.loading)()&&0===e.nodes.length},get children(){var e=Ve();return h(e,()=>t("common.loading")),g(()=>p(e,Ae)),e}}),c),h(c,i(f,{get each(){return e.nodes},children:t=>i(Oe,{node:t,get selectedId(){return e.selectedNodeId},get onSelect(){return e.onSelectNode},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},depth:0})})),_.$$click=e=>n(e,"/privacy"),h(_,()=>t("app.privacyPolicy")),k.$$click=e=>n(e,"/terms"),h(k,()=>t("app.terms")),g(n=>{var i=`${De} ${e.isOpen?He:""}`,a=je,h=Fe,v=t("app.newPage")||"New Page",g=t("app.newTable")||"New Table",_=We,f=qe,m=Ue;return i!==n.e&&p(r,n.e=i),a!==n.t&&p(o,n.t=a),h!==n.a&&p(s,n.a=h),v!==n.o&&b(l,"title",n.o=v),g!==n.i&&b(d,"title",n.i=g),_!==n.n&&p(c,n.n=_),f!==n.s&&p(u,n.s=f),m!==n.h&&p(w,n.h=m),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),r;var r,o,a,s,l,d,c,u,_,w,k}d(["click"]);const Ye=S.spec.nodes.get("list_item");if(!Ye)throw new Error("list_item node not found in schema");const Je=new $({nodes:S.spec.nodes.update("list_item",{...Ye,attrs:{checked:{default:null}},toDOM:e=>null!==e.attrs.checked?["li",{class:"task-list-item","data-checked":String(e.attrs.checked)},0]:["li",0],parseDOM:[{tag:"li",getAttrs:e=>e.classList.contains("task-list-item")?{checked:"true"===e.dataset.checked}:{checked:null}}]}),marks:S.spec.marks});function Xe(e){const t=Je.nodes[e];if(!t)throw new Error(`Node type '${e}' not found in schema`);return t}function Qe(e){const t=Je.marks[e];if(!t)throw new Error(`Mark type '${e}' not found in schema`);return t}const Ze={list_item:Xe("list_item"),bullet_list:Xe("bullet_list"),ordered_list:Xe("ordered_list"),paragraph:Xe("paragraph"),blockquote:Xe("blockquote"),code_block:Xe("code_block"),heading:Xe("heading")},et={strong:Qe("strong"),em:Qe("em"),code:Qe("code")},tt=new C;tt.core.ruler.after("inline","task_list",e=>{const t=e.tokens;for(let n=0;n<t.length;n++){const e=t[n];if(e&&"list_item_open"===e.type){const i=t[n+2];if(i&&"inline"===i.type&&i.children){const t=i.children[0];if(t&&"text"===t.type&&t.content){const n=t.content.match(/^\[([ xX])\]\s*/);n&&n[1]&&(e.attrSet("checked","x"===n[1].toLowerCase()?"true":"false"),t.content=t.content.slice(n[0].length))}}}}return!0});const nt=new x(Je,tt,{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item",getAttrs:e=>{const t=e.attrGet("checked");return"true"===t?{checked:!0}:"false"===t?{checked:!1}:{checked:null}}},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",getAttrs:e=>({order:+(e.attrGet("start")||1)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children?.[0]?.content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code"},table:{block:"paragraph",noCloseToken:!1},thead:{ignore:!0},tbody:{ignore:!0},tr:{ignore:!0},th:{block:"paragraph"},td:{block:"paragraph"}}),it=new I({...L.nodes,bullet_list(e,t){e.renderList(t,"  ",()=>"- ")},list_item(e,t){if(null!==t.attrs.checked){const n=t.attrs.checked?"[x] ":"[ ] ";e.write(n)}e.renderContent(t)}},L.marks);function rt(){const e=A.concat(W,q);e.push(new U(/^\s*-\s+\[([ xX])\]\s$/,(e,t,n,i)=>{const r=e.doc.resolve(n),o="x"===t[1]?.toLowerCase();for(let l=r.depth;l>0;l--)if(r.node(l).type===Ze.list_item){const t=e.tr.delete(n,i);return t.setNodeMarkup(r.before(l),void 0,{checked:o}),t}const a=Ze.list_item.create({checked:o},Ze.paragraph.create()),s=Ze.bullet_list.create(null,a);return e.tr.replaceWith(n,i,s)})),e.push(B(/^\s*>\s$/,Ze.blockquote)),e.push(B(/^\s*([-*])\s$/,Ze.bullet_list)),e.push(B(/^(\d+)\.\s$/,Ze.ordered_list,e=>({order:+(e[1]??1)}),(e,t)=>t.childCount+t.attrs.order===+(e[1]??1))),e.push(R(/^```$/,Ze.code_block));for(let t=1;t<=6;t++){const n=new RegExp(`^(#{${t}})\\s$`);e.push(R(n,Ze.heading,{level:t}))}return N({rules:e})}function ot(){const e={};return e["Mod-z"]=F,e["Mod-y"]=H,e["Mod-Shift-z"]=H,e["Mod-b"]=V(et.strong),e["Mod-i"]=V(et.em),e["Mod-`"]=V(et.code),e.Enter=(e,t)=>{const{$from:n}=e.selection;for(let i=n.depth;i>0;i--){const r=n.node(i);if(r.type===Ze.list_item&&null!==r.attrs.checked){if(t){return G(Ze.list_item)(e,e=>{const n=e.selection.$from;for(let t=n.depth;t>0;t--){if(n.node(t).type===Ze.list_item){e.setNodeMarkup(n.before(t),void 0,{checked:!1});break}}t(e)})}return G(Ze.list_item)(e)}}return G(Ze.list_item)(e,t)},e.Tab=K(Ze.list_item),e["Shift-Tab"]=Y(Ze.list_item),T(e)}function at(e,t){return z.create({doc:e,plugins:[rt(),ot(),T(J),E(),M({color:"var(--c-primary)",width:2}),P(),new O({props:{decorations(e){const t=[];return e.doc.descendants((e,n)=>{if(e.type===Ze.list_item&&null!==e.attrs.checked){const i=document.createElement("input");i.type="checkbox",i.checked=e.attrs.checked,i.className="task-checkbox",i.addEventListener("mousedown",t=>{t.preventDefault();const i=t.target.closest(".ProseMirror");if(!i)return;const r=i.pmView;if(!r)return;const o=r.state.tr.setNodeMarkup(n,void 0,{checked:!e.attrs.checked});r.dispatch(o)}),t.push(D.widget(n+1,i,{side:-1}))}}),j.create(e.doc,t)}}}),...t||[]]})}const st=new X("slashMenu"),lt={active:!1,query:"",triggerPos:0,position:{top:0,left:0}};function dt(e){e.dispatch(e.state.tr.setMeta(st,{close:!0}))}function ct(e,t){u(()=>{const n=n=>{const i=e();i&&!i.contains(n.target)&&t()};document.addEventListener("mousedown",n),Q(()=>{document.removeEventListener("mousedown",n)})})}function ut(e,t,n,i){const r=e.state.tr.delete(t,n);e.dispatch(r),i(e)}function ht(e,t,n){const{state:i}=e,{$from:r}=i.selection;for(let u=r.depth;u>0;u--){const t=r.node(u);if(t.type===Ze.bullet_list||t.type===Ze.ordered_list)return void ne(i,e.dispatch)}const o=r.before(r.depth),a=Ze.paragraph.create(),s=Ze.list_item.create(n||null,a),l=t.create(null,s),d=e.state.tr.replaceWith(o,r.after(r.depth),l),c=o+3;d.setSelection(Z.near(d.doc.resolve(c))),e.dispatch(d)}const vt=[{id:"paragraph",labelKey:"paragraph",keywords:["paragraph","text","plain"],icon:"T",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.paragraph)(e.state,e.dispatch)})}},{id:"heading1",labelKey:"heading1",keywords:["heading","h1","title","header"],icon:"H1",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.heading,{level:1})(e.state,e.dispatch)})}},{id:"heading2",labelKey:"heading2",keywords:["heading","h2","subtitle","header"],icon:"H2",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.heading,{level:2})(e.state,e.dispatch)})}},{id:"heading3",labelKey:"heading3",keywords:["heading","h3","header"],icon:"H3",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.heading,{level:3})(e.state,e.dispatch)})}},{id:"bulletList",labelKey:"bulletList",keywords:["bullet","list","unordered","ul"],icon:"‚Ä¢",execute:(e,t,n)=>{ut(e,t,n,e=>{ht(e,Ze.bullet_list)})}},{id:"orderedList",labelKey:"orderedList",keywords:["ordered","list","numbered","ol"],icon:"1.",execute:(e,t,n)=>{ut(e,t,n,e=>{ht(e,Ze.ordered_list)})}},{id:"taskList",labelKey:"taskList",keywords:["task","checkbox","todo","checklist","check"],icon:"‚òê",execute:(e,t,n)=>{ut(e,t,n,e=>{ht(e,Ze.bullet_list,{checked:!1})})}},{id:"blockquote",labelKey:"blockquote",keywords:["quote","blockquote","citation"],icon:'"',execute:(e,t,n)=>{ut(e,t,n,e=>{te(Ze.blockquote)(e.state,e.dispatch)})}},{id:"codeBlock",labelKey:"codeBlock",keywords:["code","codeblock","pre","programming"],icon:"</>",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.code_block)(e.state,e.dispatch)})}},{id:"divider",labelKey:"divider",keywords:["divider","hr","horizontal","rule","line"],icon:"‚Äî",execute:(e,t,n)=>{const i=Je.nodes.horizontal_rule;if(!i)return;let r=e.state.tr.delete(t,n);e.dispatch(r);const o=e.state.selection.$from.after(e.state.selection.$from.depth),a=i.create(),s=Ze.paragraph.create();r=e.state.tr.insert(o,[a,s]),r.setSelection(Z.near(r.doc.resolve(o+2))),e.dispatch(r)}}];function gt(e){if(!e)return vt;const t=e.toLowerCase();return vt.filter(e=>!!e.labelKey.toLowerCase().startsWith(t)||e.keywords.some(e=>e.toLowerCase().startsWith(t)))}const pt="_editorContainer_1iujf_3",_t="_editorToolbar_1iujf_12",ft="_modeToggle_1iujf_22",mt="_modeButton_1iujf_29",bt="_active_1iujf_44",wt="_formattingButtons_1iujf_50",kt="_formatButton_1iujf_56",yt="_isActive_1iujf_77",St="_separator_1iujf_82",$t="_prosemirrorEditor_1iujf_90",Ct="_markdownEditor_1iujf_323",xt="_hidden_1iujf_342",It="_slashMenu_1iujf_347",Lt="_slashMenuItem_1iujf_361",zt="_selected_1iujf_371",Tt="_slashMenuIcon_1iujf_375",Et="_slashMenuLabel_1iujf_389",Mt="_slashMenuEmpty_1iujf_394";var Pt=k("<div data-testid=slash-command-menu>"),Bt=k("<div>"),Rt=k("<div><span></span><span>");function Nt(t){const{t:n}=be(),[r,o]=e(0),[a,s]=e(null);let l;const d=()=>gt(t.state.query);ie(()=>{t.state.query,t.state.active,o(0),s(null)}),ie(()=>{t.state.active&&l&&requestAnimationFrame(()=>{if(!l)return;const e=l.getBoundingClientRect(),n=window.innerHeight,i=window.innerWidth;let r=t.state.position.top,o=t.state.position.left;if(r+e.height>n){r=t.view.coordsAtPos(t.state.triggerPos).top-e.height-4,r<0&&(r=8)}o+e.width>i&&(o=i-e.width-8),o<0&&(o=8),r===t.state.position.top&&o===t.state.position.left||s({top:r,left:o})})}),ie(()=>{const e=r();if(l){const t=l.querySelector(`[data-index="${e}"]`);t&&t.scrollIntoView({block:"nearest"})}}),ct(()=>l,()=>{t.state.active&&dt(t.view)}),u(()=>{const e=e=>{const n=st.getState(t.view.state);if(!n?.active)return;const i=gt(n.query);if(0!==i.length)switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),o(e=>(e+1)%i.length);break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),o(e=>(e-1+i.length)%i.length);break;case"Enter":case"Tab":e.preventDefault(),e.stopPropagation(),c(i[r()]);break;case"Escape":e.preventDefault(),e.stopPropagation(),dt(t.view)}};document.addEventListener("keydown",e,!0),Q(()=>{document.removeEventListener("keydown",e,!0)})});const c=e=>{if(!e)return;const n=st.getState(t.view.state);if(!n)return;const{triggerPos:i}=n,r=t.view.state.selection.from;e.execute(t.view,i,r),t.view.focus()},m=()=>a()??t.state.position;return i(v,{get when(){return t.state.active},get children(){var e=Pt();return"function"==typeof l?re(l,e):l=e,h(e,i(v,{get when(){return d().length>0},get fallback(){return e=Bt(),h(e,()=>n("slashMenu.noResults")),g(()=>p(e,Mt)),e;var e},get children(){return i(f,{get each(){return d()},children:(e,t)=>{return i=Rt(),a=i.firstChild,s=a.nextSibling,i.addEventListener("mouseenter",()=>(e=>{o(e)})(t())),i.$$click=()=>(e=>{c(e)})(e),h(a,()=>e.icon),h(s,()=>n(`slashMenu.${e.labelKey}`)),g(e=>{var n=`${Lt} ${t()===r()?zt:""}`,o=t(),l=Tt,d=Et;return n!==e.e&&p(i,e.e=n),o!==e.t&&b(i,"data-index",e.t=o),l!==e.a&&p(a,e.a=l),d!==e.o&&p(s,e.o=d),e},{e:void 0,t:void 0,a:void 0,o:void 0}),i;var i,a,s}})}})),g(t=>{var n=It,i=`${m().top}px`,r=`${m().left}px`;return n!==t.e&&p(e,t.e=n),i!==t.t&&_(e,"top",t.t=i),r!==t.a&&_(e,"left",t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}})}d(["click"]);var Ot=k('<div><button title="Bold (Ctrl+B)">B</button><button title="Italic (Ctrl+I)">I</button><button title="Code (Ctrl+`)">&lt;/></button><span></span><button title="Heading 1">H1</button><button title="Heading 2">H2</button><button title="Heading 3">H3</button><span></span><button title="Bullet List">‚Ä¢</button><button title="Numbered List">1.</button><button title="Task List">‚òê</button><button title=Quote>"</button><button title="Code Block">{ }'),Dt=k("<div><div><button data-testid=editor-mode-visual></button><button data-testid=editor-mode-markdown>");function jt(e){const{t:t}=be(),n=e=>e?`${mt} ${bt}`:mt,r=e=>e?`${kt} ${yt}`:kt,o=()=>{e.view&&(V(et.strong)(e.view.state,e.view.dispatch),e.view.focus())},a=()=>{e.view&&(V(et.em)(e.view.state,e.view.dispatch),e.view.focus())},s=()=>{e.view&&(V(et.code)(e.view.state,e.view.dispatch),e.view.focus())},l=t=>{if(!e.view)return;const{state:n,dispatch:i}=e.view;e.formatState.headingLevel===t?ee(Ze.paragraph)(n,i):ee(Ze.heading,{level:t})(n,i),e.view.focus()},d=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view;e.formatState.isBulletList?ne(t,n):oe(Ze.bullet_list)(t,n),e.view.focus()},c=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view;e.formatState.isOrderedList?ne(t,n):oe(Ze.ordered_list)(t,n),e.view.focus()},u=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view,{$from:i}=t.selection;if(e.formatState.isTaskList)for(let r=i.depth;r>0;r--){const o=i.node(r);if(o.type===Ze.list_item&&null!==o.attrs.checked){return n(t.tr.setNodeMarkup(i.before(r),void 0,{checked:null})),void e.view.focus()}}else if(e.formatState.isBulletList||e.formatState.isOrderedList)for(let r=i.depth;r>0;r--){if(i.node(r).type===Ze.list_item){return n(t.tr.setNodeMarkup(i.before(r),void 0,{checked:!1})),void e.view.focus()}}else{const i=Ze.list_item.create({checked:!1},Ze.paragraph.create()),r=Ze.bullet_list.create(null,i);n(t.tr.replaceSelectionWith(r)),e.view.focus()}},_=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view;e.formatState.isBlockquote?ne(t,n):te(Ze.blockquote)(t,n),e.view.focus()},f=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view;e.formatState.isCodeBlock?ee(Ze.paragraph)(t,n):ee(Ze.code_block)(t,n),e.view.focus()};return m=Dt(),w=m.firstChild,k=w.firstChild,S=k.nextSibling,y(k,"click",e.onSwitchToWysiwyg),h(k,()=>t("editor.wysiwygMode")||"Visual"),y(S,"click",e.onSwitchToMarkdown),h(S,()=>t("editor.markdownMode")||"Markdown"),h(m,i(v,{get when(){return"wysiwyg"===e.editorMode},get children(){var t=Ot(),n=t.firstChild,i=n.nextSibling,h=i.nextSibling,v=h.nextSibling,m=v.nextSibling,b=m.nextSibling,w=b.nextSibling,k=w.nextSibling,y=k.nextSibling,S=y.nextSibling,$=S.nextSibling,C=$.nextSibling,x=C.nextSibling;return n.$$click=o,i.$$click=a,h.$$click=s,m.$$click=()=>l(1),b.$$click=()=>l(2),w.$$click=()=>l(3),y.$$click=d,S.$$click=c,$.$$click=u,C.$$click=_,x.$$click=f,g(o=>{var a=wt,s=r(e.formatState.isBold),l=r(e.formatState.isItalic),d=r(e.formatState.isCode),c=St,u=r(1===e.formatState.headingLevel),g=r(2===e.formatState.headingLevel),_=r(3===e.formatState.headingLevel),f=St,I=r(e.formatState.isBulletList),L=r(e.formatState.isOrderedList),z=r(e.formatState.isTaskList),T=r(e.formatState.isBlockquote),E=r(e.formatState.isCodeBlock);return a!==o.e&&p(t,o.e=a),s!==o.t&&p(n,o.t=s),l!==o.a&&p(i,o.a=l),d!==o.o&&p(h,o.o=d),c!==o.i&&p(v,o.i=c),u!==o.n&&p(m,o.n=u),g!==o.s&&p(b,o.s=g),_!==o.h&&p(w,o.h=_),f!==o.r&&p(k,o.r=f),I!==o.d&&p(y,o.d=I),L!==o.l&&p(S,o.l=L),z!==o.u&&p($,o.u=z),T!==o.c&&p(C,o.c=T),E!==o.w&&p(x,o.w=E),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),t}}),null),g(i=>{var r=_t,o=ft,a=n("wysiwyg"===e.editorMode),s=t("editor.wysiwygMode")||"Visual",l=n("markdown"===e.editorMode),d=t("editor.markdownMode")||"Markdown";return r!==i.e&&p(m,i.e=r),o!==i.t&&p(w,i.t=o),a!==i.a&&p(k,i.a=a),s!==i.o&&b(k,"title",i.o=s),l!==i.i&&p(S,i.i=l),d!==i.n&&b(S,"title",i.n=d),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),m;var m,w,k,S}d(["click"]);var At=k("<div><div data-testid=wysiwyg-editor></div><textarea data-testid=markdown-editor>");function Wt(t){const{t:r}=be(),[o,a]=e("wysiwyg"),[s,l]=e(t.content),[d,c]=e(),[v,_]=e({active:!1,query:"",triggerPos:0,position:{top:0,left:0}});let f;const m=(w=_,new O({key:st,state:{init:()=>({...lt}),apply(e,t,n,i){const r=e.getMeta(st);if(r?.close){if(t.active){const e={...lt};return setTimeout(()=>w(e),0),e}return t}if(!e.docChanged&&!e.selectionSet)return t;const{selection:o}=i,{$from:a}=o;if(!o.empty){if(t.active){const e={...lt};return setTimeout(()=>w(e),0),e}return t}const s=a.start(a.depth),l=i.doc.textBetween(s,a.pos,"",""),d=l.match(/(^|\s)\/([^\s]*)$/);if(d){const e=d[2]||"",n={active:!0,query:e,triggerPos:s+(l.length-d[0].length+(d[1]?1:0)),position:t.position};return t.active&&e!==t.query&&setTimeout(()=>w(n),0),n}if(t.active){const e={...lt};return setTimeout(()=>w(e),0),e}return t}},view:e=>({update(e){const t=st.getState(e.state);if(t?.active)try{const n=e.coordsAtPos(t.triggerPos),i={...t,position:{top:n.bottom+4,left:n.left}};w(i)}catch{}}}),props:{handleKeyDown(e,t){const n=st.getState(e.state);return!!n?.active&&("ArrowDown"===t.key||"ArrowUp"===t.key||"Enter"===t.key||"Tab"===t.key||"Escape"===t.key&&(dt(e),!0))}}}));var w;let k=t.nodeId,y=t.content;const[S,$]=e({isBold:!1,isItalic:!1,isCode:!1,headingLevel:null,isBulletList:!1,isOrderedList:!1,isTaskList:!1,isBlockquote:!1,isCodeBlock:!1}),C=e=>{const n=(i=e,(r=t.assetUrls||{})&&0!==Object.keys(r).length?i.replace(/!\[([^\]]*)\]\(([^/)][^)]*)\)/g,(e,t,n)=>{if(n.includes("://"))return e;if(n.startsWith("/"))return e;const i=r[n];return i?`![${t}](${i})`:e}):i);var i,r;return nt.parse(n)},x=e=>function(e,t){if(!t||0===Object.keys(t).length)return e;const n={};for(const[i,r]of Object.entries(t))n[r]=i;return e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,t,i)=>{const r=n[i];return r?`![${t}](${r})`:e})}(it.serialize(e),t.assetUrls||{}),I=e=>{const{state:t}=e,{from:n,$from:i,to:r,empty:o}=t.selection,a=o?t.storedMarks||i.marks():[],s=void 0!==et.strong.isInSet(a)||t.doc.rangeHasMark(n,r,et.strong),l=void 0!==et.em.isInSet(a)||t.doc.rangeHasMark(n,r,et.em),d=void 0!==et.code.isInSet(a)||t.doc.rangeHasMark(n,r,et.code),c=i.node(i.depth),u=c.type===Ze.heading?c.attrs.level:null,h=c.type===Ze.code_block;let v=!1,g=!1,p=!1,_=!1;for(let f=i.depth;f>0;f--){const e=i.node(f);e.type===Ze.bullet_list&&(v=!0),e.type===Ze.ordered_list&&(g=!0),e.type===Ze.list_item&&null!==e.attrs.checked&&(p=!0),e.type===Ze.blockquote&&(_=!0)}$({isBold:s,isItalic:l,isCode:d,headingLevel:u,isBulletList:v,isOrderedList:g,isTaskList:p,isBlockquote:_,isCodeBlock:h})};u(()=>{if(!f)return;const e=C(t.content);if(!e)return;const n=at(e,[m]),i=new se(f,{state:n,editable:()=>!t.readOnly,dispatchTransaction(e){const n=i.state.apply(e);if(i.updateState(n),e.docChanged){const e=x(n.doc);l(e),y=e,t.onChange(e)}I(i)}}),r=f.querySelector(".ProseMirror");r&&(r.pmView=i),c(i),I(i)}),Q(()=>{d()?.destroy()}),ie(ae(()=>[t.nodeId,t.content],([e,t])=>{if(e!==k||t!==y){k=e,y=t,l(t),a("wysiwyg");const n=d();if(n){const e=C(t);if(e){const t=at(e,[m]);n.updateState(t)}}}},{defer:!0}));const L=()=>{const e=d();if(e){const t=C(s());if(t){const n=at(t,[m]);e.updateState(n),I(e)}}a("wysiwyg")},z=()=>{const e=d();if(e){const t=x(e.state.doc);l(t)}a("markdown")},T=n(()=>"wysiwyg"===o()?$t:`${$t} ${xt}`),E=n(()=>"markdown"===o()?Ct:`${Ct} ${xt}`);return(()=>{var e=At(),n=e.firstChild,a=n.nextSibling;h(e,i(jt,{get editorMode(){return o()},get formatState(){return S()},get view(){return d()},onSwitchToWysiwyg:L,onSwitchToMarkdown:z}),n);return"function"==typeof f?re(f,n):f=n,a.$$input=e=>{return n=e.target.value,l(n),y=n,void t.onChange(n);var n},h(e,()=>{const e=d();return e?i(Nt,{view:e,get state(){return v()}}):null},null),g(i=>{var o=pt,s=T(),l=E(),d=t.placeholder||r("editor.contentPlaceholder")||"Write markdown...",c=t.readOnly;return o!==i.e&&p(e,i.e=o),s!==i.t&&p(n,i.t=s),l!==i.a&&p(a,i.a=l),d!==i.o&&b(a,"placeholder",i.o=d),c!==i.i&&(a.readOnly=i.i=c),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),g(()=>a.value=s()),e})()}d(["input"]);const qt="select",Ut="org:owner",Ft="org:admin",Ht="ws:admin",Vt="google",Gt="microsoft",Kt="github",Yt="_container_1fe2r_1",Jt="_tableWrapper_1fe2r_10",Xt="_table_1fe2r_10",Qt="_headerRow_1fe2r_24",Zt="_headerCell_1fe2r_32",en="_row_1fe2r_44",tn="_cell_1fe2r_53",nn="_editing_1fe2r_65",rn="_cellContent_1fe2r_70",on="_editContainer_1fe2r_75",an="_input_1fe2r_81",sn="_editActions_1fe2r_94",ln="_saveBtn_1fe2r_99",dn="_cancelBtn_1fe2r_100",cn="_actionsCell_1fe2r_119",un="_deleteBtn_1fe2r_127",hn="_addBtn_1fe2r_141",vn="_newRow_1fe2r_155",gn="_required_1fe2r_164",pn="_empty_1fe2r_169",_n="_loadMore_1fe2r_176";var fn=k("<input type=checkbox>"),mn=k("<select><option value>--"),bn=k("<option>"),wn=k("<input type=text>"),kn=k("<input type=number>"),yn=k("<input type=date>"),Sn=k("<tr><td><button>+"),$n=k("<div>"),Cn=k("<div><button>"),xn=k("<div><div><table><thead><tr><th></th></tr></thead><tbody>"),In=k("<span>*"),Ln=k("<th>"),zn=k("<button>‚úï"),Tn=k("<tr><td>"),En=k("<div><div><button>‚úì</button><button>‚úï"),Mn=k("<td>");function Pn(t){const{t:n}=be(),[r,o]=e(null),[a,s]=e(""),[l,d]=e({}),c=e=>{s(e)},u=(e,n)=>{const i=t.columns.find(e=>e.name===n);if(!i||!t.onUpdateRecord)return;const r=t.records.find(t=>t.id===e);if(!r)return;const s={...r.data};s[i.name]=a(),t.onUpdateRecord(e,s),o(null)},_=()=>{t.onAddRecord&&Object.keys(l()).length>0&&(t.onAddRecord(l()),d({}))},m=(e,n)=>{const i=((e,n)=>{const i=t.columns.find(e=>e.name===n);return i?e.data[i.name]??"":""})(e,n.name);switch(n.type){case"checkbox":return i?"‚úì":"";case"select":case"multi_select":case"number":default:return String(i);case"date":return i?new Date(i).toLocaleDateString():""}},k=(e,t,n=!1,r,a)=>{const s=e=>{n&&setTimeout(()=>e.focus(),0)},l=r&&a?e=>((e,t,n)=>{"Enter"===e.key?(e.preventDefault(),u(t,n)):"Escape"===e.key&&(e.preventDefault(),o(null))})(e,r,a):void 0;switch(e.type){case"checkbox":return w=fn(),y(w,"keydown",l),w.addEventListener("change",e=>c(String(e.target.checked))),re(s,w),w.checked="true"===t,g(()=>p(w,an)),w;case qt:return e.options&&e.options.length>0?((b=mn()).firstChild,y(b,"keydown",l),b.addEventListener("change",e=>c(e.target.value)),re(s,b),b.value=t,h(b,i(f,{get each(){return e.options},children:e=>{return t=bn(),h(t,()=>e.name),g(()=>t.value=e.id),t;var t}}),null),g(()=>p(b,an)),b):(m=wn(),y(m,"keydown",l),m.$$input=e=>c(e.target.value),re(s,m),m.value=t,g(()=>p(m,an)),m);case"number":return _=kn(),y(_,"keydown",l),_.$$input=e=>c(e.target.value),re(s,_),_.value=t,g(()=>p(_,an)),_;case"date":return v=yn(),y(v,"keydown",l),v.$$input=e=>c(e.target.value),re(s,v),v.value=t,g(()=>p(v,an)),v;default:return d=wn(),y(d,"keydown",l),d.$$input=e=>c(e.target.value),re(s,d),d.value=t,g(()=>p(d,an)),d}var d,v,_,m,b,w};return S=xn(),$=S.firstChild,C=$.firstChild,x=C.firstChild,I=x.firstChild,L=I.firstChild,z=x.nextSibling,h(L,()=>n("common.actions")),h(I,i(f,{get each(){return t.columns},children:e=>{return t=Ln(),h(t,()=>e.name,null),h(t,i(v,{get when(){return e.required},get children(){var e=In();return g(()=>p(e,gn)),e}}),null),g(()=>p(t,Zt)),t;var t}}),null),h(z,i(f,{get each(){return t.records},children:e=>{return l=Tn(),d=l.firstChild,h(d,i(v,{get when(){return t.onDeleteRecord},get children(){var i=zn();return i.$$click=()=>t.onDeleteRecord?.(e.id),g(e=>{var t=un,r=n("table.deleteRecord")||"Delete record";return t!==e.e&&p(i,e.e=t),r!==e.t&&b(i,"title",e.t=r),e},{e:void 0,t:void 0}),i}})),h(l,i(f,{get each(){return t.columns},children:n=>{const l=()=>r()?.recordId===e.id&&r()?.columnId===n.name;return(d=Mn()).$$click=()=>((e,n)=>{const i=t.columns.find(e=>e.name===n),r=t.records.find(t=>t.id===e)?.data[i?.name??""]??"";o({recordId:e,columnId:n}),s(String(r))})(e.id,n.name),h(d,i(v,{get when(){return l()},get fallback(){return t=$n(),h(t,()=>m(e,n)),g(()=>p(t,rn)),t;var t},get children(){var t=En(),i=t.firstChild,r=i.firstChild,s=r.nextSibling;return h(t,()=>k(n,a(),!0,e.id,n.name),i),r.$$click=()=>u(e.id,n.name),s.$$click=()=>o(null),g(e=>{var n=on,o=sn,a=ln,l=dn;return n!==e.e&&p(t,e.e=n),o!==e.t&&p(i,e.t=o),a!==e.a&&p(r,e.a=a),l!==e.o&&p(s,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t}})),g(e=>{var t=tn,n={[`${nn}`]:l()};return t!==e.e&&p(d,e.e=t),e.t=w(d,n,e.t),e},{e:void 0,t:void 0}),d;var d}}),null),g(e=>{var t=en,n=cn;return t!==e.e&&p(l,e.e=t),n!==e.t&&p(d,e.t=n),e},{e:void 0,t:void 0}),l;var l,d}}),null),h(z,i(v,{get when(){return t.onAddRecord},get children(){var e=Sn(),n=e.firstChild,r=n.firstChild;return r.$$click=_,h(e,i(f,{get each(){return t.columns},children:e=>{return t=Mn(),h(t,()=>k(e,String(l()[e.name]??""))),g(()=>p(t,tn)),t;var t}}),null),g(t=>{var i=vn,o=cn,a=hn;return i!==t.e&&p(e,t.e=i),o!==t.t&&p(n,t.t=o),a!==t.a&&p(r,t.a=a),t},{e:void 0,t:void 0,a:void 0}),e}}),null),h(S,i(v,{get when(){return 0===t.records.length},get children(){var e=$n();return h(e,()=>n("table.noRecords")),g(()=>p(e,pn)),e}}),null),h(S,i(v,{get when(){return t.hasMore},get children(){var e=Cn(),i=e.firstChild;return i.$$click=()=>t.onLoadMore?.(),h(i,()=>n("table.loadMore")),g(()=>p(e,_n)),e}}),null),g(e=>{var t=Yt,n=Jt,i=Xt,r=Qt,o=Zt;return t!==e.e&&p(S,e.e=t),n!==e.t&&p($,e.t=n),i!==e.a&&p(C,e.a=i),r!==e.o&&p(I,e.o=r),o!==e.i&&p(L,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),S;var S,$,C,x,I,L,z}function Bn(e,t,n,i){if(e.data[t]===n||!i)return;const r={...e.data,[t]:n};i(e.id,r)}function Rn(e){"Enter"===e.key&&e.currentTarget.blur()}function Nn(e,t){if(!t)return"";const n=e.data[t];return null!=n?String(n):""}function On(e,t){const n=t[0];return n?Nn(e,n.name):""}d(["keydown","input","click"]);const Dn="_grid_3ff2z_1",jn="_card_3ff2z_8",An="_cardHeader_3ff2z_20",Wn="_deleteBtn_3ff2z_28",qn="_cardBody_3ff2z_40",Un="_field_3ff2z_46",Fn="_fieldName_3ff2z_51",Hn="_titleInput_3ff2z_58",Vn="_fieldValueInput_3ff2z_75";var Gn=k("<div>"),Kn=k("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Yn=k("<div><span>:</span><input type=text>");function Jn(e){const{t:t}=be();return n=Gn(),h(n,i(f,{get each(){return e.records},children:n=>{return r=Kn(),o=r.firstChild,a=o.firstChild,s=a.firstChild,l=a.nextSibling,d=o.nextSibling,y(s,"keydown",Rn),s.addEventListener("blur",t=>e.columns[0]&&Bn(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),l.$$click=()=>e.onDeleteRecord(n.id),h(d,i(f,{get each(){return e.columns.slice(1,4)},children:t=>{return i=Yn(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,h(r,()=>t.name,o),y(a,"keydown",Rn),a.addEventListener("blur",i=>Bn(n,t.name,i.target.value,e.onUpdateRecord)),g(e=>{var t=Un,n=Fn,o=Vn;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),g(()=>a.value=Nn(n,t.name)),i;var i,r,o,a}})),g(e=>{var n=jn,i=An,a=t("table.untitled")||"Untitled",c=Hn,u=Wn,h=qn;return n!==e.e&&p(r,e.e=n),i!==e.t&&p(o,e.t=i),a!==e.a&&b(s,"placeholder",e.a=a),c!==e.o&&p(s,e.o=c),u!==e.i&&p(l,e.i=u),h!==e.n&&p(d,e.n=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),g(()=>s.value=On(n,e.columns)),r;var r,o,a,s,l,d}})),g(()=>p(n,Dn)),n;var n}d(["keydown","click"]);const Xn="_gallery_1i7ro_1",Qn="_card_1i7ro_8",Zn="_imageContainer_1i7ro_23",ei="_image_1i7ro_23",ti="_imagePlaceholder_1i7ro_38",ni="_cardContent_1i7ro_43",ii="_cardHeader_1i7ro_47",ri="_deleteBtn_1i7ro_54",oi="_cardBody_1i7ro_67",ai="_field_1i7ro_71",si="_fieldName_1i7ro_77",li="_titleInput_1i7ro_83",di="_fieldValueInput_1i7ro_100";var ci=k("<div>"),ui=k("<div><div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),hi=k("<img>"),vi=k("<div><span>:</span><input type=text>");function gi(e){const{t:t}=be();return n=ci(),h(n,i(f,{get each(){return e.records},children:n=>{const r=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return o=ui(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=l.firstChild,c=l.nextSibling,u=s.nextSibling,h(o,i(v,{when:r,children:r=>{return o=ci(),h(o,i(v,{get when(){return n.data[r().name]},get fallback(){return e=ci(),h(e,()=>t("table.noImage")),g(()=>p(e,ti)),e;var e},get children(){var t=hi();return g(i=>{var o=String(n.data[r().name]),a=On(n,e.columns)||"Record",s=ei;return o!==i.e&&b(t,"src",i.e=o),a!==i.t&&b(t,"alt",i.t=a),s!==i.a&&p(t,i.a=s),i},{e:void 0,t:void 0,a:void 0}),t}})),g(()=>p(o,Zn)),o;var o}}),a),y(d,"keydown",Rn),d.addEventListener("blur",t=>e.columns[0]&&Bn(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),c.$$click=()=>e.onDeleteRecord(n.id),h(u,i(f,{get each(){return e.columns.slice(1,3)},children:t=>{return i=vi(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,h(r,()=>t.name,o),y(a,"keydown",Rn),a.addEventListener("blur",i=>Bn(n,t.name,i.target.value,e.onUpdateRecord)),g(e=>{var t=ai,n=si,o=di;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),g(()=>a.value=Nn(n,t.name)),i;var i,r,o,a}})),g(e=>{var n=Qn,i=ni,r=ii,l=t("table.untitled")||"Untitled",h=li,v=ri,g=oi;return n!==e.e&&p(o,e.e=n),i!==e.t&&p(a,e.t=i),r!==e.a&&p(s,e.a=r),l!==e.o&&b(d,"placeholder",e.o=l),h!==e.i&&p(d,e.i=h),v!==e.n&&p(c,e.n=v),g!==e.s&&p(u,e.s=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),g(()=>d.value=On(n,e.columns)),o;var o,a,s,l,d,c,u}})),g(()=>p(n,Xn)),n;var n}d(["keydown","click"]);const pi="_board_ojcu7_1",_i="_noGroup_ojcu7_7",fi="_columns_ojcu7_16",mi="_column_ojcu7_16",bi="_columnHeader_ojcu7_31",wi="_columnName_ojcu7_38",ki="_columnCount_ojcu7_45",yi="_cards_ojcu7_53",Si="_card_ojcu7_53",$i="_cardHeader_ojcu7_68",Ci="_deleteBtn_ojcu7_80",xi="_cardBody_ojcu7_93",Ii="_field_ojcu7_97",Li="_fieldName_ojcu7_103",zi="_titleInput_ojcu7_108",Ti="_fieldValueInput_ojcu7_125";var Ei=k("<div>"),Mi=k("<div><div><span></span><span></span></div><div>"),Pi=k("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Bi=k("<div><span>:</span><input type=text>");function Ri(e){const{t:t}=be(),r=n(()=>e.columns.find(e=>e.type===qt||"multi_select"===e.type)),o=n(()=>{const n=r();if(!n)return[{name:"All Records",records:e.records,fromOptions:!0}];const i={};return n.options&&n.options.forEach(e=>{i[e.id]={name:e.name,records:[],fromOptions:!0}}),i.__none__={name:t("table.noGroup")||"No Group",records:[],fromOptions:!0},e.records.forEach(e=>{const t=e.data[n.name];t&&"string"==typeof t?(i[t]||(i[t]={name:t,records:[]}),i[t].records.push(e)):i.__none__?.records.push(e)}),Object.values(i).filter(e=>e.records.length>0||e.fromOptions)});return a=Ei(),h(a,i(v,{get when(){return r()},get fallback(){return e=Ei(),h(e,()=>t("table.addSelectColumn")),g(()=>p(e,_i)),e;var e},get children(){var n=Ei();return h(n,i(f,{get each(){return o()},children:n=>{return o=Mi(),a=o.firstChild,s=a.firstChild,l=s.nextSibling,d=a.nextSibling,h(s,()=>n.name),h(l,()=>n.records.length),h(d,i(f,{get each(){return n.records},children:n=>{return o=Pi(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=s.nextSibling,c=a.nextSibling,y(l,"keydown",Rn),l.addEventListener("blur",t=>e.columns[0]&&Bn(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),d.$$click=()=>e.onDeleteRecord(n.id),h(c,i(f,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==r()?.name)},children:t=>{return i=Bi(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,h(r,()=>t.name,o),y(a,"keydown",Rn),a.addEventListener("blur",i=>Bn(n,t.name,i.target.value,e.onUpdateRecord)),g(e=>{var t=Ii,n=Li,o=Ti;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),g(()=>a.value=Nn(n,t.name)),i;var i,r,o,a}})),g(e=>{var n=Si,i=$i,r=t("table.untitled")||"Untitled",s=zi,u=Ci,h=xi;return n!==e.e&&p(o,e.e=n),i!==e.t&&p(a,e.t=i),r!==e.a&&b(l,"placeholder",e.a=r),s!==e.o&&p(l,e.o=s),u!==e.i&&p(d,e.i=u),h!==e.n&&p(c,e.n=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),g(()=>l.value=On(n,e.columns)),o;var o,a,s,l,d,c}})),g(e=>{var t=mi,n=bi,i=wi,r=ki,c=yi;return t!==e.e&&p(o,e.e=t),n!==e.t&&p(a,e.t=n),i!==e.a&&p(s,e.a=i),r!==e.o&&p(l,e.o=r),c!==e.i&&p(d,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,a,s,l,d}})),g(()=>p(n,fi)),n}})),g(()=>p(a,pi)),a;var a}d(["keydown","click"]);class Ni extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function Oi(e,t){const n=await e(t);if(!n.ok){const e=await n.json();throw new Ni(n.status,e)}return n.json()}async function Di(e,t,n){const i={method:"POST"};n&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n));const r=await e(t,i);if(!r.ok){const e=await r.json();throw new Ni(r.status,e)}return r.json()}function ji(e){return{admin:{organizations:{listAllOrgs:()=>Oi(e,"/api/admin/organizations")},getAdminStats:()=>Oi(e,"/api/admin/stats"),listAllUsers:()=>Oi(e,"/api/admin/users")},auth:{email:{changeEmail:t=>Di(e,"/api/auth/email",t),sendVerificationEmail:()=>Di(e,"/api/auth/email/send-verification")},invitations:{acceptOrgInvitation:t=>Di(e,"/api/auth/invitations/org/accept",t),acceptWSInvitation:t=>Di(e,"/api/auth/invitations/ws/accept",t)},sessions:{listSessions:()=>Oi(e,"/api/auth/sessions"),revokeAllSessions:()=>Di(e,"/api/auth/sessions/revoke-all"),revokeSession:t=>Di(e,"/api/auth/sessions/revoke",t)},getMe:()=>Oi(e,"/api/auth/me"),listProviders:()=>Oi(e,"/api/auth/providers"),login:t=>Di(e,"/api/auth/login",t),logout:()=>Di(e,"/api/auth/logout"),register:t=>Di(e,"/api/auth/register",t),switchWorkspace:t=>Di(e,"/api/auth/switch-workspace",t),updateUserSettings:t=>Di(e,"/api/auth/settings",t)},organizations:{createOrganization:t=>Di(e,"/api/organizations",t)},getHealth:()=>Oi(e,"/api/health"),org:t=>({invitations:{createOrgInvitation:n=>Di(e,`/api/organizations/${t}/invitations`,n),listOrgInvitations:()=>Oi(e,`/api/organizations/${t}/invitations`)},notion:{getStatus:n=>Oi(e,`/api/organizations/${t}/notion/import/${n}/status`),startImport:n=>Di(e,`/api/organizations/${t}/notion/import`,n)},organizations:{getOrganization:()=>Oi(e,`/api/organizations/${t}`),updateOrganization:n=>Di(e,`/api/organizations/${t}`,n)},settings:{updateOrgPreferences:n=>Di(e,`/api/organizations/${t}/settings`,n)},users:{listUsers:()=>Oi(e,`/api/organizations/${t}/users`),updateOrgMemberRole:n=>Di(e,`/api/organizations/${t}/users/role`,n)},workspaces:{createWorkspace:n=>Di(e,`/api/organizations/${t}/workspaces`,n)}}),ws:t=>({invitations:{createWSInvitation:n=>Di(e,`/api/workspaces/${t}/invitations`,n),listWSInvitations:()=>Oi(e,`/api/workspaces/${t}/invitations`)},nodes:{assets:{deleteNodeAsset:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/assets/${i}/delete`),listNodeAssets:n=>Oi(e,`/api/workspaces/${t}/nodes/${n}/assets`)},history:{getNodeVersion:(n,i)=>Oi(e,`/api/workspaces/${t}/nodes/${n}/history/${i}`),async listNodeVersions(n,i){const r=new URLSearchParams;i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/history`+(r.toString()?`?${r}`:"");return Oi(e,o)}},page:{createPage:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/page/create`,i),deletePage:n=>Di(e,`/api/workspaces/${t}/nodes/${n}/page/delete`),getPage:n=>Oi(e,`/api/workspaces/${t}/nodes/${n}/page`),updatePage:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/page`,i)},table:{records:{createRecord:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/records/create`,i),deleteRecord:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}/delete`),getRecord:(n,i)=>Oi(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`),async listRecords(n,i){const r=new URLSearchParams;i.Offset&&r.set("offset",String(i.Offset)),i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/table/records`+(r.toString()?`?${r}`:"");return Oi(e,o)},updateRecord:(n,i,r)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`,r)},createTable:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/create`,i),deleteTable:n=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/delete`),getTable:n=>Oi(e,`/api/workspaces/${t}/nodes/${n}/table`),updateTable:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table`,i)},deleteNode:n=>Di(e,`/api/workspaces/${t}/nodes/${n}/delete`),getNode:n=>Oi(e,`/api/workspaces/${t}/nodes/${n}`),listNodeChildren:n=>Oi(e,`/api/workspaces/${t}/nodes/${n}/children`)},notion:{cancelImport:()=>Di(e,`/api/workspaces/${t}/notion/import/cancel`)},settings:{git:{deleteGitRemote:()=>Di(e,`/api/workspaces/${t}/settings/git/delete`),getGitRemote:()=>Oi(e,`/api/workspaces/${t}/settings/git`),pushGit:()=>Di(e,`/api/workspaces/${t}/settings/git/push`),updateGitRemote:n=>Di(e,`/api/workspaces/${t}/settings/git`,n)},updateWSMembershipSettings:n=>Di(e,`/api/workspaces/${t}/settings/membership`,n)},users:{updateWSMemberRole:n=>Di(e,`/api/workspaces/${t}/users/role`,n)},workspaces:{getWorkspace:()=>Oi(e,`/api/workspaces/${t}`),updateWorkspace:n=>Di(e,`/api/workspaces/${t}`,n)},search:n=>Di(e,`/api/workspaces/${t}/search`,n)})}}const Ai=3,Wi=1e3,qi=3e4;function Ui(e){return 429===e||e>=500&&e<600}function Fi(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const n=Date.parse(e);return isNaN(n)?null:Math.max(0,n-Date.now())}function Hi(e,t){if(null!==t)return Math.min(t,qi);const n=Wi*Math.pow(2,e);return Math.min(n,qi)}function Vi(e,t){return n=async(n,i)=>{const r=e(),o={...i?.headers};r&&(o.Authorization=`Bearer ${r}`);const a=await fetch(n,{...i,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let i=0;for(;;){const r=await n(e,t);if(!Ui(r.status)||i>=Ai)return r;const o=Hi(i,Fi(r.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),i++}};var n}function Gi(e,t){return ji(Vi(e,t))}const Ki=o(),Yi=t=>{const[r,o]=e(null),[a,s]=e(localStorage.getItem("mddb_token")),l=async()=>{const e=a();if(e)try{const t=Gi(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),s(null),o(null),window.history.pushState(null,"","/")},d=n(()=>Gi(()=>a(),l)),c=n(()=>{const e=r()?.workspace_id;return e?d().ws(e):null}),h=n(()=>{const e=r()?.organization_id;return e?d().org(e):null});u(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),s(e),window.history.replaceState({},document.title,window.location.pathname))});let v=!1;ie(()=>{const e=a(),t=r();!e||t||v||(v=!0,(async()=>{try{const e=await d().auth.getMe();o(e)}catch(e){console.error("Failed to load user",e),e instanceof Ni&&401===e.status&&(localStorage.removeItem("mddb_token"),s(null))}finally{v=!1}})())});const g={user:r,token:a,api:d,wsApi:c,orgApi:h,login:(e,t)=>{localStorage.setItem("mddb_token",e),s(e),o(t)},logout:l,setUser:o,refreshUser:async()=>{try{const e=await d().auth.getMe();o(e)}catch(e){console.error("Failed to refresh user",e),e instanceof Ni&&401===e.status&&(localStorage.removeItem("mddb_token"),s(null),o(null))}}};return i(Ki.Provider,{value:g,get children(){return t.children}})};function Ji(){const e=r(Ki);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function Xi(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}function Qi(e,t){return`/w/${e}+${Xi(t||"workspace")}/`}function Zi(e,t,n,i){const r=Xi(t||"workspace"),o=i?Xi(i):"";return`/w/${e}+${r}/${n}${o?"+"+o:""}`}function er(e,t){return`/o/${e}+${Xi(t||"organization")}/settings`}const tr=o(),nr=t=>{const{t:n}=be(),{user:r,setUser:o,api:a,wsApi:s,login:l}=Ji(),[d,u]=c([]),[h,v]=e(null),[g,p]=e(null),[_,f]=e([]),[m,b]=e(!1),[w,k]=e(null),[y,S]=e(!1),[$,C]=e(!1);let x=!1,I=null,L=null,z=null;function T(){const e=r();if(!e?.name)return"";return e.name.split(" ")[0]||e.name}async function E(e){await a().organizations.createOrganization({name:e.name});const t=await a().auth.getMe();o(t)}async function M(e){const t=r();if(!t||!t.organization_id)throw new Error("No organization selected");const n=await a().org(t.organization_id).workspaces.createWorkspace({name:e.name}),i=await a().auth.getMe();o(i),await P(n.id)}async function P(e,t=!0){try{b(!0);const n=await a().auth.switchWorkspace({ws_id:e});if(!n.user)throw new Error("No user data returned");if(l(n.token,n.user),de(()=>{v(null),p(null),f([])}),z=null,I=null,t){const e=n.user.workspace_id,t=n.user.workspace_name;e?window.history.pushState(null,"",Qi(e,t)):window.history.pushState(null,"","/")}await B()}catch(i){k(`${n("errors.failedToSwitch")}: ${i}`)}finally{b(!1)}}async function B(e=!1){const t=s(),i=r()?.workspace_id;if(t&&!x&&!(!e&&i&&I===i&&d.length>0))try{x=!0,b(!0);const e=await t.nodes.listNodeChildren("0");let o=e?.nodes||[];if(0===o.length&&y()){const e=await async function(){const e=s(),t=r();if(!e||!t)return null;if(t.workspace_role!==Ht&&"ws:editor"!==t.workspace_role)return null;try{const t=await e.nodes.page.createPage("0",{title:n("welcome.welcomePageTitle"),content:n("welcome.welcomePageContent")});return t?.id?String(t.id):null}catch(i){return k(`${n("errors.failedToCreate")}: ${i}`),null}}();if(e){const e=await t.nodes.listNodeChildren("0");o=e?.nodes||[]}}u(ce(o)),I=i||null,k(null);const a=window.location.pathname;a.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/)&&!h()&&o.length>0&&o[0]&&R(o[0].id,!1)}catch(o){k(`${n("errors.failedToLoad")}: ${o}`)}finally{x=!1,b(!1)}}async function R(e,t=!0){const i=s();if(i&&L!==e&&z!==e)try{L=e,b(!0);const n=await i.nodes.getNode(e);de(()=>{v(n.id),p(n)}),z=n.id,k(null);const o=r()?.workspace_id,a=r()?.workspace_name;if(o){const e=Zi(o,a,n.id,n.title);t?window.location.pathname!==e&&window.history.pushState(null,"",e):window.location.pathname!==e&&window.history.replaceState(null,"",e)}const s=[n];let l=n;for(;l.parent_id&&"0"!==l.parent_id;)try{const e=await i.nodes.getNode(l.parent_id);s.unshift(e),l=e}catch{break}return f(s),n}catch(o){return void k(`${n("errors.failedToLoad")}: ${o}`)}finally{L=null,b(!1)}}ie(()=>{const e=r();if(!e||y()||$())return;const t=e.organizations||[];if(0===t.length)return C(!0),void async function(){try{b(!0);const e=T(),t=e?n("onboarding.defaultOrgName",{name:e}):n("onboarding.defaultOrgNameFallback");await E({name:t||"My Organization"})}catch(e){k(`${n("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>C(!1));const i=t[0];if(i){if(0===(e.workspaces?.filter(e=>e.organization_id===i.organization_id)||[]).length&&(i.role===Ft||i.role===Ut))return C(!0),void async function(){try{b(!0);const e=T(),t=e?n("onboarding.defaultWorkspaceName",{name:e}):n("onboarding.defaultWorkspaceNameFallback");await M({name:t||"Main"})}catch(e){k(`${n("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>C(!1))}const o=e.workspace_id,a=e.workspace_name;o&&(S(!0),"/"===window.location.pathname&&window.history.replaceState(null,"",Qi(o,a)))}),ie(()=>{r()&&B()}),ie(()=>{const e=r()?.workspace_id;e&&I!==e&&(z=null)});const N={nodes:d,setNodes:e=>{u(le(e))},selectedNodeId:h,setSelectedNodeId:v,selectedNodeData:g,setSelectedNodeData:p,breadcrumbPath:_,setBreadcrumbPath:f,loading:m,setLoading:b,error:w,setError:k,firstLoginCheckDone:y,setFirstLoginCheckDone:S,switchWorkspace:P,createOrganization:E,createWorkspace:M,loadNodes:B,loadNode:R,fetchNodeChildren:async function(e){const t=s();if(!t)return[];try{const n=await t.nodes.listNodeChildren(e),i=n.nodes?.filter(Boolean)||[];return i.length>0&&u(le(t=>{const n=t=>{for(const r of t){if(r.id===e)return r.children=i,!0;if(r.children&&n(r.children))return!0}return!1};n(t)})),i}catch(n){return console.error("Failed to fetch children:",n),[]}},updateNodeTitle:(e,t)=>{u(le(n=>{const i=n=>{for(const r of n){if(r.id===e)return r.title=t,!0;if(r.children&&i(r.children))return!0}return!1};i(n)})),f(n=>n.map(n=>n.id===e?{...n,title:t}:n))}};return i(tr.Provider,{value:N,get children(){return t.children}})};function ir(){const e=r(tr);if(!e)throw new Error("useWorkspace must be used within a WorkspaceProvider");return e}const rr=o(),or=t=>{const{t:n}=be(),{user:r,wsApi:o}=Ji(),{selectedNodeId:a,selectedNodeData:s,updateNodeTitle:l,setLoading:d,setError:c}=ir(),[u,h]=e(""),[v,g]=e(""),[p,_]=e(!1),[f,m]=e("idle"),[b,w]=e(!1),[k,y]=e([]),S=function(e,t){let n=null,i=null;const r=(...r)=>{i=r,null!==n&&clearTimeout(n),n=setTimeout(()=>{n=null,i=null,e(...r)},t)};return r.flush=()=>{if(null!==n&&null!==i){clearTimeout(n);const t=i;n=null,i=null,e(...t)}},r.cancel=()=>{null!==n&&(clearTimeout(n),n=null,i=null)},r.pending=()=>null!==n,r}(async()=>{const e=a(),t=o();if(e&&p()&&t)try{m("saving"),await t.nodes.page.updatePage(e,{title:u(),content:v()}),_(!1),m("saved");const n=r()?.workspace_id,i=r()?.workspace_name;if(n){const t=window.location.pathname,r=Zi(n,i,e,u());t!==r&&window.history.replaceState(null,"",r)}setTimeout(()=>{"saved"===f()&&m("idle")},2e3)}catch(i){c(`${n("errors.autoSaveFailed")}: ${i}`),m("idle")}},2e3);function $(){h(""),g(""),_(!1),m("idle"),w(!1),y([])}Q(()=>{S.flush()}),ie(()=>{const e=s();e?(h(e.title),g(e.content||""),_(!1),m("idle"),w(!1)):$()});const C={title:u,setTitle:h,content:v,setContent:g,hasUnsavedChanges:p,setHasUnsavedChanges:_,autoSaveStatus:f,assetUrls:()=>s()?.asset_urls||{},showHistory:b,setShowHistory:w,history:k,loadHistory:async function(e){if(b())return void w(!1);const t=o();if(t)try{d(!0);const n=await t.nodes.history.listNodeVersions(e,{Limit:100});y(n.history?.filter(Boolean)||[]),w(!0)}catch(i){c(`${n("errors.failedToLoad")}: ${i}`)}finally{d(!1)}},loadVersion:async function(e,t){if(!confirm(n("editor.restoreConfirm")||"This will replace current editor content. Continue?"))return;const i=o();if(i)try{d(!0);const n=await i.nodes.history.getNodeVersion(e,t);g(n.content||""),_(!0),w(!1)}catch(r){c(`${n("errors.failedToLoad")}: ${r}`)}finally{d(!1)}},triggerAutoSave:S,flushAutoSave:S.flush,resetEditor:$,handleTitleChange:function(e){h(e);const t=a();t&&l(t,e),_(!0),S()},handleContentChange:function(e){g(e),_(!0),S()}};return i(rr.Provider,{value:C,get children(){return t.children}})};const ar=o(),sr=t=>{const{t:n}=be(),{wsApi:r}=Ji(),{selectedNodeId:o,selectedNodeData:a,loading:s,setLoading:l,setError:d}=ir(),[c,u]=e([]),[h,v]=e(!1);function g(){u([]),v(!1)}async function p(e){const t=r();if(t)try{l(!0);const n=(await t.nodes.table.records.listRecords(e,{Offset:0,Limit:50})).records||[];u(n),v(50===n.length)}catch(i){d(`${n("errors.failedToLoad")}: ${i}`)}finally{l(!1)}}ie(()=>{const e=a();e?.has_table?p(e.id):g()});const _={records:c,hasMore:h,loadRecords:p,loadMoreRecords:async function(){const e=o(),t=r();if(e&&!s()&&t)try{l(!0);const n=c().length,i=(await t.nodes.table.records.listRecords(e,{Offset:n,Limit:50})).records||[];u([...c(),...i]),v(50===i.length)}catch(i){d(`${n("errors.failedToLoad")}: ${i}`)}finally{l(!1)}},addRecord:async function(e){const t=o(),i=r();if(t&&i)try{l(!0),await i.nodes.table.records.createRecord(t,{data:e}),await p(t),d(null)}catch(a){d(`${n("errors.failedToCreate")}: ${a}`)}finally{l(!1)}},updateRecord:async function(e,t){const i=o(),a=r();if(i&&a)try{l(!0),await a.nodes.table.records.updateRecord(i,e,{data:t}),await p(i),d(null)}catch(s){d(`${n("errors.failedToSave")}: ${s}`)}finally{l(!1)}},deleteRecord:async function(e){const t=o(),i=r();if(t&&i&&confirm(n("table.confirmDeleteRecord")||"Delete this record?"))try{l(!0),await i.nodes.table.records.deleteRecord(t,e),await p(t),d(null)}catch(a){d(`${n("errors.failedToDelete")}: ${a}`)}finally{l(!1)}},clearRecords:g};return i(ar.Provider,{value:_,get children(){return t.children}})};const lr="_settings_1ivbi_1",dr="_header_1ivbi_7",cr="_backButton_1ivbi_20",ur="_section_1ivbi_36",hr="_table_1ivbi_45",vr="_roleSelect_1ivbi_63",gr="_error_1ivbi_69",pr="_success_1ivbi_77",_r="_tabs_1ivbi_85",fr="_activeTab_1ivbi_107",mr="_settingsForm_1ivbi_112",br="_formItem_1ivbi_119",wr="_saveButton_1ivbi_138",kr="_hint_1ivbi_157",yr="_inviteSection_1ivbi_163",Sr="_inviteForm_1ivbi_167",$r="_formGroup_1ivbi_178",Cr="_addRemoteSection_1ivbi_207",xr="_actions_1ivbi_219",Ir="_smallButton_1ivbi_224",Lr="_deleteButtonSmall_1ivbi_238",zr="_orgLink_1ivbi_252",Tr="_linkButton_1ivbi_266";var Er=k("<button>"),Mr=k("<div>"),Pr=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Br=k("<h4>"),Rr=k("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=editor></option><option value=viewer></option></select><button type=submit>"),Nr=k("<section><h3>"),Or=k("<form><div><label></label><input type=text required></div><button type=submit>"),Dr=k("<section><h3></h3><div><p></p><button> ‚Üí"),jr=k("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),Ar=k("<section><h3></h3><p>"),Wr=k("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),qr=k("<p>"),Ur=k("<select><option value=admin></option><option value=editor></option><option value=viewer>"),Fr=k("<tr><td></td><td></td><td>"),Hr=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function Vr(t){const{t:n}=be(),{user:r,orgApi:o,wsApi:a}=Ji(),[s,l]=e("members"),[d,c]=e([]),[u,_]=e([]),[m,w]=e(null),[k,y]=e(""),[S,$]=e(""),[C,x]=e(""),[I,L]=e("viewer"),[z,T]=e(""),[E,M]=e(""),[P,B]=e(!1),[R,N]=e(null),[O,D]=e(null),j=()=>r()?.workspace_role===Ht,A=async()=>{const e=o();if(e)try{B(!0),N(null);const t=a();if("members"===s()&&j()){const[n,i]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);c(n.users?.filter(e=>!!e)||[]),_(i.invitations?.filter(e=>!!e)||[])}if("workspace"===s()&&t){const e=await t.workspaces.getWorkspace();T(e.name),M(e.name)}if("sync"===s()&&j()&&t)try{const e=await t.settings.git.getGitRemote();w(e)}catch{w(null)}}catch(t){N(`${n("errors.failedToLoad")}: ${t}`)}finally{B(!1)}};ie(()=>{A()});const W=async e=>{e.preventDefault();const t=a();if(C()&&t)try{B(!0),await t.invitations.createWSInvitation({email:C(),role:I()}),x(""),D(n("success.invitationSent")||"Invitation sent successfully"),A()}catch(i){N(`${n("errors.failedToInvite")}: ${i}`)}finally{B(!1)}},q=async e=>{e.preventDefault();const t=a();if(t)try{B(!0),N(null),D(null),z()!==E()&&z().trim()&&await t.workspaces.updateWorkspace({name:z().trim()}),M(z().trim()),D(n("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(i){N(`${n("errors.failedToSave")}: ${i}`)}finally{B(!1)}},U=async e=>{e.preventDefault();const t=a();if(t)try{B(!0),N(null);const e=await t.settings.git.updateGitRemote({url:k(),token:S(),type:"custom",auth_type:S()?"token":"none"});w(e),D(n("success.remoteAdded")||"Git remote configured"),y(""),$("")}catch(i){N(`${n("errors.failedToAddRemote")}: ${i}`)}finally{B(!1)}},F=async()=>{const e=a();if(e)try{B(!0),N(null),D(null),await e.settings.git.pushGit(),D(n("success.pushSuccessful")||"Push successful"),A()}catch(t){N(`${n("errors.pushFailed")}: ${t}`)}finally{B(!1)}},H=async()=>{if(!confirm(n("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=a();if(e)try{B(!0),N(null),await e.settings.git.deleteGitRemote(),w(null),D(n("success.remoteRemoved")||"Remote removed")}catch(t){N(`${n("errors.failedToRemoveRemote")}: ${t}`)}finally{B(!1)}};return(()=>{var e=Wr(),o=e.firstChild,c=o.firstChild;c.firstChild;var _=c.nextSibling,w=o.nextSibling,E=w.firstChild,M=E.nextSibling;return c.$$click=()=>t.onBack(),h(c,()=>n("common.back"),null),h(_,()=>n("settings.title")),E.$$click=()=>l("members"),h(E,()=>n("settings.members")),M.$$click=()=>l("workspace"),h(M,()=>n("settings.workspace")),h(w,i(v,{get when(){return j()},get children(){var e=Er();return e.$$click=()=>l("sync"),h(e,()=>n("settings.gitSync")),g(()=>p(e,"sync"===s()?fr:"")),e}}),null),h(e,i(v,{get when(){return R()},get children(){var e=Mr();return h(e,R),g(()=>p(e,gr)),e}}),null),h(e,i(v,{get when(){return O()},get children(){var e=Mr();return h(e,O),g(()=>p(e,pr)),e}}),null),h(e,i(v,{get when(){return"members"===s()},get children(){var e=Nr(),t=e.firstChild;return h(t,()=>n("settings.members")),h(e,i(v,{get when(){return j()},get fallback(){return e=qr(),h(e,()=>n("settings.adminOnlyMembers")),e;var e},get children(){return[(y=Pr(),S=y.firstChild,$=S.firstChild.firstChild,z=$.nextSibling,T=z.nextSibling,E=S.nextSibling,h($,()=>n("settings.nameColumn")),h(z,()=>n("settings.emailColumn")),h(T,()=>n("settings.roleColumn")),h(E,i(f,{get each(){return d()},children:e=>{return t=Fr(),o=t.firstChild,s=o.nextSibling,l=s.nextSibling,h(o,()=>e.name),h(s,()=>e.email),h(l,i(v,{get when(){return e.id!==r()?.id},get fallback(){return e.workspace_role},get children(){var t=Ur(),i=t.firstChild,r=i.nextSibling,o=r.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const i=a();if(i)try{B(!0),await i.users.updateWSMemberRole({user_id:e,role:t}),D(n("success.roleUpdated")||"Role updated"),A()}catch(r){N(`${n("errors.failedToUpdateRole")}: ${r}`)}finally{B(!1)}})(e.id,t.target.value)),h(i,()=>n("settings.roleAdmin")),h(r,()=>n("settings.roleEditor")),h(o,()=>n("settings.roleViewer")),g(()=>p(t,vr)),g(()=>t.value=e.workspace_role),t}})),t;var t,o,s,l}})),g(()=>p(y,hr)),y),(e=Rr(),t=e.firstChild,o=t.firstChild,s=o.nextSibling,l=s.firstChild,c=l.nextSibling,_=c.firstChild,m=_.nextSibling,w=m.nextSibling,k=c.nextSibling,t.addEventListener("submit",W),h(o,()=>n("settings.inviteNewMember")),l.$$input=e=>x(e.target.value),c.addEventListener("change",e=>L(e.target.value)),h(_,()=>n("settings.roleAdmin")),h(m,()=>n("settings.roleEditor")),h(w,()=>n("settings.roleViewer")),h(k,()=>n("common.invite")),h(e,i(v,{get when(){return u().length>0},get children(){return[(l=Br(),h(l,()=>n("settings.pendingInvitations")),l),(e=Pr(),t=e.firstChild,r=t.firstChild.firstChild,o=r.nextSibling,a=o.nextSibling,s=t.nextSibling,h(r,()=>n("settings.emailColumn")),h(o,()=>n("settings.roleColumn")),h(a,()=>n("settings.sentColumn")),h(s,i(f,{get each(){return u()},children:e=>{return t=Fr(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,h(n,()=>e.email),h(i,()=>e.role),h(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),g(()=>p(e,hr)),e)];var e,t,r,o,a,s,l}}),null),g(i=>{var r=yr,o=Sr,a=$r,d=n("settings.emailPlaceholder")||"Email address",c=P();return r!==i.e&&p(e,i.e=r),o!==i.t&&p(t,i.t=o),a!==i.a&&p(s,i.a=a),d!==i.o&&b(l,"placeholder",i.o=d),c!==i.i&&(k.disabled=i.i=c),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),g(()=>l.value=C()),g(()=>c.value=I()),e)];var e,t,o,s,l,c,_,m,w,k,y,S,$,z,T,E}}),null),g(()=>p(e,ur)),e}}),null),h(e,i(v,{get when(){return"workspace"===s()},get children(){var e=Dr(),r=e.firstChild,o=r.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.firstChild;return h(r,()=>n("settings.workspaceSettings")),h(e,i(v,{get when(){return j()},get fallback(){return e=qr(),h(e,()=>n("settings.adminOnlyWorkspace")),e;var e},get children(){var e=Or(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",q),h(i,()=>n("settings.workspaceName")),r.$$input=e=>T(e.target.value),h(o,()=>n("settings.saveWorkspaceSettings")),g(n=>{var i=mr,r=br,a=wr,s=P();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),g(()=>r.value=z()),e}}),o),h(a,()=>n("settings.orgSettingsHint")),s.$$click=()=>t.onOpenOrgSettings(),h(s,()=>n("settings.openOrgSettings"),l),g(t=>{var n=ur,i=zr,r=Tr;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(s,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),h(e,i(v,{get when(){return"sync"===s()},get children(){var e=Ar(),t=e.firstChild,r=t.nextSibling;return h(t,()=>n("settings.gitSynchronization")),h(r,()=>n("settings.gitSyncHint")),h(e,i(v,{get when(){return m()},children:e=>{const t=e().last_sync;return i=Hr(),r=i.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,u=c.firstChild,v=u.nextSibling,h(o,()=>n("settings.urlColumn")),h(a,()=>n("settings.lastSyncColumn")),h(s,()=>n("common.actions")),h(l,()=>e().url),h(d,()=>t?new Date(t).toLocaleString():n("settings.never")),u.$$click=F,h(u,()=>n("common.push")),v.$$click=H,h(v,()=>n("common.remove")),g(e=>{var t=hr,n=xr,r=P(),o=Ir,a=P(),s=Lr;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(c,e.t=n),r!==e.a&&(u.disabled=e.a=r),o!==e.o&&p(u,e.o=o),a!==e.i&&(v.disabled=e.i=a),s!==e.n&&p(v,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,a,s,l,d,c,u,v}}),null),h(e,i(v,{get when(){return!m()},get children(){var e=jr(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,u=s.nextSibling;return h(t,()=>n("settings.addNewRemote")),i.addEventListener("submit",U),h(o,()=>n("settings.repositoryUrl")),a.$$input=e=>y(e.target.value),h(l,()=>n("settings.personalAccessToken")),d.$$input=e=>$(e.target.value),h(c,()=>n("settings.tokenHint")),h(u,()=>n("settings.addRemote")),g(t=>{var o=Cr,l=mr,h=br,v=n("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",g=br,_=n("settings.tokenPlaceholder")||"ghp_...",f=kr,m=wr,w=P();return o!==t.e&&p(e,t.e=o),l!==t.t&&p(i,t.t=l),h!==t.a&&p(r,t.a=h),v!==t.o&&b(a,"placeholder",t.o=v),g!==t.i&&p(s,t.i=g),_!==t.n&&b(d,"placeholder",t.n=_),f!==t.s&&p(c,t.s=f),m!==t.h&&p(u,t.h=m),w!==t.r&&(u.disabled=t.r=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),g(()=>a.value=k()),g(()=>d.value=S()),e}}),null),g(t=>{var n=ur,i=kr;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),g(t=>{var n=lr,i=dr,r=cr,a=_r,l="members"===s()?fr:"",d="workspace"===s()?fr:"";return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(c,t.a=r),a!==t.o&&p(w,t.o=a),l!==t.i&&p(E,t.i=l),d!==t.n&&p(M,t.n=d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}d(["click","input"]);const Gr="_settings_qni6l_1",Kr="_header_qni6l_7",Yr="_backButton_qni6l_20",Jr="_section_qni6l_36",Xr="_table_qni6l_45",Qr="_roleSelect_qni6l_63",Zr="_error_qni6l_69",eo="_success_qni6l_77",to="_tabs_qni6l_85",no="_activeTab_qni6l_107",io="_settingsForm_qni6l_112",ro="_formItem_qni6l_119",oo="_saveButton_qni6l_138",ao="_inviteSection_qni6l_157",so="_inviteForm_qni6l_161",lo="_formGroup_qni6l_172";var co=k("<div>"),uo=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),ho=k("<h4>"),vo=k("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=member></option></select><button type=submit>"),go=k("<section><h3>"),po=k("<form><div><label></label><input type=text required></div><button type=submit>"),_o=k("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),fo=k("<p>"),mo=k("<select><option value=owner></option><option value=admin></option><option value=member>"),bo=k("<tr><td></td><td></td><td>");function wo(t){const{t:r}=be(),{user:o,api:a}=Ji(),[s,l]=e("members"),[d,c]=e([]),[u,_]=e([]),[m,w]=e(""),[k,y]=e("member"),[S,$]=e(""),[C,x]=e(""),[I,L]=e(!1),[z,T]=e(null),[E,M]=e(null),P=n(()=>a().org(t.orgId)),B=n(()=>{const e=o()?.organizations?.find(e=>e.organization_id===t.orgId);return e?.role}),R=n(()=>{const e=B();return e===Ut||e===Ft}),N=async()=>{const e=P();try{if(L(!0),T(null),"members"===s()&&R()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);c(t.users?.filter(e=>!!e)||[]),_(n.invitations?.filter(e=>!!e)||[])}if("settings"===s()){const t=await e.organizations.getOrganization();$(t.name),x(t.name)}}catch(t){T(`${r("errors.failedToLoad")}: ${t}`)}finally{L(!1)}};ie(()=>{N()});const O=async e=>{e.preventDefault();const t=P();if(m())try{L(!0),await t.invitations.createOrgInvitation({email:m(),role:k()}),w(""),M(r("success.invitationSent")||"Invitation sent successfully"),N()}catch(n){T(`${r("errors.failedToInvite")}: ${n}`)}finally{L(!1)}},D=async e=>{e.preventDefault();const t=P();try{L(!0),T(null),M(null),S()!==C()&&S().trim()&&await t.organizations.updateOrganization({name:S().trim()}),x(S().trim()),M(r("success.orgSettingsSaved")||"Organization settings saved")}catch(n){T(`${r("errors.failedToSave")}: ${n}`)}finally{L(!1)}};return(()=>{var e=_o(),n=e.firstChild,a=n.firstChild;a.firstChild;var c=a.nextSibling,_=n.nextSibling,C=_.firstChild,x=C.nextSibling;return a.$$click=()=>t.onBack(),h(a,()=>r("common.back"),null),h(c,()=>r("settings.organizationSettings")),C.$$click=()=>l("members"),h(C,()=>r("settings.members")),x.$$click=()=>l("settings"),h(x,()=>r("settings.settings")),h(e,i(v,{get when(){return z()},get children(){var e=co();return h(e,z),g(()=>p(e,Zr)),e}}),null),h(e,i(v,{get when(){return E()},get children(){var e=co();return h(e,E),g(()=>p(e,eo)),e}}),null),h(e,i(v,{get when(){return"members"===s()},get children(){var e=go(),t=e.firstChild;return h(t,()=>r("settings.organizationMembers")),h(e,i(v,{get when(){return R()},get fallback(){return e=fo(),h(e,()=>r("settings.adminOnlyMembers")),e;var e},get children(){return[($=uo(),C=$.firstChild,x=C.firstChild.firstChild,z=x.nextSibling,E=z.nextSibling,B=C.nextSibling,h(x,()=>r("settings.nameColumn")),h(z,()=>r("settings.emailColumn")),h(E,()=>r("settings.roleColumn")),h(B,i(f,{get each(){return d()},children:e=>{return t=bo(),n=t.firstChild,a=n.nextSibling,s=a.nextSibling,h(n,()=>e.name),h(a,()=>e.email),h(s,i(v,{get when(){return e.id!==o()?.id},get fallback(){return e.org_role},get children(){var t=mo(),n=t.firstChild,i=n.nextSibling,o=i.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const n=P();try{L(!0),await n.users.updateOrgMemberRole({user_id:e,role:t}),M(r("success.roleUpdated")||"Role updated"),N()}catch(i){T(`${r("errors.failedToUpdateRole")}: ${i}`)}finally{L(!1)}})(e.id,t.target.value)),h(n,()=>r("settings.roleOwner")),h(i,()=>r("settings.roleAdmin")),h(o,()=>r("settings.roleMember")),g(()=>p(t,Qr)),g(()=>t.value=e.org_role),t}})),t;var t,n,a,s}})),g(()=>p($,Xr)),$),(e=vo(),t=e.firstChild,n=t.firstChild,a=n.nextSibling,s=a.firstChild,l=s.nextSibling,c=l.firstChild,_=c.nextSibling,S=l.nextSibling,t.addEventListener("submit",O),h(n,()=>r("settings.inviteNewMember")),s.$$input=e=>w(e.target.value),l.addEventListener("change",e=>y(e.target.value)),h(c,()=>r("settings.roleAdmin")),h(_,()=>r("settings.roleMember")),h(S,()=>r("common.invite")),h(e,i(v,{get when(){return u().length>0},get children(){return[(l=ho(),h(l,()=>r("settings.pendingInvitations")),l),(e=uo(),t=e.firstChild,n=t.firstChild.firstChild,o=n.nextSibling,a=o.nextSibling,s=t.nextSibling,h(n,()=>r("settings.emailColumn")),h(o,()=>r("settings.roleColumn")),h(a,()=>r("settings.sentColumn")),h(s,i(f,{get each(){return u()},children:e=>{return t=bo(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,h(n,()=>e.email),h(i,()=>e.role),h(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),g(()=>p(e,Xr)),e)];var e,t,n,o,a,s,l}}),null),g(n=>{var i=ao,o=so,l=lo,d=r("settings.emailPlaceholder")||"Email address",c=I();return i!==n.e&&p(e,n.e=i),o!==n.t&&p(t,n.t=o),l!==n.a&&p(a,n.a=l),d!==n.o&&b(s,"placeholder",n.o=d),c!==n.i&&(S.disabled=n.i=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),g(()=>s.value=m()),g(()=>l.value=k()),e)];var e,t,n,a,s,l,c,_,S,$,C,x,z,E,B}}),null),g(()=>p(e,Jr)),e}}),null),h(e,i(v,{get when(){return"settings"===s()},get children(){var e=go(),t=e.firstChild;return h(t,()=>r("settings.organizationPreferences")),h(e,i(v,{get when(){return R()},get fallback(){return e=fo(),h(e,()=>r("settings.adminOnlySettings")),e;var e},get children(){var e=po(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",D),h(n,()=>r("settings.organizationName")),i.$$input=e=>$(e.target.value),h(o,()=>r("common.save")),g(n=>{var i=io,r=ro,a=oo,s=I();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),g(()=>i.value=S()),e}}),null),g(()=>p(e,Jr)),e}}),null),g(t=>{var i=Gr,r=Kr,o=Yr,l=to,d="members"===s()?no:"",c="settings"===s()?no:"";return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),o!==t.a&&p(a,t.a=o),l!==t.o&&p(_,t.o=l),d!==t.i&&p(C,t.i=d),c!==t.n&&p(x,t.n=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}d(["click","input"]);const ko="_profile_179j3_1",yo="_header_179j3_7",So="_backButton_179j3_20",$o="_userInfoSection_179j3_36",Co="_avatarLarge_179j3_46",xo="_avatarImageLarge_179j3_58",Io="_initialsLarge_179j3_64",Lo="_userDetails_179j3_70",zo="_userName_179j3_74",To="_userEmail_179j3_80",Eo="_userRole_179j3_85",Mo="_section_179j3_95",Po="_error_179j3_104",Bo="_success_179j3_112",Ro="_settingsForm_179j3_120",No="_formItem_179j3_127",Oo="_checkboxLabel_179j3_146",Do="_saveButton_179j3_159",jo="_orgList_179j3_178",Ao="_orgItem_179j3_184",Wo="_orgInfo_179j3_194",qo="_orgName_179j3_200",Uo="_orgNameLink_179j3_204",Fo="_orgRole_179j3_214",Ho="_emptyState_179j3_223";var Vo=k("<div>"),Go=k("<div><header><button>‚Üê </button><h2>"),Ko=k("<span>"),Yo=k("<section><div></div><div><h3></h3><p>"),Jo=k("<section><h3>"),Xo=k("<div><label><input type=checkbox>"),Qo=k("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),Zo=k("<img referrerpolicy=no-referrer>"),ea=k("<p>"),ta=k("<a>"),na=k("<div><div><span>");function ia(t){const{t:n}=be(),{user:r,api:o,wsApi:a}=Ji(),[s,l]=e("light"),[d,c]=e("en"),[u,_]=e(!0),[m,w]=e(!1),[k,y]=e(null),[S,$]=e(null),C=()=>{const e=r(),t=e?.name||e?.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};ie(()=>{const e=r();l(e?.settings?.theme||"light"),c(e?.settings?.language||"en")});ie(()=>{(async()=>{const e=r();if(e)try{w(!0),y(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&_(t.settings?.notifications??!0)}catch(t){y(`${n("errors.failedToLoad")}: ${t}`)}finally{w(!1)}})()});const x=async e=>{e.preventDefault();const t=a();try{w(!0),y(null),$(null);const e={theme:s(),language:d()},i=[o().auth.updateUserSettings({settings:e})];if(t){const e={notifications:u()};i.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(i),$(n("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(i){y(`${n("errors.failedToSave")}: ${i}`)}finally{w(!1)}};return(()=>{var e=Go(),o=e.firstChild,a=o.firstChild;a.firstChild;var w=a.nextSibling;return a.$$click=()=>t.onBack(),h(a,()=>n("common.back"),null),h(w,()=>n("profile.title")),h(e,i(v,{get when(){return k()},get children(){var e=Vo();return h(e,k),g(()=>p(e,Po)),e}}),null),h(e,i(v,{get when(){return S()},get children(){var e=Vo();return h(e,S),g(()=>p(e,Bo)),e}}),null),h(e,i(v,{get when(){return r()},children:e=>{return[(j=Yo(),A=j.firstChild,W=A.nextSibling,q=W.firstChild,U=q.nextSibling,h(A,i(v,{get when(){return(()=>{const e=r()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=Ko(),h(e,C),g(()=>p(e,Io)),e;var e},children:t=>{return n=Zo(),g(i=>{var r=t(),o=e().name||"User",a=xo;return r!==i.e&&b(n,"src",i.e=r),o!==i.t&&b(n,"alt",i.t=o),a!==i.a&&p(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),h(q,()=>e().name),h(U,()=>e().email),h(W,i(v,{get when(){return e().workspace_role},get children(){var t=Ko();return h(t,()=>e().workspace_role),g(()=>p(t,Eo)),t}}),null),g(e=>{var t=$o,n=Co,i=Lo,r=zo,o=To;return t!==e.e&&p(j,e.e=t),n!==e.t&&p(A,e.t=n),i!==e.a&&p(W,e.a=i),r!==e.o&&p(q,e.o=r),o!==e.i&&p(U,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),j),(O=Jo(),D=O.firstChild,h(D,()=>n("profile.myOrganizations")),h(O,i(v,{get when(){return e().organizations?.length},get fallback(){return e=ea(),h(e,()=>n("profile.noOrganizations")),g(()=>p(e,Ho)),e;var e},get children(){var n=Vo();return h(n,i(f,{get each(){return e().organizations},children:e=>{const n=Xi(e.organization_name||"organization"),r=`/o/${e.organization_id}+${n}/settings`,o=e.organization_name||e.organization_id;return a=na(),s=a.firstChild,l=s.firstChild,h(s,i(v,{get when(){return e.role===Ft||e.role===Ut},get fallback(){return e=Ko(),h(e,o),g(()=>p(e,qo)),e;var e},get children(){var n=ta();return n.$$click=n=>{n.preventDefault(),t.onOrgSettings(e)},b(n,"href",r),h(n,o),g(()=>p(n,Uo)),n}}),l),h(l,()=>e.role),g(e=>{var t=Ao,n=Wo,i=Fo;return t!==e.e&&p(a,e.e=t),n!==e.t&&p(s,e.t=n),i!==e.a&&p(l,e.a=i),e},{e:void 0,t:void 0,a:void 0}),a;var a,s,l}})),g(()=>p(n,jo)),n}}),null),g(()=>p(O,Mo)),O),(o=Qo(),a=o.firstChild,w=a.nextSibling,k=w.firstChild,y=k.firstChild,S=y.nextSibling,$=S.firstChild,I=$.nextSibling,L=I.nextSibling,z=k.nextSibling,T=z.firstChild,E=T.nextSibling,M=E.firstChild,P=M.nextSibling,B=P.nextSibling,R=B.nextSibling,N=z.nextSibling,h(a,()=>n("settings.personalSettings")),w.addEventListener("submit",x),h(y,()=>n("settings.theme")),S.addEventListener("change",e=>l(e.target.value)),h($,()=>n("settings.themeLight")),h(I,()=>n("settings.themeDark")),h(L,()=>n("settings.themeSystem")),h(T,()=>n("settings.language")),E.addEventListener("change",e=>c(e.target.value)),h(M,()=>n("settings.languageEn")),h(P,()=>n("settings.languageFr")),h(B,()=>n("settings.languageDe")),h(R,()=>n("settings.languageEs")),h(w,i(v,{get when(){return e().workspace_id},get children(){var e=Xo(),t=e.firstChild,i=t.firstChild;return i.addEventListener("change",e=>_(e.currentTarget.checked)),h(t,()=>n("settings.enableNotifications"),null),g(n=>{var i=No,r=Oo;return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),n},{e:void 0,t:void 0}),g(()=>i.checked=u()),e}}),N),h(N,()=>n("settings.saveChanges")),g(e=>{var t=Mo,n=Ro,i=No,r=No,a=Do,s=m();return t!==e.e&&p(o,e.e=t),n!==e.t&&p(w,e.t=n),i!==e.a&&p(k,e.a=i),r!==e.o&&p(z,e.o=r),a!==e.i&&p(N,e.i=a),s!==e.n&&(N.disabled=e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),g(()=>S.value=s()),g(()=>E.value=d()),o)];var o,a,w,k,y,S,$,I,L,z,T,E,M,P,B,R,N,O,D,j,A,W,q,U}}),null),g(t=>{var n=ko,i=yo,r=So;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(a,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e})()}d(["click"]);const ra="_authContainer_1ksl8_1",oa="_authForm_1ksl8_9",aa="_formGroup_1ksl8_24",sa="_error_1ksl8_62",la="_toggle_1ksl8_72",da="_authFooter_1ksl8_87",ca="_oauthSection_1ksl8_104",ua="_divider_1ksl8_108",ha="_oauthButtons_1ksl8_127",va="_oauthIcon_1ksl8_133",ga="_googleButton_1ksl8_140",pa="_microsoftButton_1ksl8_141",_a="_githubButton_1ksl8_142",fa="_oauthButton_1ksl8_127";var ma=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),ba=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),wa=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),ka=k("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),ya=k("<div><div><span></span></div><div>"),Sa=k("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),$a=k("<div>"),Ca=k("<a>");const xa={[Vt]:function(){return e=ma(),g(()=>b(e,"class",va)),e;var e},[Gt]:function(){return e=ba(),g(()=>b(e,"class",va)),e;var e},[Kt]:function(){return e=wa(),g(()=>b(e,"class",va)),e;var e}},Ia={[Vt]:{style:ga,labelKey:"auth.loginWithGoogle"},[Gt]:{style:pa,labelKey:"auth.loginWithMicrosoft"},[Kt]:{style:_a,labelKey:"auth.loginWithGitHub"}};const La=ji((e,t)=>fetch(e,t));function za(n){const{t:r}=be(),[o]=t(()=>La.auth.listProviders().then(e=>e.providers)),[a,s]=e(!1),[l,d]=e(""),[c,u]=e(""),[_,w]=e(""),[k,y]=e(null),[S,$]=e(!1),C=async e=>{e.preventDefault(),y(null),$(!0);try{const e=a()?await La.auth.register({email:l(),password:c(),name:_()}):await La.auth.login({email:l(),password:c()});e.token&&e.user?n.onLogin(e.token,e.user):y("Invalid response from server")}catch(t){y(t instanceof Ni?t.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{$(!1)}};return E=Sa(),M=E.firstChild,P=M.firstChild,B=P.nextSibling,R=B.firstChild,N=R.nextSibling,O=B.nextSibling,D=O.firstChild,j=D.nextSibling,A=O.nextSibling,W=A.nextSibling,q=W.firstChild,U=W.nextSibling,F=U.firstChild,M.addEventListener("submit",C),h(P,(x=m(()=>!!a()),()=>x()?r("auth.createAccount"):r("auth.loginTitle"))),h(M,(I=m(()=>!!k()),()=>{return I()&&(e=$a(),h(e,k),g(()=>p(e,sa)),e);var e}),B),h(M,i(v,{get when(){return a()},get children(){var e=ka(),t=e.firstChild,n=t.nextSibling;return h(t,()=>r("auth.name")),n.$$input=e=>w(e.target.value),g(()=>p(e,aa)),g(()=>n.value=_()),e}}),B),h(R,()=>r("auth.email")),N.$$input=e=>d(e.target.value),h(D,()=>r("auth.password")),j.$$input=e=>u(e.target.value),h(A,(L=m(()=>!!S()),()=>L()?r("auth.pleaseWait"):m(()=>!!a())()?r("auth.register"):r("auth.login"))),h(M,i(v,{get when(){return(o()??[]).length>0},get children(){var e=ya(),t=e.firstChild,n=t.firstChild,a=t.nextSibling;return h(n,()=>r("auth.or")),h(a,i(f,{get each(){return o()},children:e=>{const t=function(e){const t=Ia[e];return t?{style:t.style,label:t.labelKey}:{style:fa,label:e.charAt(0).toUpperCase()+e.slice(1)}}(e),n=e in Ia,o=xa[e];return a=Ca(),b(a,"href",`/api/auth/oauth/${e}`),h(a,o&&i(o,{}),null),h(a,()=>n?r(t.label):t.label,null),g(()=>p(a,t.style)),a;var a}})),g(n=>{var i=ca,r=ua,o=ha;return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),o!==n.a&&p(a,n.a=o),n},{e:void 0,t:void 0,a:void 0}),e}}),W),h(W,(z=m(()=>!!a()),()=>z()?r("auth.alreadyHaveAccount"):r("auth.dontHaveAccount")),q),q.$$click=()=>s(!a()),h(q,(T=m(()=>!!a()),()=>T()?r("auth.login"):r("auth.register"))),F.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},h(F,()=>r("app.privacyPolicy")),g(e=>{var t=ra,n=oa,i=aa,r=aa,o=a()?"new-password":"current-password",s=S(),l=la,d=da;return t!==e.e&&p(E,e.e=t),n!==e.t&&p(M,e.t=n),i!==e.a&&p(B,e.a=i),r!==e.o&&p(O,e.o=r),o!==e.i&&b(j,"autocomplete",e.i=o),s!==e.n&&(A.disabled=e.n=s),l!==e.s&&p(W,e.s=l),d!==e.h&&p(U,e.h=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),g(()=>N.value=l()),g(()=>j.value=c()),E;var x,I,L,z,T,E,M,P,B,R,N,O,D,j,A,W,q,U,F}d(["input","click"]);const Ta="_container_mfa6v_1",Ea="_content_mfa6v_9",Ma="_header_mfa6v_19",Pa="_section_mfa6v_36",Ba="_footer_mfa6v_49",Ra="_backButton_mfa6v_57";var Na=k("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and tables are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function Oa(){return e=Na(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(l=s.firstChild).$$click=()=>window.history.back(),g(d=>{var c=Ta,u=Ea,h=Ma,v=Pa,g=Pa,_=Pa,f=Pa,m=Ba,b=Ra;return c!==d.e&&p(e,d.e=c),u!==d.t&&p(t,d.t=u),h!==d.a&&p(n,d.a=h),v!==d.o&&p(i,d.o=v),g!==d.i&&p(r,d.i=g),_!==d.n&&p(o,d.n=_),f!==d.s&&p(a,d.s=f),m!==d.h&&p(s,d.h=m),b!==d.r&&p(l,d.r=b),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,n,i,r,o,a,s,l}d(["click"]);const Da="_container_mfa6v_1",ja="_content_mfa6v_9",Aa="_header_mfa6v_19",Wa="_section_mfa6v_36",qa="_footer_mfa6v_49",Ua="_backButton_mfa6v_57";var Fa=k("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, data, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the ‚ÄúContent‚Äù) and the trademarks, service marks, and logos contained therein (the ‚ÄúMarks‚Äù) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function Ha(){return e=Fa(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,(d=l.firstChild).$$click=()=>window.history.back(),g(c=>{var u=Da,h=ja,v=Aa,g=Wa,_=Wa,f=Wa,m=Wa,b=Wa,w=qa,k=Ua;return u!==c.e&&p(e,c.e=u),h!==c.t&&p(t,c.t=h),v!==c.a&&p(n,c.a=v),g!==c.o&&p(i,c.o=g),_!==c.i&&p(r,c.i=_),f!==c.n&&p(o,c.n=f),m!==c.s&&p(a,c.s=m),b!==c.h&&p(s,c.h=b),w!==c.r&&p(l,c.r=w),k!==c.d&&p(d,c.d=k),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,n,i,r,o,a,s,l,d}d(["click"]);const Va="_banner_172qk_1",Ga="_content_172qk_23",Ka="_title_172qk_27",Ya="_message_172qk_32",Ja="_actions_172qk_37",Xa="_installButton_172qk_42",Qa="_dismissButton_172qk_56";var Za=k("<div><div><div></div><div></div></div><div><button></button><button>");const es="mddb_pwa_dismissed";function ts(){const{t:t}=be(),[n,r]=e(null),[o,a]=e(!1);u(()=>{if(function(){const e=localStorage.getItem(es);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),r(e),a(!0)},t=()=>{a(!1),r(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),Q(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=n();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),r(null)},l=()=>{localStorage.setItem(es,(new Date).toISOString()),a(!1)};return i(v,{get when(){return m(()=>!!o())()&&n()},get children(){var e=Za(),n=e.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,a=o.firstChild,d=a.nextSibling;return h(i,()=>t("pwa.installTitle")),h(r,()=>t("pwa.installMessage")),a.$$click=l,h(a,()=>t("pwa.dismissButton")),d.$$click=s,h(d,()=>t("pwa.installButton")),g(t=>{var s=Va,l=Ga,c=Ka,u=Ya,h=Ja,v=Qa,g=Xa;return s!==t.e&&p(e,t.e=s),l!==t.t&&p(n,t.t=l),c!==t.a&&p(i,t.a=c),u!==t.o&&p(r,t.o=u),h!==t.i&&p(o,t.i=h),v!==t.n&&p(a,t.n=v),g!==t.s&&p(d,t.s=g),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}})}d(["click"]);const ns="_overlay_v0iwf_1",is="_modal_v0iwf_11",rs="_header_v0iwf_28",os="_formGroup_v0iwf_53",as="_primaryButton_v0iwf_76",ss="_secondaryButton_v0iwf_99",ls="_actions_v0iwf_113",ds="_error_v0iwf_127";var cs=k("<button type=button>"),us=k("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),hs=k("<div>");function vs(t){const{t:n}=be(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=e=>{t.isFirstOrg||e.target!==e.currentTarget||t.onClose()};return S=us(),$=S.firstChild,C=$.firstChild,x=C.firstChild,I=x.nextSibling,L=C.nextSibling,z=L.firstChild,T=z.firstChild,E=T.nextSibling,M=z.nextSibling,P=M.firstChild,S.$$click=u,h(x,(_=m(()=>!!t.isFirstOrg),()=>_()?n("createOrg.firstOrgTitle"):n("createOrg.title"))),h(I,(f=m(()=>!!t.isFirstOrg),()=>f()?n("createOrg.firstOrgDescription"):n("createOrg.description"))),h($,(w=m(()=>!!l()),()=>{return w()&&(e=hs(),h(e,l),g(()=>p(e,ds)),e);var e}),L),L.addEventListener("submit",c),h(T,()=>n("createOrg.nameLabel")),E.$$input=e=>o(e.target.value),h(M,i(v,{get when(){return!t.isFirstOrg},get children(){var e=cs();return y(e,"click",t.onClose),h(e,()=>n("common.cancel")),g(()=>p(e,ss)),e}}),P),h(P,(k=m(()=>!!a()),()=>k()?n("common.creating"):n("createOrg.create"))),g(e=>{var i=ns,o=is,s=rs,l=os,d=n("createOrg.namePlaceholder")||"",c=ls,u=as,h=!r().trim()||a(),v=t.isFirstOrg?{flex:1}:void 0;return i!==e.e&&p(S,e.e=i),o!==e.t&&p($,e.t=o),s!==e.a&&p(C,e.a=s),l!==e.o&&p(z,e.o=l),d!==e.i&&b(E,"placeholder",e.i=d),c!==e.n&&p(M,e.n=c),u!==e.s&&p(P,e.s=u),h!==e.h&&(P.disabled=e.h=h),e.r=ue(P,v,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),g(()=>E.value=r()),S;var _,f,w,k,S,$,C,x,I,L,z,T,E,M,P}d(["click","input"]);var gs=k("<button type=button>"),ps=k("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),_s=k("<div>");function fs(t){const{t:n}=be(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=e=>{t.isFirstWorkspace||e.target!==e.currentTarget||t.onClose()};return S=ps(),$=S.firstChild,C=$.firstChild,x=C.firstChild,I=x.nextSibling,L=C.nextSibling,z=L.firstChild,T=z.firstChild,E=T.nextSibling,M=z.nextSibling,P=M.firstChild,S.$$click=u,h(x,(_=m(()=>!!t.isFirstWorkspace),()=>_()?n("createWorkspace.firstWorkspaceTitle"):n("createWorkspace.title"))),h(I,(f=m(()=>!!t.isFirstWorkspace),()=>f()?n("createWorkspace.firstWorkspaceDescription"):n("createWorkspace.description"))),h($,(w=m(()=>!!l()),()=>{return w()&&(e=_s(),h(e,l),g(()=>p(e,ds)),e);var e}),L),L.addEventListener("submit",c),h(T,()=>n("createWorkspace.nameLabel")),E.$$input=e=>o(e.target.value),h(M,i(v,{get when(){return!t.isFirstWorkspace},get children(){var e=gs();return y(e,"click",t.onClose),h(e,()=>n("common.cancel")),g(()=>p(e,ss)),e}}),P),h(P,(k=m(()=>!!a()),()=>k()?n("common.creating"):n("createWorkspace.create"))),g(e=>{var i=ns,o=is,s=rs,l=os,d=n("createWorkspace.namePlaceholder")||"",c=ls,u=as,h=!r().trim()||a(),v=t.isFirstWorkspace?{flex:1}:void 0;return i!==e.e&&p(S,e.e=i),o!==e.t&&p($,e.t=o),s!==e.a&&p(C,e.a=s),l!==e.o&&p(z,e.o=l),d!==e.i&&b(E,"placeholder",e.i=d),c!==e.n&&p(M,e.n=c),u!==e.s&&p(P,e.s=u),h!==e.h&&(P.disabled=e.h=h),e.r=ue(P,v,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),g(()=>E.value=r()),S;var _,f,w,k,S,$,C,x,I,L,z,T,E,M,P}d(["click","input"]);const ms="_overlay_1l8b3_1",bs="_modal_1l8b3_11",ws="_header_1l8b3_28",ks="_error_1l8b3_43",ys="_setupBox_1l8b3_53",Ss="_setupHeader_1l8b3_61",$s="_setupTitle_1l8b3_70",Cs="_createLink_1l8b3_75",xs="_setupSteps_1l8b3_93",Is="_subSteps_1l8b3_109",Ls="_formGroup_1l8b3_119",zs="_actions_1l8b3_137",Ts="_primaryButton_1l8b3_143",Es="_secondaryButton_1l8b3_166";var Ms=k('<div><div><header><h2></h2><p></p></header><div><div><span></span><a href=https://www.notion.so/profile/integrations/form/new-integration target=_blank rel="noopener noreferrer"> &#x2197;</a></div><ol><li><ol><li></li><li></li><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li></ol></div><form><div><label></label><input type=password autofocus></div><div><button type=button></button><button type=submit>'),Ps=k("<div>");function Bs(t){const{t:n}=be(),[i,r]=e(""),[o,a]=e(!1),[s,l]=e(null),d=e=>{"Escape"!==e.key||o()||t.onClose()};u(()=>{document.addEventListener("keydown",d)}),Q(()=>{document.removeEventListener("keydown",d)});const c=async e=>{if(e.preventDefault(),i().trim())try{a(!0),l(null),await t.onImport({notionToken:i().trim()}),t.onClose()}catch(n){l(String(n))}finally{a(!1)}},v=e=>{e.target===e.currentTarget&&t.onClose()};return w=Ms(),k=w.firstChild,S=k.firstChild,$=S.firstChild,C=$.nextSibling,x=S.nextSibling,I=x.firstChild,L=I.firstChild,z=L.nextSibling,T=z.firstChild,E=I.nextSibling,M=E.firstChild,P=M.firstChild,B=P.firstChild,R=B.nextSibling,N=R.nextSibling,O=N.nextSibling,D=M.nextSibling,j=D.firstChild,A=j.firstChild,W=A.nextSibling,q=D.nextSibling,U=q.firstChild,F=U.firstChild,H=F.nextSibling,V=x.nextSibling,G=V.firstChild,K=G.firstChild,Y=K.nextSibling,J=G.nextSibling,X=J.firstChild,Z=X.nextSibling,w.$$click=v,h($,()=>n("notionImport.title")),h(C,()=>n("notionImport.description")),h(k,(_=m(()=>!!s()),()=>{return _()&&(e=Ps(),h(e,s),g(()=>p(e,ks)),e);var e}),x),h(L,()=>n("notionImport.setupTitle")),h(z,()=>n("notionImport.createIntegration"),T),h(M,()=>n("notionImport.step1Header"),P),h(B,()=>n("notionImport.step1a")),h(R,()=>n("notionImport.step1b")),h(N,()=>n("notionImport.step1c")),h(O,()=>n("notionImport.step1d")),h(D,()=>n("notionImport.step2Header"),j),h(A,()=>n("notionImport.step2a")),h(W,()=>n("notionImport.step2b")),h(q,()=>n("notionImport.step3Header"),U),h(F,()=>n("notionImport.step3a")),h(H,()=>n("notionImport.step3b")),V.addEventListener("submit",c),h(K,()=>n("notionImport.notionToken")),Y.$$input=e=>r(e.target.value),y(X,"click",t.onClose),h(X,()=>n("common.cancel")),h(Z,(f=m(()=>!!o()),()=>f()?n("notionImport.importing"):n("notionImport.startImport"))),g(e=>{var t=ms,r=bs,a=ws,s=ys,l=Ss,d=$s,c=Cs,u=xs,h=Is,v=Is,g=Is,_=Ls,f=n("notionImport.notionTokenPlaceholder")||"",m=zs,y=Es,$=Ts,C=!i().trim()||o();return t!==e.e&&p(w,e.e=t),r!==e.t&&p(k,e.t=r),a!==e.a&&p(S,e.a=a),s!==e.o&&p(x,e.o=s),l!==e.i&&p(I,e.i=l),d!==e.n&&p(L,e.n=d),c!==e.s&&p(z,e.s=c),u!==e.h&&p(E,e.h=u),h!==e.r&&p(P,e.r=h),v!==e.d&&p(j,e.d=v),g!==e.l&&p(U,e.l=g),_!==e.u&&p(G,e.u=_),f!==e.c&&b(Y,"placeholder",e.c=f),m!==e.w&&p(J,e.w=m),y!==e.m&&p(X,e.m=y),$!==e.f&&p(Z,e.f=$),C!==e.y&&(Z.disabled=e.y=C),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),g(()=>Y.value=i()),w;var _,f,w,k,S,$,C,x,I,L,z,T,E,M,P,B,R,N,O,D,j,A,W,q,U,F,H,V,G,K,Y,J,X,Z}d(["click","input"]);const Rs="_banner_tmw21_1",Ns="_success_tmw21_11",Os="_error_tmw21_16",Ds="_cancelled_tmw21_21",js="_icon_tmw21_26",As="_content_tmw21_30",Ws="_message_tmw21_37",qs="_progress_tmw21_41",Us="_stats_tmw21_46",Fs="_stat_tmw21_46",Hs="_statValue_tmw21_58",Vs="_actions_tmw21_63",Gs="_cancelButton_tmw21_68",Ks="_dismissButton_tmw21_82",Ys="_spinner_tmw21_95";var Js=k("<span>&#x21BB;"),Xs=k("<span>&#x2713;"),Qs=k("<span>&#x2717;"),Zs=k("<span>&#x26A0;"),el=k("<span>/<!>: "),tl=k("<span><span></span> "),nl=k("<div>"),il=k("<span>"),rl=k("<button>"),ol=k("<div><span></span><div><span></span></div><div>");function al(e){const{t:t}=be(),n=()=>e.status,r=()=>{switch(n().status){case"running":return t("notionImport.importInProgress");case"completed":return t("notionImport.importCompleted");case"failed":return t("notionImport.importFailed");case"cancelled":return t("notionImport.importCancelled");default:return""}},o=()=>{switch(n().status){case"running":return e=Js(),g(()=>p(e,Ys)),e;case"completed":return Xs();case"failed":return Qs();case"cancelled":return Zs();default:return null}var e},a=()=>["completed","failed","cancelled"].includes(n().status);return s=ol(),l=s.firstChild,d=l.nextSibling,c=d.firstChild,u=d.nextSibling,h(l,o),h(c,r),h(d,i(v,{get when(){return m(()=>"running"===n().status)()&&n().message},get children(){var e=el(),t=e.firstChild,i=t.nextSibling;return i.nextSibling,h(e,()=>n().progress,t),h(e,()=>n().total,i),h(e,()=>n().message,null),g(()=>p(e,qs)),e}}),null),h(d,i(v,{get when(){return m(()=>!!a())()&&(n().pages||n().databases||n().records)},get children(){var e=nl();return h(e,i(v,{get when(){return n().pages},get children(){var e=tl(),i=e.firstChild;return i.nextSibling,h(i,()=>n().pages),h(e,()=>t("notionImport.pagesImported"),null),g(t=>{var n=Fs,r=Hs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),h(e,i(v,{get when(){return n().databases},get children(){var e=tl(),i=e.firstChild;return i.nextSibling,h(i,()=>n().databases),h(e,()=>t("notionImport.databasesImported"),null),g(t=>{var n=Fs,r=Hs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),h(e,i(v,{get when(){return n().records},get children(){var e=tl(),i=e.firstChild;return i.nextSibling,h(i,()=>n().records),h(e,()=>t("notionImport.recordsImported"),null),g(t=>{var n=Fs,r=Hs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),h(e,i(v,{get when(){return n().assets},get children(){var e=tl(),i=e.firstChild;return i.nextSibling,h(i,()=>n().assets),h(e,()=>t("notionImport.assetsImported"),null),g(t=>{var n=Fs,r=Hs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),h(e,i(v,{get when(){return n().errors},get children(){var e=tl(),i=e.firstChild;return i.nextSibling,h(i,()=>n().errors),h(e,()=>t("notionImport.errorsEncountered"),null),g(t=>{var n=Fs,r=Hs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(()=>p(e,Us)),e}}),null),h(d,i(v,{get when(){return m(()=>"failed"===n().status)()&&n().message},get children(){var e=il();return h(e,()=>n().message),g(()=>p(e,qs)),e}}),null),h(u,i(v,{get when(){return"running"===n().status},get children(){var n=rl();return y(n,"click",e.onCancel),h(n,()=>t("notionImport.cancel")),g(()=>p(n,Gs)),n}}),null),h(u,i(v,{get when(){return a()},get children(){var n=rl();return y(n,"click",e.onDismiss),h(n,()=>t("notionImport.dismiss")),g(()=>p(n,Ks)),n}}),null),g(e=>{var t=(()=>{switch(n().status){case"completed":return`${Rs} ${Ns}`;case"failed":return`${Rs} ${Os}`;case"cancelled":return`${Rs} ${Ds}`;default:return Rs}})(),i=js,r=As,o=Ws,a=Vs;return t!==e.e&&p(s,e.e=t),i!==e.t&&p(l,e.t=i),r!==e.a&&p(d,e.a=r),o!==e.o&&p(c,e.o=o),a!==e.i&&p(u,e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s;var s,l,d,c,u}d(["click"]);const sl="_userMenu_o60yu_1",ll="_avatarButton_o60yu_5",dl="_avatarImage_o60yu_24",cl="_initials_o60yu_30",ul="_dropdown_o60yu_37",hl="_userInfo_o60yu_50",vl="_userName_o60yu_57",gl="_userEmail_o60yu_63",pl="_userRole_o60yu_68",_l="_divider_o60yu_78",fl="_menuItem_o60yu_83";var ml=k("<span>"),bl=k("<div role=menu><div><span></span><span></span></div><div></div><button role=menuitem></button><button role=menuitem>"),wl=k("<div><button aria-haspopup=menu>"),kl=k("<img referrerpolicy=no-referrer>");function yl(t){const{t:n}=be(),{user:r,logout:o}=Ji(),[a,s]=e(!1);let l;const d=()=>{const e=r();if(!e)return"";const t=e.name||e.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},c=()=>r()?.name||"",u=()=>r()?.email||"",_=()=>r()?.workspace_role;ct(()=>l,()=>s(!1));const f=()=>{s(!1),o()},m=()=>{s(!1),t.onProfile()};return w=wl(),k=w.firstChild,"function"==typeof l?re(l,w):l=w,k.$$click=()=>s(!a()),h(k,i(v,{get when(){return(()=>{const e=r();if(!e)return null;const t=e.oauth_identities;if(!t)return null;for(const n of t)if(n.avatar_url)return n.avatar_url;return null})()},get fallback(){return e=ml(),h(e,d),g(()=>p(e,cl)),e;var e},children:e=>{return t=kl(),g(n=>{var i=e(),r=c()||"User",o=dl;return i!==n.e&&b(t,"src",n.e=i),r!==n.t&&b(t,"alt",n.t=r),o!==n.a&&p(t,n.a=o),n},{e:void 0,t:void 0,a:void 0}),t;var t}})),h(w,i(v,{get when(){return a()},get children(){var e=bl(),t=e.firstChild,r=t.firstChild,o=r.nextSibling,a=t.nextSibling,s=a.nextSibling,l=s.nextSibling;return h(r,c),h(o,u),h(t,i(v,{get when(){return _()},get children(){var e=ml();return h(e,_),g(()=>p(e,pl)),e}}),null),s.$$click=m,h(s,()=>n("userMenu.profile")),l.$$click=f,h(l,()=>n("userMenu.logout")),g(n=>{var i=ul,d=hl,c=vl,u=gl,h=_l,v=fl,g=fl;return i!==n.e&&p(e,n.e=i),d!==n.t&&p(t,n.t=d),c!==n.a&&p(r,n.a=c),u!==n.o&&p(o,n.o=u),h!==n.i&&p(a,n.i=h),v!==n.n&&p(s,n.n=v),g!==n.s&&p(l,n.s=g),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),g(e=>{var t=sl,i=ll,r=c()||u(),o=n("userMenu.profile")||"User menu",s=a();return t!==e.e&&p(w,e.e=t),i!==e.t&&p(k,e.t=i),r!==e.a&&b(k,"title",e.a=r),o!==e.o&&b(k,"aria-label",e.o=o),s!==e.i&&b(k,"aria-expanded",e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),w;var w,k}d(["click"]);const Sl="_wsMenu_1kkrz_1",$l="_wsButton_1kkrz_5",Cl="_wsName_1kkrz_23",xl="_chevron_1kkrz_31",Il="_dropdown_1kkrz_36",Ll="_wsList_1kkrz_49",zl="_orgHeader_1kkrz_54",Tl="_wsItem_1kkrz_65",El="_active_1kkrz_84",Ml="_wsItemName_1kkrz_88",Pl="_checkmark_1kkrz_94",Bl="_divider_1kkrz_99",Rl="_menuItem_1kkrz_104",Nl="_icon_1kkrz_123",Ol="_plusIcon_1kkrz_127";var Dl=k("<div role=menu><div></div><div></div><button role=menuitem><span aria-hidden=true>‚öô</span></button><button role=menuitem><span aria-hidden=true>+</span></button><button role=menuitem><span aria-hidden=true>&#x2B07;"),jl=k("<div><button aria-haspopup=menu><span></span><span aria-hidden=true>"),Al=k("<div>"),Wl=k("<span aria-hidden=true>‚úì"),ql=k("<button role=menuitem><span>");function Ul(t){const{t:r}=be(),{user:o}=Ji(),{switchWorkspace:a}=ir(),[s,l]=e(!1);let d;const c=n(()=>{const e=o();if(!e)return[];const t=new Map,n=e.organizations||[],i=e.workspaces||[];for(const r of n)t.set(r.organization_id,{orgId:r.organization_id,orgName:r.organization_name||r.organization_id,workspaces:[]});for(const r of i){const e=t.get(r.organization_id);e&&e.workspaces.push(r)}return Array.from(t.values()).filter(e=>e.workspaces.length>0)}),u=()=>o()?.workspace_id||"",_=()=>{const e=o();if(!e)return r("app.workspace");const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);return t?.workspace_name||r("app.workspace")};ct(()=>d,()=>l(!1));const m=()=>{l(!1),t.onOpenSettings()},w=()=>{l(!1),t.onCreateWorkspace()},k=()=>{l(!1),t.onImportFromNotion()},y=n(()=>c().length>1);return S=jl(),$=S.firstChild,C=$.firstChild,x=C.nextSibling,"function"==typeof d?re(d,S):d=S,$.$$click=()=>l(!s()),h(C,_),h(x,()=>s()?"‚ñ≤":"‚ñº"),h(S,i(v,{get when(){return s()},get children(){var e=Dl(),t=e.firstChild,n=t.nextSibling,o=n.nextSibling,s=o.firstChild,d=o.nextSibling,_=d.firstChild,b=d.nextSibling,S=b.firstChild;return h(t,i(f,{get each(){return c()},children:e=>[i(v,{get when(){return y()},get children(){var t=Al();return h(t,()=>e.orgName),g(()=>p(t,zl)),t}}),i(f,{get each(){return e.workspaces},children:e=>{return t=ql(),n=t.firstChild,t.$$click=()=>{return t=e.workspace_id,l(!1),void(t!==u()&&a(t));var t},h(n,()=>e.workspace_name||e.workspace_id),h(t,i(v,{get when(){return e.workspace_id===u()},get children(){var e=Wl();return g(()=>p(e,Pl)),e}}),null),g(i=>{var r=`${Tl} ${e.workspace_id===u()?El:""}`,o=Ml;return r!==i.e&&p(t,i.e=r),o!==i.t&&p(n,i.t=o),i},{e:void 0,t:void 0}),t;var t,n}})]})),o.$$click=m,h(o,()=>r("app.settings"),null),d.$$click=w,h(d,()=>r("createWorkspace.title"),null),b.$$click=k,h(b,()=>r("notionImport.title"),null),g(i=>{var r=Il,a=Ll,l=Bl,c=Rl,u=Nl,h=Rl,v=Ol,g=Rl,f=Nl;return r!==i.e&&p(e,i.e=r),a!==i.t&&p(t,i.t=a),l!==i.a&&p(n,i.a=l),c!==i.o&&p(o,i.o=c),u!==i.i&&p(s,i.i=u),h!==i.n&&p(d,i.n=h),v!==i.s&&p(_,i.s=v),g!==i.h&&p(b,i.h=g),f!==i.r&&p(S,i.r=f),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e}}),null),g(e=>{var t=Sl,n=$l,i=_(),o=r("app.switchWorkspace")||"Switch workspace",a=s(),l=Cl,d=xl;return t!==e.e&&p(S,e.e=t),n!==e.t&&p($,e.t=n),i!==e.a&&b($,"title",e.a=i),o!==e.o&&b($,"aria-label",e.o=o),a!==e.i&&b($,"aria-expanded",e.i=a),l!==e.n&&p(C,e.n=l),d!==e.s&&p(x,e.s=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),S;var S,$,C,x}d(["click"]);const Fl="_errorBoundary_1gyxj_3",Hl="_errorMessage_1gyxj_21",Vl="_errorDetails_1gyxj_27",Gl="_retryButton_1gyxj_51";var Kl=k("<div role=alert><h2>Something went wrong</h2><p></p><details><summary>Technical details</summary><pre></pre></details><button>Try again");function Yl(e){return t=Kl(),n=t.firstChild.nextSibling,i=n.nextSibling,r=i.firstChild.nextSibling,o=i.nextSibling,h(n,()=>e.error.message),h(r,()=>e.error.stack),y(o,"click",e.reset),g(e=>{var r=Fl,a=Hl,s=Vl,l=Gl;return r!==e.e&&p(t,e.e=r),a!==e.t&&p(n,e.t=a),s!==e.a&&p(i,e.a=s),l!==e.o&&p(o,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t;var t,n,i,r,o}const Jl=e=>i(he,{fallback:(e,t)=>i(Yl,{error:e,reset:t}),get children(){return e.children}});d(["click"]);const Xl="_app_szlfa_13",Ql="_header_szlfa_19",Zl="_headerLeft_szlfa_29",ed="_userInfo_szlfa_37",td="_container_szlfa_44",nd="_main_szlfa_50",id="_error_szlfa_58",rd="_editor_szlfa_66",od="_editorHeader_szlfa_74",ad="_editorStatus_szlfa_83",sd="_unsavedIndicator_szlfa_91",ld="_savingIndicator_szlfa_96",dd="_savedIndicator_szlfa_101",cd="_titleInput_szlfa_111",ud="_nodeContent_szlfa_121",hd="_tableView_szlfa_128",vd="_tableHeader_szlfa_136",gd="_viewToggle_szlfa_143",pd="_active_szlfa_159",_d="_breadcrumbs_szlfa_164",fd="_breadcrumbItem_szlfa_175",md="_breadcrumbSeparator_szlfa_186",bd="_historyPanel_szlfa_191",wd="_historyList_szlfa_205",kd="_historyItem_szlfa_212",yd="_historyMeta_szlfa_225",Sd="_historyDate_szlfa_233",$d="_historyHash_szlfa_237",Cd="_historyMessage_szlfa_244",xd="_hamburger_szlfa_252",Id="_mobileBackdrop_szlfa_263";var Ld=k("<nav>"),zd=k("<div>"),Td=k("<div role=alert aria-live=polite>"),Ed=k("<span>‚óè "),Md=k("<span>‚ü≥ "),Pd=k("<span>‚úì "),Bd=k("<li>"),Rd=k("<div><h3></h3><ul>"),Nd=k("<div><div><h3></h3><div><button></button><button></button><button></button><button>"),Od=k("<div><div><input type=text><div></div></div><div>"),Dd=k("<div><main>"),jd=k('<div><header><div><button aria-label="Toggle menu">‚ò∞</button></div><div>'),Ad=k("<span>/"),Wd=k("<span>"),qd=k("<li><div><span></span><span></span></div><div>");function Ud(){const{t:t,locale:n,setLocale:o}=be(),{user:a,login:s,wsApi:l,orgApi:d}=Ji(),{nodes:c,selectedNodeId:_,setSelectedNodeId:k,selectedNodeData:y,setSelectedNodeData:S,breadcrumbPath:$,loading:C,setLoading:x,error:I,setError:L,switchWorkspace:z,createOrganization:T,createWorkspace:E,loadNodes:M,loadNode:P,fetchNodeChildren:B}=ir(),{title:R,content:N,hasUnsavedChanges:O,autoSaveStatus:D,assetUrls:j,showHistory:A,history:W,loadHistory:q,loadVersion:U,flushAutoSave:F,handleTitleChange:H,handleContentChange:V}=function(){const e=r(rr);if(!e)throw new Error("useEditor must be used within an EditorProvider");return e}(),{records:G,hasMore:K,loadMoreRecords:Y,addRecord:J,updateRecord:X,deleteRecord:Z}=function(){const e=r(ar);if(!e)throw new Error("useRecords must be used within a RecordsProvider");return e}(),[ee,te]=e(!1),[ne,re]=e(!1),[oe,ae]=e(null),[se,le]=e(!1),[ce,ue]=e(!1),[he,ve]=e(!1),[ge,pe]=e("table"),[_e,fe]=e(!1),[me,we]=e(!1),[ke,ye]=e(!1),[Se,$e]=e(!1),[Ce,xe]=e(null),[Ie,Le]=e(null),[ze,Te]=e(null);ie(()=>{const e=a(),t=e?.settings?.language;t&&["en","fr","de","es"].includes(t)&&t!==n()&&(o(t),localStorage.setItem("mddb_locale",t))});const Ee=async()=>{const e=window.location.pathname,n=function(e){return"/privacy"===e?"privacy":"/terms"===e?"terms":"/profile"===e?"profile":null}(e);if("privacy"===n)return ue(!0),ve(!1),void le(!1);if("terms"===n)return ve(!0),ue(!1),void le(!1);if("profile"===n)return le(!0),te(!1),ue(!1),void ve(!1);le(!1),ue(!1),ve(!1);const i=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(i){const e=i.id;if(a()&&a()?.workspace_id!==e)try{const n=a(),i=n?.workspaces?.some(t=>t.workspace_id===e);if(!i){L(t("errors.noAccessToWs")||"You do not have access to this workspace");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",Qi(e,i)),2e3))}await z(e,!1)}catch{return}return te(!0),void re(!1)}te(!1);const r=function(e){const t=e.match(/^\/o\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(r){const e=r.id,n=a(),i=n?.organizations?.some(t=>t.organization_id===e);if(!i){L(t("errors.noAccessToOrg")||"You do not have access to this organization");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",Qi(e,i)),2e3))}return re(!0),void ae(e)}re(!1),ae(null);const o=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/([a-zA-Z0-9_-]+)(?:\+.*)?$/);return t&&t[1]&&t[2]?{wsId:t[1],nodeId:t[2]}:null}(e);if(o){const e=o.nodeId;return void(e!==_()&&(F(),P(e,!1)))}const s=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/);return t&&t[1]?{wsId:t[1]}:null}(e);s&&c.length>0&&c[0]?P(c[0].id,!1):(k(null),S(null))};let Me;u(()=>{window.addEventListener("popstate",Ee),Q(()=>window.removeEventListener("popstate",Ee))});const Pe=async e=>{const t=d();if(!t)return;const n=await t.notion.startImport({notion_token:e.notionToken});var i;await z(n.workspace_id),i=n.workspace_id,Le(i),Me=window.setInterval(async()=>{const e=d();if(e)try{const t=await e.notion.getStatus(i);xe(t),["completed","failed","cancelled"].includes(t.status)&&(window.clearInterval(Me),Me=void 0,"completed"===t.status&&M(!0))}catch{window.clearInterval(Me),Me=void 0}},2e3),xe({status:"running",progress:0,total:0})},Be=async()=>{const e=l(),t=Ie();if(e&&t)try{await e.notion.cancelImport(),xe(e=>e?{...e,status:"cancelled"}:null)}catch{}},Re=()=>{Me&&(window.clearInterval(Me),Me=void 0),xe(null),Le(null)};async function Ne(e="document",n){if(!R().trim())return void L(t("errors.titleRequired")||"Title is required");const i=l();if(i)try{x(!0);const t=n||ze()||"0";let r;if("table"===e){r=(await i.nodes.table.createTable(t,{title:R(),properties:[]})).id}else{r=(await i.nodes.page.createPage(t,{title:R()})).id}await M(!0),P(String(r)),L(null),Te(null)}catch(r){L(`${t("errors.failedToCreate")}: ${r}`)}finally{x(!1)}}Q(()=>{Me&&window.clearInterval(Me)}),ie(()=>{a(),Ee()});const Oe=e=>{F(),P(e.id),fe(!1)};async function De(e){const n=l();if(n&&confirm(t("table.confirmDeleteRecord")||"Delete this item?"))try{if(x(!0),await n.nodes.deleteNode(e),e===_()){k(null),S(null);const e=a()?.workspace_id,t=a()?.workspace_name;e&&window.history.pushState(null,"",Qi(e,t))}await M(!0)}catch(i){L(`${t("errors.failedToDelete")}: ${i}`)}finally{x(!1)}}return[i(v,{get when(){return!ce()},get fallback(){return i(Oa,{})},get children(){return i(v,{get when(){return!he()},get fallback(){return i(Ha,{})},get children(){return i(v,{get when(){return a()},get fallback(){return i(za,{onLogin:s})},get children(){var e=jd(),n=e.firstChild,r=n.firstChild,o=r.firstChild,s=r.nextSibling;return h(e,i(v,{get when(){return Ce()},keyed:!0,children:e=>i(al,{status:e,onCancel:Be,onDismiss:Re})}),n),o.$$click=()=>fe(!_e()),h(r,i(Ul,{onOpenSettings:()=>{te(!0),k(null),fe(!1);const e=a()?.workspace_id,t=a()?.workspace_name;e&&window.history.pushState(null,"",function(e,t){return`/w/${e}+${Xi(t||"workspace")}/settings`}(e,t))},onCreateWorkspace:()=>ye(!0),onImportFromNotion:()=>$e(!0)}),null),h(r,i(v,{get when(){return _()},get children(){var e=Ld();return h(e,i(f,{get each(){return $()},children:(e,t)=>{return[i(v,{get when(){return t()>0},get children(){var e=Ad();return g(()=>p(e,md)),e}}),(n=Wd(),n.$$click=()=>Oe(e),h(n,()=>e.title),g(()=>p(n,fd)),n)];var n}})),g(()=>p(e,_d)),e}}),null),h(s,i(yl,{onProfile:()=>{le(!0),te(!1),k(null),window.history.pushState(null,"","/profile")}})),h(e,i(v,{get when(){return se()},get children(){return i(ia,{onBack:()=>window.history.back(),onOrgSettings:e=>{de(()=>{re(!0),ae(e.organization_id),le(!1)}),window.history.pushState(null,"",er(e.organization_id,e.organization_name))}})}}),null),h(e,i(v,{get when(){return ee()},get children(){return i(Vr,{onBack:()=>window.history.back(),onOpenOrgSettings:()=>{const e=a(),t=e?.organization_id,n=e?.organizations?.find(e=>e.organization_id===t),i=n?.organization_name;t&&(re(!0),ae(t),te(!1),window.history.pushState(null,"",er(t,i)))}})}}),null),h(e,i(v,{get when(){return m(()=>!!ne())()&&oe()},get children(){return i(wo,{get orgId(){return oe()},onBack:()=>window.history.back()})}}),null),h(e,i(v,{get when(){return m(()=>!(se()||ee()))()&&!ne()},get children(){var e=Dd(),n=e.firstChild;return h(e,i(v,{get when(){return _e()},get children(){var e=zd();return e.$$click=()=>fe(!1),g(()=>p(e,Id)),e}}),n),h(e,i(Ke,{get isOpen(){return _e()},get loading(){return C()},nodes:c,get selectedNodeId(){return _()},onCreatePage:()=>{Te(null),Ne("document"),fe(!1)},onCreateTable:()=>{Te(null),Ne("table"),fe(!1)},onCreateChildPage:e=>{Te(e),Ne("document",e),fe(!1)},onCreateChildTable:e=>{Te(e),Ne("table",e),fe(!1)},onSelectNode:Oe,onCloseMobileSidebar:()=>fe(!1),onFetchChildren:B,onDeleteNode:De,onShowHistory:e=>{e!==_()?P(e).then(()=>q(e)):q(e)}}),n),h(n,i(v,{get when(){return I()},fallback:null,get children(){var e=Td();return h(e,I),g(()=>p(e,id)),e}}),null),h(n,i(v,{get when(){return _()},get children(){var e=Od(),n=e.firstChild,r=n.firstChild,o=r.nextSibling,a=n.nextSibling;return r.$$input=e=>H(e.target.value),h(o,i(v,{get when(){return m(()=>!!O())()&&"idle"===D()},get children(){var e=Ed();return e.firstChild,h(e,()=>t("editor.unsaved"),null),g(()=>p(e,sd)),e}}),null),h(o,i(v,{get when(){return"saving"===D()},get children(){var e=Md();return e.firstChild,h(e,()=>t("common.saving"),null),g(()=>p(e,ld)),e}}),null),h(o,i(v,{get when(){return"saved"===D()},get children(){var e=Pd();return e.firstChild,h(e,()=>t("common.saved"),null),g(()=>p(e,dd)),e}}),null),h(e,i(v,{get when(){return A()},get children(){var e=Rd(),n=e.firstChild,r=n.nextSibling;return h(n,()=>t("editor.versionHistory")),h(r,i(f,{get each(){return W()},children:e=>{return t=qd(),n=t.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,t.$$click=()=>{const t=_();t&&U(t,e.hash)},h(i,()=>new Date(e.timestamp).toLocaleString()),h(r,()=>e.hash.substring(0,7)),h(o,()=>e.message),g(e=>{var a=kd,s=yd,l=Sd,d=$d,c=Cd;return a!==e.e&&p(t,e.e=a),s!==e.t&&p(n,e.t=s),l!==e.a&&p(i,e.a=l),d!==e.o&&p(r,e.o=d),c!==e.i&&p(o,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t;var t,n,i,r,o}}),null),h(r,i(v,{get when(){return 0===W().length},get children(){var e=Bd();return h(e,()=>t("editor.noHistory")),g(()=>p(e,kd)),e}}),null),g(t=>{var n=bd,i=wd;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(r,t.t=i),t},{e:void 0,t:void 0}),e}}),a),h(a,i(v,{get when(){return y()?.has_page},get children(){return i(Wt,{get content(){return N()},get nodeId(){return _()??void 0},get assetUrls(){return j()},onChange:V})}}),null),h(a,i(v,{get when(){return y()?.has_table},get children(){var e=Nd(),n=e.firstChild,r=n.firstChild,o=r.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.nextSibling,d=l.nextSibling;return h(r,()=>t("table.records")),a.$$click=()=>pe("table"),h(a,()=>t("table.table")),s.$$click=()=>pe("grid"),h(s,()=>t("table.grid")),l.$$click=()=>pe("gallery"),h(l,()=>t("table.gallery")),d.$$click=()=>pe("board"),h(d,()=>t("table.board")),h(e,i(v,{get when(){return"table"===ge()},get children(){return i(Pn,{get tableId(){return _()||""},get columns(){return y()?.properties||[]},get records(){return G()},onAddRecord:J,onUpdateRecord:X,onDeleteRecord:Z,onLoadMore:Y,get hasMore(){return K()}})}}),null),h(e,i(v,{get when(){return"grid"===ge()},get children(){return i(Jn,{get records(){return G()},get columns(){return y()?.properties||[]},onUpdateRecord:X,onDeleteRecord:Z})}}),null),h(e,i(v,{get when(){return"gallery"===ge()},get children(){return i(gi,{get records(){return G()},get columns(){return y()?.properties||[]},onUpdateRecord:X,onDeleteRecord:Z})}}),null),h(e,i(v,{get when(){return"board"===ge()},get children(){return i(Ri,{get records(){return G()},get columns(){return y()?.properties||[]},onUpdateRecord:X,onDeleteRecord:Z})}}),null),g(t=>{var i=hd,r=vd,c=gd,u={[`${pd}`]:"table"===ge()},h={[`${pd}`]:"grid"===ge()},v={[`${pd}`]:"gallery"===ge()},g={[`${pd}`]:"board"===ge()};return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),c!==t.a&&p(o,t.a=c),t.o=w(a,u,t.o),t.i=w(s,h,t.i),t.n=w(l,v,t.n),t.s=w(d,g,t.s),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),g(i=>{var s=rd,l=od,d=t("editor.titlePlaceholder")||"Title",c=cd,u=ad,h=ud;return s!==i.e&&p(e,i.e=s),l!==i.t&&p(n,i.t=l),d!==i.a&&b(r,"placeholder",i.a=d),c!==i.o&&p(r,i.o=c),u!==i.i&&p(o,i.i=u),h!==i.n&&p(a,i.n=h),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),g(()=>r.value=R()),e}}),null),g(t=>{var i=td,r=nd;return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(t=>{var i=Xl,a=Ql,l=Zl,d=xd,c=ed;return i!==t.e&&p(e,t.e=i),a!==t.t&&p(n,t.t=a),l!==t.a&&p(r,t.a=l),d!==t.o&&p(o,t.o=d),c!==t.i&&p(s,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}})}})}}),i(ts,{}),i(v,{get when(){return me()},get children(){return i(vs,{onClose:()=>we(!1),onCreate:T})}}),i(v,{get when(){return ke()},get children(){return i(fs,{onClose:()=>ye(!1),onCreate:E,isFirstWorkspace:!0})}}),i(v,{get when(){return Se()},get children(){return i(Bs,{onClose:()=>$e(!1),onImport:Pe})}})]}function Fd(){return i(Jl,{get children(){return i(Yi,{get children(){return i(nr,{get children(){return i(or,{get children(){return i(sr,{get children(){return i(Ud,{})}})}})}})}})}})}d(["click","input"]);const Hd=localStorage.getItem("mddb_locale"),Vd=Hd&&["en","fr","de","es"].includes(Hd)?Hd:"en",Gd=document.getElementById("app");Gd&&ve(()=>i(me,{initialLocale:Vd,get children(){return i(Fd,{})}}),Gd);
