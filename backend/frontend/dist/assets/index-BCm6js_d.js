import{c as e,a as t,b as n,d as i,u as r,e as o,t as a,r as s,f as l,g as d,h as c,o as u,i as g,S as h,j as v,k as p,s as _,F as f,m,l as b,n as w,p as k,q as y,v as S,w as $,M as C,x,y as I,z as L,E as z,A as T,B as E,C as R,D as P,G as O,H as M,I as N,P as B,J as D,K as A,L as W,N as j,O as q,Q as U,R as F,T as H,U as G,V,W as K,X as Y,Y as J,Z as X,_ as Q,$ as Z,a0 as ee,a1 as te,a2 as ne,a3 as ie,a4 as re,a5 as oe,a6 as ae,a7 as se,a8 as le,a9 as de,aa as ce,ab as ue,ac as ge,ad as he}from"./vendor-DpDcc8_c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ve={},pe=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in ve)return;ve[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};async function _e(e){const t=await((e,t,n)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>pe(()=>import("./de-BZmmwrZ4.js"),[]),"./dictionaries/en.ts":()=>pe(()=>import("./en-D3yZox2Q.js"),[]),"./dictionaries/es.ts":()=>pe(()=>import("./es-WFYWZpvS.js"),[]),"./dictionaries/fr.ts":()=>pe(()=>import("./fr-BzoNA0XI.js"),[])}),`./dictionaries/${e}.ts`,3);return l(t.dict)}const fe=o(),me=r=>{const[o,l]=e(r.initialLocale||"en"),[d]=t(o,_e),c=a(d,s),u=e=>{const t=`errors.${e}`,n=c(t);return n&&n!==t?n:c("errors.unknown")||"An error occurred"},g=n(()=>({locale:o,setLocale:l,t:c,translateError:u}));return i(fe.Provider,{get value(){return g()},get children(){return r.children}})};function be(){const e=r(fe);if(!e)throw new Error("useI18n must be used within I18nProvider");return e}const we="_sidebarNodeWrapper_i1nam_1",ke="_childList_i1nam_2",ye="_pageItem_i1nam_13",Se="_active_i1nam_28",$e="_nodeIcon_i1nam_34",Ce="_pageTitleText_i1nam_41",xe="_expandIcon_i1nam_49",Ie="_hidden_i1nam_67",Le="_loading_i1nam_67",ze="_expanded_i1nam_72",Te="_contextMenu_i1nam_95",Ee="_contextMenuItem_i1nam_107",Re="_contextMenuDivider_i1nam_124",Pe="_hoverDeleteButton_i1nam_131";var Oe=k("<div><button>üìÑ </button><button>üìä </button><div></div><button>üïê "),Me=k("<ul>"),Ne=k("<li><div><span></span><span></span><span></span><button>üóë");function Be(t){const{t:n}=be(),[r,o]=e(0===t.depth),[a,s]=e(!1),[l,d]=e({x:0,y:0}),[k,y]=e(null),[S,$]=e(!1),[C,x]=c({}),I=()=>{const e=t.prefetchedChildren?.[t.node.id];if(e)return e;const n=k();return null!==n?n:[]},L=()=>{const e=k();if(null!==e)return e.length>0;const n=t.prefetchedChildren?.[t.node.id];return n?n.length>0:!0===t.node.has_children};u(()=>{const e=()=>{s(!1)};if(document.addEventListener("click",e),L()&&t.onFetchChildren){const e=t.prefetchedChildren?.[t.node.id];e?(y(e),z(e)):null===k()&&(async()=>{if(t.onFetchChildren&&null===k()&&!S()){$(!0);try{const e=await t.onFetchChildren(t.node.id);y(e),z(e)}catch(e){console.error("Failed to load children:",e),y([])}finally{$(!1)}}})()}return()=>document.removeEventListener("click",e)});const z=e=>{if(t.onFetchChildren)for(const n of e)C[n.id]||!0!==n.has_children||t.onFetchChildren(n.id).then(e=>{x(n.id,e)}).catch(()=>{})},T=async e=>{e.stopPropagation(),o(!r())},E=e=>{e.preventDefault(),e.stopPropagation(),d({x:e.clientX,y:e.clientY}),s(!0)};return R=Ne(),P=R.firstChild,O=P.firstChild,M=O.nextSibling,N=M.nextSibling,B=N.nextSibling,P.$$contextmenu=E,P.$$click=()=>t.onSelect(t.node),O.$$click=T,g(O,()=>S()?"‚óã":"‚ñ∂"),g(M,()=>t.node.has_table&&!t.node.has_page?"üìä":"üìÑ"),g(N,()=>t.node.title),B.$$click=e=>{e.stopPropagation(),t.onDeleteNode?.(t.node.id)},g(R,i(h,{get when(){return a()},get children(){var e=Oe(),i=e.firstChild;i.firstChild;var r=i.nextSibling;r.firstChild;var o=r.nextSibling,a=o.nextSibling;return a.firstChild,e.$$click=e=>e.stopPropagation(),i.$$click=()=>{t.onCreateChildPage(t.node.id),s(!1)},g(i,()=>n("app.createSubPage"),null),r.$$click=()=>{t.onCreateChildTable(t.node.id),s(!1)},g(r,()=>n("app.createSubTable"),null),a.$$click=()=>{t.onShowHistory?.(t.node.id),s(!1)},g(a,()=>n("editor.history"),null),v(t=>{var n=Te,s=`${l().x}px`,d=`${l().y}px`,c=Ee,u=Ee,g=Re,h=Ee;return n!==t.e&&p(e,t.e=n),s!==t.t&&_(e,"left",t.t=s),d!==t.a&&_(e,"top",t.a=d),c!==t.o&&p(i,t.o=c),u!==t.i&&p(r,t.i=u),g!==t.n&&p(o,t.n=g),h!==t.s&&p(a,t.s=h),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),g(R,i(h,{get when(){return m(()=>!!r())()&&I().length>0},get children(){var e=Me();return g(e,i(f,{get each(){return I()},children:e=>i(Be,{node:e,get selectedId(){return t.selectedId},get onSelect(){return t.onSelect},get onCreateChildPage(){return t.onCreateChildPage},get onCreateChildTable(){return t.onCreateChildTable},get onFetchChildren(){return t.onFetchChildren},get onDeleteNode(){return t.onDeleteNode},get onShowHistory(){return t.onShowHistory},get depth(){return t.depth+1},prefetchedChildren:C})})),v(()=>p(e,ke)),e}}),null),v(e=>{var i=we,o=`sidebar-node-${t.node.id}`,a=ye,s={[`${Se}`]:t.selectedId===t.node.id},l=12*t.depth+8+"px",d=xe,c={[`${ze}`]:r(),[`${Ie}`]:!L(),[`${Le}`]:S()},u=`expand-icon-${t.node.id}`,g=$e,h=Ce,v=Pe,f=n("common.delete")||"Delete";return i!==e.e&&p(R,e.e=i),o!==e.t&&b(R,"data-testid",e.t=o),a!==e.a&&p(P,e.a=a),e.o=w(P,s,e.o),l!==e.i&&_(P,"padding-left",e.i=l),d!==e.n&&p(O,e.n=d),e.s=w(O,c,e.s),u!==e.h&&b(O,"data-testid",e.h=u),g!==e.r&&p(M,e.r=g),h!==e.d&&p(N,e.d=h),v!==e.l&&p(B,e.l=v),f!==e.u&&b(B,"title",e.u=f),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),R;var R,P,O,M,N,B}d(["click","contextmenu"]);const De="_sidebar_1ddhe_1",Ae="_sidebarHeader_1ddhe_9",We="_loading_1ddhe_42",je="_pageList_1ddhe_48",qe="_sidebarFooter_1ddhe_55",Ue="_footerSeparator_1ddhe_71",Fe="_sidebarActions_1ddhe_76",He="_mobileOpen_1ddhe_115";var Ge=k("<p>"),Ve=k("<aside><div><h2></h2><div><button>+P</button><button>+D</button></div></div><ul></ul><div><a href=/privacy></a><span>|</span><a href=/terms>");function Ke(e){const{t:t}=be(),n=(t,n)=>{t.preventDefault(),window.history.pushState(null,"",n),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()};return r=Ve(),o=r.firstChild,a=o.firstChild,s=a.nextSibling,l=s.firstChild,d=l.nextSibling,c=o.nextSibling,u=c.nextSibling,_=u.firstChild,w=_.nextSibling,k=w.nextSibling,g(a,()=>t("app.workspace")),y(l,"click",e.onCreatePage),y(d,"click",e.onCreateTable),g(r,i(h,{get when(){return m(()=>!!e.loading)()&&0===e.nodes.length},get children(){var e=Ge();return g(e,()=>t("common.loading")),v(()=>p(e,We)),e}}),c),g(c,i(f,{get each(){return e.nodes},children:t=>i(Be,{node:t,get selectedId(){return e.selectedNodeId},get onSelect(){return e.onSelectNode},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},depth:0})})),_.$$click=e=>n(e,"/privacy"),g(_,()=>t("app.privacyPolicy")),k.$$click=e=>n(e,"/terms"),g(k,()=>t("app.terms")),v(n=>{var i=`${De} ${e.isOpen?He:""}`,a=Ae,g=Fe,h=t("app.newPage")||"New Page",v=t("app.newTable")||"New Table",_=je,f=qe,m=Ue;return i!==n.e&&p(r,n.e=i),a!==n.t&&p(o,n.t=a),g!==n.a&&p(s,n.a=g),h!==n.o&&b(l,"title",n.o=h),v!==n.i&&b(d,"title",n.i=v),_!==n.n&&p(c,n.n=_),f!==n.s&&p(u,n.s=f),m!==n.h&&p(w,n.h=m),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),r;var r,o,a,s,l,d,c,u,_,w,k}d(["click"]);const Ye=S.spec.nodes.get("list_item");if(!Ye)throw new Error("list_item node not found in schema");const Je=new $({nodes:S.spec.nodes.update("list_item",{...Ye,attrs:{checked:{default:null}},toDOM:e=>null!==e.attrs.checked?["li",{class:"task-list-item","data-checked":String(e.attrs.checked)},0]:["li",0],parseDOM:[{tag:"li",getAttrs:e=>e.classList.contains("task-list-item")?{checked:"true"===e.dataset.checked}:{checked:null}}]}),marks:S.spec.marks});function Xe(e){const t=Je.nodes[e];if(!t)throw new Error(`Node type '${e}' not found in schema`);return t}function Qe(e){const t=Je.marks[e];if(!t)throw new Error(`Mark type '${e}' not found in schema`);return t}const Ze={list_item:Xe("list_item"),bullet_list:Xe("bullet_list"),ordered_list:Xe("ordered_list"),paragraph:Xe("paragraph"),blockquote:Xe("blockquote"),code_block:Xe("code_block"),heading:Xe("heading")},et={strong:Qe("strong"),em:Qe("em"),code:Qe("code")},tt=new C;tt.core.ruler.after("inline","task_list",e=>{const t=e.tokens;for(let n=0;n<t.length;n++){const e=t[n];if(e&&"list_item_open"===e.type){const i=t[n+2];if(i&&"inline"===i.type&&i.children){const t=i.children[0];if(t&&"text"===t.type&&t.content){const n=t.content.match(/^\[([ xX])\]\s*/);n&&n[1]&&(e.attrSet("checked","x"===n[1].toLowerCase()?"true":"false"),t.content=t.content.slice(n[0].length))}}}}return!0});const nt=new x(Je,tt,{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item",getAttrs:e=>{const t=e.attrGet("checked");return"true"===t?{checked:!0}:"false"===t?{checked:!1}:{checked:null}}},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",getAttrs:e=>({order:+(e.attrGet("start")||1)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children?.[0]?.content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code"},table:{block:"paragraph",noCloseToken:!1},thead:{ignore:!0},tbody:{ignore:!0},tr:{ignore:!0},th:{block:"paragraph"},td:{block:"paragraph"}}),it=new I({...L.nodes,bullet_list(e,t){e.renderList(t,"  ",()=>"- ")},list_item(e,t){if(null!==t.attrs.checked){const n=t.attrs.checked?"[x] ":"[ ] ";e.write(n)}e.renderContent(t)}},L.marks);function rt(){const e=W.concat(j,q);e.push(new U(/^\s*-\s+\[([ xX])\]\s$/,(e,t,n,i)=>{const r=e.doc.resolve(n),o="x"===t[1]?.toLowerCase();for(let l=r.depth;l>0;l--)if(r.node(l).type===Ze.list_item){const t=e.tr.delete(n,i);return t.setNodeMarkup(r.before(l),void 0,{checked:o}),t}const a=Ze.list_item.create({checked:o},Ze.paragraph.create()),s=Ze.bullet_list.create(null,a);return e.tr.replaceWith(n,i,s)})),e.push(O(/^\s*>\s$/,Ze.blockquote)),e.push(O(/^\s*([-*])\s$/,Ze.bullet_list)),e.push(O(/^(\d+)\.\s$/,Ze.ordered_list,e=>({order:+(e[1]??1)}),(e,t)=>t.childCount+t.attrs.order===+(e[1]??1))),e.push(M(/^```$/,Ze.code_block));for(let t=1;t<=6;t++){const n=new RegExp(`^(#{${t}})\\s$`);e.push(M(n,Ze.heading,{level:t}))}return N({rules:e})}function ot(){const e={};return e["Mod-z"]=F,e["Mod-y"]=H,e["Mod-Shift-z"]=H,e["Mod-b"]=G(et.strong),e["Mod-i"]=G(et.em),e["Mod-`"]=G(et.code),e.Enter=(e,t)=>{const{$from:n}=e.selection;for(let i=n.depth;i>0;i--){const r=n.node(i);if(r.type===Ze.list_item&&null!==r.attrs.checked){if(t){return V(Ze.list_item)(e,e=>{const n=e.selection.$from;for(let t=n.depth;t>0;t--){if(n.node(t).type===Ze.list_item){e.setNodeMarkup(n.before(t),void 0,{checked:!1});break}}t(e)})}return V(Ze.list_item)(e)}}return V(Ze.list_item)(e,t)},e.Tab=K(Ze.list_item),e["Shift-Tab"]=Y(Ze.list_item),T(e)}function at(e,t){return z.create({doc:e,plugins:[rt(),ot(),T(J),E(),R({color:"var(--c-primary)",width:2}),P(),new B({props:{decorations(e){const t=[];return e.doc.descendants((e,n)=>{if(e.type===Ze.list_item&&null!==e.attrs.checked){const i=document.createElement("input");i.type="checkbox",i.checked=e.attrs.checked,i.className="task-checkbox",i.addEventListener("mousedown",t=>{t.preventDefault();const i=t.target.closest(".ProseMirror");if(!i)return;const r=i.pmView;if(!r)return;const o=r.state.tr.setNodeMarkup(n,void 0,{checked:!e.attrs.checked});r.dispatch(o)}),t.push(D.widget(n+1,i,{side:-1}))}}),A.create(e.doc,t)}}}),...t||[]]})}const st=new X("slashMenu"),lt={active:!1,query:"",triggerPos:0,position:{top:0,left:0}};function dt(e){e.dispatch(e.state.tr.setMeta(st,{close:!0}))}function ct(e,t){u(()=>{const n=n=>{const i=e();i&&!i.contains(n.target)&&t()};document.addEventListener("mousedown",n),Q(()=>{document.removeEventListener("mousedown",n)})})}function ut(e,t,n,i){const r=e.state.tr.delete(t,n);e.dispatch(r),i(e)}function gt(e,t,n){const{state:i}=e,{$from:r}=i.selection;for(let u=r.depth;u>0;u--){const t=r.node(u);if(t.type===Ze.bullet_list||t.type===Ze.ordered_list)return void ne(i,e.dispatch)}const o=r.before(r.depth),a=Ze.paragraph.create(),s=Ze.list_item.create(n||null,a),l=t.create(null,s),d=e.state.tr.replaceWith(o,r.after(r.depth),l),c=o+3;d.setSelection(Z.near(d.doc.resolve(c))),e.dispatch(d)}const ht=[{id:"paragraph",labelKey:"paragraph",keywords:["paragraph","text","plain"],icon:"T",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.paragraph)(e.state,e.dispatch)})}},{id:"heading1",labelKey:"heading1",keywords:["heading","h1","title","header"],icon:"H1",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.heading,{level:1})(e.state,e.dispatch)})}},{id:"heading2",labelKey:"heading2",keywords:["heading","h2","subtitle","header"],icon:"H2",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.heading,{level:2})(e.state,e.dispatch)})}},{id:"heading3",labelKey:"heading3",keywords:["heading","h3","header"],icon:"H3",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.heading,{level:3})(e.state,e.dispatch)})}},{id:"bulletList",labelKey:"bulletList",keywords:["bullet","list","unordered","ul"],icon:"‚Ä¢",execute:(e,t,n)=>{ut(e,t,n,e=>{gt(e,Ze.bullet_list)})}},{id:"orderedList",labelKey:"orderedList",keywords:["ordered","list","numbered","ol"],icon:"1.",execute:(e,t,n)=>{ut(e,t,n,e=>{gt(e,Ze.ordered_list)})}},{id:"taskList",labelKey:"taskList",keywords:["task","checkbox","todo","checklist","check"],icon:"‚òê",execute:(e,t,n)=>{ut(e,t,n,e=>{gt(e,Ze.bullet_list,{checked:!1})})}},{id:"blockquote",labelKey:"blockquote",keywords:["quote","blockquote","citation"],icon:'"',execute:(e,t,n)=>{ut(e,t,n,e=>{te(Ze.blockquote)(e.state,e.dispatch)})}},{id:"codeBlock",labelKey:"codeBlock",keywords:["code","codeblock","pre","programming"],icon:"</>",execute:(e,t,n)=>{ut(e,t,n,e=>{ee(Ze.code_block)(e.state,e.dispatch)})}},{id:"divider",labelKey:"divider",keywords:["divider","hr","horizontal","rule","line"],icon:"‚Äî",execute:(e,t,n)=>{const i=Je.nodes.horizontal_rule;if(!i)return;let r=e.state.tr.delete(t,n);e.dispatch(r);const o=e.state.selection.$from.after(e.state.selection.$from.depth),a=i.create(),s=Ze.paragraph.create();r=e.state.tr.insert(o,[a,s]),r.setSelection(Z.near(r.doc.resolve(o+2))),e.dispatch(r)}}];function vt(e){if(!e)return ht;const t=e.toLowerCase();return ht.filter(e=>!!e.labelKey.toLowerCase().startsWith(t)||e.keywords.some(e=>e.toLowerCase().startsWith(t)))}const pt="_editorContainer_1iujf_3",_t="_editorToolbar_1iujf_12",ft="_modeToggle_1iujf_22",mt="_modeButton_1iujf_29",bt="_active_1iujf_44",wt="_formattingButtons_1iujf_50",kt="_formatButton_1iujf_56",yt="_isActive_1iujf_77",St="_separator_1iujf_82",$t="_prosemirrorEditor_1iujf_90",Ct="_markdownEditor_1iujf_323",xt="_hidden_1iujf_342",It="_slashMenu_1iujf_347",Lt="_slashMenuItem_1iujf_361",zt="_selected_1iujf_371",Tt="_slashMenuIcon_1iujf_375",Et="_slashMenuLabel_1iujf_389",Rt="_slashMenuEmpty_1iujf_394";var Pt=k("<div data-testid=slash-command-menu>"),Ot=k("<div>"),Mt=k("<div><span></span><span>");function Nt(t){const{t:n}=be(),[r,o]=e(0),[a,s]=e(null);let l;const d=()=>vt(t.state.query);ie(()=>{t.state.query,t.state.active,o(0),s(null)}),ie(()=>{t.state.active&&l&&requestAnimationFrame(()=>{if(!l)return;const e=l.getBoundingClientRect(),n=window.innerHeight,i=window.innerWidth;let r=t.state.position.top,o=t.state.position.left;if(r+e.height>n){r=t.view.coordsAtPos(t.state.triggerPos).top-e.height-4,r<0&&(r=8)}o+e.width>i&&(o=i-e.width-8),o<0&&(o=8),r===t.state.position.top&&o===t.state.position.left||s({top:r,left:o})})}),ie(()=>{const e=r();if(l){const t=l.querySelector(`[data-index="${e}"]`);t&&t.scrollIntoView({block:"nearest"})}}),ct(()=>l,()=>{t.state.active&&dt(t.view)}),u(()=>{const e=e=>{const n=st.getState(t.view.state);if(!n?.active)return;const i=vt(n.query);if(0!==i.length)switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),o(e=>(e+1)%i.length);break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),o(e=>(e-1+i.length)%i.length);break;case"Enter":case"Tab":e.preventDefault(),e.stopPropagation(),c(i[r()]);break;case"Escape":e.preventDefault(),e.stopPropagation(),dt(t.view)}};document.addEventListener("keydown",e,!0),Q(()=>{document.removeEventListener("keydown",e,!0)})});const c=e=>{if(!e)return;const n=st.getState(t.view.state);if(!n)return;const{triggerPos:i}=n,r=t.view.state.selection.from;e.execute(t.view,i,r),t.view.focus()},m=()=>a()??t.state.position;return i(h,{get when(){return t.state.active},get children(){var e=Pt();return"function"==typeof l?re(l,e):l=e,g(e,i(h,{get when(){return d().length>0},get fallback(){return e=Ot(),g(e,()=>n("slashMenu.noResults")),v(()=>p(e,Rt)),e;var e},get children(){return i(f,{get each(){return d()},children:(e,t)=>{return i=Mt(),a=i.firstChild,s=a.nextSibling,i.addEventListener("mouseenter",()=>(e=>{o(e)})(t())),i.$$click=()=>(e=>{c(e)})(e),g(a,()=>e.icon),g(s,()=>n(`slashMenu.${e.labelKey}`)),v(e=>{var n=`${Lt} ${t()===r()?zt:""}`,o=t(),l=Tt,d=Et;return n!==e.e&&p(i,e.e=n),o!==e.t&&b(i,"data-index",e.t=o),l!==e.a&&p(a,e.a=l),d!==e.o&&p(s,e.o=d),e},{e:void 0,t:void 0,a:void 0,o:void 0}),i;var i,a,s}})}})),v(t=>{var n=It,i=`${m().top}px`,r=`${m().left}px`;return n!==t.e&&p(e,t.e=n),i!==t.t&&_(e,"top",t.t=i),r!==t.a&&_(e,"left",t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}})}d(["click"]);var Bt=k('<div><button title="Bold (Ctrl+B)">B</button><button title="Italic (Ctrl+I)">I</button><button title="Code (Ctrl+`)">&lt;/></button><span></span><button title="Heading 1">H1</button><button title="Heading 2">H2</button><button title="Heading 3">H3</button><span></span><button title="Bullet List">‚Ä¢</button><button title="Numbered List">1.</button><button title="Task List">‚òê</button><button title=Quote>"</button><button title="Code Block">{ }'),Dt=k("<div><div><button data-testid=editor-mode-visual></button><button data-testid=editor-mode-markdown>");function At(e){const{t:t}=be(),n=e=>e?`${mt} ${bt}`:mt,r=e=>e?`${kt} ${yt}`:kt,o=()=>{e.view&&(G(et.strong)(e.view.state,e.view.dispatch),e.view.focus())},a=()=>{e.view&&(G(et.em)(e.view.state,e.view.dispatch),e.view.focus())},s=()=>{e.view&&(G(et.code)(e.view.state,e.view.dispatch),e.view.focus())},l=t=>{if(!e.view)return;const{state:n,dispatch:i}=e.view;e.formatState.headingLevel===t?ee(Ze.paragraph)(n,i):ee(Ze.heading,{level:t})(n,i),e.view.focus()},d=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view;e.formatState.isBulletList?ne(t,n):oe(Ze.bullet_list)(t,n),e.view.focus()},c=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view;e.formatState.isOrderedList?ne(t,n):oe(Ze.ordered_list)(t,n),e.view.focus()},u=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view,{$from:i}=t.selection;if(e.formatState.isTaskList)for(let r=i.depth;r>0;r--){const o=i.node(r);if(o.type===Ze.list_item&&null!==o.attrs.checked){return n(t.tr.setNodeMarkup(i.before(r),void 0,{checked:null})),void e.view.focus()}}else if(e.formatState.isBulletList||e.formatState.isOrderedList)for(let r=i.depth;r>0;r--){if(i.node(r).type===Ze.list_item){return n(t.tr.setNodeMarkup(i.before(r),void 0,{checked:!1})),void e.view.focus()}}else{const i=Ze.list_item.create({checked:!1},Ze.paragraph.create()),r=Ze.bullet_list.create(null,i);n(t.tr.replaceSelectionWith(r)),e.view.focus()}},_=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view;e.formatState.isBlockquote?ne(t,n):te(Ze.blockquote)(t,n),e.view.focus()},f=()=>{if(!e.view)return;const{state:t,dispatch:n}=e.view;e.formatState.isCodeBlock?ee(Ze.paragraph)(t,n):ee(Ze.code_block)(t,n),e.view.focus()};return m=Dt(),w=m.firstChild,k=w.firstChild,S=k.nextSibling,y(k,"click",e.onSwitchToWysiwyg),g(k,()=>t("editor.wysiwygMode")||"Visual"),y(S,"click",e.onSwitchToMarkdown),g(S,()=>t("editor.markdownMode")||"Markdown"),g(m,i(h,{get when(){return"wysiwyg"===e.editorMode},get children(){var t=Bt(),n=t.firstChild,i=n.nextSibling,g=i.nextSibling,h=g.nextSibling,m=h.nextSibling,b=m.nextSibling,w=b.nextSibling,k=w.nextSibling,y=k.nextSibling,S=y.nextSibling,$=S.nextSibling,C=$.nextSibling,x=C.nextSibling;return n.$$click=o,i.$$click=a,g.$$click=s,m.$$click=()=>l(1),b.$$click=()=>l(2),w.$$click=()=>l(3),y.$$click=d,S.$$click=c,$.$$click=u,C.$$click=_,x.$$click=f,v(o=>{var a=wt,s=r(e.formatState.isBold),l=r(e.formatState.isItalic),d=r(e.formatState.isCode),c=St,u=r(1===e.formatState.headingLevel),v=r(2===e.formatState.headingLevel),_=r(3===e.formatState.headingLevel),f=St,I=r(e.formatState.isBulletList),L=r(e.formatState.isOrderedList),z=r(e.formatState.isTaskList),T=r(e.formatState.isBlockquote),E=r(e.formatState.isCodeBlock);return a!==o.e&&p(t,o.e=a),s!==o.t&&p(n,o.t=s),l!==o.a&&p(i,o.a=l),d!==o.o&&p(g,o.o=d),c!==o.i&&p(h,o.i=c),u!==o.n&&p(m,o.n=u),v!==o.s&&p(b,o.s=v),_!==o.h&&p(w,o.h=_),f!==o.r&&p(k,o.r=f),I!==o.d&&p(y,o.d=I),L!==o.l&&p(S,o.l=L),z!==o.u&&p($,o.u=z),T!==o.c&&p(C,o.c=T),E!==o.w&&p(x,o.w=E),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),t}}),null),v(i=>{var r=_t,o=ft,a=n("wysiwyg"===e.editorMode),s=t("editor.wysiwygMode")||"Visual",l=n("markdown"===e.editorMode),d=t("editor.markdownMode")||"Markdown";return r!==i.e&&p(m,i.e=r),o!==i.t&&p(w,i.t=o),a!==i.a&&p(k,i.a=a),s!==i.o&&b(k,"title",i.o=s),l!==i.i&&p(S,i.i=l),d!==i.n&&b(S,"title",i.n=d),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),m;var m,w,k,S}d(["click"]);var Wt=k("<div><div data-testid=wysiwyg-editor></div><textarea data-testid=markdown-editor>");function jt(t){const{t:r}=be(),[o,a]=e("wysiwyg"),[s,l]=e(t.content),[d,c]=e(),[h,_]=e({active:!1,query:"",triggerPos:0,position:{top:0,left:0}});let f;const m=(w=_,new B({key:st,state:{init:()=>({...lt}),apply(e,t,n,i){const r=e.getMeta(st);if(r?.close){if(t.active){const e={...lt};return setTimeout(()=>w(e),0),e}return t}if(!e.docChanged&&!e.selectionSet)return t;const{selection:o}=i,{$from:a}=o;if(!o.empty){if(t.active){const e={...lt};return setTimeout(()=>w(e),0),e}return t}const s=a.start(a.depth),l=i.doc.textBetween(s,a.pos,"",""),d=l.match(/(^|\s)\/([^\s]*)$/);if(d){const e=d[2]||"",n={active:!0,query:e,triggerPos:s+(l.length-d[0].length+(d[1]?1:0)),position:t.position};return t.active&&e!==t.query&&setTimeout(()=>w(n),0),n}if(t.active){const e={...lt};return setTimeout(()=>w(e),0),e}return t}},view:e=>({update(e){const t=st.getState(e.state);if(t?.active)try{const n=e.coordsAtPos(t.triggerPos),i={...t,position:{top:n.bottom+4,left:n.left}};w(i)}catch{}}}),props:{handleKeyDown(e,t){const n=st.getState(e.state);return!!n?.active&&("ArrowDown"===t.key||"ArrowUp"===t.key||"Enter"===t.key||"Tab"===t.key||"Escape"===t.key&&(dt(e),!0))}}}));var w;let k=t.nodeId,y=t.content;const[S,$]=e({isBold:!1,isItalic:!1,isCode:!1,headingLevel:null,isBulletList:!1,isOrderedList:!1,isTaskList:!1,isBlockquote:!1,isCodeBlock:!1}),C=e=>{const n=(i=e,(r=t.assetUrls||{})&&0!==Object.keys(r).length?i.replace(/!\[([^\]]*)\]\(([^/)][^)]*)\)/g,(e,t,n)=>{if(n.includes("://"))return e;if(n.startsWith("/"))return e;const i=r[n];return i?`![${t}](${i})`:e}):i);var i,r;return nt.parse(n)},x=e=>function(e,t){if(!t||0===Object.keys(t).length)return e;const n={};for(const[i,r]of Object.entries(t))n[r]=i;return e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,t,i)=>{const r=n[i];return r?`![${t}](${r})`:e})}(it.serialize(e),t.assetUrls||{}),I=e=>{const{state:t}=e,{from:n,$from:i,to:r,empty:o}=t.selection,a=o?t.storedMarks||i.marks():[],s=void 0!==et.strong.isInSet(a)||t.doc.rangeHasMark(n,r,et.strong),l=void 0!==et.em.isInSet(a)||t.doc.rangeHasMark(n,r,et.em),d=void 0!==et.code.isInSet(a)||t.doc.rangeHasMark(n,r,et.code),c=i.node(i.depth),u=c.type===Ze.heading?c.attrs.level:null,g=c.type===Ze.code_block;let h=!1,v=!1,p=!1,_=!1;for(let f=i.depth;f>0;f--){const e=i.node(f);e.type===Ze.bullet_list&&(h=!0),e.type===Ze.ordered_list&&(v=!0),e.type===Ze.list_item&&null!==e.attrs.checked&&(p=!0),e.type===Ze.blockquote&&(_=!0)}$({isBold:s,isItalic:l,isCode:d,headingLevel:u,isBulletList:h,isOrderedList:v,isTaskList:p,isBlockquote:_,isCodeBlock:g})};u(()=>{if(!f)return;const e=C(t.content);if(!e)return;const n=at(e,[m]),i=new se(f,{state:n,editable:()=>!t.readOnly,dispatchTransaction(e){const n=i.state.apply(e);if(i.updateState(n),e.docChanged){const e=x(n.doc);l(e),y=e,t.onChange(e)}I(i)}}),r=f.querySelector(".ProseMirror");r&&(r.pmView=i),c(i),I(i)}),Q(()=>{d()?.destroy()}),ie(ae(()=>[t.nodeId,t.content],([e,t])=>{if(e!==k||t!==y){k=e,y=t,l(t),a("wysiwyg");const n=d();if(n){const e=C(t);if(e){const t=at(e,[m]);n.updateState(t)}}}},{defer:!0}));const L=()=>{const e=d();if(e){const t=C(s());if(t){const n=at(t,[m]);e.updateState(n),I(e)}}a("wysiwyg")},z=()=>{const e=d();if(e){const t=x(e.state.doc);l(t)}a("markdown")},T=n(()=>"wysiwyg"===o()?$t:`${$t} ${xt}`),E=n(()=>"markdown"===o()?Ct:`${Ct} ${xt}`);return(()=>{var e=Wt(),n=e.firstChild,a=n.nextSibling;g(e,i(At,{get editorMode(){return o()},get formatState(){return S()},get view(){return d()},onSwitchToWysiwyg:L,onSwitchToMarkdown:z}),n);return"function"==typeof f?re(f,n):f=n,a.$$input=e=>{return n=e.target.value,l(n),y=n,void t.onChange(n);var n},g(e,()=>{const e=d();return e?i(Nt,{view:e,get state(){return h()}}):null},null),v(i=>{var o=pt,s=T(),l=E(),d=t.placeholder||r("editor.contentPlaceholder")||"Write markdown...",c=t.readOnly;return o!==i.e&&p(e,i.e=o),s!==i.t&&p(n,i.t=s),l!==i.a&&p(a,i.a=l),d!==i.o&&b(a,"placeholder",i.o=d),c!==i.i&&(a.readOnly=i.i=c),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>a.value=s()),e})()}d(["input"]);const qt="select",Ut="org:owner",Ft="org:admin",Ht="ws:admin",Gt="google",Vt="microsoft",Kt="github",Yt="_container_1fe2r_1",Jt="_tableWrapper_1fe2r_10",Xt="_table_1fe2r_10",Qt="_headerRow_1fe2r_24",Zt="_headerCell_1fe2r_32",en="_row_1fe2r_44",tn="_cell_1fe2r_53",nn="_editing_1fe2r_65",rn="_cellContent_1fe2r_70",on="_editContainer_1fe2r_75",an="_input_1fe2r_81",sn="_editActions_1fe2r_94",ln="_saveBtn_1fe2r_99",dn="_cancelBtn_1fe2r_100",cn="_actionsCell_1fe2r_119",un="_deleteBtn_1fe2r_127",gn="_addBtn_1fe2r_141",hn="_newRow_1fe2r_155",vn="_required_1fe2r_164",pn="_empty_1fe2r_169",_n="_loadMore_1fe2r_176";var fn=k("<input type=checkbox>"),mn=k("<select><option value>--"),bn=k("<option>"),wn=k("<input type=text>"),kn=k("<input type=number>"),yn=k("<input type=date>"),Sn=k("<tr><td><button>+"),$n=k("<div>"),Cn=k("<div><button>"),xn=k("<div><div><table><thead><tr><th></th></tr></thead><tbody>"),In=k("<span>*"),Ln=k("<th>"),zn=k("<button>‚úï"),Tn=k("<tr><td>"),En=k("<div><div><button>‚úì</button><button>‚úï"),Rn=k("<td>");function Pn(t){const{t:n}=be(),[r,o]=e(null),[a,s]=e(""),[l,d]=e({}),c=e=>{s(e)},u=(e,n)=>{const i=t.columns.find(e=>e.name===n);if(!i||!t.onUpdateRecord)return;const r=t.records.find(t=>t.id===e);if(!r)return;const s={...r.data};s[i.name]=a(),t.onUpdateRecord(e,s),o(null)},_=()=>{t.onAddRecord&&Object.keys(l()).length>0&&(t.onAddRecord(l()),d({}))},m=(e,n)=>{const i=((e,n)=>{const i=t.columns.find(e=>e.name===n);return i?e.data[i.name]??"":""})(e,n.name);switch(n.type){case"checkbox":return i?"‚úì":"";case"select":case"multi_select":case"number":default:return String(i);case"date":return i?new Date(i).toLocaleDateString():""}},k=(e,t,n=!1,r,a)=>{const s=e=>{n&&setTimeout(()=>e.focus(),0)},l=r&&a?e=>((e,t,n)=>{"Enter"===e.key?(e.preventDefault(),u(t,n)):"Escape"===e.key&&(e.preventDefault(),o(null))})(e,r,a):void 0;switch(e.type){case"checkbox":return w=fn(),y(w,"keydown",l),w.addEventListener("change",e=>c(String(e.target.checked))),re(s,w),w.checked="true"===t,v(()=>p(w,an)),w;case qt:return e.options&&e.options.length>0?((b=mn()).firstChild,y(b,"keydown",l),b.addEventListener("change",e=>c(e.target.value)),re(s,b),b.value=t,g(b,i(f,{get each(){return e.options},children:e=>{return t=bn(),g(t,()=>e.name),v(()=>t.value=e.id),t;var t}}),null),v(()=>p(b,an)),b):(m=wn(),y(m,"keydown",l),m.$$input=e=>c(e.target.value),re(s,m),m.value=t,v(()=>p(m,an)),m);case"number":return _=kn(),y(_,"keydown",l),_.$$input=e=>c(e.target.value),re(s,_),_.value=t,v(()=>p(_,an)),_;case"date":return h=yn(),y(h,"keydown",l),h.$$input=e=>c(e.target.value),re(s,h),h.value=t,v(()=>p(h,an)),h;default:return d=wn(),y(d,"keydown",l),d.$$input=e=>c(e.target.value),re(s,d),d.value=t,v(()=>p(d,an)),d}var d,h,_,m,b,w};return S=xn(),$=S.firstChild,C=$.firstChild,x=C.firstChild,I=x.firstChild,L=I.firstChild,z=x.nextSibling,g(L,()=>n("common.actions")),g(I,i(f,{get each(){return t.columns},children:e=>{return t=Ln(),g(t,()=>e.name,null),g(t,i(h,{get when(){return e.required},get children(){var e=In();return v(()=>p(e,vn)),e}}),null),v(()=>p(t,Zt)),t;var t}}),null),g(z,i(f,{get each(){return t.records},children:e=>{return l=Tn(),d=l.firstChild,g(d,i(h,{get when(){return t.onDeleteRecord},get children(){var i=zn();return i.$$click=()=>t.onDeleteRecord?.(e.id),v(e=>{var t=un,r=n("table.deleteRecord")||"Delete record";return t!==e.e&&p(i,e.e=t),r!==e.t&&b(i,"title",e.t=r),e},{e:void 0,t:void 0}),i}})),g(l,i(f,{get each(){return t.columns},children:n=>{const l=()=>r()?.recordId===e.id&&r()?.columnId===n.name;return(d=Rn()).$$click=()=>((e,n)=>{const i=t.columns.find(e=>e.name===n),r=t.records.find(t=>t.id===e)?.data[i?.name??""]??"";o({recordId:e,columnId:n}),s(String(r))})(e.id,n.name),g(d,i(h,{get when(){return l()},get fallback(){return t=$n(),g(t,()=>m(e,n)),v(()=>p(t,rn)),t;var t},get children(){var t=En(),i=t.firstChild,r=i.firstChild,s=r.nextSibling;return g(t,()=>k(n,a(),!0,e.id,n.name),i),r.$$click=()=>u(e.id,n.name),s.$$click=()=>o(null),v(e=>{var n=on,o=sn,a=ln,l=dn;return n!==e.e&&p(t,e.e=n),o!==e.t&&p(i,e.t=o),a!==e.a&&p(r,e.a=a),l!==e.o&&p(s,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t}})),v(e=>{var t=tn,n={[`${nn}`]:l()};return t!==e.e&&p(d,e.e=t),e.t=w(d,n,e.t),e},{e:void 0,t:void 0}),d;var d}}),null),v(e=>{var t=en,n=cn;return t!==e.e&&p(l,e.e=t),n!==e.t&&p(d,e.t=n),e},{e:void 0,t:void 0}),l;var l,d}}),null),g(z,i(h,{get when(){return t.onAddRecord},get children(){var e=Sn(),n=e.firstChild,r=n.firstChild;return r.$$click=_,g(e,i(f,{get each(){return t.columns},children:e=>{return t=Rn(),g(t,()=>k(e,String(l()[e.name]??""))),v(()=>p(t,tn)),t;var t}}),null),v(t=>{var i=hn,o=cn,a=gn;return i!==t.e&&p(e,t.e=i),o!==t.t&&p(n,t.t=o),a!==t.a&&p(r,t.a=a),t},{e:void 0,t:void 0,a:void 0}),e}}),null),g(S,i(h,{get when(){return 0===t.records.length},get children(){var e=$n();return g(e,()=>n("table.noRecords")),v(()=>p(e,pn)),e}}),null),g(S,i(h,{get when(){return t.hasMore},get children(){var e=Cn(),i=e.firstChild;return i.$$click=()=>t.onLoadMore?.(),g(i,()=>n("table.loadMore")),v(()=>p(e,_n)),e}}),null),v(e=>{var t=Yt,n=Jt,i=Xt,r=Qt,o=Zt;return t!==e.e&&p(S,e.e=t),n!==e.t&&p($,e.t=n),i!==e.a&&p(C,e.a=i),r!==e.o&&p(I,e.o=r),o!==e.i&&p(L,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),S;var S,$,C,x,I,L,z}function On(e,t,n,i){if(e.data[t]===n||!i)return;const r={...e.data,[t]:n};i(e.id,r)}function Mn(e){"Enter"===e.key&&e.currentTarget.blur()}function Nn(e,t){if(!t)return"";const n=e.data[t];return null!=n?String(n):""}function Bn(e,t){const n=t[0];return n?Nn(e,n.name):""}d(["keydown","input","click"]);const Dn="_grid_3ff2z_1",An="_card_3ff2z_8",Wn="_cardHeader_3ff2z_20",jn="_deleteBtn_3ff2z_28",qn="_cardBody_3ff2z_40",Un="_field_3ff2z_46",Fn="_fieldName_3ff2z_51",Hn="_titleInput_3ff2z_58",Gn="_fieldValueInput_3ff2z_75";var Vn=k("<div>"),Kn=k("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Yn=k("<div><span>:</span><input type=text>");function Jn(e){const{t:t}=be();return n=Vn(),g(n,i(f,{get each(){return e.records},children:n=>{return r=Kn(),o=r.firstChild,a=o.firstChild,s=a.firstChild,l=a.nextSibling,d=o.nextSibling,y(s,"keydown",Mn),s.addEventListener("blur",t=>e.columns[0]&&On(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),l.$$click=()=>e.onDeleteRecord(n.id),g(d,i(f,{get each(){return e.columns.slice(1,4)},children:t=>{return i=Yn(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>t.name,o),y(a,"keydown",Mn),a.addEventListener("blur",i=>On(n,t.name,i.target.value,e.onUpdateRecord)),v(e=>{var t=Un,n=Fn,o=Gn;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=Nn(n,t.name)),i;var i,r,o,a}})),v(e=>{var n=An,i=Wn,a=t("table.untitled")||"Untitled",c=Hn,u=jn,g=qn;return n!==e.e&&p(r,e.e=n),i!==e.t&&p(o,e.t=i),a!==e.a&&b(s,"placeholder",e.a=a),c!==e.o&&p(s,e.o=c),u!==e.i&&p(l,e.i=u),g!==e.n&&p(d,e.n=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>s.value=Bn(n,e.columns)),r;var r,o,a,s,l,d}})),v(()=>p(n,Dn)),n;var n}d(["keydown","click"]);const Xn="_gallery_1i7ro_1",Qn="_card_1i7ro_8",Zn="_imageContainer_1i7ro_23",ei="_image_1i7ro_23",ti="_imagePlaceholder_1i7ro_38",ni="_cardContent_1i7ro_43",ii="_cardHeader_1i7ro_47",ri="_deleteBtn_1i7ro_54",oi="_cardBody_1i7ro_67",ai="_field_1i7ro_71",si="_fieldName_1i7ro_77",li="_titleInput_1i7ro_83",di="_fieldValueInput_1i7ro_100";var ci=k("<div>"),ui=k("<div><div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),gi=k("<img>"),hi=k("<div><span>:</span><input type=text>");function vi(e){const{t:t}=be();return n=ci(),g(n,i(f,{get each(){return e.records},children:n=>{const r=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return o=ui(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=l.firstChild,c=l.nextSibling,u=s.nextSibling,g(o,i(h,{when:r,children:r=>{return o=ci(),g(o,i(h,{get when(){return n.data[r().name]},get fallback(){return e=ci(),g(e,()=>t("table.noImage")),v(()=>p(e,ti)),e;var e},get children(){var t=gi();return v(i=>{var o=String(n.data[r().name]),a=Bn(n,e.columns)||"Record",s=ei;return o!==i.e&&b(t,"src",i.e=o),a!==i.t&&b(t,"alt",i.t=a),s!==i.a&&p(t,i.a=s),i},{e:void 0,t:void 0,a:void 0}),t}})),v(()=>p(o,Zn)),o;var o}}),a),y(d,"keydown",Mn),d.addEventListener("blur",t=>e.columns[0]&&On(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),c.$$click=()=>e.onDeleteRecord(n.id),g(u,i(f,{get each(){return e.columns.slice(1,3)},children:t=>{return i=hi(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>t.name,o),y(a,"keydown",Mn),a.addEventListener("blur",i=>On(n,t.name,i.target.value,e.onUpdateRecord)),v(e=>{var t=ai,n=si,o=di;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=Nn(n,t.name)),i;var i,r,o,a}})),v(e=>{var n=Qn,i=ni,r=ii,l=t("table.untitled")||"Untitled",g=li,h=ri,v=oi;return n!==e.e&&p(o,e.e=n),i!==e.t&&p(a,e.t=i),r!==e.a&&p(s,e.a=r),l!==e.o&&b(d,"placeholder",e.o=l),g!==e.i&&p(d,e.i=g),h!==e.n&&p(c,e.n=h),v!==e.s&&p(u,e.s=v),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>d.value=Bn(n,e.columns)),o;var o,a,s,l,d,c,u}})),v(()=>p(n,Xn)),n;var n}d(["keydown","click"]);const pi="_board_ojcu7_1",_i="_noGroup_ojcu7_7",fi="_columns_ojcu7_16",mi="_column_ojcu7_16",bi="_columnHeader_ojcu7_31",wi="_columnName_ojcu7_38",ki="_columnCount_ojcu7_45",yi="_cards_ojcu7_53",Si="_card_ojcu7_53",$i="_cardHeader_ojcu7_68",Ci="_deleteBtn_ojcu7_80",xi="_cardBody_ojcu7_93",Ii="_field_ojcu7_97",Li="_fieldName_ojcu7_103",zi="_titleInput_ojcu7_108",Ti="_fieldValueInput_ojcu7_125";var Ei=k("<div>"),Ri=k("<div><div><span></span><span></span></div><div>"),Pi=k("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Oi=k("<div><span>:</span><input type=text>");function Mi(e){const{t:t}=be(),r=n(()=>e.columns.find(e=>e.type===qt||"multi_select"===e.type)),o=n(()=>{const n=r();if(!n)return[{name:"All Records",records:e.records,fromOptions:!0}];const i={};return n.options&&n.options.forEach(e=>{i[e.id]={name:e.name,records:[],fromOptions:!0}}),i.__none__={name:t("table.noGroup")||"No Group",records:[],fromOptions:!0},e.records.forEach(e=>{const t=e.data[n.name];t&&"string"==typeof t?(i[t]||(i[t]={name:t,records:[]}),i[t].records.push(e)):i.__none__?.records.push(e)}),Object.values(i).filter(e=>e.records.length>0||e.fromOptions)});return a=Ei(),g(a,i(h,{get when(){return r()},get fallback(){return e=Ei(),g(e,()=>t("table.addSelectColumn")),v(()=>p(e,_i)),e;var e},get children(){var n=Ei();return g(n,i(f,{get each(){return o()},children:n=>{return o=Ri(),a=o.firstChild,s=a.firstChild,l=s.nextSibling,d=a.nextSibling,g(s,()=>n.name),g(l,()=>n.records.length),g(d,i(f,{get each(){return n.records},children:n=>{return o=Pi(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=s.nextSibling,c=a.nextSibling,y(l,"keydown",Mn),l.addEventListener("blur",t=>e.columns[0]&&On(n,e.columns[0].name,t.target.value,e.onUpdateRecord)),d.$$click=()=>e.onDeleteRecord(n.id),g(c,i(f,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==r()?.name)},children:t=>{return i=Oi(),r=i.firstChild,o=r.firstChild,a=r.nextSibling,g(r,()=>t.name,o),y(a,"keydown",Mn),a.addEventListener("blur",i=>On(n,t.name,i.target.value,e.onUpdateRecord)),v(e=>{var t=Ii,n=Li,o=Ti;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(r,e.t=n),o!==e.a&&p(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=Nn(n,t.name)),i;var i,r,o,a}})),v(e=>{var n=Si,i=$i,r=t("table.untitled")||"Untitled",s=zi,u=Ci,g=xi;return n!==e.e&&p(o,e.e=n),i!==e.t&&p(a,e.t=i),r!==e.a&&b(l,"placeholder",e.a=r),s!==e.o&&p(l,e.o=s),u!==e.i&&p(d,e.i=u),g!==e.n&&p(c,e.n=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>l.value=Bn(n,e.columns)),o;var o,a,s,l,d,c}})),v(e=>{var t=mi,n=bi,i=wi,r=ki,c=yi;return t!==e.e&&p(o,e.e=t),n!==e.t&&p(a,e.t=n),i!==e.a&&p(s,e.a=i),r!==e.o&&p(l,e.o=r),c!==e.i&&p(d,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,a,s,l,d}})),v(()=>p(n,fi)),n}})),v(()=>p(a,pi)),a;var a}d(["keydown","click"]);class Ni extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function Bi(e,t){const n=await e(t);if(!n.ok){const e=await n.json();throw new Ni(n.status,e)}return n.json()}async function Di(e,t,n){const i={method:"POST"};n&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n));const r=await e(t,i);if(!r.ok){const e=await r.json();throw new Ni(r.status,e)}return r.json()}function Ai(e){return{admin:{organizations:{listAllOrgs:()=>Bi(e,"/api/admin/organizations")},getAdminStats:()=>Bi(e,"/api/admin/stats"),listAllUsers:()=>Bi(e,"/api/admin/users")},auth:{email:{changeEmail:t=>Di(e,"/api/auth/email",t),sendVerificationEmail:()=>Di(e,"/api/auth/email/send-verification")},invitations:{acceptOrgInvitation:t=>Di(e,"/api/auth/invitations/org/accept",t),acceptWSInvitation:t=>Di(e,"/api/auth/invitations/ws/accept",t)},sessions:{listSessions:()=>Bi(e,"/api/auth/sessions"),revokeAllSessions:()=>Di(e,"/api/auth/sessions/revoke-all"),revokeSession:t=>Di(e,"/api/auth/sessions/revoke",t)},getMe:()=>Bi(e,"/api/auth/me"),listProviders:()=>Bi(e,"/api/auth/providers"),login:t=>Di(e,"/api/auth/login",t),logout:()=>Di(e,"/api/auth/logout"),register:t=>Di(e,"/api/auth/register",t),switchWorkspace:t=>Di(e,"/api/auth/switch-workspace",t),updateUserSettings:t=>Di(e,"/api/auth/settings",t)},organizations:{createOrganization:t=>Di(e,"/api/organizations",t)},getHealth:()=>Bi(e,"/api/health"),org:t=>({invitations:{createOrgInvitation:n=>Di(e,`/api/organizations/${t}/invitations`,n),listOrgInvitations:()=>Bi(e,`/api/organizations/${t}/invitations`)},notion:{getStatus:n=>Bi(e,`/api/organizations/${t}/notion/import/${n}/status`),startImport:n=>Di(e,`/api/organizations/${t}/notion/import`,n)},organizations:{getOrganization:()=>Bi(e,`/api/organizations/${t}`),updateOrganization:n=>Di(e,`/api/organizations/${t}`,n)},settings:{updateOrgPreferences:n=>Di(e,`/api/organizations/${t}/settings`,n)},users:{listUsers:()=>Bi(e,`/api/organizations/${t}/users`),updateOrgMemberRole:n=>Di(e,`/api/organizations/${t}/users/role`,n)},workspaces:{createWorkspace:n=>Di(e,`/api/organizations/${t}/workspaces`,n)}}),ws:t=>({invitations:{createWSInvitation:n=>Di(e,`/api/workspaces/${t}/invitations`,n),listWSInvitations:()=>Bi(e,`/api/workspaces/${t}/invitations`)},nodes:{assets:{deleteNodeAsset:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/assets/${i}/delete`),listNodeAssets:n=>Bi(e,`/api/workspaces/${t}/nodes/${n}/assets`)},history:{getNodeVersion:(n,i)=>Bi(e,`/api/workspaces/${t}/nodes/${n}/history/${i}`),async listNodeVersions(n,i){const r=new URLSearchParams;i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/history`+(r.toString()?`?${r}`:"");return Bi(e,o)}},page:{createPage:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/page/create`,i),deletePage:n=>Di(e,`/api/workspaces/${t}/nodes/${n}/page/delete`),getPage:n=>Bi(e,`/api/workspaces/${t}/nodes/${n}/page`),updatePage:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/page`,i)},table:{records:{createRecord:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/records/create`,i),deleteRecord:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}/delete`),getRecord:(n,i)=>Bi(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`),async listRecords(n,i){const r=new URLSearchParams;i.Offset&&r.set("offset",String(i.Offset)),i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/table/records`+(r.toString()?`?${r}`:"");return Bi(e,o)},updateRecord:(n,i,r)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`,r)},createTable:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/create`,i),deleteTable:n=>Di(e,`/api/workspaces/${t}/nodes/${n}/table/delete`),getTable:n=>Bi(e,`/api/workspaces/${t}/nodes/${n}/table`),updateTable:(n,i)=>Di(e,`/api/workspaces/${t}/nodes/${n}/table`,i)},deleteNode:n=>Di(e,`/api/workspaces/${t}/nodes/${n}/delete`),getNode:n=>Bi(e,`/api/workspaces/${t}/nodes/${n}`),listNodeChildren:n=>Bi(e,`/api/workspaces/${t}/nodes/${n}/children`)},notion:{cancelImport:()=>Di(e,`/api/workspaces/${t}/notion/import/cancel`)},settings:{git:{deleteGitRemote:()=>Di(e,`/api/workspaces/${t}/settings/git/delete`),getGitRemote:()=>Bi(e,`/api/workspaces/${t}/settings/git`),pushGit:()=>Di(e,`/api/workspaces/${t}/settings/git/push`),updateGitRemote:n=>Di(e,`/api/workspaces/${t}/settings/git`,n)},updateWSMembershipSettings:n=>Di(e,`/api/workspaces/${t}/settings/membership`,n)},users:{updateWSMemberRole:n=>Di(e,`/api/workspaces/${t}/users/role`,n)},workspaces:{getWorkspace:()=>Bi(e,`/api/workspaces/${t}`),updateWorkspace:n=>Di(e,`/api/workspaces/${t}`,n)},search:n=>Di(e,`/api/workspaces/${t}/search`,n)})}}const Wi=3,ji=1e3,qi=3e4;function Ui(e){return 429===e||e>=500&&e<600}function Fi(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const n=Date.parse(e);return isNaN(n)?null:Math.max(0,n-Date.now())}function Hi(e,t){if(null!==t)return Math.min(t,qi);const n=ji*Math.pow(2,e);return Math.min(n,qi)}function Gi(e,t){return n=async(n,i)=>{const r=e(),o={...i?.headers};r&&(o.Authorization=`Bearer ${r}`);const a=await fetch(n,{...i,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let i=0;for(;;){const r=await n(e,t);if(!Ui(r.status)||i>=Wi)return r;const o=Hi(i,Fi(r.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),i++}};var n}function Vi(e,t){return Ai(Gi(e,t))}const Ki=o(),Yi=t=>{const[r,o]=e(null),[a,s]=e(localStorage.getItem("mddb_token")),l=async()=>{const e=a();if(e)try{const t=Vi(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),s(null),o(null),window.history.pushState(null,"","/")},d=n(()=>Vi(()=>a(),l)),c=n(()=>{const e=r()?.workspace_id;return e?d().ws(e):null}),g=n(()=>{const e=r()?.organization_id;return e?d().org(e):null});u(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),s(e),window.history.replaceState({},document.title,window.location.pathname))});let h=!1;ie(()=>{const e=a(),t=r();!e||t||h||(h=!0,(async()=>{try{const e=await d().auth.getMe();o(e)}catch(e){console.error("Failed to load user",e),e instanceof Ni&&401===e.status&&(localStorage.removeItem("mddb_token"),s(null))}finally{h=!1}})())});const v={user:r,token:a,api:d,wsApi:c,orgApi:g,login:(e,t)=>{localStorage.setItem("mddb_token",e),s(e),o(t)},logout:l,setUser:o,refreshUser:async()=>{try{const e=await d().auth.getMe();o(e)}catch(e){console.error("Failed to refresh user",e),e instanceof Ni&&401===e.status&&(localStorage.removeItem("mddb_token"),s(null),o(null))}}};return i(Ki.Provider,{value:v,get children(){return t.children}})};function Ji(){const e=r(Ki);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function Xi(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}function Qi(e,t){return`/w/${e}+${Xi(t||"workspace")}/`}function Zi(e,t,n,i){const r=Xi(t||"workspace"),o=i?Xi(i):"";return`/w/${e}+${r}/${n}${o?"+"+o:""}`}function er(e,t){return`/o/${e}+${Xi(t||"organization")}/settings`}function tr(e,t,n){if(!e||"user"===e)return"/settings/user";return`/settings/${e}/${t}+${Xi(n||e)}`}const nr=o(),ir=t=>{const{t:n}=be(),{user:r,setUser:o,api:a,wsApi:s,login:l}=Ji(),[d,u]=c([]),[g,h]=e(null),[v,p]=e(null),[_,f]=e([]),[m,b]=e(!1),[w,k]=e(null),[y,S]=e(!1),[$,C]=e(!1);let x=!1,I=null,L=null,z=null;function T(){const e=r();if(!e?.name)return"";return e.name.split(" ")[0]||e.name}async function E(e){await a().organizations.createOrganization({name:e.name});const t=await a().auth.getMe();o(t)}async function R(e){const t=r();if(!t||!t.organization_id)throw new Error("No organization selected");const n=await a().org(t.organization_id).workspaces.createWorkspace({name:e.name}),i=await a().auth.getMe();o(i),await P(n.id)}async function P(e,t=!0){try{b(!0);const n=await a().auth.switchWorkspace({ws_id:e});if(!n.user)throw new Error("No user data returned");if(l(n.token,n.user),de(()=>{h(null),p(null),f([])}),z=null,I=null,t){const e=n.user.workspace_id,t=n.user.workspace_name;e?window.history.pushState(null,"",Qi(e,t)):window.history.pushState(null,"","/")}await O()}catch(i){k(`${n("errors.failedToSwitch")}: ${i}`)}finally{b(!1)}}async function O(e=!1){const t=s(),i=r()?.workspace_id;if(t&&!x&&!(!e&&i&&I===i&&d.length>0))try{x=!0,b(!0);const e=await t.nodes.listNodeChildren("0");let o=e?.nodes||[];if(0===o.length&&y()){const e=await async function(){const e=s(),t=r();if(!e||!t)return null;if(t.workspace_role!==Ht&&"ws:editor"!==t.workspace_role)return null;try{const t=await e.nodes.page.createPage("0",{title:n("welcome.welcomePageTitle"),content:n("welcome.welcomePageContent")});return t?.id?String(t.id):null}catch(i){return k(`${n("errors.failedToCreate")}: ${i}`),null}}();if(e){const e=await t.nodes.listNodeChildren("0");o=e?.nodes||[]}}u(ce(o)),I=i||null,k(null);const a=window.location.pathname;a.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/)&&!g()&&o.length>0&&o[0]&&M(o[0].id,!1)}catch(o){k(`${n("errors.failedToLoad")}: ${o}`)}finally{x=!1,b(!1)}}async function M(e,t=!0){const i=s();if(i&&L!==e&&z!==e)try{L=e,b(!0);const n=await i.nodes.getNode(e);de(()=>{h(n.id),p(n)}),z=n.id,k(null);const o=r()?.workspace_id,a=r()?.workspace_name;if(o){const e=Zi(o,a,n.id,n.title);t?window.location.pathname!==e&&window.history.pushState(null,"",e):window.location.pathname!==e&&window.history.replaceState(null,"",e)}const s=[n];let l=n;for(;l.parent_id&&"0"!==l.parent_id;)try{const e=await i.nodes.getNode(l.parent_id);s.unshift(e),l=e}catch{break}return f(s),n}catch(o){return void k(`${n("errors.failedToLoad")}: ${o}`)}finally{L=null,b(!1)}}ie(()=>{const e=r();if(!e||y()||$())return;const t=e.organizations||[];if(0===t.length)return C(!0),void async function(){try{b(!0);const e=T(),t=e?n("onboarding.defaultOrgName",{name:e}):n("onboarding.defaultOrgNameFallback");await E({name:t||"My Organization"})}catch(e){k(`${n("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>C(!1));const i=t[0];if(i){if(0===(e.workspaces?.filter(e=>e.organization_id===i.organization_id)||[]).length&&(i.role===Ft||i.role===Ut))return C(!0),void async function(){try{b(!0);const e=T(),t=e?n("onboarding.defaultWorkspaceName",{name:e}):n("onboarding.defaultWorkspaceNameFallback");await R({name:t||"Main"})}catch(e){k(`${n("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>C(!1))}const o=e.workspace_id,a=e.workspace_name;o&&(S(!0),"/"===window.location.pathname&&window.history.replaceState(null,"",Qi(o,a)))}),ie(()=>{r()&&O()}),ie(()=>{const e=r()?.workspace_id;e&&I!==e&&(z=null)});const N={nodes:d,setNodes:e=>{u(le(e))},selectedNodeId:g,setSelectedNodeId:h,selectedNodeData:v,setSelectedNodeData:p,breadcrumbPath:_,setBreadcrumbPath:f,loading:m,setLoading:b,error:w,setError:k,firstLoginCheckDone:y,setFirstLoginCheckDone:S,switchWorkspace:P,createOrganization:E,createWorkspace:R,loadNodes:O,loadNode:M,fetchNodeChildren:async function(e){const t=s();if(!t)return[];try{const n=await t.nodes.listNodeChildren(e),i=n.nodes?.filter(Boolean)||[];return i.length>0&&u(le(t=>{const n=t=>{for(const r of t){if(r.id===e)return r.children=i,!0;if(r.children&&n(r.children))return!0}return!1};n(t)})),i}catch(n){return console.error("Failed to fetch children:",n),[]}},updateNodeTitle:(e,t)=>{u(le(n=>{const i=n=>{for(const r of n){if(r.id===e)return r.title=t,!0;if(r.children&&i(r.children))return!0}return!1};i(n)})),f(n=>n.map(n=>n.id===e?{...n,title:t}:n))}};return i(nr.Provider,{value:N,get children(){return t.children}})};function rr(){const e=r(nr);if(!e)throw new Error("useWorkspace must be used within a WorkspaceProvider");return e}const or=o(),ar=t=>{const{t:n}=be(),{user:r,wsApi:o}=Ji(),{selectedNodeId:a,selectedNodeData:s,updateNodeTitle:l,setLoading:d,setError:c}=rr(),[u,g]=e(""),[h,v]=e(""),[p,_]=e(!1),[f,m]=e("idle"),[b,w]=e(!1),[k,y]=e([]),S=function(e,t){let n=null,i=null;const r=(...r)=>{i=r,null!==n&&clearTimeout(n),n=setTimeout(()=>{n=null,i=null,e(...r)},t)};return r.flush=()=>{if(null!==n&&null!==i){clearTimeout(n);const t=i;n=null,i=null,e(...t)}},r.cancel=()=>{null!==n&&(clearTimeout(n),n=null,i=null)},r.pending=()=>null!==n,r}(async()=>{const e=a(),t=o();if(e&&p()&&t)try{m("saving"),await t.nodes.page.updatePage(e,{title:u(),content:h()}),_(!1),m("saved");const n=r()?.workspace_id,i=r()?.workspace_name;if(n){const t=window.location.pathname,r=Zi(n,i,e,u());t!==r&&window.history.replaceState(null,"",r)}setTimeout(()=>{"saved"===f()&&m("idle")},2e3)}catch(i){c(`${n("errors.autoSaveFailed")}: ${i}`),m("idle")}},2e3);function $(){g(""),v(""),_(!1),m("idle"),w(!1),y([])}Q(()=>{S.flush()}),ie(()=>{const e=s();e?(g(e.title),v(e.content||""),_(!1),m("idle"),w(!1)):$()});const C={title:u,setTitle:g,content:h,setContent:v,hasUnsavedChanges:p,setHasUnsavedChanges:_,autoSaveStatus:f,assetUrls:()=>s()?.asset_urls||{},showHistory:b,setShowHistory:w,history:k,loadHistory:async function(e){if(b())return void w(!1);const t=o();if(t)try{d(!0);const n=await t.nodes.history.listNodeVersions(e,{Limit:100});y(n.history?.filter(Boolean)||[]),w(!0)}catch(i){c(`${n("errors.failedToLoad")}: ${i}`)}finally{d(!1)}},loadVersion:async function(e,t){if(!confirm(n("editor.restoreConfirm")||"This will replace current editor content. Continue?"))return;const i=o();if(i)try{d(!0);const n=await i.nodes.history.getNodeVersion(e,t);v(n.content||""),_(!0),w(!1)}catch(r){c(`${n("errors.failedToLoad")}: ${r}`)}finally{d(!1)}},triggerAutoSave:S,flushAutoSave:S.flush,resetEditor:$,handleTitleChange:function(e){g(e);const t=a();t&&l(t,e),_(!0),S()},handleContentChange:function(e){v(e),_(!0),S()}};return i(or.Provider,{value:C,get children(){return t.children}})};const sr=o(),lr=t=>{const{t:n}=be(),{wsApi:r}=Ji(),{selectedNodeId:o,selectedNodeData:a,loading:s,setLoading:l,setError:d}=rr(),[c,u]=e([]),[g,h]=e(!1);function v(){u([]),h(!1)}async function p(e){const t=r();if(t)try{l(!0);const n=(await t.nodes.table.records.listRecords(e,{Offset:0,Limit:50})).records||[];u(n),h(50===n.length)}catch(i){d(`${n("errors.failedToLoad")}: ${i}`)}finally{l(!1)}}ie(()=>{const e=a();e?.has_table?p(e.id):v()});const _={records:c,hasMore:g,loadRecords:p,loadMoreRecords:async function(){const e=o(),t=r();if(e&&!s()&&t)try{l(!0);const n=c().length,i=(await t.nodes.table.records.listRecords(e,{Offset:n,Limit:50})).records||[];u([...c(),...i]),h(50===i.length)}catch(i){d(`${n("errors.failedToLoad")}: ${i}`)}finally{l(!1)}},addRecord:async function(e){const t=o(),i=r();if(t&&i)try{l(!0),await i.nodes.table.records.createRecord(t,{data:e}),await p(t),d(null)}catch(a){d(`${n("errors.failedToCreate")}: ${a}`)}finally{l(!1)}},updateRecord:async function(e,t){const i=o(),a=r();if(i&&a)try{l(!0),await a.nodes.table.records.updateRecord(i,e,{data:t}),await p(i),d(null)}catch(s){d(`${n("errors.failedToSave")}: ${s}`)}finally{l(!1)}},deleteRecord:async function(e){const t=o(),i=r();if(t&&i&&confirm(n("table.confirmDeleteRecord")||"Delete this record?"))try{l(!0),await i.nodes.table.records.deleteRecord(t,e),await p(t),d(null)}catch(a){d(`${n("errors.failedToDelete")}: ${a}`)}finally{l(!1)}},clearRecords:v};return i(sr.Provider,{value:_,get children(){return t.children}})};const dr="_settings_1ivbi_1",cr="_header_1ivbi_7",ur="_backButton_1ivbi_20",gr="_section_1ivbi_36",hr="_table_1ivbi_45",vr="_roleSelect_1ivbi_63",pr="_error_1ivbi_69",_r="_success_1ivbi_77",fr="_tabs_1ivbi_85",mr="_activeTab_1ivbi_107",br="_settingsForm_1ivbi_112",wr="_formItem_1ivbi_119",kr="_saveButton_1ivbi_138",yr="_hint_1ivbi_157",Sr="_inviteSection_1ivbi_163",$r="_inviteForm_1ivbi_167",Cr="_formGroup_1ivbi_178",xr="_addRemoteSection_1ivbi_207",Ir="_actions_1ivbi_219",Lr="_smallButton_1ivbi_224",zr="_deleteButtonSmall_1ivbi_238",Tr="_orgLink_1ivbi_252",Er="_linkButton_1ivbi_266";var Rr=k("<button>"),Pr=k("<div>"),Or=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Mr=k("<h4>"),Nr=k("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=editor></option><option value=viewer></option></select><button type=submit>"),Br=k("<section><h3>"),Dr=k("<form><div><label></label><input type=text required></div><button type=submit>"),Ar=k("<section><h3></h3><div><p></p><button> ‚Üí"),Wr=k("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),jr=k("<section><h3></h3><p>"),qr=k("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),Ur=k("<p>"),Fr=k("<select><option value=admin></option><option value=editor></option><option value=viewer>"),Hr=k("<tr><td></td><td></td><td>"),Gr=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function Vr(t){const{t:n}=be(),{user:r,orgApi:o,wsApi:a}=Ji(),[s,l]=e("members"),[d,c]=e([]),[u,_]=e([]),[m,w]=e(null),[k,y]=e(""),[S,$]=e(""),[C,x]=e(""),[I,L]=e("viewer"),[z,T]=e(""),[E,R]=e(""),[P,O]=e(!1),[M,N]=e(null),[B,D]=e(null),A=()=>r()?.workspace_role===Ht,W=async()=>{const e=o();if(e)try{O(!0),N(null);const t=a();if("members"===s()&&A()){const[n,i]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);c(n.users?.filter(e=>!!e)||[]),_(i.invitations?.filter(e=>!!e)||[])}if("workspace"===s()&&t){const e=await t.workspaces.getWorkspace();T(e.name),R(e.name)}if("sync"===s()&&A()&&t)try{const e=await t.settings.git.getGitRemote();w(e)}catch{w(null)}}catch(t){N(`${n("errors.failedToLoad")}: ${t}`)}finally{O(!1)}};ie(()=>{W()});const j=async e=>{e.preventDefault();const t=a();if(C()&&t)try{O(!0),await t.invitations.createWSInvitation({email:C(),role:I()}),x(""),D(n("success.invitationSent")||"Invitation sent successfully"),W()}catch(i){N(`${n("errors.failedToInvite")}: ${i}`)}finally{O(!1)}},q=async e=>{e.preventDefault();const t=a();if(t)try{O(!0),N(null),D(null),z()!==E()&&z().trim()&&await t.workspaces.updateWorkspace({name:z().trim()}),R(z().trim()),D(n("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(i){N(`${n("errors.failedToSave")}: ${i}`)}finally{O(!1)}},U=async e=>{e.preventDefault();const t=a();if(t)try{O(!0),N(null);const e=await t.settings.git.updateGitRemote({url:k(),token:S(),type:"custom",auth_type:S()?"token":"none"});w(e),D(n("success.remoteAdded")||"Git remote configured"),y(""),$("")}catch(i){N(`${n("errors.failedToAddRemote")}: ${i}`)}finally{O(!1)}},F=async()=>{const e=a();if(e)try{O(!0),N(null),D(null),await e.settings.git.pushGit(),D(n("success.pushSuccessful")||"Push successful"),W()}catch(t){N(`${n("errors.pushFailed")}: ${t}`)}finally{O(!1)}},H=async()=>{if(!confirm(n("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=a();if(e)try{O(!0),N(null),await e.settings.git.deleteGitRemote(),w(null),D(n("success.remoteRemoved")||"Remote removed")}catch(t){N(`${n("errors.failedToRemoveRemote")}: ${t}`)}finally{O(!1)}};return(()=>{var e=qr(),o=e.firstChild,c=o.firstChild;c.firstChild;var _=c.nextSibling,w=o.nextSibling,E=w.firstChild,R=E.nextSibling;return c.$$click=()=>t.onBack(),g(c,()=>n("common.back"),null),g(_,()=>n("settings.title")),E.$$click=()=>l("members"),g(E,()=>n("settings.members")),R.$$click=()=>l("workspace"),g(R,()=>n("settings.workspace")),g(w,i(h,{get when(){return A()},get children(){var e=Rr();return e.$$click=()=>l("sync"),g(e,()=>n("settings.gitSync")),v(()=>p(e,"sync"===s()?mr:"")),e}}),null),g(e,i(h,{get when(){return M()},get children(){var e=Pr();return g(e,M),v(()=>p(e,pr)),e}}),null),g(e,i(h,{get when(){return B()},get children(){var e=Pr();return g(e,B),v(()=>p(e,_r)),e}}),null),g(e,i(h,{get when(){return"members"===s()},get children(){var e=Br(),t=e.firstChild;return g(t,()=>n("settings.members")),g(e,i(h,{get when(){return A()},get fallback(){return e=Ur(),g(e,()=>n("settings.adminOnlyMembers")),e;var e},get children(){return[(y=Or(),S=y.firstChild,$=S.firstChild.firstChild,z=$.nextSibling,T=z.nextSibling,E=S.nextSibling,g($,()=>n("settings.nameColumn")),g(z,()=>n("settings.emailColumn")),g(T,()=>n("settings.roleColumn")),g(E,i(f,{get each(){return d()},children:e=>{return t=Hr(),o=t.firstChild,s=o.nextSibling,l=s.nextSibling,g(o,()=>e.name),g(s,()=>e.email),g(l,i(h,{get when(){return e.id!==r()?.id},get fallback(){return e.workspace_role},get children(){var t=Fr(),i=t.firstChild,r=i.nextSibling,o=r.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const i=a();if(i)try{O(!0),await i.users.updateWSMemberRole({user_id:e,role:t}),D(n("success.roleUpdated")||"Role updated"),W()}catch(r){N(`${n("errors.failedToUpdateRole")}: ${r}`)}finally{O(!1)}})(e.id,t.target.value)),g(i,()=>n("settings.roleAdmin")),g(r,()=>n("settings.roleEditor")),g(o,()=>n("settings.roleViewer")),v(()=>p(t,vr)),v(()=>t.value=e.workspace_role),t}})),t;var t,o,s,l}})),v(()=>p(y,hr)),y),(e=Nr(),t=e.firstChild,o=t.firstChild,s=o.nextSibling,l=s.firstChild,c=l.nextSibling,_=c.firstChild,m=_.nextSibling,w=m.nextSibling,k=c.nextSibling,t.addEventListener("submit",j),g(o,()=>n("settings.inviteNewMember")),l.$$input=e=>x(e.target.value),c.addEventListener("change",e=>L(e.target.value)),g(_,()=>n("settings.roleAdmin")),g(m,()=>n("settings.roleEditor")),g(w,()=>n("settings.roleViewer")),g(k,()=>n("common.invite")),g(e,i(h,{get when(){return u().length>0},get children(){return[(l=Mr(),g(l,()=>n("settings.pendingInvitations")),l),(e=Or(),t=e.firstChild,r=t.firstChild.firstChild,o=r.nextSibling,a=o.nextSibling,s=t.nextSibling,g(r,()=>n("settings.emailColumn")),g(o,()=>n("settings.roleColumn")),g(a,()=>n("settings.sentColumn")),g(s,i(f,{get each(){return u()},children:e=>{return t=Hr(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,g(n,()=>e.email),g(i,()=>e.role),g(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>p(e,hr)),e)];var e,t,r,o,a,s,l}}),null),v(i=>{var r=Sr,o=$r,a=Cr,d=n("settings.emailPlaceholder")||"Email address",c=P();return r!==i.e&&p(e,i.e=r),o!==i.t&&p(t,i.t=o),a!==i.a&&p(s,i.a=a),d!==i.o&&b(l,"placeholder",i.o=d),c!==i.i&&(k.disabled=i.i=c),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>l.value=C()),v(()=>c.value=I()),e)];var e,t,o,s,l,c,_,m,w,k,y,S,$,z,T,E}}),null),v(()=>p(e,gr)),e}}),null),g(e,i(h,{get when(){return"workspace"===s()},get children(){var e=Ar(),r=e.firstChild,o=r.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.firstChild;return g(r,()=>n("settings.workspaceSettings")),g(e,i(h,{get when(){return A()},get fallback(){return e=Ur(),g(e,()=>n("settings.adminOnlyWorkspace")),e;var e},get children(){var e=Dr(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",q),g(i,()=>n("settings.workspaceName")),r.$$input=e=>T(e.target.value),g(o,()=>n("settings.saveWorkspaceSettings")),v(n=>{var i=br,r=wr,a=kr,s=P();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=z()),e}}),o),g(a,()=>n("settings.orgSettingsHint")),s.$$click=()=>t.onOpenOrgSettings(),g(s,()=>n("settings.openOrgSettings"),l),v(t=>{var n=gr,i=Tr,r=Er;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(s,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),g(e,i(h,{get when(){return"sync"===s()},get children(){var e=jr(),t=e.firstChild,r=t.nextSibling;return g(t,()=>n("settings.gitSynchronization")),g(r,()=>n("settings.gitSyncHint")),g(e,i(h,{get when(){return m()},children:e=>{const t=e().last_sync;return i=Gr(),r=i.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,u=c.firstChild,h=u.nextSibling,g(o,()=>n("settings.urlColumn")),g(a,()=>n("settings.lastSyncColumn")),g(s,()=>n("common.actions")),g(l,()=>e().url),g(d,()=>t?new Date(t).toLocaleString():n("settings.never")),u.$$click=F,g(u,()=>n("common.push")),h.$$click=H,g(h,()=>n("common.remove")),v(e=>{var t=hr,n=Ir,r=P(),o=Lr,a=P(),s=zr;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(c,e.t=n),r!==e.a&&(u.disabled=e.a=r),o!==e.o&&p(u,e.o=o),a!==e.i&&(h.disabled=e.i=a),s!==e.n&&p(h,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,a,s,l,d,c,u,h}}),null),g(e,i(h,{get when(){return!m()},get children(){var e=Wr(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,u=s.nextSibling;return g(t,()=>n("settings.addNewRemote")),i.addEventListener("submit",U),g(o,()=>n("settings.repositoryUrl")),a.$$input=e=>y(e.target.value),g(l,()=>n("settings.personalAccessToken")),d.$$input=e=>$(e.target.value),g(c,()=>n("settings.tokenHint")),g(u,()=>n("settings.addRemote")),v(t=>{var o=xr,l=br,g=wr,h=n("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",v=wr,_=n("settings.tokenPlaceholder")||"ghp_...",f=yr,m=kr,w=P();return o!==t.e&&p(e,t.e=o),l!==t.t&&p(i,t.t=l),g!==t.a&&p(r,t.a=g),h!==t.o&&b(a,"placeholder",t.o=h),v!==t.i&&p(s,t.i=v),_!==t.n&&b(d,"placeholder",t.n=_),f!==t.s&&p(c,t.s=f),m!==t.h&&p(u,t.h=m),w!==t.r&&(u.disabled=t.r=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>a.value=k()),v(()=>d.value=S()),e}}),null),v(t=>{var n=gr,i=yr;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),v(t=>{var n=dr,i=cr,r=ur,a=fr,l="members"===s()?mr:"",d="workspace"===s()?mr:"";return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(c,t.a=r),a!==t.o&&p(w,t.o=a),l!==t.i&&p(E,t.i=l),d!==t.n&&p(R,t.n=d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}d(["click","input"]);const Kr="_settings_qni6l_1",Yr="_header_qni6l_7",Jr="_backButton_qni6l_20",Xr="_section_qni6l_36",Qr="_table_qni6l_45",Zr="_roleSelect_qni6l_63",eo="_error_qni6l_69",to="_success_qni6l_77",no="_tabs_qni6l_85",io="_activeTab_qni6l_107",ro="_settingsForm_qni6l_112",oo="_formItem_qni6l_119",ao="_saveButton_qni6l_138",so="_inviteSection_qni6l_157",lo="_inviteForm_qni6l_161",co="_formGroup_qni6l_172";var uo=k("<div>"),go=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),ho=k("<h4>"),vo=k("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=member></option></select><button type=submit>"),po=k("<section><h3>"),_o=k("<form><div><label></label><input type=text required></div><button type=submit>"),fo=k("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),mo=k("<p>"),bo=k("<select><option value=owner></option><option value=admin></option><option value=member>"),wo=k("<tr><td></td><td></td><td>");function ko(t){const{t:r}=be(),{user:o,api:a}=Ji(),[s,l]=e("members"),[d,c]=e([]),[u,_]=e([]),[m,w]=e(""),[k,y]=e("member"),[S,$]=e(""),[C,x]=e(""),[I,L]=e(!1),[z,T]=e(null),[E,R]=e(null),P=n(()=>a().org(t.orgId)),O=n(()=>{const e=o()?.organizations?.find(e=>e.organization_id===t.orgId);return e?.role}),M=n(()=>{const e=O();return e===Ut||e===Ft}),N=async()=>{const e=P();try{if(L(!0),T(null),"members"===s()&&M()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);c(t.users?.filter(e=>!!e)||[]),_(n.invitations?.filter(e=>!!e)||[])}if("settings"===s()){const t=await e.organizations.getOrganization();$(t.name),x(t.name)}}catch(t){T(`${r("errors.failedToLoad")}: ${t}`)}finally{L(!1)}};ie(()=>{N()});const B=async e=>{e.preventDefault();const t=P();if(m())try{L(!0),await t.invitations.createOrgInvitation({email:m(),role:k()}),w(""),R(r("success.invitationSent")||"Invitation sent successfully"),N()}catch(n){T(`${r("errors.failedToInvite")}: ${n}`)}finally{L(!1)}},D=async e=>{e.preventDefault();const t=P();try{L(!0),T(null),R(null),S()!==C()&&S().trim()&&await t.organizations.updateOrganization({name:S().trim()}),x(S().trim()),R(r("success.orgSettingsSaved")||"Organization settings saved")}catch(n){T(`${r("errors.failedToSave")}: ${n}`)}finally{L(!1)}};return(()=>{var e=fo(),n=e.firstChild,a=n.firstChild;a.firstChild;var c=a.nextSibling,_=n.nextSibling,C=_.firstChild,x=C.nextSibling;return a.$$click=()=>t.onBack(),g(a,()=>r("common.back"),null),g(c,()=>r("settings.organizationSettings")),C.$$click=()=>l("members"),g(C,()=>r("settings.members")),x.$$click=()=>l("settings"),g(x,()=>r("settings.settings")),g(e,i(h,{get when(){return z()},get children(){var e=uo();return g(e,z),v(()=>p(e,eo)),e}}),null),g(e,i(h,{get when(){return E()},get children(){var e=uo();return g(e,E),v(()=>p(e,to)),e}}),null),g(e,i(h,{get when(){return"members"===s()},get children(){var e=po(),t=e.firstChild;return g(t,()=>r("settings.organizationMembers")),g(e,i(h,{get when(){return M()},get fallback(){return e=mo(),g(e,()=>r("settings.adminOnlyMembers")),e;var e},get children(){return[($=go(),C=$.firstChild,x=C.firstChild.firstChild,z=x.nextSibling,E=z.nextSibling,O=C.nextSibling,g(x,()=>r("settings.nameColumn")),g(z,()=>r("settings.emailColumn")),g(E,()=>r("settings.roleColumn")),g(O,i(f,{get each(){return d()},children:e=>{return t=wo(),n=t.firstChild,a=n.nextSibling,s=a.nextSibling,g(n,()=>e.name),g(a,()=>e.email),g(s,i(h,{get when(){return e.id!==o()?.id},get fallback(){return e.org_role},get children(){var t=bo(),n=t.firstChild,i=n.nextSibling,o=i.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const n=P();try{L(!0),await n.users.updateOrgMemberRole({user_id:e,role:t}),R(r("success.roleUpdated")||"Role updated"),N()}catch(i){T(`${r("errors.failedToUpdateRole")}: ${i}`)}finally{L(!1)}})(e.id,t.target.value)),g(n,()=>r("settings.roleOwner")),g(i,()=>r("settings.roleAdmin")),g(o,()=>r("settings.roleMember")),v(()=>p(t,Zr)),v(()=>t.value=e.org_role),t}})),t;var t,n,a,s}})),v(()=>p($,Qr)),$),(e=vo(),t=e.firstChild,n=t.firstChild,a=n.nextSibling,s=a.firstChild,l=s.nextSibling,c=l.firstChild,_=c.nextSibling,S=l.nextSibling,t.addEventListener("submit",B),g(n,()=>r("settings.inviteNewMember")),s.$$input=e=>w(e.target.value),l.addEventListener("change",e=>y(e.target.value)),g(c,()=>r("settings.roleAdmin")),g(_,()=>r("settings.roleMember")),g(S,()=>r("common.invite")),g(e,i(h,{get when(){return u().length>0},get children(){return[(l=ho(),g(l,()=>r("settings.pendingInvitations")),l),(e=go(),t=e.firstChild,n=t.firstChild.firstChild,o=n.nextSibling,a=o.nextSibling,s=t.nextSibling,g(n,()=>r("settings.emailColumn")),g(o,()=>r("settings.roleColumn")),g(a,()=>r("settings.sentColumn")),g(s,i(f,{get each(){return u()},children:e=>{return t=wo(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,g(n,()=>e.email),g(i,()=>e.role),g(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>p(e,Qr)),e)];var e,t,n,o,a,s,l}}),null),v(n=>{var i=so,o=lo,l=co,d=r("settings.emailPlaceholder")||"Email address",c=I();return i!==n.e&&p(e,n.e=i),o!==n.t&&p(t,n.t=o),l!==n.a&&p(a,n.a=l),d!==n.o&&b(s,"placeholder",n.o=d),c!==n.i&&(S.disabled=n.i=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>s.value=m()),v(()=>l.value=k()),e)];var e,t,n,a,s,l,c,_,S,$,C,x,z,E,O}}),null),v(()=>p(e,Xr)),e}}),null),g(e,i(h,{get when(){return"settings"===s()},get children(){var e=po(),t=e.firstChild;return g(t,()=>r("settings.organizationPreferences")),g(e,i(h,{get when(){return M()},get fallback(){return e=mo(),g(e,()=>r("settings.adminOnlySettings")),e;var e},get children(){var e=_o(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",D),g(n,()=>r("settings.organizationName")),i.$$input=e=>$(e.target.value),g(o,()=>r("common.save")),v(n=>{var i=ro,r=oo,a=ao,s=I();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>i.value=S()),e}}),null),v(()=>p(e,Xr)),e}}),null),v(t=>{var i=Kr,r=Yr,o=Jr,l=no,d="members"===s()?io:"",c="settings"===s()?io:"";return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),o!==t.a&&p(a,t.a=o),l!==t.o&&p(_,t.o=l),d!==t.i&&p(C,t.i=d),c!==t.n&&p(x,t.n=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}d(["click","input"]);const yo="_profile_179j3_1",So="_header_179j3_7",$o="_backButton_179j3_20",Co="_userInfoSection_179j3_36",xo="_avatarLarge_179j3_46",Io="_avatarImageLarge_179j3_58",Lo="_initialsLarge_179j3_64",zo="_userDetails_179j3_70",To="_userName_179j3_74",Eo="_userEmail_179j3_80",Ro="_userRole_179j3_85",Po="_section_179j3_95",Oo="_error_179j3_104",Mo="_success_179j3_112",No="_settingsForm_179j3_120",Bo="_formItem_179j3_127",Do="_checkboxLabel_179j3_146",Ao="_saveButton_179j3_159",Wo="_orgList_179j3_178",jo="_orgItem_179j3_184",qo="_orgInfo_179j3_194",Uo="_orgName_179j3_200",Fo="_orgNameLink_179j3_204",Ho="_orgRole_179j3_214",Go="_emptyState_179j3_223";var Vo=k("<div>"),Ko=k("<div><header><button>‚Üê </button><h2>"),Yo=k("<span>"),Jo=k("<section><div></div><div><h3></h3><p>"),Xo=k("<section><h3>"),Qo=k("<div><label><input type=checkbox>"),Zo=k("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),ea=k("<img referrerpolicy=no-referrer>"),ta=k("<p>"),na=k("<a>"),ia=k("<div><div><span>");function ra(t){const{t:n}=be(),{user:r,api:o,wsApi:a}=Ji(),[s,l]=e("light"),[d,c]=e("en"),[u,_]=e(!0),[m,w]=e(!1),[k,y]=e(null),[S,$]=e(null),C=()=>{const e=r(),t=e?.name||e?.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};ie(()=>{const e=r();l(e?.settings?.theme||"light"),c(e?.settings?.language||"en")});ie(()=>{(async()=>{const e=r();if(e)try{w(!0),y(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&_(t.settings?.notifications??!0)}catch(t){y(`${n("errors.failedToLoad")}: ${t}`)}finally{w(!1)}})()});const x=async e=>{e.preventDefault();const t=a();try{w(!0),y(null),$(null);const e={theme:s(),language:d()},i=[o().auth.updateUserSettings({settings:e})];if(t){const e={notifications:u()};i.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(i),$(n("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(i){y(`${n("errors.failedToSave")}: ${i}`)}finally{w(!1)}};return(()=>{var e=Ko(),o=e.firstChild,a=o.firstChild;a.firstChild;var w=a.nextSibling;return a.$$click=()=>t.onBack(),g(a,()=>n("common.back"),null),g(w,()=>n("profile.title")),g(e,i(h,{get when(){return k()},get children(){var e=Vo();return g(e,k),v(()=>p(e,Oo)),e}}),null),g(e,i(h,{get when(){return S()},get children(){var e=Vo();return g(e,S),v(()=>p(e,Mo)),e}}),null),g(e,i(h,{get when(){return r()},children:e=>{return[(A=Jo(),W=A.firstChild,j=W.nextSibling,q=j.firstChild,U=q.nextSibling,g(W,i(h,{get when(){return(()=>{const e=r()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=Yo(),g(e,C),v(()=>p(e,Lo)),e;var e},children:t=>{return n=ea(),v(i=>{var r=t(),o=e().name||"User",a=Io;return r!==i.e&&b(n,"src",i.e=r),o!==i.t&&b(n,"alt",i.t=o),a!==i.a&&p(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),g(q,()=>e().name),g(U,()=>e().email),g(j,i(h,{get when(){return e().workspace_role},get children(){var t=Yo();return g(t,()=>e().workspace_role),v(()=>p(t,Ro)),t}}),null),v(e=>{var t=Co,n=xo,i=zo,r=To,o=Eo;return t!==e.e&&p(A,e.e=t),n!==e.t&&p(W,e.t=n),i!==e.a&&p(j,e.a=i),r!==e.o&&p(q,e.o=r),o!==e.i&&p(U,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),A),(B=Xo(),D=B.firstChild,g(D,()=>n("profile.myOrganizations")),g(B,i(h,{get when(){return e().organizations?.length},get fallback(){return e=ta(),g(e,()=>n("profile.noOrganizations")),v(()=>p(e,Go)),e;var e},get children(){var n=Vo();return g(n,i(f,{get each(){return e().organizations},children:e=>{const n=Xi(e.organization_name||"organization"),r=`/o/${e.organization_id}+${n}/settings`,o=e.organization_name||e.organization_id;return a=ia(),s=a.firstChild,l=s.firstChild,g(s,i(h,{get when(){return e.role===Ft||e.role===Ut},get fallback(){return e=Yo(),g(e,o),v(()=>p(e,Uo)),e;var e},get children(){var n=na();return n.$$click=n=>{n.preventDefault(),t.onOrgSettings(e)},b(n,"href",r),g(n,o),v(()=>p(n,Fo)),n}}),l),g(l,()=>e.role),v(e=>{var t=jo,n=qo,i=Ho;return t!==e.e&&p(a,e.e=t),n!==e.t&&p(s,e.t=n),i!==e.a&&p(l,e.a=i),e},{e:void 0,t:void 0,a:void 0}),a;var a,s,l}})),v(()=>p(n,Wo)),n}}),null),v(()=>p(B,Po)),B),(o=Zo(),a=o.firstChild,w=a.nextSibling,k=w.firstChild,y=k.firstChild,S=y.nextSibling,$=S.firstChild,I=$.nextSibling,L=I.nextSibling,z=k.nextSibling,T=z.firstChild,E=T.nextSibling,R=E.firstChild,P=R.nextSibling,O=P.nextSibling,M=O.nextSibling,N=z.nextSibling,g(a,()=>n("settings.personalSettings")),w.addEventListener("submit",x),g(y,()=>n("settings.theme")),S.addEventListener("change",e=>l(e.target.value)),g($,()=>n("settings.themeLight")),g(I,()=>n("settings.themeDark")),g(L,()=>n("settings.themeSystem")),g(T,()=>n("settings.language")),E.addEventListener("change",e=>c(e.target.value)),g(R,()=>n("settings.languageEn")),g(P,()=>n("settings.languageFr")),g(O,()=>n("settings.languageDe")),g(M,()=>n("settings.languageEs")),g(w,i(h,{get when(){return e().workspace_id},get children(){var e=Qo(),t=e.firstChild,i=t.firstChild;return i.addEventListener("change",e=>_(e.currentTarget.checked)),g(t,()=>n("settings.enableNotifications"),null),v(n=>{var i=Bo,r=Do;return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),n},{e:void 0,t:void 0}),v(()=>i.checked=u()),e}}),N),g(N,()=>n("settings.saveChanges")),v(e=>{var t=Po,n=No,i=Bo,r=Bo,a=Ao,s=m();return t!==e.e&&p(o,e.e=t),n!==e.t&&p(w,e.t=n),i!==e.a&&p(k,e.a=i),r!==e.o&&p(z,e.o=r),a!==e.i&&p(N,e.i=a),s!==e.n&&(N.disabled=e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>S.value=s()),v(()=>E.value=d()),o)];var o,a,w,k,y,S,$,I,L,z,T,E,R,P,O,M,N,B,D,A,W,j,q,U}}),null),v(t=>{var n=yo,i=So,r=$o;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),r!==t.a&&p(a,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e})()}d(["click"]);const oa="_authContainer_1ksl8_1",aa="_authForm_1ksl8_9",sa="_formGroup_1ksl8_24",la="_error_1ksl8_62",da="_toggle_1ksl8_72",ca="_authFooter_1ksl8_87",ua="_oauthSection_1ksl8_104",ga="_divider_1ksl8_108",ha="_oauthButtons_1ksl8_127",va="_oauthIcon_1ksl8_133",pa="_googleButton_1ksl8_140",_a="_microsoftButton_1ksl8_141",fa="_githubButton_1ksl8_142",ma="_oauthButton_1ksl8_127";var ba=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),wa=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),ka=k('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),ya=k("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),Sa=k("<div><div><span></span></div><div>"),$a=k("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),Ca=k("<div>"),xa=k("<a>");const Ia={[Gt]:function(){return e=ba(),v(()=>b(e,"class",va)),e;var e},[Vt]:function(){return e=wa(),v(()=>b(e,"class",va)),e;var e},[Kt]:function(){return e=ka(),v(()=>b(e,"class",va)),e;var e}},La={[Gt]:{style:pa,labelKey:"auth.loginWithGoogle"},[Vt]:{style:_a,labelKey:"auth.loginWithMicrosoft"},[Kt]:{style:fa,labelKey:"auth.loginWithGitHub"}};const za=Ai((e,t)=>fetch(e,t));function Ta(n){const{t:r}=be(),[o]=t(()=>za.auth.listProviders().then(e=>e.providers)),[a,s]=e(!1),[l,d]=e(""),[c,u]=e(""),[_,w]=e(""),[k,y]=e(null),[S,$]=e(!1),C=async e=>{e.preventDefault(),y(null),$(!0);try{const e=a()?await za.auth.register({email:l(),password:c(),name:_()}):await za.auth.login({email:l(),password:c()});e.token&&e.user?n.onLogin(e.token,e.user):y("Invalid response from server")}catch(t){y(t instanceof Ni?t.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{$(!1)}};return E=$a(),R=E.firstChild,P=R.firstChild,O=P.nextSibling,M=O.firstChild,N=M.nextSibling,B=O.nextSibling,D=B.firstChild,A=D.nextSibling,W=B.nextSibling,j=W.nextSibling,q=j.firstChild,U=j.nextSibling,F=U.firstChild,R.addEventListener("submit",C),g(P,(x=m(()=>!!a()),()=>x()?r("auth.createAccount"):r("auth.loginTitle"))),g(R,(I=m(()=>!!k()),()=>{return I()&&(e=Ca(),g(e,k),v(()=>p(e,la)),e);var e}),O),g(R,i(h,{get when(){return a()},get children(){var e=ya(),t=e.firstChild,n=t.nextSibling;return g(t,()=>r("auth.name")),n.$$input=e=>w(e.target.value),v(()=>p(e,sa)),v(()=>n.value=_()),e}}),O),g(M,()=>r("auth.email")),N.$$input=e=>d(e.target.value),g(D,()=>r("auth.password")),A.$$input=e=>u(e.target.value),g(W,(L=m(()=>!!S()),()=>L()?r("auth.pleaseWait"):m(()=>!!a())()?r("auth.register"):r("auth.login"))),g(R,i(h,{get when(){return(o()??[]).length>0},get children(){var e=Sa(),t=e.firstChild,n=t.firstChild,a=t.nextSibling;return g(n,()=>r("auth.or")),g(a,i(f,{get each(){return o()},children:e=>{const t=function(e){const t=La[e];return t?{style:t.style,label:t.labelKey}:{style:ma,label:e.charAt(0).toUpperCase()+e.slice(1)}}(e),n=e in La,o=Ia[e];return a=xa(),b(a,"href",`/api/auth/oauth/${e}`),g(a,o&&i(o,{}),null),g(a,()=>n?r(t.label):t.label,null),v(()=>p(a,t.style)),a;var a}})),v(n=>{var i=ua,r=ga,o=ha;return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),o!==n.a&&p(a,n.a=o),n},{e:void 0,t:void 0,a:void 0}),e}}),j),g(j,(z=m(()=>!!a()),()=>z()?r("auth.alreadyHaveAccount"):r("auth.dontHaveAccount")),q),q.$$click=()=>s(!a()),g(q,(T=m(()=>!!a()),()=>T()?r("auth.login"):r("auth.register"))),F.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},g(F,()=>r("app.privacyPolicy")),v(e=>{var t=oa,n=aa,i=sa,r=sa,o=a()?"new-password":"current-password",s=S(),l=da,d=ca;return t!==e.e&&p(E,e.e=t),n!==e.t&&p(R,e.t=n),i!==e.a&&p(O,e.a=i),r!==e.o&&p(B,e.o=r),o!==e.i&&b(A,"autocomplete",e.i=o),s!==e.n&&(W.disabled=e.n=s),l!==e.s&&p(j,e.s=l),d!==e.h&&p(U,e.h=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),v(()=>N.value=l()),v(()=>A.value=c()),E;var x,I,L,z,T,E,R,P,O,M,N,B,D,A,W,j,q,U,F}d(["input","click"]);const Ea="_container_mfa6v_1",Ra="_content_mfa6v_9",Pa="_header_mfa6v_19",Oa="_section_mfa6v_36",Ma="_footer_mfa6v_49",Na="_backButton_mfa6v_57";var Ba=k("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and tables are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function Da(){return e=Ba(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(l=s.firstChild).$$click=()=>window.history.back(),v(d=>{var c=Ea,u=Ra,g=Pa,h=Oa,v=Oa,_=Oa,f=Oa,m=Ma,b=Na;return c!==d.e&&p(e,d.e=c),u!==d.t&&p(t,d.t=u),g!==d.a&&p(n,d.a=g),h!==d.o&&p(i,d.o=h),v!==d.i&&p(r,d.i=v),_!==d.n&&p(o,d.n=_),f!==d.s&&p(a,d.s=f),m!==d.h&&p(s,d.h=m),b!==d.r&&p(l,d.r=b),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,n,i,r,o,a,s,l}d(["click"]);const Aa="_container_mfa6v_1",Wa="_content_mfa6v_9",ja="_header_mfa6v_19",qa="_section_mfa6v_36",Ua="_footer_mfa6v_49",Fa="_backButton_mfa6v_57";var Ha=k("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, data, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the ‚ÄúContent‚Äù) and the trademarks, service marks, and logos contained therein (the ‚ÄúMarks‚Äù) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function Ga(){return e=Ha(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,(d=l.firstChild).$$click=()=>window.history.back(),v(c=>{var u=Aa,g=Wa,h=ja,v=qa,_=qa,f=qa,m=qa,b=qa,w=Ua,k=Fa;return u!==c.e&&p(e,c.e=u),g!==c.t&&p(t,c.t=g),h!==c.a&&p(n,c.a=h),v!==c.o&&p(i,c.o=v),_!==c.i&&p(r,c.i=_),f!==c.n&&p(o,c.n=f),m!==c.s&&p(a,c.s=m),b!==c.h&&p(s,c.h=b),w!==c.r&&p(l,c.r=w),k!==c.d&&p(d,c.d=k),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,n,i,r,o,a,s,l,d}d(["click"]);const Va="_banner_172qk_1",Ka="_content_172qk_23",Ya="_title_172qk_27",Ja="_message_172qk_32",Xa="_actions_172qk_37",Qa="_installButton_172qk_42",Za="_dismissButton_172qk_56";var es=k("<div><div><div></div><div></div></div><div><button></button><button>");const ts="mddb_pwa_dismissed";function ns(){const{t:t}=be(),[n,r]=e(null),[o,a]=e(!1);u(()=>{if(function(){const e=localStorage.getItem(ts);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),r(e),a(!0)},t=()=>{a(!1),r(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),Q(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=n();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),r(null)},l=()=>{localStorage.setItem(ts,(new Date).toISOString()),a(!1)};return i(h,{get when(){return m(()=>!!o())()&&n()},get children(){var e=es(),n=e.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,a=o.firstChild,d=a.nextSibling;return g(i,()=>t("pwa.installTitle")),g(r,()=>t("pwa.installMessage")),a.$$click=l,g(a,()=>t("pwa.dismissButton")),d.$$click=s,g(d,()=>t("pwa.installButton")),v(t=>{var s=Va,l=Ka,c=Ya,u=Ja,g=Xa,h=Za,v=Qa;return s!==t.e&&p(e,t.e=s),l!==t.t&&p(n,t.t=l),c!==t.a&&p(i,t.a=c),u!==t.o&&p(r,t.o=u),g!==t.i&&p(o,t.i=g),h!==t.n&&p(a,t.n=h),v!==t.s&&p(d,t.s=v),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}})}d(["click"]);const is="_overlay_v0iwf_1",rs="_modal_v0iwf_11",os="_header_v0iwf_28",as="_formGroup_v0iwf_53",ss="_primaryButton_v0iwf_76",ls="_secondaryButton_v0iwf_99",ds="_actions_v0iwf_113",cs="_error_v0iwf_127";var us=k("<button type=button>"),gs=k("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),hs=k("<div>");function vs(t){const{t:n}=be(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=e=>{t.isFirstOrg||e.target!==e.currentTarget||t.onClose()};return S=gs(),$=S.firstChild,C=$.firstChild,x=C.firstChild,I=x.nextSibling,L=C.nextSibling,z=L.firstChild,T=z.firstChild,E=T.nextSibling,R=z.nextSibling,P=R.firstChild,S.$$click=u,g(x,(_=m(()=>!!t.isFirstOrg),()=>_()?n("createOrg.firstOrgTitle"):n("createOrg.title"))),g(I,(f=m(()=>!!t.isFirstOrg),()=>f()?n("createOrg.firstOrgDescription"):n("createOrg.description"))),g($,(w=m(()=>!!l()),()=>{return w()&&(e=hs(),g(e,l),v(()=>p(e,cs)),e);var e}),L),L.addEventListener("submit",c),g(T,()=>n("createOrg.nameLabel")),E.$$input=e=>o(e.target.value),g(R,i(h,{get when(){return!t.isFirstOrg},get children(){var e=us();return y(e,"click",t.onClose),g(e,()=>n("common.cancel")),v(()=>p(e,ls)),e}}),P),g(P,(k=m(()=>!!a()),()=>k()?n("common.creating"):n("createOrg.create"))),v(e=>{var i=is,o=rs,s=os,l=as,d=n("createOrg.namePlaceholder")||"",c=ds,u=ss,g=!r().trim()||a(),h=t.isFirstOrg?{flex:1}:void 0;return i!==e.e&&p(S,e.e=i),o!==e.t&&p($,e.t=o),s!==e.a&&p(C,e.a=s),l!==e.o&&p(z,e.o=l),d!==e.i&&b(E,"placeholder",e.i=d),c!==e.n&&p(R,e.n=c),u!==e.s&&p(P,e.s=u),g!==e.h&&(P.disabled=e.h=g),e.r=ue(P,h,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>E.value=r()),S;var _,f,w,k,S,$,C,x,I,L,z,T,E,R,P}d(["click","input"]);var ps=k("<button type=button>"),_s=k("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),fs=k("<div>");function ms(t){const{t:n}=be(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},u=e=>{t.isFirstWorkspace||e.target!==e.currentTarget||t.onClose()};return S=_s(),$=S.firstChild,C=$.firstChild,x=C.firstChild,I=x.nextSibling,L=C.nextSibling,z=L.firstChild,T=z.firstChild,E=T.nextSibling,R=z.nextSibling,P=R.firstChild,S.$$click=u,g(x,(_=m(()=>!!t.isFirstWorkspace),()=>_()?n("createWorkspace.firstWorkspaceTitle"):n("createWorkspace.title"))),g(I,(f=m(()=>!!t.isFirstWorkspace),()=>f()?n("createWorkspace.firstWorkspaceDescription"):n("createWorkspace.description"))),g($,(w=m(()=>!!l()),()=>{return w()&&(e=fs(),g(e,l),v(()=>p(e,cs)),e);var e}),L),L.addEventListener("submit",c),g(T,()=>n("createWorkspace.nameLabel")),E.$$input=e=>o(e.target.value),g(R,i(h,{get when(){return!t.isFirstWorkspace},get children(){var e=ps();return y(e,"click",t.onClose),g(e,()=>n("common.cancel")),v(()=>p(e,ls)),e}}),P),g(P,(k=m(()=>!!a()),()=>k()?n("common.creating"):n("createWorkspace.create"))),v(e=>{var i=is,o=rs,s=os,l=as,d=n("createWorkspace.namePlaceholder")||"",c=ds,u=ss,g=!r().trim()||a(),h=t.isFirstWorkspace?{flex:1}:void 0;return i!==e.e&&p(S,e.e=i),o!==e.t&&p($,e.t=o),s!==e.a&&p(C,e.a=s),l!==e.o&&p(z,e.o=l),d!==e.i&&b(E,"placeholder",e.i=d),c!==e.n&&p(R,e.n=c),u!==e.s&&p(P,e.s=u),g!==e.h&&(P.disabled=e.h=g),e.r=ue(P,h,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>E.value=r()),S;var _,f,w,k,S,$,C,x,I,L,z,T,E,R,P}d(["click","input"]);const bs="_overlay_1l8b3_1",ws="_modal_1l8b3_11",ks="_header_1l8b3_28",ys="_error_1l8b3_43",Ss="_setupBox_1l8b3_53",$s="_setupHeader_1l8b3_61",Cs="_setupTitle_1l8b3_70",xs="_createLink_1l8b3_75",Is="_setupSteps_1l8b3_93",Ls="_subSteps_1l8b3_109",zs="_formGroup_1l8b3_119",Ts="_actions_1l8b3_137",Es="_primaryButton_1l8b3_143",Rs="_secondaryButton_1l8b3_166";var Ps=k('<div><div><header><h2></h2><p></p></header><div><div><span></span><a href=https://www.notion.so/profile/integrations/form/new-integration target=_blank rel="noopener noreferrer"> &#x2197;</a></div><ol><li><ol><li></li><li></li><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li></ol></div><form><div><label></label><input type=password autofocus></div><div><button type=button></button><button type=submit>'),Os=k("<div>");function Ms(t){const{t:n}=be(),[i,r]=e(""),[o,a]=e(!1),[s,l]=e(null),d=e=>{"Escape"!==e.key||o()||t.onClose()};u(()=>{document.addEventListener("keydown",d)}),Q(()=>{document.removeEventListener("keydown",d)});const c=async e=>{if(e.preventDefault(),i().trim())try{a(!0),l(null),await t.onImport({notionToken:i().trim()}),t.onClose()}catch(n){l(String(n))}finally{a(!1)}},h=e=>{e.target===e.currentTarget&&t.onClose()};return w=Ps(),k=w.firstChild,S=k.firstChild,$=S.firstChild,C=$.nextSibling,x=S.nextSibling,I=x.firstChild,L=I.firstChild,z=L.nextSibling,T=z.firstChild,E=I.nextSibling,R=E.firstChild,P=R.firstChild,O=P.firstChild,M=O.nextSibling,N=M.nextSibling,B=N.nextSibling,D=R.nextSibling,A=D.firstChild,W=A.firstChild,j=W.nextSibling,q=D.nextSibling,U=q.firstChild,F=U.firstChild,H=F.nextSibling,G=x.nextSibling,V=G.firstChild,K=V.firstChild,Y=K.nextSibling,J=V.nextSibling,X=J.firstChild,Z=X.nextSibling,w.$$click=h,g($,()=>n("notionImport.title")),g(C,()=>n("notionImport.description")),g(k,(_=m(()=>!!s()),()=>{return _()&&(e=Os(),g(e,s),v(()=>p(e,ys)),e);var e}),x),g(L,()=>n("notionImport.setupTitle")),g(z,()=>n("notionImport.createIntegration"),T),g(R,()=>n("notionImport.step1Header"),P),g(O,()=>n("notionImport.step1a")),g(M,()=>n("notionImport.step1b")),g(N,()=>n("notionImport.step1c")),g(B,()=>n("notionImport.step1d")),g(D,()=>n("notionImport.step2Header"),A),g(W,()=>n("notionImport.step2a")),g(j,()=>n("notionImport.step2b")),g(q,()=>n("notionImport.step3Header"),U),g(F,()=>n("notionImport.step3a")),g(H,()=>n("notionImport.step3b")),G.addEventListener("submit",c),g(K,()=>n("notionImport.notionToken")),Y.$$input=e=>r(e.target.value),y(X,"click",t.onClose),g(X,()=>n("common.cancel")),g(Z,(f=m(()=>!!o()),()=>f()?n("notionImport.importing"):n("notionImport.startImport"))),v(e=>{var t=bs,r=ws,a=ks,s=Ss,l=$s,d=Cs,c=xs,u=Is,g=Ls,h=Ls,v=Ls,_=zs,f=n("notionImport.notionTokenPlaceholder")||"",m=Ts,y=Rs,$=Es,C=!i().trim()||o();return t!==e.e&&p(w,e.e=t),r!==e.t&&p(k,e.t=r),a!==e.a&&p(S,e.a=a),s!==e.o&&p(x,e.o=s),l!==e.i&&p(I,e.i=l),d!==e.n&&p(L,e.n=d),c!==e.s&&p(z,e.s=c),u!==e.h&&p(E,e.h=u),g!==e.r&&p(P,e.r=g),h!==e.d&&p(A,e.d=h),v!==e.l&&p(U,e.l=v),_!==e.u&&p(V,e.u=_),f!==e.c&&b(Y,"placeholder",e.c=f),m!==e.w&&p(J,e.w=m),y!==e.m&&p(X,e.m=y),$!==e.f&&p(Z,e.f=$),C!==e.y&&(Z.disabled=e.y=C),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),v(()=>Y.value=i()),w;var _,f,w,k,S,$,C,x,I,L,z,T,E,R,P,O,M,N,B,D,A,W,j,q,U,F,H,G,V,K,Y,J,X,Z}d(["click","input"]);const Ns="_banner_tmw21_1",Bs="_success_tmw21_11",Ds="_error_tmw21_16",As="_cancelled_tmw21_21",Ws="_icon_tmw21_26",js="_content_tmw21_30",qs="_message_tmw21_37",Us="_progress_tmw21_41",Fs="_stats_tmw21_46",Hs="_stat_tmw21_46",Gs="_statValue_tmw21_58",Vs="_actions_tmw21_63",Ks="_cancelButton_tmw21_68",Ys="_dismissButton_tmw21_82",Js="_spinner_tmw21_95";var Xs=k("<span>&#x21BB;"),Qs=k("<span>&#x2713;"),Zs=k("<span>&#x2717;"),el=k("<span>&#x26A0;"),tl=k("<span>/<!>: "),nl=k("<span><span></span> "),il=k("<div>"),rl=k("<span>"),ol=k("<button>"),al=k("<div><span></span><div><span></span></div><div>");function sl(e){const{t:t}=be(),n=()=>e.status,r=()=>{switch(n().status){case"running":return t("notionImport.importInProgress");case"completed":return t("notionImport.importCompleted");case"failed":return t("notionImport.importFailed");case"cancelled":return t("notionImport.importCancelled");default:return""}},o=()=>{switch(n().status){case"running":return e=Xs(),v(()=>p(e,Js)),e;case"completed":return Qs();case"failed":return Zs();case"cancelled":return el();default:return null}var e},a=()=>["completed","failed","cancelled"].includes(n().status);return s=al(),l=s.firstChild,d=l.nextSibling,c=d.firstChild,u=d.nextSibling,g(l,o),g(c,r),g(d,i(h,{get when(){return m(()=>"running"===n().status)()&&n().message},get children(){var e=tl(),t=e.firstChild,i=t.nextSibling;return i.nextSibling,g(e,()=>n().progress,t),g(e,()=>n().total,i),g(e,()=>n().message,null),v(()=>p(e,Us)),e}}),null),g(d,i(h,{get when(){return m(()=>!!a())()&&(n().pages||n().databases||n().records)},get children(){var e=il();return g(e,i(h,{get when(){return n().pages},get children(){var e=nl(),i=e.firstChild;return i.nextSibling,g(i,()=>n().pages),g(e,()=>t("notionImport.pagesImported"),null),v(t=>{var n=Hs,r=Gs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(e,i(h,{get when(){return n().databases},get children(){var e=nl(),i=e.firstChild;return i.nextSibling,g(i,()=>n().databases),g(e,()=>t("notionImport.databasesImported"),null),v(t=>{var n=Hs,r=Gs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(e,i(h,{get when(){return n().records},get children(){var e=nl(),i=e.firstChild;return i.nextSibling,g(i,()=>n().records),g(e,()=>t("notionImport.recordsImported"),null),v(t=>{var n=Hs,r=Gs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(e,i(h,{get when(){return n().assets},get children(){var e=nl(),i=e.firstChild;return i.nextSibling,g(i,()=>n().assets),g(e,()=>t("notionImport.assetsImported"),null),v(t=>{var n=Hs,r=Gs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),g(e,i(h,{get when(){return n().errors},get children(){var e=nl(),i=e.firstChild;return i.nextSibling,g(i,()=>n().errors),g(e,()=>t("notionImport.errorsEncountered"),null),v(t=>{var n=Hs,r=Gs;return n!==t.e&&p(e,t.e=n),r!==t.t&&p(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(()=>p(e,Fs)),e}}),null),g(d,i(h,{get when(){return m(()=>"failed"===n().status)()&&n().message},get children(){var e=rl();return g(e,()=>n().message),v(()=>p(e,Us)),e}}),null),g(u,i(h,{get when(){return"running"===n().status},get children(){var n=ol();return y(n,"click",e.onCancel),g(n,()=>t("notionImport.cancel")),v(()=>p(n,Ks)),n}}),null),g(u,i(h,{get when(){return a()},get children(){var n=ol();return y(n,"click",e.onDismiss),g(n,()=>t("notionImport.dismiss")),v(()=>p(n,Ys)),n}}),null),v(e=>{var t=(()=>{switch(n().status){case"completed":return`${Ns} ${Bs}`;case"failed":return`${Ns} ${Ds}`;case"cancelled":return`${Ns} ${As}`;default:return Ns}})(),i=Ws,r=js,o=qs,a=Vs;return t!==e.e&&p(s,e.e=t),i!==e.t&&p(l,e.t=i),r!==e.a&&p(d,e.a=r),o!==e.o&&p(c,e.o=o),a!==e.i&&p(u,e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s;var s,l,d,c,u}d(["click"]);const ll="_userMenu_o60yu_1",dl="_avatarButton_o60yu_5",cl="_avatarImage_o60yu_24",ul="_initials_o60yu_30",gl="_dropdown_o60yu_37",hl="_userInfo_o60yu_50",vl="_userName_o60yu_57",pl="_userEmail_o60yu_63",_l="_userRole_o60yu_68",fl="_divider_o60yu_78",ml="_menuItem_o60yu_83";var bl=k("<span>"),wl=k("<div role=menu><div><span></span><span></span></div><div></div><button role=menuitem></button><button role=menuitem>"),kl=k("<div><button aria-haspopup=menu>"),yl=k("<img referrerpolicy=no-referrer>");function Sl(t){const{t:n}=be(),{user:r,logout:o}=Ji(),[a,s]=e(!1);let l;const d=()=>{const e=r();if(!e)return"";const t=e.name||e.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},c=()=>r()?.name||"",u=()=>r()?.email||"",_=()=>r()?.workspace_role;ct(()=>l,()=>s(!1));const f=()=>{s(!1),o()},m=()=>{s(!1),t.onProfile()};return w=kl(),k=w.firstChild,"function"==typeof l?re(l,w):l=w,k.$$click=()=>s(!a()),g(k,i(h,{get when(){return(()=>{const e=r();if(!e)return null;const t=e.oauth_identities;if(!t)return null;for(const n of t)if(n.avatar_url)return n.avatar_url;return null})()},get fallback(){return e=bl(),g(e,d),v(()=>p(e,ul)),e;var e},children:e=>{return t=yl(),v(n=>{var i=e(),r=c()||"User",o=cl;return i!==n.e&&b(t,"src",n.e=i),r!==n.t&&b(t,"alt",n.t=r),o!==n.a&&p(t,n.a=o),n},{e:void 0,t:void 0,a:void 0}),t;var t}})),g(w,i(h,{get when(){return a()},get children(){var e=wl(),t=e.firstChild,r=t.firstChild,o=r.nextSibling,a=t.nextSibling,s=a.nextSibling,l=s.nextSibling;return g(r,c),g(o,u),g(t,i(h,{get when(){return _()},get children(){var e=bl();return g(e,_),v(()=>p(e,_l)),e}}),null),s.$$click=m,g(s,()=>n("userMenu.profile")),l.$$click=f,g(l,()=>n("userMenu.logout")),v(n=>{var i=gl,d=hl,c=vl,u=pl,g=fl,h=ml,v=ml;return i!==n.e&&p(e,n.e=i),d!==n.t&&p(t,n.t=d),c!==n.a&&p(r,n.a=c),u!==n.o&&p(o,n.o=u),g!==n.i&&p(a,n.i=g),h!==n.n&&p(s,n.n=h),v!==n.s&&p(l,n.s=v),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),v(e=>{var t=ll,i=dl,r=c()||u(),o=n("userMenu.profile")||"User menu",s=a();return t!==e.e&&p(w,e.e=t),i!==e.t&&p(k,e.t=i),r!==e.a&&b(k,"title",e.a=r),o!==e.o&&b(k,"aria-label",e.o=o),s!==e.i&&b(k,"aria-expanded",e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),w;var w,k}d(["click"]);const $l="_wsMenu_1kkrz_1",Cl="_wsButton_1kkrz_5",xl="_wsName_1kkrz_23",Il="_chevron_1kkrz_31",Ll="_dropdown_1kkrz_36",zl="_wsList_1kkrz_49",Tl="_orgHeader_1kkrz_54",El="_wsItem_1kkrz_65",Rl="_active_1kkrz_84",Pl="_wsItemName_1kkrz_88",Ol="_checkmark_1kkrz_94",Ml="_divider_1kkrz_99",Nl="_menuItem_1kkrz_104",Bl="_icon_1kkrz_123",Dl="_plusIcon_1kkrz_127";var Al=k("<div role=menu><div></div><div></div><button role=menuitem><span aria-hidden=true>‚öô</span></button><button role=menuitem><span aria-hidden=true>+</span></button><button role=menuitem><span aria-hidden=true>&#x2B07;"),Wl=k("<div><button aria-haspopup=menu><span></span><span aria-hidden=true>"),jl=k("<div>"),ql=k("<span aria-hidden=true>‚úì"),Ul=k("<button role=menuitem><span>");function Fl(t){const{t:r}=be(),{user:o}=Ji(),{switchWorkspace:a}=rr(),[s,l]=e(!1);let d;const c=n(()=>{const e=o();if(!e)return[];const t=new Map,n=e.organizations||[],i=e.workspaces||[];for(const r of n)t.set(r.organization_id,{orgId:r.organization_id,orgName:r.organization_name||r.organization_id,workspaces:[]});for(const r of i){const e=t.get(r.organization_id);e&&e.workspaces.push(r)}return Array.from(t.values()).filter(e=>e.workspaces.length>0)}),u=()=>o()?.workspace_id||"",_=()=>{const e=o();if(!e)return r("app.workspace");const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);return t?.workspace_name||r("app.workspace")};ct(()=>d,()=>l(!1));const m=()=>{l(!1),t.onOpenSettings()},w=()=>{l(!1),t.onCreateWorkspace()},k=()=>{l(!1),t.onImportFromNotion()},y=n(()=>c().length>1);return S=Wl(),$=S.firstChild,C=$.firstChild,x=C.nextSibling,"function"==typeof d?re(d,S):d=S,$.$$click=()=>l(!s()),g(C,_),g(x,()=>s()?"‚ñ≤":"‚ñº"),g(S,i(h,{get when(){return s()},get children(){var e=Al(),n=e.firstChild,o=n.nextSibling,s=o.nextSibling,d=s.firstChild,_=s.nextSibling,b=_.firstChild,S=_.nextSibling,$=S.firstChild;return g(n,i(f,{get each(){return c()},children:e=>[i(h,{get when(){return y()},get children(){var t=jl();return g(t,()=>e.orgName),v(()=>p(t,Tl)),t}}),i(f,{get each(){return e.workspaces},children:e=>{return n=Ul(),r=n.firstChild,n.$$click=()=>{return n=e.workspace_id,l(!1),t.onSwitchWorkspace?.(),void(n!==u()&&a(n));var n},g(r,()=>e.workspace_name||e.workspace_id),g(n,i(h,{get when(){return e.workspace_id===u()},get children(){var e=ql();return v(()=>p(e,Ol)),e}}),null),v(t=>{var i=`${El} ${e.workspace_id===u()?Rl:""}`,o=Pl;return i!==t.e&&p(n,t.e=i),o!==t.t&&p(r,t.t=o),t},{e:void 0,t:void 0}),n;var n,r}})]})),s.$$click=m,g(s,()=>r("app.settings"),null),_.$$click=w,g(_,()=>r("createWorkspace.title"),null),S.$$click=k,g(S,()=>r("notionImport.title"),null),v(t=>{var i=Ll,r=zl,a=Ml,l=Nl,c=Bl,u=Nl,g=Dl,h=Nl,v=Bl;return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),a!==t.a&&p(o,t.a=a),l!==t.o&&p(s,t.o=l),c!==t.i&&p(d,t.i=c),u!==t.n&&p(_,t.n=u),g!==t.s&&p(b,t.s=g),h!==t.h&&p(S,t.h=h),v!==t.r&&p($,t.r=v),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e}}),null),v(e=>{var t=$l,n=Cl,i=_(),o=r("app.switchWorkspace")||"Switch workspace",a=s(),l=xl,d=Il;return t!==e.e&&p(S,e.e=t),n!==e.t&&p($,e.t=n),i!==e.a&&b($,"title",e.a=i),o!==e.o&&b($,"aria-label",e.o=o),a!==e.i&&b($,"aria-expanded",e.i=a),l!==e.n&&p(C,e.n=l),d!==e.s&&p(x,e.s=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),S;var S,$,C,x}d(["click"]);const Hl="_errorBoundary_1gyxj_3",Gl="_errorMessage_1gyxj_21",Vl="_errorDetails_1gyxj_27",Kl="_retryButton_1gyxj_51";var Yl=k("<div role=alert><h2>Something went wrong</h2><p></p><details><summary>Technical details</summary><pre></pre></details><button>Try again");function Jl(e){return t=Yl(),n=t.firstChild.nextSibling,i=n.nextSibling,r=i.firstChild.nextSibling,o=i.nextSibling,g(n,()=>e.error.message),g(r,()=>e.error.stack),y(o,"click",e.reset),v(e=>{var r=Hl,a=Gl,s=Vl,l=Kl;return r!==e.e&&p(t,e.e=r),a!==e.t&&p(n,e.t=a),s!==e.a&&p(i,e.a=s),l!==e.o&&p(o,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t;var t,n,i,r,o}const Xl=e=>i(ge,{fallback:(e,t)=>i(Jl,{error:e,reset:t}),get children(){return e.children}});d(["click"]);const Ql="_navItemWrapper_1177w_3",Zl="_navItem_1177w_3",ed="_active_1177w_27",td="_section_1177w_34",nd="_expandIcon_1177w_56",id="_expanded_1177w_74",rd="_expandSpacer_1177w_78",od="_label_1177w_84",ad="_children_1177w_91";var sd=k("<span>‚ñ∂"),ld=k("<div>"),dd=k("<div><a><span>"),cd=k("<span>");function ud(t){const n=()=>t.item.children&&t.item.children.length>0,r=()=>{if(!n())return!1;const e=n=>{for(const i of n){if(t.isActive(i.url))return!0;if(i.children&&e(i.children))return!0}return!1};return e(t.item.children||[])},[o,a]=e(0===t.depth||r());ie(()=>{t.currentRoute&&r()&&a(!0)});const s=e=>{e.preventDefault(),n()&&!t.item.url?a(!o()):t.item.url&&(n()&&a(!0),t.onNavigate(t.item.url))},l=e=>{e.preventDefault(),e.stopPropagation(),a(!o())};return d=dd(),c=d.firstChild,u=c.firstChild,c.$$click=s,g(c,i(h,{get when(){return n()},get fallback(){return e=cd(),v(()=>p(e,rd)),e;var e},get children(){var e=sd();return e.$$click=l,v(()=>p(e,(()=>{let e=nd;return o()&&(e+=" "+id),e})())),e}}),u),g(u,()=>t.item.label),g(d,i(h,{get when(){return m(()=>!!o())()&&n()},get children(){var e=ld();return g(e,i(f,{get each(){return t.item.children},children:e=>i(ud,{item:e,get depth(){return t.depth+1},get isActive(){return t.isActive},get onNavigate(){return t.onNavigate},get currentRoute(){return t.currentRoute}})})),v(()=>p(e,ad)),e}}),null),v(e=>{var i=Ql,r=t.item.url||"#",o=(()=>{let e=Zl;return t.isActive(t.item.url)&&(e+=" "+ed),0===t.depth&&n()&&(e+=" "+td),e})(),a=12*t.depth+16+"px",s=od;return i!==e.e&&p(d,e.e=i),r!==e.t&&b(c,"href",e.t=r),o!==e.a&&p(c,e.a=o),a!==e.o&&_(c,"padding-left",e.o=a),s!==e.i&&p(u,e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),d;var d,c,u}d(["click"]);const gd="_sidebar_dpyfy_3",hd="_nav_dpyfy_13",vd="_mobileOpen_dpyfy_31";var pd=k("<aside><nav>");function _d(e){const{t:t}=be(),{user:n}=Ji(),r=e=>{if(!e)return!1;const t=window.location.pathname,n=window.location.hash,[i,r]=e.split("#");return i===t&&(!r||n==="#"+r)};return o=pd(),a=o.firstChild,g(a,i(f,{get each(){return(()=>{const e=[],i=n();if(!i)return e;e.push({id:"user",label:t("settings.personal"),url:tr("user")});const r=i.workspaces||[];if(r.length>0){const n=r.map(e=>{const n=e.workspace_id,i=e.workspace_name||n,r=e.role===Ht,o=[{id:`ws-${n}-members`,label:t("settings.members"),url:tr("workspace",n,i)+"#members"},{id:`ws-${n}-settings`,label:t("settings.settings"),url:tr("workspace",n,i)+"#settings"}];return r&&o.push({id:`ws-${n}-sync`,label:t("settings.gitSync"),url:tr("workspace",n,i)+"#sync"}),{id:`ws-${n}`,label:i,url:tr("workspace",n,i),children:o}});e.push({id:"workspaces",label:t("settings.workspaces"),url:"",children:n})}const o=(i.organizations||[]).filter(e=>e.role===Ft||e.role===Ut);if(o.length>0){const n=o.map(e=>{const n=e.organization_id,i=e.organization_name||n;return{id:`org-${n}`,label:i,url:tr("org",n,i),children:[{id:`org-${n}-members`,label:t("settings.members"),url:tr("org",n,i)+"#members"},{id:`org-${n}-settings`,label:t("settings.settings"),url:tr("org",n,i)+"#settings"}]}});e.push({id:"organizations",label:t("settings.organizations"),url:"",children:n})}return e})()},children:t=>i(ud,{item:t,depth:0,isActive:r,get onNavigate(){return e.onNavigate},get currentRoute(){return e.currentRoute}})})),v(t=>{var n=`${gd} ${e.isOpen?vd:""}`,i=hd;return n!==t.e&&p(o,t.e=n),i!==t.t&&p(a,t.t=i),t},{e:void 0,t:void 0}),o;var o,a}const fd="_profile_vysi4_3",md="_userInfoSection_vysi4_7",bd="_avatarLarge_vysi4_17",wd="_avatarImageLarge_vysi4_29",kd="_initialsLarge_vysi4_35",yd="_userDetails_vysi4_41",Sd="_userName_vysi4_45",$d="_userEmail_vysi4_51",Cd="_userRole_vysi4_56",xd="_section_vysi4_66",Id="_error_vysi4_75",Ld="_success_vysi4_83",zd="_settingsForm_vysi4_91",Td="_formItem_vysi4_98",Ed="_checkboxLabel_vysi4_117",Rd="_saveButton_vysi4_130",Pd="_orgList_vysi4_149",Od="_orgItem_vysi4_155",Md="_orgInfo_vysi4_165",Nd="_orgName_vysi4_171",Bd="_orgNameLink_vysi4_175",Dd="_orgRole_vysi4_185",Ad="_emptyState_vysi4_194";var Wd=k("<div>"),jd=k("<span>"),qd=k("<section><div></div><div><h3></h3><p>"),Ud=k("<section><h3>"),Fd=k("<div><label><input type=checkbox>"),Hd=k("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),Gd=k("<img referrerpolicy=no-referrer>"),Vd=k("<p>"),Kd=k("<a>"),Yd=k("<div><div><span>");function Jd(){const{t:t}=be(),{user:n,api:r,wsApi:o}=Ji(),[a,s]=e("light"),[l,d]=e("en"),[c,u]=e(!0),[_,m]=e(!1),[w,k]=e(null),[y,S]=e(null),$=()=>{const e=n(),t=e?.name||e?.email||"",i=t.split(/[\s@]+/);return i.length>=2&&i[0]&&i[1]?((i[0][0]||"")+(i[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};ie(()=>{const e=n();s(e?.settings?.theme||"light"),d(e?.settings?.language||"en")});ie(()=>{(async()=>{const e=n();if(e)try{m(!0),k(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&u(t.settings?.notifications??!0)}catch(i){k(`${t("errors.failedToLoad")}: ${i}`)}finally{m(!1)}})()});const C=async e=>{e.preventDefault();const n=o();try{m(!0),k(null),S(null);const e={theme:a(),language:l()},i=[r().auth.updateUserSettings({settings:e})];if(n){const e={notifications:c()};i.push(n.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(i),S(t("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(i){k(`${t("errors.failedToSave")}: ${i}`)}finally{m(!1)}};return x=Wd(),g(x,i(h,{get when(){return w()},get children(){var e=Wd();return g(e,w),v(()=>p(e,Id)),e}}),null),g(x,i(h,{get when(){return y()},get children(){var e=Wd();return g(e,y),v(()=>p(e,Ld)),e}}),null),g(x,i(h,{get when(){return n()},children:e=>{return[(D=qd(),A=D.firstChild,W=A.nextSibling,j=W.firstChild,q=j.nextSibling,g(A,i(h,{get when(){return(()=>{const e=n()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=jd(),g(e,$),v(()=>p(e,kd)),e;var e},children:t=>{return n=Gd(),v(i=>{var r=t(),o=e().name||"User",a=wd;return r!==i.e&&b(n,"src",i.e=r),o!==i.t&&b(n,"alt",i.t=o),a!==i.a&&p(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),g(j,()=>e().name),g(q,()=>e().email),g(W,i(h,{get when(){return e().workspace_role},get children(){var t=jd();return g(t,()=>e().workspace_role),v(()=>p(t,Cd)),t}}),null),v(e=>{var t=md,n=bd,i=yd,r=Sd,o=$d;return t!==e.e&&p(D,e.e=t),n!==e.t&&p(A,e.t=n),i!==e.a&&p(W,e.a=i),r!==e.o&&p(j,e.o=r),o!==e.i&&p(q,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),D),(N=Ud(),B=N.firstChild,g(B,()=>t("profile.myOrganizations")),g(N,i(h,{get when(){return e().organizations?.length},get fallback(){return e=Vd(),g(e,()=>t("profile.noOrganizations")),v(()=>p(e,Ad)),e;var e},get children(){var t=Wd();return g(t,i(f,{get each(){return e().organizations},children:e=>{const t=e.organization_name||e.organization_id;return n=Yd(),r=n.firstChild,o=r.firstChild,g(r,i(h,{get when(){return e.role===Ft||e.role===Ut},get fallback(){return e=jd(),g(e,t),v(()=>p(e,Nd)),e;var e},get children(){var n=Kd();return n.$$click=t=>{t.preventDefault(),(e=>{window.history.pushState(null,"",tr("org",e.organization_id,e.organization_name)),window.dispatchEvent(new PopStateEvent("popstate"))})(e)},g(n,t),v(t=>{var i=tr("org",e.organization_id,e.organization_name),r=Bd;return i!==t.e&&b(n,"href",t.e=i),r!==t.t&&p(n,t.t=r),t},{e:void 0,t:void 0}),n}}),o),g(o,()=>e.role),v(e=>{var t=Od,i=Md,a=Dd;return t!==e.e&&p(n,e.e=t),i!==e.t&&p(r,e.t=i),a!==e.a&&p(o,e.a=a),e},{e:void 0,t:void 0,a:void 0}),n;var n,r,o}})),v(()=>p(t,Pd)),t}}),null),v(()=>p(N,xd)),N),(r=Hd(),o=r.firstChild,m=o.nextSibling,w=m.firstChild,k=w.firstChild,y=k.nextSibling,S=y.firstChild,x=S.nextSibling,I=x.nextSibling,L=w.nextSibling,z=L.firstChild,T=z.nextSibling,E=T.firstChild,R=E.nextSibling,P=R.nextSibling,O=P.nextSibling,M=L.nextSibling,g(o,()=>t("settings.personalSettings")),m.addEventListener("submit",C),g(k,()=>t("settings.theme")),y.addEventListener("change",e=>s(e.target.value)),g(S,()=>t("settings.themeLight")),g(x,()=>t("settings.themeDark")),g(I,()=>t("settings.themeSystem")),g(z,()=>t("settings.language")),T.addEventListener("change",e=>d(e.target.value)),g(E,()=>t("settings.languageEn")),g(R,()=>t("settings.languageFr")),g(P,()=>t("settings.languageDe")),g(O,()=>t("settings.languageEs")),g(m,i(h,{get when(){return e().workspace_id},get children(){var e=Fd(),n=e.firstChild,i=n.firstChild;return i.addEventListener("change",e=>u(e.currentTarget.checked)),g(n,()=>t("settings.enableNotifications"),null),v(t=>{var i=Td,r=Ed;return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),t},{e:void 0,t:void 0}),v(()=>i.checked=c()),e}}),M),g(M,()=>t("settings.saveChanges")),v(e=>{var t=xd,n=zd,i=Td,o=Td,a=Rd,s=_();return t!==e.e&&p(r,e.e=t),n!==e.t&&p(m,e.t=n),i!==e.a&&p(w,e.a=i),o!==e.o&&p(L,e.o=o),a!==e.i&&p(M,e.i=a),s!==e.n&&(M.disabled=e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>y.value=a()),v(()=>T.value=l()),r)];var r,o,m,w,k,y,S,x,I,L,z,T,E,R,P,O,M,N,B,D,A,W,j,q}}),null),v(()=>p(x,fd)),x;var x}d(["click"]);const Xd="_table_rjyw4_3",Qd="_roleSelect_rjyw4_21";var Zd=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),ec=k("<select>"),tc=k("<tr><td></td><td></td><td>"),nc=k("<option>");function ic(e){const{t:t}=be(),n=t=>("workspace_role"===e.roleField?t.workspace_role:t.org_role)||"";return r=Zd(),o=r.firstChild,a=o.firstChild.firstChild,s=a.nextSibling,l=s.nextSibling,d=o.nextSibling,g(a,()=>t("settings.nameColumn")),g(s,()=>t("settings.emailColumn")),g(l,()=>t("settings.roleColumn")),g(d,i(f,{get each(){return e.members},children:t=>{return r=tc(),o=r.firstChild,a=o.nextSibling,s=a.nextSibling,g(o,()=>t.name),g(a,()=>t.email),g(s,i(h,{get when(){return t.id!==e.currentUserId},get fallback(){return n(t)},get children(){var r=ec();return r.addEventListener("change",n=>e.onUpdateRole(t.id,n.target.value)),g(r,i(f,{get each(){return e.roleOptions},children:e=>{return t=nc(),g(t,()=>e.label),v(()=>t.value=e.value),t;var t}})),v(t=>{var n=Qd,i=e.loading;return n!==t.e&&p(r,t.e=n),i!==t.t&&(r.disabled=t.t=i),t},{e:void 0,t:void 0}),v(()=>r.value=n(t)),r}})),r;var r,o,a,s}})),v(()=>p(r,Xd)),r;var r,o,a,s,l,d}const rc="_inviteSection_toc48_3",oc="_inviteForm_toc48_7",ac="_formGroup_toc48_17",sc="_pendingSection_toc48_57",lc="_table_toc48_65";var dc=k("<div><h4></h4><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),cc=k("<div><form><h4></h4><div><input type=email required><select></select><button type=submit>"),uc=k("<option>"),gc=k("<tr><td></td><td></td><td>");function hc(t){const{t:n}=be(),[r,o]=e(""),[a,s]=e(t.defaultRole),l=async e=>{e.preventDefault(),r()&&(await t.onInvite(r(),a()),o(""))};return d=cc(),c=d.firstChild,u=c.firstChild,_=u.nextSibling,m=_.firstChild,w=m.nextSibling,k=w.nextSibling,c.addEventListener("submit",l),g(u,()=>n("settings.inviteNewMember")),m.$$input=e=>o(e.target.value),w.addEventListener("change",e=>s(e.target.value)),g(w,i(f,{get each(){return t.roleOptions},children:e=>{return t=uc(),g(t,()=>e.label),v(()=>t.value=e.value),t;var t}})),g(k,()=>n("common.invite")),g(d,i(h,{get when(){return t.pendingInvitations.length>0},get children(){var e=dc(),r=e.firstChild,o=r.nextSibling,a=o.firstChild,s=a.firstChild.firstChild,l=s.nextSibling,d=l.nextSibling,c=a.nextSibling;return g(r,()=>n("settings.pendingInvitations")),g(s,()=>n("settings.emailColumn")),g(l,()=>n("settings.roleColumn")),g(d,()=>n("settings.sentColumn")),g(c,i(f,{get each(){return t.pendingInvitations},children:e=>{return t=gc(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,g(n,()=>e.email),g(i,()=>e.role),g(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(t=>{var n=sc,i=lc;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(o,t.t=i),t},{e:void 0,t:void 0}),e}}),null),v(e=>{var i=rc,r=oc,o=ac,a=n("settings.emailPlaceholder")||"Email address",s=t.loading,l=t.loading,u=t.loading;return i!==e.e&&p(d,e.e=i),r!==e.t&&p(c,e.t=r),o!==e.a&&p(_,e.a=o),a!==e.o&&b(m,"placeholder",e.o=a),s!==e.i&&(m.disabled=e.i=s),l!==e.n&&(w.disabled=e.n=l),u!==e.s&&(k.disabled=e.s=u),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>m.value=r()),v(()=>w.value=a()),d;var d,c,u,_,m,w,k}d(["input"]);const vc="_panel_1dwg0_3",pc="_tabs_1dwg0_7",_c="_activeTab_1dwg0_29",fc="_section_1dwg0_34",mc="_error_1dwg0_43",bc="_success_1dwg0_51",wc="_settingsForm_1dwg0_59",kc="_formItem_1dwg0_66",yc="_saveButton_1dwg0_86",Sc="_hint_1dwg0_105",$c="_table_1dwg0_111",Cc="_actions_1dwg0_129",xc="_smallButton_1dwg0_134",Ic="_deleteButtonSmall_1dwg0_148",Lc="_addRemoteSection_1dwg0_162",zc="_orgLink_1dwg0_174",Tc="_linkButton_1dwg0_188";var Ec=k("<button>"),Rc=k("<div>"),Pc=k("<section><h3>"),Oc=k("<form><div><label></label><input type=text required></div><button type=submit>"),Mc=k("<section><h3></h3><div><p></p><button> ‚Üí"),Nc=k("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),Bc=k("<section><h3></h3><p>"),Dc=k("<div><div><button></button><button>"),Ac=k("<p>"),Wc=k("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function jc(t){const{t:n}=be(),{user:r,orgApi:o,wsApi:a}=Ji(),[s,l]=e("settings"===t.section?"settings":"sync"===t.section?"sync":"members"),[d,c]=e([]),[u,_]=e([]),[f,m]=e(null),[w,k]=e(""),[y,S]=e(""),[$,C]=e(""),[x,I]=e(""),[L,z]=e(!1),[T,E]=e(null),[R,P]=e(null),O=()=>r()?.workspace_role===Ht,M=e=>{l(e);const t="members"===e?"":`#${e}`,n=window.location.pathname;window.history.replaceState(null,"",n+t)},N=async()=>{const e=o();if(e)try{z(!0),E(null);const t=a();if("members"===s()&&O()){const[n,i]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);c(n.users?.filter(e=>!!e)||[]),_(i.invitations?.filter(e=>!!e)||[])}if("settings"===s()&&t){const e=await t.workspaces.getWorkspace();C(e.name),I(e.name)}if("sync"===s()&&O()&&t)try{const e=await t.settings.git.getGitRemote();m(e)}catch{m(null)}}catch(t){E(`${n("errors.failedToLoad")}: ${t}`)}finally{z(!1)}};ie(()=>{N()}),ie(()=>{const e=t.section;"settings"===e?l("settings"):"sync"===e?l("sync"):"members"!==e&&e||l("members")});const B=async(e,t)=>{const i=a();if(i)try{z(!0),await i.invitations.createWSInvitation({email:e,role:t}),P(n("success.invitationSent")||"Invitation sent successfully"),N()}catch(r){E(`${n("errors.failedToInvite")}: ${r}`)}finally{z(!1)}},D=async(e,t)=>{const i=a();if(i)try{z(!0),await i.users.updateWSMemberRole({user_id:e,role:t}),P(n("success.roleUpdated")||"Role updated"),N()}catch(r){E(`${n("errors.failedToUpdateRole")}: ${r}`)}finally{z(!1)}},A=async e=>{e.preventDefault();const t=a();if(t)try{z(!0),E(null),P(null),$()!==x()&&$().trim()&&await t.workspaces.updateWorkspace({name:$().trim()}),I($().trim()),P(n("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(i){E(`${n("errors.failedToSave")}: ${i}`)}finally{z(!1)}},W=async e=>{e.preventDefault();const t=a();if(t)try{z(!0),E(null);const e=await t.settings.git.updateGitRemote({url:w(),token:y(),type:"custom",auth_type:y()?"token":"none"});m(e),P(n("success.remoteAdded")||"Git remote configured"),k(""),S("")}catch(i){E(`${n("errors.failedToAddRemote")}: ${i}`)}finally{z(!1)}},j=async()=>{const e=a();if(e)try{z(!0),E(null),P(null),await e.settings.git.pushGit(),P(n("success.pushSuccessful")||"Push successful"),N()}catch(t){E(`${n("errors.pushFailed")}: ${t}`)}finally{z(!1)}},q=async()=>{if(!confirm(n("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=a();if(e)try{z(!0),E(null),await e.settings.git.deleteGitRemote(),m(null),P(n("success.remoteRemoved")||"Remote removed")}catch(t){E(`${n("errors.failedToRemoveRemote")}: ${t}`)}finally{z(!1)}},U=[{value:"admin",label:n("settings.roleAdmin")},{value:"editor",label:n("settings.roleEditor")},{value:"viewer",label:n("settings.roleViewer")}];return F=Dc(),H=F.firstChild,G=H.firstChild,V=G.nextSibling,G.$$click=()=>M("members"),g(G,()=>n("settings.members")),V.$$click=()=>M("settings"),g(V,()=>n("settings.workspace")),g(H,i(h,{get when(){return O()},get children(){var e=Ec();return e.$$click=()=>M("sync"),g(e,()=>n("settings.gitSync")),v(()=>p(e,"sync"===s()?_c:"")),e}}),null),g(F,i(h,{get when(){return T()},get children(){var e=Rc();return g(e,T),v(()=>p(e,mc)),e}}),null),g(F,i(h,{get when(){return R()},get children(){var e=Rc();return g(e,R),v(()=>p(e,bc)),e}}),null),g(F,i(h,{get when(){return"members"===s()},get children(){var e=Pc(),t=e.firstChild;return g(t,()=>n("settings.members")),g(e,i(h,{get when(){return O()},get fallback(){return e=Ac(),g(e,()=>n("settings.adminOnlyMembers")),e;var e},get children(){return[i(ic,{get members(){return d()},get currentUserId(){return r()?.id||""},roleOptions:U,roleField:"workspace_role",onUpdateRole:D,get loading(){return L()}}),i(hc,{roleOptions:U,defaultRole:"viewer",get pendingInvitations(){return u().map(e=>({email:e.email,role:e.role,created:e.created}))},onInvite:B,get loading(){return L()}})]}}),null),v(()=>p(e,fc)),e}}),null),g(F,i(h,{get when(){return"settings"===s()},get children(){var e=Mc(),o=e.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,d=l.firstChild;return g(o,()=>n("settings.workspaceSettings")),g(e,i(h,{get when(){return O()},get fallback(){return e=Ac(),g(e,()=>n("settings.adminOnlyWorkspace")),e;var e},get children(){var e=Oc(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",A),g(i,()=>n("settings.workspaceName")),r.$$input=e=>C(e.target.value),g(o,()=>n("settings.saveWorkspaceSettings")),v(n=>{var i=wc,r=kc,a=yc,s=L();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=$()),e}}),a),g(s,()=>n("settings.orgSettingsHint")),l.$$click=()=>{const e=r(),n=e?.organization_id,i=e?.organizations?.find(e=>e.organization_id===n),o=i?.organization_name||"";n&&t.onNavigateToOrgSettings(n,o)},g(l,()=>n("settings.openOrgSettings"),d),v(t=>{var n=fc,i=zc,r=Tc;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(a,t.t=i),r!==t.a&&p(l,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),g(F,i(h,{get when(){return"sync"===s()},get children(){var e=Bc(),t=e.firstChild,r=t.nextSibling;return g(t,()=>n("settings.gitSynchronization")),g(r,()=>n("settings.gitSyncHint")),g(e,i(h,{get when(){return f()},children:e=>{const t=e().last_sync;return i=Wc(),r=i.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,u=c.firstChild,h=u.nextSibling,g(o,()=>n("settings.urlColumn")),g(a,()=>n("settings.lastSyncColumn")),g(s,()=>n("common.actions")),g(l,()=>e().url),g(d,()=>t?new Date(t).toLocaleString():n("settings.never")),u.$$click=j,g(u,()=>n("common.push")),h.$$click=q,g(h,()=>n("common.remove")),v(e=>{var t=$c,n=Cc,r=L(),o=xc,a=L(),s=Ic;return t!==e.e&&p(i,e.e=t),n!==e.t&&p(c,e.t=n),r!==e.a&&(u.disabled=e.a=r),o!==e.o&&p(u,e.o=o),a!==e.i&&(h.disabled=e.i=a),s!==e.n&&p(h,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,a,s,l,d,c,u,h}}),null),g(e,i(h,{get when(){return!f()},get children(){var e=Nc(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,u=s.nextSibling;return g(t,()=>n("settings.addNewRemote")),i.addEventListener("submit",W),g(o,()=>n("settings.repositoryUrl")),a.$$input=e=>k(e.target.value),g(l,()=>n("settings.personalAccessToken")),d.$$input=e=>S(e.target.value),g(c,()=>n("settings.tokenHint")),g(u,()=>n("settings.addRemote")),v(t=>{var o=Lc,l=wc,g=kc,h=n("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",v=kc,_=n("settings.tokenPlaceholder")||"ghp_...",f=Sc,m=yc,w=L();return o!==t.e&&p(e,t.e=o),l!==t.t&&p(i,t.t=l),g!==t.a&&p(r,t.a=g),h!==t.o&&b(a,"placeholder",t.o=h),v!==t.i&&p(s,t.i=v),_!==t.n&&b(d,"placeholder",t.n=_),f!==t.s&&p(c,t.s=f),m!==t.h&&p(u,t.h=m),w!==t.r&&(u.disabled=t.r=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>a.value=w()),v(()=>d.value=y()),e}}),null),v(t=>{var n=fc,i=Sc;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),v(e=>{var t=vc,n=pc,i="members"===s()?_c:"",r="settings"===s()?_c:"";return t!==e.e&&p(F,e.e=t),n!==e.t&&p(H,e.t=n),i!==e.a&&p(G,e.a=i),r!==e.o&&p(V,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),F;var F,H,G,V}d(["click","input"]);const qc="_panel_1e73u_3",Uc="_tabs_1e73u_7",Fc="_activeTab_1e73u_29",Hc="_section_1e73u_34",Gc="_error_1e73u_43",Vc="_success_1e73u_51",Kc="_settingsForm_1e73u_59",Yc="_formItem_1e73u_66",Jc="_saveButton_1e73u_84";var Xc=k("<div>"),Qc=k("<section><h3>"),Zc=k("<form><div><label></label><input type=text required></div><button type=submit>"),eu=k("<div><div><button></button><button>"),tu=k("<p>");function nu(t){const{t:r}=be(),{user:o,api:a}=Ji(),[s,l]=e("settings"===t.section?"settings":"members"),[d,c]=e([]),[u,_]=e([]),[f,m]=e(""),[b,w]=e(""),[k,y]=e(!1),[S,$]=e(null),[C,x]=e(null),I=n(()=>a().org(t.orgId)),L=n(()=>{const e=o()?.organizations?.find(e=>e.organization_id===t.orgId);return e?.role}),z=n(()=>{const e=L();return e===Ut||e===Ft}),T=e=>{l(e);const t="members"===e?"":`#${e}`,n=window.location.pathname;window.history.replaceState(null,"",n+t)},E=async()=>{const e=I();try{if(y(!0),$(null),"members"===s()&&z()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);c(t.users?.filter(e=>!!e)||[]),_(n.invitations?.filter(e=>!!e)||[])}if("settings"===s()){const t=await e.organizations.getOrganization();m(t.name),w(t.name)}}catch(t){$(`${r("errors.failedToLoad")}: ${t}`)}finally{y(!1)}};ie(()=>{E()}),ie(()=>{const e=t.section;"settings"===e?l("settings"):"members"!==e&&e||l("members")});const R=async(e,t)=>{const n=I();try{y(!0),await n.invitations.createOrgInvitation({email:e,role:t}),x(r("success.invitationSent")||"Invitation sent successfully"),E()}catch(i){$(`${r("errors.failedToInvite")}: ${i}`)}finally{y(!1)}},P=async(e,t)=>{const n=I();try{y(!0),await n.users.updateOrgMemberRole({user_id:e,role:t}),x(r("success.roleUpdated")||"Role updated"),E()}catch(i){$(`${r("errors.failedToUpdateRole")}: ${i}`)}finally{y(!1)}},O=async e=>{e.preventDefault();const t=I();try{y(!0),$(null),x(null),f()!==b()&&f().trim()&&await t.organizations.updateOrganization({name:f().trim()}),w(f().trim()),x(r("success.orgSettingsSaved")||"Organization settings saved")}catch(n){$(`${r("errors.failedToSave")}: ${n}`)}finally{y(!1)}},M=[{value:"owner",label:r("settings.roleOwner")},{value:"admin",label:r("settings.roleAdmin")},{value:"member",label:r("settings.roleMember")}],N=[{value:"admin",label:r("settings.roleAdmin")},{value:"member",label:r("settings.roleMember")}];return B=eu(),D=B.firstChild,A=D.firstChild,W=A.nextSibling,A.$$click=()=>T("members"),g(A,()=>r("settings.members")),W.$$click=()=>T("settings"),g(W,()=>r("settings.settings")),g(B,i(h,{get when(){return S()},get children(){var e=Xc();return g(e,S),v(()=>p(e,Gc)),e}}),null),g(B,i(h,{get when(){return C()},get children(){var e=Xc();return g(e,C),v(()=>p(e,Vc)),e}}),null),g(B,i(h,{get when(){return"members"===s()},get children(){var e=Qc(),t=e.firstChild;return g(t,()=>r("settings.organizationMembers")),g(e,i(h,{get when(){return z()},get fallback(){return e=tu(),g(e,()=>r("settings.adminOnlyMembers")),e;var e},get children(){return[i(ic,{get members(){return d()},get currentUserId(){return o()?.id||""},roleOptions:M,roleField:"org_role",onUpdateRole:P,get loading(){return k()}}),i(hc,{roleOptions:N,defaultRole:"member",get pendingInvitations(){return u().map(e=>({email:e.email,role:e.role,created:e.created}))},onInvite:R,get loading(){return k()}})]}}),null),v(()=>p(e,Hc)),e}}),null),g(B,i(h,{get when(){return"settings"===s()},get children(){var e=Qc(),t=e.firstChild;return g(t,()=>r("settings.organizationPreferences")),g(e,i(h,{get when(){return z()},get fallback(){return e=tu(),g(e,()=>r("settings.adminOnlySettings")),e;var e},get children(){var e=Zc(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",O),g(n,()=>r("settings.organizationName")),i.$$input=e=>m(e.target.value),g(o,()=>r("common.save")),v(n=>{var i=Kc,r=Yc,a=Jc,s=k();return i!==n.e&&p(e,n.e=i),r!==n.t&&p(t,n.t=r),a!==n.a&&p(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>i.value=f()),e}}),null),v(()=>p(e,Hc)),e}}),null),v(e=>{var t=qc,n=Uc,i="members"===s()?Fc:"",r="settings"===s()?Fc:"";return t!==e.e&&p(B,e.e=t),n!==e.t&&p(D,e.t=n),i!==e.a&&p(A,e.a=i),r!==e.o&&p(W,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),B;var B,D,A,W}d(["click","input"]);const iu="_settingsPage_1eedq_3",ru="_header_1eedq_10",ou="_headerLeft_1eedq_21",au="_hamburger_1eedq_27",su="_backButton_1eedq_37",lu="_title_1eedq_53",du="_layout_1eedq_64",cu="_content_1eedq_70",uu="_error_1eedq_81",gu="_mobileBackdrop_1eedq_88";var hu=k("<div>"),vu=k('<div><header><div><button aria-label="Toggle settings menu">‚ò∞</button><button>‚Üê </button><h1></h1></div></header><div><main>');function pu(t){const{t:n}=be(),{user:r}=Ji(),[o,a]=e(!1),s=e=>{"Escape"===e.key&&o()&&a(!1)};u(()=>{window.addEventListener("keydown",s),Q(()=>window.removeEventListener("keydown",s))}),ie(()=>{"redirect"===t.route.type&&t.route.id&&(window.history.replaceState(null,"",t.route.id),window.dispatchEvent(new PopStateEvent("popstate")))});const l=e=>{a(!1),window.history.pushState(null,"",e),window.dispatchEvent(new PopStateEvent("popstate"))},d=()=>{window.history.back()},c=()=>{const e=r()?.workspace_id,n=r()?.workspace_name;e&&(t.onClose(),window.history.pushState(null,"",Qi(e,n)),window.dispatchEvent(new PopStateEvent("popstate")))};return(()=>{var e=vu(),s=e.firstChild,u=s.firstChild,_=u.firstChild,f=_.nextSibling;f.firstChild;var b=f.nextSibling,w=s.nextSibling,k=w.firstChild;return _.$$click=()=>a(!o()),f.$$click=d,g(f,()=>n("common.back"),null),b.$$click=c,g(b,()=>n("settings.title")),g(w,i(h,{get when(){return o()},get children(){var e=hu();return e.$$click=()=>a(!1),v(()=>p(e,gu)),e}}),k),g(w,i(_d,{get isOpen(){return o()},get currentRoute(){return t.route},onNavigate:l}),k),g(k,i(h,{get when(){return"profile"===t.route.type},get children(){return i(Jd,{})}}),null),g(k,i(h,{get when(){return m(()=>!("workspace"!==t.route.type||!t.route.id))()?t.route.id:null},children:e=>i(h,{get when(){return(e=>{const t=r()?.workspaces?.find(t=>t.workspace_id===e);return t?{id:e,name:t.workspace_name||e}:null})(e())},get fallback(){return e=hu(),g(e,()=>n("errors.failedToLoad")),v(()=>p(e,uu)),e;var e},get children(){return i(jc,{get wsId(){return e()},get section(){return t.route.section},onNavigateToOrgSettings:(e,t)=>{l(tr("org",e,t))}})}})}),null),g(k,i(h,{get when(){return m(()=>!("org"!==t.route.type||!t.route.id))()?t.route.id:null},children:e=>i(h,{get when(){return(e=>{const t=r()?.organizations?.find(t=>t.organization_id===e);return t?{id:e,name:t.organization_name||e}:null})(e())},get fallback(){return e=hu(),g(e,()=>n("errors.failedToLoad")),v(()=>p(e,uu)),e;var e},get children(){return i(nu,{get orgId(){return e()},get section(){return t.route.section}})}})}),null),v(t=>{var n=iu,i=ru,r=ou,o=au,a=su,l=lu,d=du,c=cu;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(s,t.t=i),r!==t.a&&p(u,t.a=r),o!==t.o&&p(_,t.o=o),a!==t.i&&p(f,t.i=a),l!==t.n&&p(b,t.n=l),d!==t.s&&p(w,t.s=d),c!==t.h&&p(k,t.h=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),e})()}d(["click"]);const _u="_app_szlfa_13",fu="_header_szlfa_19",mu="_headerLeft_szlfa_29",bu="_userInfo_szlfa_37",wu="_container_szlfa_44",ku="_main_szlfa_50",yu="_error_szlfa_58",Su="_editor_szlfa_66",$u="_editorHeader_szlfa_74",Cu="_editorStatus_szlfa_83",xu="_unsavedIndicator_szlfa_91",Iu="_savingIndicator_szlfa_96",Lu="_savedIndicator_szlfa_101",zu="_titleInput_szlfa_111",Tu="_nodeContent_szlfa_121",Eu="_tableView_szlfa_128",Ru="_tableHeader_szlfa_136",Pu="_viewToggle_szlfa_143",Ou="_active_szlfa_159",Mu="_breadcrumbs_szlfa_164",Nu="_breadcrumbItem_szlfa_175",Bu="_breadcrumbSeparator_szlfa_186",Du="_historyPanel_szlfa_191",Au="_historyList_szlfa_205",Wu="_historyItem_szlfa_212",ju="_historyMeta_szlfa_225",qu="_historyDate_szlfa_233",Uu="_historyHash_szlfa_237",Fu="_historyMessage_szlfa_244",Hu="_hamburger_szlfa_252",Gu="_mobileBackdrop_szlfa_263";var Vu=k("<nav>"),Ku=k("<div>"),Yu=k("<div role=alert aria-live=polite>"),Ju=k("<span>‚óè "),Xu=k("<span>‚ü≥ "),Qu=k("<span>‚úì "),Zu=k("<li>"),eg=k("<div><h3></h3><ul>"),tg=k("<div><div><h3></h3><div><button></button><button></button><button></button><button>"),ng=k("<div><div><input type=text><div></div></div><div>"),ig=k("<div><main>"),rg=k('<div><header><div><button aria-label="Toggle menu">‚ò∞</button></div><div>'),og=k("<span>/"),ag=k("<span>"),sg=k("<li><div><span></span><span></span></div><div>");function lg(){const{t:t,locale:n,setLocale:o}=be(),{user:a,login:s,wsApi:l,orgApi:d}=Ji(),{nodes:c,selectedNodeId:_,setSelectedNodeId:k,selectedNodeData:y,setSelectedNodeData:S,breadcrumbPath:$,loading:C,setLoading:x,error:I,setError:L,switchWorkspace:z,createOrganization:T,createWorkspace:E,loadNodes:R,loadNode:P,fetchNodeChildren:O}=rr(),{title:M,content:N,hasUnsavedChanges:B,autoSaveStatus:D,assetUrls:A,showHistory:W,history:j,loadHistory:q,loadVersion:U,flushAutoSave:F,handleTitleChange:H,handleContentChange:G}=function(){const e=r(or);if(!e)throw new Error("useEditor must be used within an EditorProvider");return e}(),{records:V,hasMore:K,loadMoreRecords:Y,addRecord:J,updateRecord:X,deleteRecord:Z}=function(){const e=r(sr);if(!e)throw new Error("useRecords must be used within a RecordsProvider");return e}(),[ee,te]=e(!1),[ne,re]=e(!1),[oe,ae]=e(null),[se,le]=e(!1),[ce,ue]=e(!1),[ge,he]=e(!1),[ve,pe]=e(null),[_e,fe]=e("table"),[me,we]=e(!1),[ke,ye]=e(!1),[Se,$e]=e(!1),[Ce,xe]=e(!1),[Ie,Le]=e(null),[ze,Te]=e(null),[Ee,Re]=e(null);ie(()=>{const e=a(),t=e?.settings?.language;t&&["en","fr","de","es"].includes(t)&&t!==n()&&(o(t),localStorage.setItem("mddb_locale",t))});const Pe=async()=>{const e=window.location.pathname,n=function(e){return"/privacy"===e?"privacy":"/terms"===e?"terms":"/profile"===e?"profile":e.startsWith("/settings")?"settings":null}(e);if("privacy"===n)return ue(!0),he(!1),void le(!1);if("terms"===n)return he(!0),ue(!1),void le(!1);if("profile"===n)return window.history.replaceState(null,"",tr("user")),pe({type:"profile"}),le(!1),te(!1),re(!1),ue(!1),void he(!1);if("settings"===n){const t=function(e){if("/settings"===e||"/settings/"===e)return{type:"redirect",id:"/settings/user"};if("/settings/user"===e||"/settings/user/"===e)return{type:"profile"};const t=e.match(/^\/settings\/workspace\/([^+/]+)/);if(t){const e="undefined"!=typeof window?window.location.hash.slice(1):"";return{type:"workspace",id:t[1],section:e||void 0}}const n=e.match(/^\/settings\/org\/([^+/]+)/);if(n){const e="undefined"!=typeof window?window.location.hash.slice(1):"";return{type:"org",id:n[1],section:e||void 0}}return null}(e);if(t)return pe(t),le(!1),te(!1),re(!1),ue(!1),void he(!1)}pe(null),le(!1),ue(!1),he(!1);const i=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(i){const e=i.id,n=a(),r=n?.workspaces?.find(t=>t.workspace_id===e);if(!r){L(t("errors.noAccessToWs")||"You do not have access to this workspace");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",Qi(e,i)),2e3))}const o=tr("workspace",e,r.workspace_name);return window.history.replaceState(null,"",o),void pe({type:"workspace",id:e})}te(!1);const r=function(e){const t=e.match(/^\/o\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(r){const e=r.id,n=a(),i=n?.organizations?.find(t=>t.organization_id===e);if(!i){L(t("errors.noAccessToOrg")||"You do not have access to this organization");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",Qi(e,i)),2e3))}const o=tr("org",e,i.organization_name);return window.history.replaceState(null,"",o),void pe({type:"org",id:e})}re(!1),ae(null);const o=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/([a-zA-Z0-9_-]+)(?:\+.*)?$/);return t&&t[1]&&t[2]?{wsId:t[1],nodeId:t[2]}:null}(e);if(o){const e=o.nodeId;return void(e!==_()&&(F(),P(e,!1)))}const s=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/);return t&&t[1]?{wsId:t[1]}:null}(e);s&&c.length>0&&c[0]?P(c[0].id,!1):(k(null),S(null))};let Oe;u(()=>{window.addEventListener("popstate",Pe),Q(()=>window.removeEventListener("popstate",Pe))});const Me=async e=>{const t=d();if(!t)return;const n=await t.notion.startImport({notion_token:e.notionToken});var i;await z(n.workspace_id),i=n.workspace_id,Te(i),Oe=window.setInterval(async()=>{const e=d();if(e)try{const t=await e.notion.getStatus(i);Le(t),["completed","failed","cancelled"].includes(t.status)&&(window.clearInterval(Oe),Oe=void 0,"completed"===t.status&&R(!0))}catch{window.clearInterval(Oe),Oe=void 0}},2e3),Le({status:"running",progress:0,total:0})},Ne=async()=>{const e=l(),t=ze();if(e&&t)try{await e.notion.cancelImport(),Le(e=>e?{...e,status:"cancelled"}:null)}catch{}},Be=()=>{Oe&&(window.clearInterval(Oe),Oe=void 0),Le(null),Te(null)};async function De(e="document",n){if(!M().trim())return void L(t("errors.titleRequired")||"Title is required");const i=l();if(i)try{x(!0);const t=n||Ee()||"0";let r;if("table"===e){r=(await i.nodes.table.createTable(t,{title:M(),properties:[]})).id}else{r=(await i.nodes.page.createPage(t,{title:M()})).id}await R(!0),P(String(r)),L(null),Re(null)}catch(r){L(`${t("errors.failedToCreate")}: ${r}`)}finally{x(!1)}}Q(()=>{Oe&&window.clearInterval(Oe)}),ie(()=>{a(),Pe()});const Ae=e=>{F(),P(e.id),we(!1)};async function We(e){const n=l();if(n&&confirm(t("table.confirmDeleteRecord")||"Delete this item?"))try{if(x(!0),await n.nodes.deleteNode(e),e===_()){k(null),S(null);const e=a()?.workspace_id,t=a()?.workspace_name;e&&window.history.pushState(null,"",Qi(e,t))}await R(!0)}catch(i){L(`${t("errors.failedToDelete")}: ${i}`)}finally{x(!1)}}return[i(h,{get when(){return!ce()},get fallback(){return i(Da,{})},get children(){return i(h,{get when(){return!ge()},get fallback(){return i(Ga,{})},get children(){return i(h,{get when(){return a()},get fallback(){return i(Ta,{onLogin:s})},get children(){var e=rg(),n=e.firstChild,r=n.firstChild,o=r.firstChild,s=r.nextSibling;return g(e,i(h,{get when(){return Ie()},keyed:!0,children:e=>i(sl,{status:e,onCancel:Ne,onDismiss:Be})}),n),o.$$click=()=>we(!me()),g(r,i(Fl,{onOpenSettings:()=>{const e=a()?.workspace_id,t=a()?.workspace_name;e&&(pe({type:"workspace",id:e}),te(!1),k(null),we(!1),window.history.pushState(null,"",tr("workspace",e,t)))},onSwitchWorkspace:()=>{pe(null),te(!1),re(!1),le(!1)},onCreateWorkspace:()=>$e(!0),onImportFromNotion:()=>xe(!0)}),null),g(r,i(h,{get when(){return _()},get children(){var e=Vu();return g(e,i(f,{get each(){return $()},children:(e,t)=>{return[i(h,{get when(){return t()>0},get children(){var e=og();return v(()=>p(e,Bu)),e}}),(n=ag(),n.$$click=()=>Ae(e),g(n,()=>e.title),v(()=>p(n,Nu)),n)];var n}})),v(()=>p(e,Mu)),e}}),null),g(s,i(Sl,{onProfile:()=>{pe({type:"profile"}),le(!1),te(!1),k(null),window.history.pushState(null,"",tr("user"))}})),g(e,i(h,{get when(){return se()},get children(){return i(ra,{onBack:()=>window.history.back(),onOrgSettings:e=>{de(()=>{re(!0),ae(e.organization_id),le(!1)}),window.history.pushState(null,"",er(e.organization_id,e.organization_name))}})}}),null),g(e,i(h,{get when(){return ee()},get children(){return i(Vr,{onBack:()=>window.history.back(),onOpenOrgSettings:()=>{const e=a(),t=e?.organization_id,n=e?.organizations?.find(e=>e.organization_id===t),i=n?.organization_name;t&&(re(!0),ae(t),te(!1),window.history.pushState(null,"",er(t,i)))}})}}),null),g(e,i(h,{get when(){return m(()=>!!ne())()&&oe()},get children(){return i(ko,{get orgId(){return oe()},onBack:()=>window.history.back()})}}),null),g(e,i(h,{get when(){return ve()},children:e=>i(pu,{get route(){return e()},onClose:()=>{pe(null);const e=a()?.workspace_id,t=a()?.workspace_name;e&&window.history.pushState(null,"",Qi(e,t))}})}),null),g(e,i(h,{get when(){return m(()=>!(se()||ee()||ne()))()&&!ve()},get children(){var e=ig(),n=e.firstChild;return g(e,i(h,{get when(){return me()},get children(){var e=Ku();return e.$$click=()=>we(!1),v(()=>p(e,Gu)),e}}),n),g(e,i(Ke,{get isOpen(){return me()},get loading(){return C()},nodes:c,get selectedNodeId(){return _()},onCreatePage:()=>{Re(null),De("document"),we(!1)},onCreateTable:()=>{Re(null),De("table"),we(!1)},onCreateChildPage:e=>{Re(e),De("document",e),we(!1)},onCreateChildTable:e=>{Re(e),De("table",e),we(!1)},onSelectNode:Ae,onCloseMobileSidebar:()=>we(!1),onFetchChildren:O,onDeleteNode:We,onShowHistory:e=>{e!==_()?P(e).then(()=>q(e)):q(e)}}),n),g(n,i(h,{get when(){return I()},fallback:null,get children(){var e=Yu();return g(e,I),v(()=>p(e,yu)),e}}),null),g(n,i(h,{get when(){return _()},get children(){var e=ng(),n=e.firstChild,r=n.firstChild,o=r.nextSibling,a=n.nextSibling;return r.$$input=e=>H(e.target.value),g(o,i(h,{get when(){return m(()=>!!B())()&&"idle"===D()},get children(){var e=Ju();return e.firstChild,g(e,()=>t("editor.unsaved"),null),v(()=>p(e,xu)),e}}),null),g(o,i(h,{get when(){return"saving"===D()},get children(){var e=Xu();return e.firstChild,g(e,()=>t("common.saving"),null),v(()=>p(e,Iu)),e}}),null),g(o,i(h,{get when(){return"saved"===D()},get children(){var e=Qu();return e.firstChild,g(e,()=>t("common.saved"),null),v(()=>p(e,Lu)),e}}),null),g(e,i(h,{get when(){return W()},get children(){var e=eg(),n=e.firstChild,r=n.nextSibling;return g(n,()=>t("editor.versionHistory")),g(r,i(f,{get each(){return j()},children:e=>{return t=sg(),n=t.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,t.$$click=()=>{const t=_();t&&U(t,e.hash)},g(i,()=>new Date(e.timestamp).toLocaleString()),g(r,()=>e.hash.substring(0,7)),g(o,()=>e.message),v(e=>{var a=Wu,s=ju,l=qu,d=Uu,c=Fu;return a!==e.e&&p(t,e.e=a),s!==e.t&&p(n,e.t=s),l!==e.a&&p(i,e.a=l),d!==e.o&&p(r,e.o=d),c!==e.i&&p(o,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t;var t,n,i,r,o}}),null),g(r,i(h,{get when(){return 0===j().length},get children(){var e=Zu();return g(e,()=>t("editor.noHistory")),v(()=>p(e,Wu)),e}}),null),v(t=>{var n=Du,i=Au;return n!==t.e&&p(e,t.e=n),i!==t.t&&p(r,t.t=i),t},{e:void 0,t:void 0}),e}}),a),g(a,i(h,{get when(){return y()?.has_page},get children(){return i(jt,{get content(){return N()},get nodeId(){return _()??void 0},get assetUrls(){return A()},onChange:G})}}),null),g(a,i(h,{get when(){return y()?.has_table},get children(){var e=tg(),n=e.firstChild,r=n.firstChild,o=r.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.nextSibling,d=l.nextSibling;return g(r,()=>t("table.records")),a.$$click=()=>fe("table"),g(a,()=>t("table.table")),s.$$click=()=>fe("grid"),g(s,()=>t("table.grid")),l.$$click=()=>fe("gallery"),g(l,()=>t("table.gallery")),d.$$click=()=>fe("board"),g(d,()=>t("table.board")),g(e,i(h,{get when(){return"table"===_e()},get children(){return i(Pn,{get tableId(){return _()||""},get columns(){return y()?.properties||[]},get records(){return V()},onAddRecord:J,onUpdateRecord:X,onDeleteRecord:Z,onLoadMore:Y,get hasMore(){return K()}})}}),null),g(e,i(h,{get when(){return"grid"===_e()},get children(){return i(Jn,{get records(){return V()},get columns(){return y()?.properties||[]},onUpdateRecord:X,onDeleteRecord:Z})}}),null),g(e,i(h,{get when(){return"gallery"===_e()},get children(){return i(vi,{get records(){return V()},get columns(){return y()?.properties||[]},onUpdateRecord:X,onDeleteRecord:Z})}}),null),g(e,i(h,{get when(){return"board"===_e()},get children(){return i(Mi,{get records(){return V()},get columns(){return y()?.properties||[]},onUpdateRecord:X,onDeleteRecord:Z})}}),null),v(t=>{var i=Eu,r=Ru,c=Pu,u={[`${Ou}`]:"table"===_e()},g={[`${Ou}`]:"grid"===_e()},h={[`${Ou}`]:"gallery"===_e()},v={[`${Ou}`]:"board"===_e()};return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),c!==t.a&&p(o,t.a=c),t.o=w(a,u,t.o),t.i=w(s,g,t.i),t.n=w(l,h,t.n),t.s=w(d,v,t.s),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),v(i=>{var s=Su,l=$u,d=t("editor.titlePlaceholder")||"Title",c=zu,u=Cu,g=Tu;return s!==i.e&&p(e,i.e=s),l!==i.t&&p(n,i.t=l),d!==i.a&&b(r,"placeholder",i.a=d),c!==i.o&&p(r,i.o=c),u!==i.i&&p(o,i.i=u),g!==i.n&&p(a,i.n=g),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>r.value=M()),e}}),null),v(t=>{var i=wu,r=ku;return i!==t.e&&p(e,t.e=i),r!==t.t&&p(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(t=>{var i=_u,a=fu,l=mu,d=Hu,c=bu;return i!==t.e&&p(e,t.e=i),a!==t.t&&p(n,t.t=a),l!==t.a&&p(r,t.a=l),d!==t.o&&p(o,t.o=d),c!==t.i&&p(s,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}})}})}}),i(ns,{}),i(h,{get when(){return ke()},get children(){return i(vs,{onClose:()=>ye(!1),onCreate:T})}}),i(h,{get when(){return Se()},get children(){return i(ms,{onClose:()=>$e(!1),onCreate:E,isFirstWorkspace:!0})}}),i(h,{get when(){return Ce()},get children(){return i(Ms,{onClose:()=>xe(!1),onImport:Me})}})]}function dg(){return i(Xl,{get children(){return i(Yi,{get children(){return i(ir,{get children(){return i(ar,{get children(){return i(lr,{get children(){return i(lg,{})}})}})}})}})}})}d(["click","input"]);const cg=localStorage.getItem("mddb_locale"),ug=cg&&["en","fr","de","es"].includes(cg)?cg:"en",gg=document.getElementById("app");gg&&he(()=>i(me,{initialLocale:ug,get children(){return i(dg,{})}}),gg);
