import{c as e,y as t,j as n,e as i,S as r,l as s,m as a,F as o,n as l,p as d,s as u,v as c,h as g,d as v,o as h,C as _}from"./vendor-XI6dBZnE.js";import{u as m,b as p,s as b,W as f,O as w,c as y,w as S}from"./index-DrUc7Qb5.js";const k="_navItemWrapper_1177w_3",$="_navItem_1177w_3",C="_active_1177w_27",x="_section_1177w_34",z="_expandIcon_1177w_56",I="_expanded_1177w_74",R="_expandSpacer_1177w_78",L="_label_1177w_84",E="_children_1177w_91";var O=c("<span>▶"),T=c("<div>"),U=c("<div><a><span>"),N=c("<span>");function P(c){const g=()=>c.item.children&&c.item.children.length>0,v=()=>{if(!g())return!1;const e=t=>{for(const n of t){if(c.isActive(n.url))return!0;if(n.children&&e(n.children))return!0}return!1};return e(c.item.children||[])},[h,_]=e(0===c.depth||v());t(()=>{c.currentRoute&&v()&&_(!0)});const m=e=>{e.preventDefault(),g()&&!c.item.url?_(!h()):c.item.url&&(g()&&_(!0),c.onNavigate(c.item.url))},p=e=>{e.preventDefault(),e.stopPropagation(),_(!h())};return b=U(),f=b.firstChild,w=f.firstChild,f.$$click=m,n(f,i(r,{get when(){return g()},get fallback(){return e=N(),s(()=>a(e,R)),e;var e},get children(){var e=O();return e.$$click=p,s(()=>a(e,(()=>{let e=z;return h()&&(e+=" "+I),e})())),e}}),w),n(w,()=>c.item.label),n(b,i(r,{get when(){return l(()=>!!h())()&&g()},get children(){var e=T();return n(e,i(o,{get each(){return c.item.children},children:e=>i(P,{item:e,get depth(){return c.depth+1},get isActive(){return c.isActive},get onNavigate(){return c.onNavigate},get currentRoute(){return c.currentRoute}})})),s(()=>a(e,E)),e}}),null),s(e=>{var t=k,n=c.item.url||"#",i=(()=>{let e=$;return c.isActive(c.item.url)&&(e+=" "+C),0===c.depth&&g()&&(e+=" "+x),e})(),r=12*c.depth+16+"px",s=L;return t!==e.e&&a(b,e.e=t),n!==e.t&&d(f,"href",e.t=n),i!==e.a&&a(f,e.a=i),r!==e.o&&u(f,"padding-left",e.o=r),s!==e.i&&a(w,e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),b;var b,f,w}g(["click"]);const A="_sidebar_dpyfy_3",q="_nav_dpyfy_13",D="_mobileOpen_dpyfy_31";var W=c("<aside><nav>");function F(e){const{t:t}=m(),{user:r}=p(),l=e=>{if(!e)return!1;const t=window.location.pathname,n=window.location.hash,[i,r]=e.split("#");return i===t&&(!r||n==="#"+r)};return d=W(),u=d.firstChild,n(u,i(o,{get each(){return(()=>{const e=[],n=r();if(!n)return e;e.push({id:"user",label:t("settings.personal"),url:b("user")});const i=n.workspaces||[];if(i.length>0){const n=i.map(e=>{const n=e.workspace_id,i=e.workspace_name||n,r=e.role===f,s=[{id:`ws-${n}-members`,label:t("settings.members"),url:b("workspace",n,i)+"#members"},{id:`ws-${n}-settings`,label:t("settings.settings"),url:b("workspace",n,i)+"#settings"}];return r&&s.push({id:`ws-${n}-sync`,label:t("settings.gitSync"),url:b("workspace",n,i)+"#sync"}),{id:`ws-${n}`,label:i,url:b("workspace",n,i),children:s}});e.push({id:"workspaces",label:t("settings.workspaces"),url:"",children:n})}const s=(n.organizations||[]).filter(e=>e.role===w||e.role===y);if(s.length>0){const n=s.map(e=>{const n=e.organization_id,i=e.organization_name||n;return{id:`org-${n}`,label:i,url:b("org",n,i),children:[{id:`org-${n}-members`,label:t("settings.members"),url:b("org",n,i)+"#members"},{id:`org-${n}-settings`,label:t("settings.settings"),url:b("org",n,i)+"#settings"}]}});e.push({id:"organizations",label:t("settings.organizations"),url:"",children:n})}return e})()},children:t=>i(P,{item:t,depth:0,isActive:l,get onNavigate(){return e.onNavigate},get currentRoute(){return e.currentRoute}})})),s(t=>{var n=`${A} ${e.isOpen?D:""}`,i=q;return n!==t.e&&a(d,t.e=n),i!==t.t&&a(u,t.t=i),t},{e:void 0,t:void 0}),d;var d,u}const M="_profile_vysi4_3",B="_userInfoSection_vysi4_7",G="_avatarLarge_vysi4_17",j="_avatarImageLarge_vysi4_29",H="_initialsLarge_vysi4_35",V="_userDetails_vysi4_41",J="_userName_vysi4_45",K="_userEmail_vysi4_51",Q="_userRole_vysi4_56",X="_section_vysi4_66",Y="_error_vysi4_75",Z="_success_vysi4_83",ee="_settingsForm_vysi4_91",te="_formItem_vysi4_98",ne="_checkboxLabel_vysi4_117",ie="_saveButton_vysi4_130",re="_orgList_vysi4_149",se="_orgItem_vysi4_155",ae="_orgInfo_vysi4_165",oe="_orgName_vysi4_171",le="_orgNameLink_vysi4_175",de="_orgRole_vysi4_185",ue="_emptyState_vysi4_194";var ce=c("<div>"),ge=c("<span>"),ve=c("<section><div></div><div><h3></h3><p>"),he=c("<section><h3>"),_e=c("<div><label><input type=checkbox>"),me=c("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),pe=c("<img referrerpolicy=no-referrer>"),be=c("<p>"),fe=c("<a>"),we=c("<div><div><span>");function ye(){const{t:l}=m(),{user:u,api:c,wsApi:g}=p(),[v,h]=e("light"),[_,f]=e("en"),[S,k]=e(!0),[$,C]=e(!1),[x,z]=e(null),[I,R]=e(null),L=()=>{const e=u(),t=e?.name||e?.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};t(()=>{const e=u();h(e?.settings?.theme||"light"),f(e?.settings?.language||"en")});t(()=>{(async()=>{const e=u();if(e)try{C(!0),z(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&k(t.settings?.notifications??!0)}catch(t){z(`${l("errors.failedToLoad")}: ${t}`)}finally{C(!1)}})()});const E=async e=>{e.preventDefault();const t=g();try{C(!0),z(null),R(null);const e={theme:v(),language:_()},n=[c().auth.updateUserSettings({settings:e})];if(t){const e={notifications:S()};n.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(n),R(l("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(n){z(`${l("errors.failedToSave")}: ${n}`)}finally{C(!1)}};return O=ce(),n(O,i(r,{get when(){return x()},get children(){var e=ce();return n(e,x),s(()=>a(e,Y)),e}}),null),n(O,i(r,{get when(){return I()},get children(){var e=ce();return n(e,I),s(()=>a(e,Z)),e}}),null),n(O,i(r,{get when(){return u()},children:e=>{return[(F=ve(),M=F.firstChild,Y=M.nextSibling,Z=Y.firstChild,ye=Z.nextSibling,n(M,i(r,{get when(){return(()=>{const e=u()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=ge(),n(e,L),s(()=>a(e,H)),e;var e},children:t=>{return n=pe(),s(i=>{var r=t(),s=e().name||"User",o=j;return r!==i.e&&d(n,"src",i.e=r),s!==i.t&&d(n,"alt",i.t=s),o!==i.a&&a(n,i.a=o),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),n(Z,()=>e().name),n(ye,()=>e().email),n(Y,i(r,{get when(){return e().workspace_role},get children(){var t=ge();return n(t,()=>e().workspace_role),s(()=>a(t,Q)),t}}),null),s(e=>{var t=B,n=G,i=V,r=J,s=K;return t!==e.e&&a(F,e.e=t),n!==e.t&&a(M,e.t=n),i!==e.a&&a(Y,e.a=i),r!==e.o&&a(Z,e.o=r),s!==e.i&&a(ye,e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),F),(D=he(),W=D.firstChild,n(W,()=>l("profile.myOrganizations")),n(D,i(r,{get when(){return e().organizations?.length},get fallback(){return e=be(),n(e,()=>l("profile.noOrganizations")),s(()=>a(e,ue)),e;var e},get children(){var t=ce();return n(t,i(o,{get each(){return e().organizations},children:e=>{const t=e.organization_name||e.organization_id;return o=we(),l=o.firstChild,u=l.firstChild,n(l,i(r,{get when(){return e.role===w||e.role===y},get fallback(){return e=ge(),n(e,t),s(()=>a(e,oe)),e;var e},get children(){var i=fe();return i.$$click=t=>{t.preventDefault(),(e=>{window.history.pushState(null,"",b("org",e.organization_id,e.organization_name)),window.dispatchEvent(new PopStateEvent("popstate"))})(e)},n(i,t),s(t=>{var n=b("org",e.organization_id,e.organization_name),r=le;return n!==t.e&&d(i,"href",t.e=n),r!==t.t&&a(i,t.t=r),t},{e:void 0,t:void 0}),i}}),u),n(u,()=>e.role),s(e=>{var t=se,n=ae,i=de;return t!==e.e&&a(o,e.e=t),n!==e.t&&a(l,e.t=n),i!==e.a&&a(u,e.a=i),e},{e:void 0,t:void 0,a:void 0}),o;var o,l,u}})),s(()=>a(t,re)),t}}),null),s(()=>a(D,X)),D),(t=me(),c=t.firstChild,g=c.nextSibling,m=g.firstChild,p=m.firstChild,C=p.nextSibling,x=C.firstChild,z=x.nextSibling,I=z.nextSibling,R=m.nextSibling,O=R.firstChild,T=O.nextSibling,U=T.firstChild,N=U.nextSibling,P=N.nextSibling,A=P.nextSibling,q=R.nextSibling,n(c,()=>l("settings.personalSettings")),g.addEventListener("submit",E),n(p,()=>l("settings.theme")),C.addEventListener("change",e=>h(e.target.value)),n(x,()=>l("settings.themeLight")),n(z,()=>l("settings.themeDark")),n(I,()=>l("settings.themeSystem")),n(O,()=>l("settings.language")),T.addEventListener("change",e=>f(e.target.value)),n(U,()=>l("settings.languageEn")),n(N,()=>l("settings.languageFr")),n(P,()=>l("settings.languageDe")),n(A,()=>l("settings.languageEs")),n(g,i(r,{get when(){return e().workspace_id},get children(){var e=_e(),t=e.firstChild,i=t.firstChild;return i.addEventListener("change",e=>k(e.currentTarget.checked)),n(t,()=>l("settings.enableNotifications"),null),s(n=>{var i=te,r=ne;return i!==n.e&&a(e,n.e=i),r!==n.t&&a(t,n.t=r),n},{e:void 0,t:void 0}),s(()=>i.checked=S()),e}}),q),n(q,()=>l("settings.saveChanges")),s(e=>{var n=X,i=ee,r=te,s=te,o=ie,l=$();return n!==e.e&&a(t,e.e=n),i!==e.t&&a(g,e.t=i),r!==e.a&&a(m,e.a=r),s!==e.o&&a(R,e.o=s),o!==e.i&&a(q,e.i=o),l!==e.n&&(q.disabled=e.n=l),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),s(()=>C.value=v()),s(()=>T.value=_()),t)];var t,c,g,m,p,C,x,z,I,R,O,T,U,N,P,A,q,D,W,F,M,Y,Z,ye}}),null),s(()=>a(O,M)),O;var O}g(["click"]);const Se="_table_rjyw4_3",ke="_roleSelect_rjyw4_21";var $e=c("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Ce=c("<select>"),xe=c("<tr><td></td><td></td><td>"),ze=c("<option>");function Ie(e){const{t:t}=m(),l=t=>("workspace_role"===e.roleField?t.workspace_role:t.org_role)||"";return d=$e(),u=d.firstChild,c=u.firstChild.firstChild,g=c.nextSibling,v=g.nextSibling,h=u.nextSibling,n(c,()=>t("settings.nameColumn")),n(g,()=>t("settings.emailColumn")),n(v,()=>t("settings.roleColumn")),n(h,i(o,{get each(){return e.members},children:t=>{return d=xe(),u=d.firstChild,c=u.nextSibling,g=c.nextSibling,n(u,()=>t.name),n(c,()=>t.email),n(g,i(r,{get when(){return t.id!==e.currentUserId},get fallback(){return l(t)},get children(){var r=Ce();return r.addEventListener("change",n=>e.onUpdateRole(t.id,n.target.value)),n(r,i(o,{get each(){return e.roleOptions},children:e=>{return t=ze(),n(t,()=>e.label),s(()=>t.value=e.value),t;var t}})),s(t=>{var n=ke,i=e.loading;return n!==t.e&&a(r,t.e=n),i!==t.t&&(r.disabled=t.t=i),t},{e:void 0,t:void 0}),s(()=>r.value=l(t)),r}})),d;var d,u,c,g}})),s(()=>a(d,Se)),d;var d,u,c,g,v,h}const Re="_inviteSection_toc48_3",Le="_inviteForm_toc48_7",Ee="_formGroup_toc48_17",Oe="_pendingSection_toc48_57",Te="_table_toc48_65";var Ue=c("<div><h4></h4><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Ne=c("<div><form><h4></h4><div><input type=email required><select></select><button type=submit>"),Pe=c("<option>"),Ae=c("<tr><td></td><td></td><td>");function qe(t){const{t:l}=m(),[u,c]=e(""),[g,v]=e(t.defaultRole),h=async e=>{e.preventDefault(),u()&&(await t.onInvite(u(),g()),c(""))};return _=Ne(),p=_.firstChild,b=p.firstChild,f=b.nextSibling,w=f.firstChild,y=w.nextSibling,S=y.nextSibling,p.addEventListener("submit",h),n(b,()=>l("settings.inviteNewMember")),w.$$input=e=>c(e.target.value),y.addEventListener("change",e=>v(e.target.value)),n(y,i(o,{get each(){return t.roleOptions},children:e=>{return t=Pe(),n(t,()=>e.label),s(()=>t.value=e.value),t;var t}})),n(S,()=>l("common.invite")),n(_,i(r,{get when(){return t.pendingInvitations.length>0},get children(){var e=Ue(),r=e.firstChild,d=r.nextSibling,u=d.firstChild,c=u.firstChild.firstChild,g=c.nextSibling,v=g.nextSibling,h=u.nextSibling;return n(r,()=>l("settings.pendingInvitations")),n(c,()=>l("settings.emailColumn")),n(g,()=>l("settings.roleColumn")),n(v,()=>l("settings.sentColumn")),n(h,i(o,{get each(){return t.pendingInvitations},children:e=>{return t=Ae(),i=t.firstChild,r=i.nextSibling,s=r.nextSibling,n(i,()=>e.email),n(r,()=>e.role),n(s,()=>new Date(e.created).toLocaleDateString()),t;var t,i,r,s}})),s(t=>{var n=Oe,i=Te;return n!==t.e&&a(e,t.e=n),i!==t.t&&a(d,t.t=i),t},{e:void 0,t:void 0}),e}}),null),s(e=>{var n=Re,i=Le,r=Ee,s=l("settings.emailPlaceholder")||"Email address",o=t.loading,u=t.loading,c=t.loading;return n!==e.e&&a(_,e.e=n),i!==e.t&&a(p,e.t=i),r!==e.a&&a(f,e.a=r),s!==e.o&&d(w,"placeholder",e.o=s),o!==e.i&&(w.disabled=e.i=o),u!==e.n&&(y.disabled=e.n=u),c!==e.s&&(S.disabled=e.s=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),s(()=>w.value=u()),s(()=>y.value=g()),_;var _,p,b,f,w,y,S}g(["input"]);const De="_panel_1dwg0_3",We="_tabs_1dwg0_7",Fe="_activeTab_1dwg0_29",Me="_section_1dwg0_34",Be="_error_1dwg0_43",Ge="_success_1dwg0_51",je="_settingsForm_1dwg0_59",He="_formItem_1dwg0_66",Ve="_saveButton_1dwg0_86",Je="_hint_1dwg0_105",Ke="_table_1dwg0_111",Qe="_actions_1dwg0_129",Xe="_smallButton_1dwg0_134",Ye="_deleteButtonSmall_1dwg0_148",Ze="_addRemoteSection_1dwg0_162",et="_orgLink_1dwg0_174",tt="_linkButton_1dwg0_188";var nt=c("<button>"),it=c("<div>"),rt=c("<section><h3>"),st=c("<form><div><label></label><input type=text required></div><button type=submit>"),at=c("<section><h3></h3><div><p></p><button> →"),ot=c("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),lt=c("<section><h3></h3><p>"),dt=c("<div><div><button></button><button>"),ut=c("<p>"),ct=c("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function gt(o){const{t:l}=m(),{user:u,orgApi:c,wsApi:g}=p(),[v,h]=e("settings"===o.section?"settings":"sync"===o.section?"sync":"members"),[_,b]=e([]),[w,y]=e([]),[S,k]=e(null),[$,C]=e(""),[x,z]=e(""),[I,R]=e(""),[L,E]=e(""),[O,T]=e(!1),[U,N]=e(null),[P,A]=e(null),q=()=>u()?.workspace_role===f,D=e=>{h(e);const t="members"===e?"":`#${e}`,n=window.location.pathname;window.history.replaceState(null,"",n+t)},W=async()=>{const e=c();if(e)try{T(!0),N(null);const t=g();if("members"===v()&&q()){const[n,i]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);b(n.users?.filter(e=>!!e)||[]),y(i.invitations?.filter(e=>!!e)||[])}if("settings"===v()&&t){const e=await t.workspaces.getWorkspace();R(e.name),E(e.name)}if("sync"===v()&&q()&&t)try{const e=await t.settings.git.getGitRemote();k(e)}catch{k(null)}}catch(t){N(`${l("errors.failedToLoad")}: ${t}`)}finally{T(!1)}};t(()=>{W()}),t(()=>{const e=o.section;"settings"===e?h("settings"):"sync"===e?h("sync"):"members"!==e&&e||h("members")});const F=async(e,t)=>{const n=g();if(n)try{T(!0),await n.invitations.createWSInvitation({email:e,role:t}),A(l("success.invitationSent")||"Invitation sent successfully"),W()}catch(i){N(`${l("errors.failedToInvite")}: ${i}`)}finally{T(!1)}},M=async(e,t)=>{const n=g();if(n)try{T(!0),await n.users.updateWSMemberRole({user_id:e,role:t}),A(l("success.roleUpdated")||"Role updated"),W()}catch(i){N(`${l("errors.failedToUpdateRole")}: ${i}`)}finally{T(!1)}},B=async e=>{e.preventDefault();const t=g();if(t)try{T(!0),N(null),A(null),I()!==L()&&I().trim()&&await t.workspaces.updateWorkspace({name:I().trim()}),E(I().trim()),A(l("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(n){N(`${l("errors.failedToSave")}: ${n}`)}finally{T(!1)}},G=async e=>{e.preventDefault();const t=g();if(t)try{T(!0),N(null);const e=await t.settings.git.updateGitRemote({url:$(),token:x(),type:"custom",auth_type:x()?"token":"none"});k(e),A(l("success.remoteAdded")||"Git remote configured"),C(""),z("")}catch(n){N(`${l("errors.failedToAddRemote")}: ${n}`)}finally{T(!1)}},j=async()=>{const e=g();if(e)try{T(!0),N(null),A(null),await e.settings.git.pushGit(),A(l("success.pushSuccessful")||"Push successful"),W()}catch(t){N(`${l("errors.pushFailed")}: ${t}`)}finally{T(!1)}},H=async()=>{if(!confirm(l("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=g();if(e)try{T(!0),N(null),await e.settings.git.deleteGitRemote(),k(null),A(l("success.remoteRemoved")||"Remote removed")}catch(t){N(`${l("errors.failedToRemoveRemote")}: ${t}`)}finally{T(!1)}},V=[{value:"admin",label:l("settings.roleAdmin")},{value:"editor",label:l("settings.roleEditor")},{value:"viewer",label:l("settings.roleViewer")}];return J=dt(),K=J.firstChild,Q=K.firstChild,X=Q.nextSibling,Q.$$click=()=>D("members"),n(Q,()=>l("settings.members")),X.$$click=()=>D("settings"),n(X,()=>l("settings.workspace")),n(K,i(r,{get when(){return q()},get children(){var e=nt();return e.$$click=()=>D("sync"),n(e,()=>l("settings.gitSync")),s(()=>a(e,"sync"===v()?Fe:"")),e}}),null),n(J,i(r,{get when(){return U()},get children(){var e=it();return n(e,U),s(()=>a(e,Be)),e}}),null),n(J,i(r,{get when(){return P()},get children(){var e=it();return n(e,P),s(()=>a(e,Ge)),e}}),null),n(J,i(r,{get when(){return"members"===v()},get children(){var e=rt(),t=e.firstChild;return n(t,()=>l("settings.members")),n(e,i(r,{get when(){return q()},get fallback(){return e=ut(),n(e,()=>l("settings.adminOnlyMembers")),e;var e},get children(){return[i(Ie,{get members(){return _()},get currentUserId(){return u()?.id||""},roleOptions:V,roleField:"workspace_role",onUpdateRole:M,get loading(){return O()}}),i(qe,{roleOptions:V,defaultRole:"viewer",get pendingInvitations(){return w().map(e=>({email:e.email,role:e.role,created:e.created}))},onInvite:F,get loading(){return O()}})]}}),null),s(()=>a(e,Me)),e}}),null),n(J,i(r,{get when(){return"settings"===v()},get children(){var e=at(),t=e.firstChild,d=t.nextSibling,c=d.firstChild,g=c.nextSibling,v=g.firstChild;return n(t,()=>l("settings.workspaceSettings")),n(e,i(r,{get when(){return q()},get fallback(){return e=ut(),n(e,()=>l("settings.adminOnlyWorkspace")),e;var e},get children(){var e=st(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",B),n(i,()=>l("settings.workspaceName")),r.$$input=e=>R(e.target.value),n(o,()=>l("settings.saveWorkspaceSettings")),s(n=>{var i=je,r=He,s=Ve,l=O();return i!==n.e&&a(e,n.e=i),r!==n.t&&a(t,n.t=r),s!==n.a&&a(o,n.a=s),l!==n.o&&(o.disabled=n.o=l),n},{e:void 0,t:void 0,a:void 0,o:void 0}),s(()=>r.value=I()),e}}),d),n(c,()=>l("settings.orgSettingsHint")),g.$$click=()=>{const e=u(),t=e?.organization_id,n=e?.organizations?.find(e=>e.organization_id===t),i=n?.organization_name||"";t&&o.onNavigateToOrgSettings(t,i)},n(g,()=>l("settings.openOrgSettings"),v),s(t=>{var n=Me,i=et,r=tt;return n!==t.e&&a(e,t.e=n),i!==t.t&&a(d,t.t=i),r!==t.a&&a(g,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),n(J,i(r,{get when(){return"sync"===v()},get children(){var e=lt(),t=e.firstChild,o=t.nextSibling;return n(t,()=>l("settings.gitSynchronization")),n(o,()=>l("settings.gitSyncHint")),n(e,i(r,{get when(){return S()},children:e=>{const t=e().last_sync;return i=ct(),r=i.firstChild,o=r.firstChild.firstChild,d=o.nextSibling,u=d.nextSibling,c=r.nextSibling.firstChild.firstChild,g=c.nextSibling,v=g.nextSibling,h=v.firstChild,_=h.nextSibling,n(o,()=>l("settings.urlColumn")),n(d,()=>l("settings.lastSyncColumn")),n(u,()=>l("common.actions")),n(c,()=>e().url),n(g,()=>t?new Date(t).toLocaleString():l("settings.never")),h.$$click=j,n(h,()=>l("common.push")),_.$$click=H,n(_,()=>l("common.remove")),s(e=>{var t=Ke,n=Qe,r=O(),s=Xe,o=O(),l=Ye;return t!==e.e&&a(i,e.e=t),n!==e.t&&a(v,e.t=n),r!==e.a&&(h.disabled=e.a=r),s!==e.o&&a(h,e.o=s),o!==e.i&&(_.disabled=e.i=o),l!==e.n&&a(_,e.n=l),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,d,u,c,g,v,h,_}}),null),n(e,i(r,{get when(){return!S()},get children(){var e=ot(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,u=o.nextSibling,c=r.nextSibling,g=c.firstChild,v=g.nextSibling,h=v.nextSibling,_=c.nextSibling;return n(t,()=>l("settings.addNewRemote")),i.addEventListener("submit",G),n(o,()=>l("settings.repositoryUrl")),u.$$input=e=>C(e.target.value),n(g,()=>l("settings.personalAccessToken")),v.$$input=e=>z(e.target.value),n(h,()=>l("settings.tokenHint")),n(_,()=>l("settings.addRemote")),s(t=>{var n=Ze,s=je,o=He,g=l("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",m=He,p=l("settings.tokenPlaceholder")||"ghp_...",b=Je,f=Ve,w=O();return n!==t.e&&a(e,t.e=n),s!==t.t&&a(i,t.t=s),o!==t.a&&a(r,t.a=o),g!==t.o&&d(u,"placeholder",t.o=g),m!==t.i&&a(c,t.i=m),p!==t.n&&d(v,"placeholder",t.n=p),b!==t.s&&a(h,t.s=b),f!==t.h&&a(_,t.h=f),w!==t.r&&(_.disabled=t.r=w),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),s(()=>u.value=$()),s(()=>v.value=x()),e}}),null),s(t=>{var n=Me,i=Je;return n!==t.e&&a(e,t.e=n),i!==t.t&&a(o,t.t=i),t},{e:void 0,t:void 0}),e}}),null),s(e=>{var t=De,n=We,i="members"===v()?Fe:"",r="settings"===v()?Fe:"";return t!==e.e&&a(J,e.e=t),n!==e.t&&a(K,e.t=n),i!==e.a&&a(Q,e.a=i),r!==e.o&&a(X,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),J;var J,K,Q,X}g(["click","input"]);const vt="_panel_1e73u_3",ht="_tabs_1e73u_7",_t="_activeTab_1e73u_29",mt="_section_1e73u_34",pt="_error_1e73u_43",bt="_success_1e73u_51",ft="_settingsForm_1e73u_59",wt="_formItem_1e73u_66",yt="_saveButton_1e73u_84";var St=c("<div>"),kt=c("<section><h3>"),$t=c("<form><div><label></label><input type=text required></div><button type=submit>"),Ct=c("<div><div><button></button><button>"),xt=c("<p>");function zt(o){const{t:l}=m(),{user:d,api:u}=p(),[c,g]=e("settings"===o.section?"settings":"members"),[h,_]=e([]),[b,f]=e([]),[S,k]=e(""),[$,C]=e(""),[x,z]=e(!1),[I,R]=e(null),[L,E]=e(null),O=v(()=>u().org(o.orgId)),T=v(()=>{const e=d()?.organizations?.find(e=>e.organization_id===o.orgId);return e?.role}),U=v(()=>{const e=T();return e===y||e===w}),N=e=>{g(e);const t="members"===e?"":`#${e}`,n=window.location.pathname;window.history.replaceState(null,"",n+t)},P=async()=>{const e=O();try{if(z(!0),R(null),"members"===c()&&U()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);_(t.users?.filter(e=>!!e)||[]),f(n.invitations?.filter(e=>!!e)||[])}if("settings"===c()){const t=await e.organizations.getOrganization();k(t.name),C(t.name)}}catch(t){R(`${l("errors.failedToLoad")}: ${t}`)}finally{z(!1)}};t(()=>{P()}),t(()=>{const e=o.section;"settings"===e?g("settings"):"members"!==e&&e||g("members")});const A=async(e,t)=>{const n=O();try{z(!0),await n.invitations.createOrgInvitation({email:e,role:t}),E(l("success.invitationSent")||"Invitation sent successfully"),P()}catch(i){R(`${l("errors.failedToInvite")}: ${i}`)}finally{z(!1)}},q=async(e,t)=>{const n=O();try{z(!0),await n.users.updateOrgMemberRole({user_id:e,role:t}),E(l("success.roleUpdated")||"Role updated"),P()}catch(i){R(`${l("errors.failedToUpdateRole")}: ${i}`)}finally{z(!1)}},D=async e=>{e.preventDefault();const t=O();try{z(!0),R(null),E(null),S()!==$()&&S().trim()&&await t.organizations.updateOrganization({name:S().trim()}),C(S().trim()),E(l("success.orgSettingsSaved")||"Organization settings saved")}catch(n){R(`${l("errors.failedToSave")}: ${n}`)}finally{z(!1)}},W=[{value:"owner",label:l("settings.roleOwner")},{value:"admin",label:l("settings.roleAdmin")},{value:"member",label:l("settings.roleMember")}],F=[{value:"admin",label:l("settings.roleAdmin")},{value:"member",label:l("settings.roleMember")}];return M=Ct(),B=M.firstChild,G=B.firstChild,j=G.nextSibling,G.$$click=()=>N("members"),n(G,()=>l("settings.members")),j.$$click=()=>N("settings"),n(j,()=>l("settings.settings")),n(M,i(r,{get when(){return I()},get children(){var e=St();return n(e,I),s(()=>a(e,pt)),e}}),null),n(M,i(r,{get when(){return L()},get children(){var e=St();return n(e,L),s(()=>a(e,bt)),e}}),null),n(M,i(r,{get when(){return"members"===c()},get children(){var e=kt(),t=e.firstChild;return n(t,()=>l("settings.organizationMembers")),n(e,i(r,{get when(){return U()},get fallback(){return e=xt(),n(e,()=>l("settings.adminOnlyMembers")),e;var e},get children(){return[i(Ie,{get members(){return h()},get currentUserId(){return d()?.id||""},roleOptions:W,roleField:"org_role",onUpdateRole:q,get loading(){return x()}}),i(qe,{roleOptions:F,defaultRole:"member",get pendingInvitations(){return b().map(e=>({email:e.email,role:e.role,created:e.created}))},onInvite:A,get loading(){return x()}})]}}),null),s(()=>a(e,mt)),e}}),null),n(M,i(r,{get when(){return"settings"===c()},get children(){var e=kt(),t=e.firstChild;return n(t,()=>l("settings.organizationPreferences")),n(e,i(r,{get when(){return U()},get fallback(){return e=xt(),n(e,()=>l("settings.adminOnlySettings")),e;var e},get children(){var e=$t(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling;return e.addEventListener("submit",D),n(i,()=>l("settings.organizationName")),r.$$input=e=>k(e.target.value),n(o,()=>l("common.save")),s(n=>{var i=ft,r=wt,s=yt,l=x();return i!==n.e&&a(e,n.e=i),r!==n.t&&a(t,n.t=r),s!==n.a&&a(o,n.a=s),l!==n.o&&(o.disabled=n.o=l),n},{e:void 0,t:void 0,a:void 0,o:void 0}),s(()=>r.value=S()),e}}),null),s(()=>a(e,mt)),e}}),null),s(e=>{var t=vt,n=ht,i="members"===c()?_t:"",r="settings"===c()?_t:"";return t!==e.e&&a(M,e.e=t),n!==e.t&&a(B,e.t=n),i!==e.a&&a(G,e.a=i),r!==e.o&&a(j,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),M;var M,B,G,j}g(["click","input"]);const It="_settingsPage_1eedq_3",Rt="_header_1eedq_10",Lt="_headerLeft_1eedq_21",Et="_hamburger_1eedq_27",Ot="_backButton_1eedq_37",Tt="_title_1eedq_53",Ut="_layout_1eedq_64",Nt="_content_1eedq_70",Pt="_error_1eedq_81",At="_mobileBackdrop_1eedq_88";var qt=c("<div>"),Dt=c('<div><header><div><button aria-label="Toggle settings menu">☰</button><button>← </button><h1></h1></div></header><div><main>');function Wt(o){const{t:d}=m(),{user:u}=p(),[c,g]=e(!1),v=e=>{"Escape"===e.key&&c()&&g(!1)};h(()=>{window.addEventListener("keydown",v),_(()=>window.removeEventListener("keydown",v))}),t(()=>{"redirect"===o.route.type&&o.route.id&&(window.history.replaceState(null,"",o.route.id),window.dispatchEvent(new PopStateEvent("popstate")))});const f=e=>{g(!1),window.history.pushState(null,"",e),window.dispatchEvent(new PopStateEvent("popstate"))},w=()=>{window.history.back()},y=()=>{const e=u()?.workspace_id,t=u()?.workspace_name;e&&(o.onClose(),window.history.pushState(null,"",S(e,t)),window.dispatchEvent(new PopStateEvent("popstate")))};return(()=>{var e=Dt(),t=e.firstChild,v=t.firstChild,h=v.firstChild,_=h.nextSibling;_.firstChild;var m=_.nextSibling,p=t.nextSibling,S=p.firstChild;return h.$$click=()=>g(!c()),_.$$click=w,n(_,()=>d("common.back"),null),m.$$click=y,n(m,()=>d("settings.title")),n(p,i(r,{get when(){return c()},get children(){var e=qt();return e.$$click=()=>g(!1),s(()=>a(e,At)),e}}),S),n(p,i(F,{get isOpen(){return c()},get currentRoute(){return o.route},onNavigate:f}),S),n(S,i(r,{get when(){return"profile"===o.route.type},get children(){return i(ye,{})}}),null),n(S,i(r,{get when(){return l(()=>!("workspace"!==o.route.type||!o.route.id))()?o.route.id:null},children:e=>i(r,{get when(){return(e=>{const t=u()?.workspaces?.find(t=>t.workspace_id===e);return t?{id:e,name:t.workspace_name||e}:null})(e())},get fallback(){return e=qt(),n(e,()=>d("errors.failedToLoad")),s(()=>a(e,Pt)),e;var e},get children(){return i(gt,{get wsId(){return e()},get section(){return o.route.section},onNavigateToOrgSettings:(e,t)=>{f(b("org",e,t))}})}})}),null),n(S,i(r,{get when(){return l(()=>!("org"!==o.route.type||!o.route.id))()?o.route.id:null},children:e=>i(r,{get when(){return(e=>{const t=u()?.organizations?.find(t=>t.organization_id===e);return t?{id:e,name:t.organization_name||e}:null})(e())},get fallback(){return e=qt(),n(e,()=>d("errors.failedToLoad")),s(()=>a(e,Pt)),e;var e},get children(){return i(zt,{get orgId(){return e()},get section(){return o.route.section}})}})}),null),s(n=>{var i=It,r=Rt,s=Lt,o=Et,l=Ot,d=Tt,u=Ut,c=Nt;return i!==n.e&&a(e,n.e=i),r!==n.t&&a(t,n.t=r),s!==n.a&&a(v,n.a=s),o!==n.o&&a(h,n.o=o),l!==n.i&&a(_,n.i=l),d!==n.n&&a(m,n.n=d),u!==n.s&&a(p,n.s=u),c!==n.h&&a(S,n.h=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),e})()}g(["click"]);export{qe as InviteForm,Ie as MembersTable,zt as OrgSettingsPanel,ye as ProfileSettings,Wt as Settings,P as SettingsNavItem,F as SettingsSidebar,gt as WorkspaceSettingsPanel};
