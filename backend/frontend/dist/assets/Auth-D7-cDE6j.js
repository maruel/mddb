import{a as t,g as e,c as a,q as i,x as r,s as l,v as n,d as o,F as s,A as u,S as d,w as h,n as c}from"./vendor-C4NZ4Uo1.js";import{u as p,O as v,a as g,b as w,A as f,c as _}from"./index-mrskUxu_.js";import"./editor-vendor-Crzpgfli.js";const m="_authContainer_dcxwu_1",b="_authForm_dcxwu_9",x="_formGroup_dcxwu_24",y="_error_dcxwu_62",C="_toggle_dcxwu_72",A="_authFooter_dcxwu_87",B="_divider_dcxwu_104",F="_oauthButtons_dcxwu_124",M="_oauthIcon_dcxwu_130",S="_googleButton_dcxwu_137",$="_microsoftButton_dcxwu_138",z="_githubButton_dcxwu_139",V="_oauthButton_dcxwu_124";var H=h('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),k=h('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),q=h('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),K=h("<div>"),W=h("<div><span>"),j=h("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),E=h("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p> <button type=button></button></p><div><a href=/privacy>"),G=h("<a>");const O={[v]:function(){return t=H(),l(()=>u(t,"class",M)),t;var t},[w]:function(){return t=k(),l(()=>u(t,"class",M)),t;var t},[g]:function(){return t=q(),l(()=>u(t,"class",M)),t;var t}},P={[v]:{style:S,labelKey:"auth.loginWithGoogle"},[w]:{style:$,labelKey:"auth.loginWithMicrosoft"},[g]:{style:z,labelKey:"auth.loginWithGitHub"}};const I=_((t,e)=>fetch(t,e));function L(h){const{t:c}=p(),[_]=t(()=>I.auth.listProviders().then(t=>t.providers)),M=e(()=>{const t=_()??[],e=[v,g,w];return[...t].sort((t,a)=>{let i=e.indexOf(t),r=e.indexOf(a);return-1===i&&(i=e.length),-1===r&&(r=e.length),i-r})}),[S,$]=a(!1),[z,H]=a(""),[k,q]=a(""),[L,D]=a(""),[T,U]=a(null),[J,N]=a(!1),Q=async t=>{t.preventDefault(),U(null),N(!0);try{const t=S()?await I.auth.register({email:z(),password:k(),name:L()}):await I.auth.login({email:z(),password:k()});t.token&&t.user?h.onLogin(t.token,t.user):U("Invalid response from server")}catch(e){U(e instanceof f?e.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{N(!1)}};return et=E(),at=et.firstChild,it=at.firstChild,rt=it.nextSibling,lt=rt.firstChild,nt=lt.nextSibling,ot=rt.nextSibling,st=ot.firstChild,ut=st.nextSibling,dt=ot.nextSibling,ht=dt.nextSibling,ct=ht.firstChild,pt=ct.nextSibling,vt=ht.nextSibling,gt=vt.firstChild,at.addEventListener("submit",Q),i(it,(R=r(()=>!!S()),()=>R()?c("auth.createAccount"):c("auth.loginTitle"))),i(at,(X=r(()=>!!T()),()=>{return X()&&(t=K(),i(t,T),l(()=>n(t,y)),t);var t}),rt),i(at,o(d,{get when(){return M().length>0},get children(){return[(a=K(),i(a,o(s,{get each(){return M()},children:t=>{const e=function(t){const e=P[t];return e?{style:e.style,label:e.labelKey}:{style:V,label:t.charAt(0).toUpperCase()+t.slice(1)}}(t),a=t in P,r=O[t];return s=G(),u(s,"href",`/api/v1/auth/oauth/${t}`),i(s,r&&o(r,{}),null),i(s,()=>a?c(e.label):e.label,null),l(()=>n(s,e.style)),s;var s}})),l(()=>n(a,F)),a),(t=W(),e=t.firstChild,i(e,()=>c("auth.or")),l(()=>n(t,B)),t)];var t,e,a}}),rt),i(at,o(d,{get when(){return S()},get children(){var t=j(),e=t.firstChild,a=e.nextSibling;return i(e,()=>c("auth.name")),a.$$input=t=>D(t.target.value),l(()=>n(t,x)),l(()=>a.value=L()),t}}),rt),i(lt,()=>c("auth.email")),nt.$$input=t=>H(t.target.value),i(st,()=>c("auth.password")),ut.$$input=t=>q(t.target.value),i(dt,(Y=r(()=>!!J()),()=>Y()?c("auth.pleaseWait"):r(()=>!!S())()?c("auth.register"):c("auth.login"))),i(ht,(Z=r(()=>!!S()),()=>Z()?c("auth.alreadyHaveAccount"):c("auth.dontHaveAccount")),ct),pt.$$click=()=>$(!S()),i(pt,(tt=r(()=>!!S()),()=>tt()?c("auth.login"):c("auth.register"))),i(gt,()=>c("app.privacyPolicy")),l(t=>{var e=m,a=b,i=x,r=x,l=S()?"new-password":"current-password",o=J(),s=C,d=A;return e!==t.e&&n(et,t.e=e),a!==t.t&&n(at,t.t=a),i!==t.a&&n(rt,t.a=i),r!==t.o&&n(ot,t.o=r),l!==t.i&&u(ut,"autocomplete",t.i=l),o!==t.n&&(dt.disabled=t.n=o),s!==t.s&&n(ht,t.s=s),d!==t.h&&n(vt,t.h=d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),l(()=>nt.value=z()),l(()=>ut.value=k()),et;var R,X,Y,Z,tt,et,at,it,rt,lt,nt,ot,st,ut,dt,ht,ct,pt,vt,gt}c(["input","click"]);export{L as default};
