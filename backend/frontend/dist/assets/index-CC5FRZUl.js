const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Editor-DRg9WiK9.js","assets/vendor-Bv0g0qOV.js","assets/editor-vendor-DsQgZxsu.js","assets/Editor-_Q3xTxHi.css","assets/index-6k7RNfDq.js","assets/index-Df08tEXs.css"])))=>i.map(i=>d[i]);
import{c as e,a as t,d as n,u as i,t as r,e as o,r as a,f as s,g as l,h as d,i as c,j as u,S as h,l as v,m as g,s as p,F as _,n as f,o as m,p as w,q as b,v as y,w as k,x as $,y as C,z as S,A as x,B as I,C as j,D as T,E as L,G as E,H as N,I as z,J as R,K as D}from"./vendor-Bv0g0qOV.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const P={},O=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in P)return;P[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};async function A(e){const t=await((e,t,n)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>O(()=>import("./de-iX8llo_5.js"),[]),"./dictionaries/en.ts":()=>O(()=>import("./en-DdjSXlPJ.js"),[]),"./dictionaries/es.ts":()=>O(()=>import("./es-BOm7M6HE.js"),[]),"./dictionaries/fr.ts":()=>O(()=>import("./fr-Cyi90UpL.js"),[])}),`./dictionaries/${e}.ts`,3);return s(t.dict)}const B=o(),W=i=>{const[o,s]=e(i.initialLocale||"en"),[l]=t(o,A),d=r(l,a),c={locale:o,setLocale:s,t:d,translateError:e=>{const t=`errors.${e}`,n=d(t);return n&&n!==t?n:d("errors.unknown")||"An error occurred"},ready:()=>"ready"===l.state};return n(B.Provider,{value:c,get children(){return i.children}})};function M(){const e=i(B);if(!e)throw new Error("useI18n must be used within I18nProvider");return e}const U="_sidebarNodeWrapper_i1nam_1",V="_childList_i1nam_2",F="_pageItem_i1nam_13",q="_active_i1nam_28",H="_nodeIcon_i1nam_34",G="_pageTitleText_i1nam_41",K="_expandIcon_i1nam_49",Y="_hidden_i1nam_67",J="_loading_i1nam_67",Z="_expanded_i1nam_72",X="_contextMenu_i1nam_95",Q="_contextMenuItem_i1nam_107",ee="_contextMenuDivider_i1nam_124",te="_hoverDeleteButton_i1nam_131";var ne=y("<div><button>üìÑ </button><button>üìä </button><div></div><button>üïê "),ie=y("<ul>"),re=y("<li><div><span></span><span></span><span></span><button>üóë");function oe(t){const{t:i}=M(),r=d(()=>0===t.depth||t.ancestorIds.includes(t.node.id)),[o,a]=e(r),[s,l]=e(!1),[y,k]=e({x:0,y:0}),[$,C]=e(!1),S=()=>t.node.children??[],x=()=>!!(t.node.children&&t.node.children.length>0)||!0===t.node.has_children;c(()=>{const e=t.selectedId,n=S();e&&n.some(t=>t.id===e)&&a(!0)});let I=!1;c(b(()=>t.ancestorIds.length,(e,n)=>{(void 0===n||0===n)&&e>0&&!I&&t.ancestorIds.includes(t.node.id)&&(I=!0,a(!0))})),c(()=>{o()&&x()&&!t.node.children&&t.onFetchChildren&&(C(!0),t.onFetchChildren(t.node.id).finally(()=>C(!1)))});const j=e=>{e.stopPropagation(),a(!o())},T=e=>{e.preventDefault(),e.stopPropagation(),k({x:e.clientX,y:e.clientY}),l(!0)},L=()=>l(!1);return E=re(),N=E.firstChild,z=N.firstChild,R=z.nextSibling,D=R.nextSibling,P=D.nextSibling,E.$$click=L,N.$$contextmenu=T,N.$$click=()=>t.onSelect(t.node),z.$$click=j,u(z,()=>$()?"‚óã":"‚ñ∂"),u(R,()=>t.node.has_table&&!t.node.has_page?"üìä":"üìÑ"),u(D,()=>t.node.title),P.$$click=e=>{e.stopPropagation(),t.onDeleteNode?.(t.node.id)},u(E,n(h,{get when(){return s()},get children(){var e=ne(),n=e.firstChild;n.firstChild;var r=n.nextSibling;r.firstChild;var o=r.nextSibling,a=o.nextSibling;return a.firstChild,e.$$click=e=>e.stopPropagation(),n.$$click=()=>{t.onCreateChildPage(t.node.id),l(!1)},u(n,()=>i("app.createSubPage"),null),r.$$click=()=>{t.onCreateChildTable(t.node.id),l(!1)},u(r,()=>i("app.createSubTable"),null),a.$$click=()=>{t.onShowHistory?.(t.node.id),l(!1)},u(a,()=>i("editor.history"),null),v(t=>{var i=X,s=`${y().x}px`,l=`${y().y}px`,d=Q,c=Q,u=ee,h=Q;return i!==t.e&&g(e,t.e=i),s!==t.t&&p(e,"left",t.t=s),l!==t.a&&p(e,"top",t.a=l),d!==t.o&&g(n,t.o=d),c!==t.i&&g(r,t.i=c),u!==t.n&&g(o,t.n=u),h!==t.s&&g(a,t.s=h),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),u(E,n(h,{get when(){return f(()=>!!o())()&&S().length>0},get children(){var e=ie();return u(e,n(_,{get each(){return S()},children:e=>n(oe,{node:e,get selectedId(){return t.selectedId},get ancestorIds(){return t.ancestorIds},get onSelect(){return t.onSelect},get onCreateChildPage(){return t.onCreateChildPage},get onCreateChildTable(){return t.onCreateChildTable},get onFetchChildren(){return t.onFetchChildren},get onDeleteNode(){return t.onDeleteNode},get onShowHistory(){return t.onShowHistory},get depth(){return t.depth+1}})})),v(()=>g(e,V)),e}}),null),v(e=>{var n=U,r=`sidebar-node-${t.node.id}`,a=F,s={[`${q}`]:t.selectedId===t.node.id},l=12*t.depth+8+"px",d=K,c={[`${Z}`]:o(),[`${Y}`]:!x(),[`${J}`]:$()},u=`expand-icon-${t.node.id}`,h=H,v=G,_=te,f=i("common.delete")||"Delete";return n!==e.e&&g(E,e.e=n),r!==e.t&&m(E,"data-testid",e.t=r),a!==e.a&&g(N,e.a=a),e.o=w(N,s,e.o),l!==e.i&&p(N,"padding-left",e.i=l),d!==e.n&&g(z,e.n=d),e.s=w(z,c,e.s),u!==e.h&&m(z,"data-testid",e.h=u),h!==e.r&&g(R,e.r=h),v!==e.d&&g(D,e.d=v),_!==e.l&&g(P,e.l=_),f!==e.u&&m(P,"title",e.u=f),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),E;var E,N,z,R,D,P}l(["click","contextmenu"]);const ae="_sidebar_wijl0_1",se="_sidebarHeader_wijl0_9",le="_loading_wijl0_42",de="_pageList_wijl0_48",ce="_sidebarActions_wijl0_55",ue="_mobileOpen_wijl0_94";var he=y("<p>"),ve=y("<aside><div><h2></h2><div><button>+P</button><button>+D</button></div></div><ul>");function ge(e){const{t:t}=M();return i=ve(),r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,d=r.nextSibling,u(o,()=>t("app.workspace")),s.$$click=()=>e.onCreatePage(),l.$$click=()=>e.onCreateTable(),u(i,n(h,{get when(){return f(()=>!!e.loading)()&&0===e.nodes.length},get children(){var e=he();return u(e,()=>t("common.loading")),v(()=>g(e,le)),e}}),d),u(d,n(_,{get each(){return e.nodes},children:t=>n(oe,{node:t,get selectedId(){return e.selectedNodeId},get ancestorIds(){return e.ancestorIds},get onSelect(){return e.onSelectNode},get onCreateChildPage(){return e.onCreateChildPage},get onCreateChildTable(){return e.onCreateChildTable},get onFetchChildren(){return e.onFetchChildren},get onDeleteNode(){return e.onDeleteNode},get onShowHistory(){return e.onShowHistory},depth:0})})),v(n=>{var o=`${ae} ${e.isOpen?ue:""}`,c=se,u=ce,h=t("app.newPage")||"New Page",v=t("app.newTable")||"New Table",p=de;return o!==n.e&&g(i,n.e=o),c!==n.t&&g(r,n.t=c),u!==n.a&&g(a,n.a=u),h!==n.o&&m(s,"title",n.o=h),v!==n.i&&m(l,"title",n.i=v),p!==n.n&&g(d,n.n=p),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,a,s,l,d}l(["click"]);const pe="select",_e="org:owner",fe="org:admin",me="ws:admin",we="google",be="microsoft",ye="github",ke="_container_4rjtw_3",$e="_tableWrapper_4rjtw_11",Ce="_table_4rjtw_11",Se="_headerRow_4rjtw_23",xe="_headerCell_4rjtw_31",Ie="_row_4rjtw_43",je="_actionsCell_4rjtw_51",Te="_deleteBtn_4rjtw_51",Le="_actionsHeader_4rjtw_56",Ee="_cell_4rjtw_69",Ne="_editing_4rjtw_77",ze="_cellContent_4rjtw_82",Re="_input_4rjtw_93",De="_required_4rjtw_129",Pe="_newRow_4rjtw_136",Oe="_newRowPlaceholder_4rjtw_148",Ae="_empty_4rjtw_159",Be="_loadMore_4rjtw_166",We="_addColumnCell_4rjtw_186",Me="_addColumnWrapper_4rjtw_191",Ue="_addColumnBtn_4rjtw_196",Ve="_addColumnDropdown_4rjtw_217",Fe="_columnNameInput_4rjtw_234",qe="_columnTypeSelect_4rjtw_235",He="_addColumnActions_4rjtw_251",Ge="_addColumnConfirm_4rjtw_257",Ke="_addColumnCancel_4rjtw_258";var Ye=y("<input type=checkbox>"),Je=y("<select><option value>--"),Ze=y("<option>"),Xe=y("<input type=text>"),Qe=y("<input type=number>"),et=y("<input type=date>"),tt=y("<th>"),nt=y("<div><input type=text autofocus><select></select><div><button></button><button>"),it=y("<th><div><button>+"),rt=y("<tr><td>+ "),ot=y("<span> "),at=y("<div>"),st=y("<div><button>"),lt=y("<div><div><table><thead><tr></tr></thead><tbody>"),dt=y("<span>*"),ct=y("<td><button>‚úï"),ut=y("<tr>"),ht=y("<td>");const vt=[{type:"text",labelKey:"table.typeText"},{type:"number",labelKey:"table.typeNumber"},{type:"checkbox",labelKey:"table.typeCheckbox"},{type:"date",labelKey:"table.typeDate"},{type:"select",labelKey:"table.typeSelect"},{type:"url",labelKey:"table.typeUrl"},{type:"email",labelKey:"table.typeEmail"}];function gt(t){const{t:i}=M(),[r,o]=e(null),[a,s]=e(""),[l,d]=e(!1),[c,p]=e(!1),[w,b]=e(""),[y,$]=e("text"),C=()=>{const e=w().trim();if(!e||!t.onAddColumn)return;const n={name:e,type:y(),required:!1};t.onAddColumn(n),b(""),$("text"),p(!1)},S=(e,n)=>{if(l()||!r())return;const i=t.columns.find(e=>e.name===n);if(!i||!t.onUpdateRecord)return void o(null);const s=t.records.find(t=>t.id===e);if(!s)return void o(null);const d={...s.data};d[i.name]=a(),t.onUpdateRecord(e,d),o(null)},x=()=>{t.onAddRecord&&t.columns.length>0&&t.onAddRecord({})},I=(e,n)=>{const i=((e,n)=>{const i=t.columns.find(e=>e.name===n);return i?e.data[i.name]??"":""})(e,n.name);switch(n.type){case"checkbox":return i?"‚úì":"";case"select":case"multi_select":case"number":default:return String(i);case"date":return i?new Date(i).toLocaleDateString():""}};let j;const T=(e,t,i,r)=>{const a=e=>{j=e,setTimeout(()=>{e.focus(),e instanceof HTMLInputElement&&"text"===e.type&&e.select()},0)},c=()=>j?j instanceof HTMLInputElement&&"checkbox"===j.type?String(j.checked):j.value:t,h=e=>{"Enter"!==e.key&&"Tab"!==e.key||s(c()),((e,t,n)=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key?(e.preventDefault(),d(!0),o(null)):"Tab"===e.key&&S(t,n):(e.preventDefault(),S(t,n))})(e,i,r)},p=()=>{s(c()),S(i,r)},f=()=>{s(c()),((e,t)=>{l()?d(!1):S(e,t)})(i,r)};switch(e.type){case"checkbox":return(C=Ye()).$$keydown=h,C.addEventListener("change",p),k(a,C),C.checked="true"===t,v(()=>g(C,Re)),C;case pe:return e.options&&e.options.length>0?(($=Je()).firstChild,$.$$keydown=h,$.addEventListener("blur",f),$.addEventListener("change",p),k(a,$),$.value=t,u($,n(_,{get each(){return e.options},children:e=>{return t=Ze(),u(t,()=>e.name),v(()=>t.value=e.id),t;var t}}),null),v(()=>g($,Re)),$):((y=Xe()).$$keydown=h,y.addEventListener("blur",f),k(a,y),y.value=t,v(()=>g(y,Re)),y);case"number":return(b=Qe()).$$keydown=h,b.addEventListener("blur",f),k(a,b),b.value=t,v(()=>g(b,Re)),b;case"date":return(w=et()).$$keydown=h,w.addEventListener("blur",f),k(a,w),w.value=t,v(()=>g(w,Re)),w;default:return(m=Xe()).$$keydown=h,m.addEventListener("blur",f),k(a,m),m.value=t,v(()=>g(m,Re)),m}var m,w,b,y,$,C};return L=lt(),E=L.firstChild,N=E.firstChild,z=N.firstChild,R=z.firstChild,D=z.nextSibling,u(R,n(h,{get when(){return t.onDeleteRecord},get children(){var e=tt();return v(()=>g(e,Le)),e}}),null),u(R,n(_,{get each(){return t.columns},children:e=>{return t=tt(),u(t,()=>e.name,null),u(t,n(h,{get when(){return e.required},get children(){var e=dt();return v(()=>g(e,De)),e}}),null),v(()=>g(t,xe)),t;var t}}),null),u(R,n(h,{get when(){return t.onAddColumn},get children(){var e=it(),t=e.firstChild,r=t.firstChild;return r.$$click=()=>p(!c()),u(t,n(h,{get when(){return c()},get children(){var e=nt(),t=e.firstChild,r=t.nextSibling,o=r.nextSibling,a=o.firstChild,s=a.nextSibling;return t.$$input=e=>b(e.target.value),r.addEventListener("change",e=>$(e.target.value)),u(r,n(_,{each:vt,children:e=>{return t=Ze(),u(t,()=>i(e.labelKey)||e.type),v(()=>t.value=e.type),t;var t}})),a.$$click=C,u(a,()=>i("common.confirm")||"Add"),s.$$click=()=>p(!1),u(s,()=>i("common.cancel")||"Cancel"),v(n=>{var l=Ve,d=i("table.columnName")||"Column Name",c=Fe,u=qe,h=He,v=Ge,p=Ke;return l!==n.e&&g(e,n.e=l),d!==n.t&&m(t,"placeholder",n.t=d),c!==n.a&&g(t,n.a=c),u!==n.o&&g(r,n.o=u),h!==n.i&&g(o,n.i=h),v!==n.n&&g(a,n.n=v),p!==n.s&&g(s,n.s=p),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>t.value=w()),v(()=>r.value=y()),e}}),null),v(n=>{var o=We,a=Me,s=Ue,l=i("table.addColumn")||"Add Column";return o!==n.e&&g(e,n.e=o),a!==n.t&&g(t,n.t=a),s!==n.a&&g(r,n.a=s),l!==n.o&&m(r,"title",n.o=l),n},{e:void 0,t:void 0,a:void 0,o:void 0}),e}}),null),u(D,n(_,{get each(){return t.records},children:e=>{return l=ut(),u(l,n(h,{get when(){return t.onDeleteRecord},get children(){var n=ct(),r=n.firstChild;return r.$$click=()=>t.onDeleteRecord?.(e.id),v(e=>{var t=je,o=Te,a=i("table.deleteRecord")||"Delete";return t!==e.e&&g(n,e.e=t),o!==e.t&&g(r,e.t=o),a!==e.a&&m(r,"title",e.a=a),e},{e:void 0,t:void 0,a:void 0}),n}}),null),u(l,n(_,{get each(){return t.columns},children:i=>{const l=()=>r()?.recordId===e.id&&r()?.columnId===i.name;return(d=ht()).$$click=()=>!l()&&((e,n)=>{const i=t.columns.find(e=>e.name===n),r=t.records.find(t=>t.id===e)?.data[i?.name??""]??"";o({recordId:e,columnId:n}),s(String(r))})(e.id,i.name),u(d,n(h,{get when(){return l()},get fallback(){return t=at(),u(t,()=>I(e,i)),v(()=>g(t,ze)),t;var t},get children(){return T(i,a(),e.id,i.name)}})),v(()=>g(d,`${Ee}${l()?` ${Ne}`:""}`)),d;var d}}),null),v(()=>g(l,Ie)),l;var l}}),null),u(D,n(h,{get when(){return f(()=>!!t.onAddRecord)()&&t.columns.length>0},get children(){var e=rt(),n=e.firstChild;return n.firstChild,n.$$click=x,u(n,()=>i("table.addRecord")||"New",null),v(i=>{var r=Pe,o=Oe,a=t.columns.length+(t.onDeleteRecord?1:0)+(t.onAddColumn?1:0);return r!==i.e&&g(e,i.e=r),o!==i.t&&g(n,i.t=o),a!==i.a&&m(n,"colspan",i.a=a),i},{e:void 0,t:void 0,a:void 0}),e}}),null),u(L,n(h,{get when(){return 0===t.columns.length},get children(){var e=at();return u(e,()=>i("table.noColumns"),null),u(e,n(h,{get when(){return t.onAddColumn},get children(){var e=ot();return e.firstChild,u(e,()=>i("table.addColumnFirst")||"Click + to add a column.",null),e}}),null),v(()=>g(e,Ae)),e}}),null),u(L,n(h,{get when(){return t.hasMore},get children(){var e=st(),n=e.firstChild;return n.$$click=()=>t.onLoadMore?.(),u(n,()=>i("table.loadMore")),v(()=>g(e,Be)),e}}),null),v(e=>{var t=ke,n=$e,i=Ce,r=Se;return t!==e.e&&g(L,e.e=t),n!==e.t&&g(E,e.t=n),i!==e.a&&g(N,e.a=i),r!==e.o&&g(R,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),L;var L,E,N,z,R,D}function pt(e,t,n,i){if(e.data[t]===n||!i)return;const r={...e.data,[t]:n};i(e.id,r)}function _t(e){"Enter"===e.key&&e.currentTarget.blur()}function ft(e,t){if(!t)return"";const n=e.data[t];return null!=n?String(n):""}function mt(e,t){const n=t[0];return n?ft(e,n.name):""}l(["keydown","click","input"]);const wt="_grid_3ff2z_1",bt="_card_3ff2z_8",yt="_cardHeader_3ff2z_20",kt="_deleteBtn_3ff2z_28",$t="_cardBody_3ff2z_40",Ct="_field_3ff2z_46",St="_fieldName_3ff2z_51",xt="_titleInput_3ff2z_58",It="_fieldValueInput_3ff2z_75";var jt=y("<div>"),Tt=y("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Lt=y("<div><span>:</span><input type=text>");function Et(e){const{t:t}=M();return i=jt(),u(i,n(_,{get each(){return e.records},children:i=>{return r=Tt(),o=r.firstChild,a=o.firstChild,s=a.firstChild,l=a.nextSibling,d=o.nextSibling,$(s,"keydown",_t),s.addEventListener("blur",t=>e.columns[0]&&pt(i,e.columns[0].name,t.target.value,e.onUpdateRecord)),l.$$click=()=>e.onDeleteRecord(i.id),u(d,n(_,{get each(){return e.columns.slice(1,4)},children:t=>{return n=Lt(),r=n.firstChild,o=r.firstChild,a=r.nextSibling,u(r,()=>t.name,o),$(a,"keydown",_t),a.addEventListener("blur",n=>pt(i,t.name,n.target.value,e.onUpdateRecord)),v(e=>{var t=Ct,i=St,o=It;return t!==e.e&&g(n,e.e=t),i!==e.t&&g(r,e.t=i),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=ft(i,t.name)),n;var n,r,o,a}})),v(e=>{var n=bt,i=yt,a=t("table.untitled")||"Untitled",c=xt,u=kt,h=$t;return n!==e.e&&g(r,e.e=n),i!==e.t&&g(o,e.t=i),a!==e.a&&m(s,"placeholder",e.a=a),c!==e.o&&g(s,e.o=c),u!==e.i&&g(l,e.i=u),h!==e.n&&g(d,e.n=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>s.value=mt(i,e.columns)),r;var r,o,a,s,l,d}})),v(()=>g(i,wt)),i;var i}l(["keydown","click"]);const Nt="_gallery_1i7ro_1",zt="_card_1i7ro_8",Rt="_imageContainer_1i7ro_23",Dt="_image_1i7ro_23",Pt="_imagePlaceholder_1i7ro_38",Ot="_cardContent_1i7ro_43",At="_cardHeader_1i7ro_47",Bt="_deleteBtn_1i7ro_54",Wt="_cardBody_1i7ro_67",Mt="_field_1i7ro_71",Ut="_fieldName_1i7ro_77",Vt="_titleInput_1i7ro_83",Ft="_fieldValueInput_1i7ro_100";var qt=y("<div>"),Ht=y("<div><div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),Gt=y("<img>"),Kt=y("<div><span>:</span><input type=text>");function Yt(e){const{t:t}=M();return i=qt(),u(i,n(_,{get each(){return e.records},children:i=>{const r=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return o=Ht(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=l.firstChild,c=l.nextSibling,p=s.nextSibling,u(o,n(h,{when:r,children:r=>{return o=qt(),u(o,n(h,{get when(){return i.data[r().name]},get fallback(){return e=qt(),u(e,()=>t("table.noImage")),v(()=>g(e,Pt)),e;var e},get children(){var t=Gt();return v(n=>{var o=String(i.data[r().name]),a=mt(i,e.columns)||"Record",s=Dt;return o!==n.e&&m(t,"src",n.e=o),a!==n.t&&m(t,"alt",n.t=a),s!==n.a&&g(t,n.a=s),n},{e:void 0,t:void 0,a:void 0}),t}})),v(()=>g(o,Rt)),o;var o}}),a),$(d,"keydown",_t),d.addEventListener("blur",t=>e.columns[0]&&pt(i,e.columns[0].name,t.target.value,e.onUpdateRecord)),c.$$click=()=>e.onDeleteRecord(i.id),u(p,n(_,{get each(){return e.columns.slice(1,3)},children:t=>{return n=Kt(),r=n.firstChild,o=r.firstChild,a=r.nextSibling,u(r,()=>t.name,o),$(a,"keydown",_t),a.addEventListener("blur",n=>pt(i,t.name,n.target.value,e.onUpdateRecord)),v(e=>{var t=Mt,i=Ut,o=Ft;return t!==e.e&&g(n,e.e=t),i!==e.t&&g(r,e.t=i),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=ft(i,t.name)),n;var n,r,o,a}})),v(e=>{var n=zt,i=Ot,r=At,l=t("table.untitled")||"Untitled",u=Vt,h=Bt,v=Wt;return n!==e.e&&g(o,e.e=n),i!==e.t&&g(a,e.t=i),r!==e.a&&g(s,e.a=r),l!==e.o&&m(d,"placeholder",e.o=l),u!==e.i&&g(d,e.i=u),h!==e.n&&g(c,e.n=h),v!==e.s&&g(p,e.s=v),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),v(()=>d.value=mt(i,e.columns)),o;var o,a,s,l,d,c,p}})),v(()=>g(i,Nt)),i;var i}l(["keydown","click"]);const Jt="_board_ojcu7_1",Zt="_noGroup_ojcu7_7",Xt="_columns_ojcu7_16",Qt="_column_ojcu7_16",en="_columnHeader_ojcu7_31",tn="_columnName_ojcu7_38",nn="_columnCount_ojcu7_45",rn="_cards_ojcu7_53",on="_card_ojcu7_53",an="_cardHeader_ojcu7_68",sn="_deleteBtn_ojcu7_80",ln="_cardBody_ojcu7_93",dn="_field_ojcu7_97",cn="_fieldName_ojcu7_103",un="_titleInput_ojcu7_108",hn="_fieldValueInput_ojcu7_125";var vn=y("<div>"),gn=y("<div><div><span></span><span></span></div><div>"),pn=y("<div><div><strong><input type=text></strong><button>‚úï</button></div><div>"),_n=y("<div><span>:</span><input type=text>");function fn(e){const{t:t}=M(),i=C(()=>e.columns.find(e=>e.type===pe||"multi_select"===e.type)),r=C(()=>{const n=i();if(!n)return[{name:"All Records",records:e.records,fromOptions:!0}];const r={};return n.options&&n.options.forEach(e=>{r[e.id]={name:e.name,records:[],fromOptions:!0}}),r.__none__={name:t("table.noGroup")||"No Group",records:[],fromOptions:!0},e.records.forEach(e=>{const t=e.data[n.name];t&&"string"==typeof t?(r[t]||(r[t]={name:t,records:[]}),r[t].records.push(e)):r.__none__?.records.push(e)}),Object.values(r).filter(e=>e.records.length>0||e.fromOptions)});return o=vn(),u(o,n(h,{get when(){return i()},get fallback(){return e=vn(),u(e,()=>t("table.addSelectColumn")),v(()=>g(e,Zt)),e;var e},get children(){var o=vn();return u(o,n(_,{get each(){return r()},children:r=>{return o=gn(),a=o.firstChild,s=a.firstChild,l=s.nextSibling,d=a.nextSibling,u(s,()=>r.name),u(l,()=>r.records.length),u(d,n(_,{get each(){return r.records},children:r=>{return o=pn(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=s.nextSibling,c=a.nextSibling,$(l,"keydown",_t),l.addEventListener("blur",t=>e.columns[0]&&pt(r,e.columns[0].name,t.target.value,e.onUpdateRecord)),d.$$click=()=>e.onDeleteRecord(r.id),u(c,n(_,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==i()?.name)},children:t=>{return n=_n(),i=n.firstChild,o=i.firstChild,a=i.nextSibling,u(i,()=>t.name,o),$(a,"keydown",_t),a.addEventListener("blur",n=>pt(r,t.name,n.target.value,e.onUpdateRecord)),v(e=>{var t=dn,r=cn,o=hn;return t!==e.e&&g(n,e.e=t),r!==e.t&&g(i,e.t=r),o!==e.a&&g(a,e.a=o),e},{e:void 0,t:void 0,a:void 0}),v(()=>a.value=ft(r,t.name)),n;var n,i,o,a}})),v(e=>{var n=on,i=an,r=t("table.untitled")||"Untitled",s=un,u=sn,h=ln;return n!==e.e&&g(o,e.e=n),i!==e.t&&g(a,e.t=i),r!==e.a&&m(l,"placeholder",e.a=r),s!==e.o&&g(l,e.o=s),u!==e.i&&g(d,e.i=u),h!==e.n&&g(c,e.n=h),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>l.value=mt(r,e.columns)),o;var o,a,s,l,d,c}})),v(e=>{var t=Qt,n=en,i=tn,r=nn,c=rn;return t!==e.e&&g(o,e.e=t),n!==e.t&&g(a,e.t=n),i!==e.a&&g(s,e.a=i),r!==e.o&&g(l,e.o=r),c!==e.i&&g(d,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,a,s,l,d}})),v(()=>g(o,Xt)),o}})),v(()=>g(o,Jt)),o;var o}l(["keydown","click"]);class mn extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function wn(e,t){const n=await e(t);if(!n.ok){const e=await n.json();throw new mn(n.status,e)}return n.json()}async function bn(e,t,n){const i={method:"POST"};n&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n));const r=await e(t,i);if(!r.ok){const e=await r.json();throw new mn(r.status,e)}return r.json()}function yn(e){return{admin:{organizations:{listAllOrgs:()=>wn(e,"/api/admin/organizations")},getAdminStats:()=>wn(e,"/api/admin/stats"),listAllUsers:()=>wn(e,"/api/admin/users")},auth:{email:{changeEmail:t=>bn(e,"/api/auth/email",t),sendVerificationEmail:()=>bn(e,"/api/auth/email/send-verification")},invitations:{acceptOrgInvitation:t=>bn(e,"/api/auth/invitations/org/accept",t),acceptWSInvitation:t=>bn(e,"/api/auth/invitations/ws/accept",t)},sessions:{listSessions:()=>wn(e,"/api/auth/sessions"),revokeAllSessions:()=>bn(e,"/api/auth/sessions/revoke-all"),revokeSession:t=>bn(e,"/api/auth/sessions/revoke",t)},getMe:()=>wn(e,"/api/auth/me"),listProviders:()=>wn(e,"/api/auth/providers"),login:t=>bn(e,"/api/auth/login",t),logout:()=>bn(e,"/api/auth/logout"),register:t=>bn(e,"/api/auth/register",t),switchWorkspace:t=>bn(e,"/api/auth/switch-workspace",t),updateUserSettings:t=>bn(e,"/api/auth/settings",t)},organizations:{createOrganization:t=>bn(e,"/api/organizations",t)},server:{getConfig:()=>wn(e,"/api/server/config"),updateConfig:t=>bn(e,"/api/server/config",t)},getHealth:()=>wn(e,"/api/health"),org:t=>({invitations:{createOrgInvitation:n=>bn(e,`/api/organizations/${t}/invitations`,n),listOrgInvitations:()=>wn(e,`/api/organizations/${t}/invitations`)},notion:{getStatus:n=>wn(e,`/api/organizations/${t}/notion/import/${n}/status`),startImport:n=>bn(e,`/api/organizations/${t}/notion/import`,n)},organizations:{getOrganization:()=>wn(e,`/api/organizations/${t}`),updateOrganization:n=>bn(e,`/api/organizations/${t}`,n)},settings:{updateOrgPreferences:n=>bn(e,`/api/organizations/${t}/settings`,n)},users:{listUsers:()=>wn(e,`/api/organizations/${t}/users`),updateOrgMemberRole:n=>bn(e,`/api/organizations/${t}/users/role`,n)},workspaces:{createWorkspace:n=>bn(e,`/api/organizations/${t}/workspaces`,n)}}),ws:t=>({invitations:{createWSInvitation:n=>bn(e,`/api/workspaces/${t}/invitations`,n),listWSInvitations:()=>wn(e,`/api/workspaces/${t}/invitations`)},nodes:{assets:{deleteNodeAsset:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/assets/${i}/delete`),listNodeAssets:n=>wn(e,`/api/workspaces/${t}/nodes/${n}/assets`)},history:{getNodeVersion:(n,i)=>wn(e,`/api/workspaces/${t}/nodes/${n}/history/${i}`),async listNodeVersions(n,i){const r=new URLSearchParams;i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/history`+(r.toString()?`?${r}`:"");return wn(e,o)}},page:{createPage:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/page/create`,i),deletePage:n=>bn(e,`/api/workspaces/${t}/nodes/${n}/page/delete`),getPage:n=>wn(e,`/api/workspaces/${t}/nodes/${n}/page`),updatePage:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/page`,i)},table:{records:{createRecord:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/table/records/create`,i),deleteRecord:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}/delete`),getRecord:(n,i)=>wn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`),async listRecords(n,i){const r=new URLSearchParams;i.ViewID&&r.set("view_id",i.ViewID),i.Filters&&r.set("filters",i.Filters),i.Sorts&&r.set("sorts",i.Sorts),i.Offset&&r.set("offset",String(i.Offset)),i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/nodes/${n}/table/records`+(r.toString()?`?${r}`:"");return wn(e,o)},updateRecord:(n,i,r)=>bn(e,`/api/workspaces/${t}/nodes/${n}/table/records/${i}`,r)},createTable:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/table/create`,i),deleteTable:n=>bn(e,`/api/workspaces/${t}/nodes/${n}/table/delete`),getTable:n=>wn(e,`/api/workspaces/${t}/nodes/${n}/table`),updateTable:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/table`,i)},views:{createView:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/views/create`,i),deleteView:(n,i)=>bn(e,`/api/workspaces/${t}/nodes/${n}/views/${i}/delete`),updateView:(n,i,r)=>bn(e,`/api/workspaces/${t}/nodes/${n}/views/${i}`,r)},deleteNode:n=>bn(e,`/api/workspaces/${t}/nodes/${n}/delete`),getNode:n=>wn(e,`/api/workspaces/${t}/nodes/${n}`),async getNodeTitles(n){const i=new URLSearchParams;n.IDs&&i.set("ids",n.IDs);const r=`/api/workspaces/${t}/nodes/titles`+(i.toString()?`?${i}`:"");return wn(e,r)},listNodeChildren:n=>wn(e,`/api/workspaces/${t}/nodes/${n}/children`)},notion:{cancelImport:()=>bn(e,`/api/workspaces/${t}/notion/import/cancel`)},settings:{git:{deleteGitRemote:()=>bn(e,`/api/workspaces/${t}/settings/git/delete`),getGitRemote:()=>wn(e,`/api/workspaces/${t}/settings/git`),pushGit:()=>bn(e,`/api/workspaces/${t}/settings/git/push`),updateGitRemote:n=>bn(e,`/api/workspaces/${t}/settings/git`,n)},updateWSMembershipSettings:n=>bn(e,`/api/workspaces/${t}/settings/membership`,n)},users:{updateWSMemberRole:n=>bn(e,`/api/workspaces/${t}/users/role`,n)},workspaces:{getWorkspace:()=>wn(e,`/api/workspaces/${t}`),updateWorkspace:n=>bn(e,`/api/workspaces/${t}`,n)},search:n=>bn(e,`/api/workspaces/${t}/search`,n)})}}const kn=3,$n=1e3,Cn=3e4;function Sn(e){return 429===e||e>=500&&e<600}function xn(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const n=Date.parse(e);return isNaN(n)?null:Math.max(0,n-Date.now())}function In(e,t){if(null!==t)return Math.min(t,Cn);const n=$n*Math.pow(2,e);return Math.min(n,Cn)}function jn(e,t){return n=async(n,i)=>{const r=e(),o={...i?.headers};r&&(o.Authorization=`Bearer ${r}`);const a=await fetch(n,{...i,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let i=0;for(;;){const r=await n(e,t);if(!Sn(r.status)||i>=kn)return r;const o=In(i,xn(r.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),i++}};var n}function Tn(e,t){return yn(jn(e,t))}const Ln=o(),En=t=>{const[i,r]=e(null),[o,a]=e(localStorage.getItem("mddb_token")),s=async()=>{const e=o();if(e)try{const t=Tn(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),a(null),r(null),window.history.pushState(null,"","/")},l=C(()=>Tn(()=>o(),s)),d=C(()=>{const e=i()?.workspace_id;return e?l().ws(e):null}),u=C(()=>{const e=i()?.organization_id;return e?l().org(e):null});S(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),a(e),window.history.replaceState({},document.title,window.location.pathname))});let h=!1;c(()=>{const e=o(),t=i();!e||t||h||(h=!0,(async()=>{try{const e=await l().auth.getMe();r(e)}catch(e){console.error("Failed to load user",e),e instanceof mn&&401===e.status&&(localStorage.removeItem("mddb_token"),a(null))}finally{h=!1}})())});const v={user:i,token:o,api:l,wsApi:d,orgApi:u,login:(e,t)=>{localStorage.setItem("mddb_token",e),a(e),r(t)},logout:s,setUser:r,refreshUser:async()=>{try{const e=await l().auth.getMe();r(e)}catch(e){console.error("Failed to refresh user",e),e instanceof mn&&401===e.status&&(localStorage.removeItem("mddb_token"),a(null),r(null))}}};return n(Ln.Provider,{value:v,get children(){return t.children}})};function Nn(){const e=i(Ln);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function zn(e){return e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-")}function Rn(e,t){return`/w/${e}+${zn(t||"workspace")}/`}function Dn(e,t,n,i){const r=zn(t||"workspace"),o=i?zn(i):"";return`/w/${e}+${r}/${n}${o?"+"+o:""}`}function Pn(e,t){return`/o/${e}+${zn(t||"organization")}/settings`}function On(e,t,n){if(!e||"user"===e)return"/settings/user";if("server"===e)return"/settings/server";return`/settings/${e}/${t}+${zn(n||e)}`}const An=o(),Bn=t=>{const{t:i,ready:r}=M(),{user:o,setUser:a,api:s,wsApi:l,login:d}=Nn(),[u,h]=x([]),[v,g]=e(null),[p,_]=e(null),[f,m]=e([]),[w,b]=e(!1),[y,k]=e(null),[$,C]=e(!1),[S,L]=e(!1);let E=!1,N=null,z=null,R=null;function D(){const e=o();if(!e?.name)return"";return e.name.split(" ")[0]||e.name}async function P(e){await s().organizations.createOrganization({name:e.name});const t=await s().auth.getMe();a(t)}async function O(e){const t=o();if(!t||!t.organization_id)throw new Error("No organization selected");const n=await s().org(t.organization_id).workspaces.createWorkspace({name:e.name}),i=await s().auth.getMe();a(i),await A(n.id)}async function A(e,t=!0){try{b(!0);const n=await s().auth.switchWorkspace({ws_id:e});if(!n.user)throw new Error("No user data returned");if(d(n.token,n.user),j(()=>{g(null),_(null),m([])}),R=null,N=null,t){const e=n.user.workspace_id,t=n.user.workspace_name;e?window.history.pushState(null,"",Rn(e,t)):window.history.pushState(null,"","/")}await B()}catch(n){k(`${i("errors.failedToSwitch")}: ${n}`)}finally{b(!1)}}async function B(e=!1){const t=l(),n=o()?.workspace_id;if(t&&!E&&!(!e&&n&&N===n&&u.length>0))try{E=!0,b(!0);const e=await t.nodes.listNodeChildren("0");let r=e?.nodes||[];if(0===r.length&&$()){const e=await async function(){const e=l(),t=o();if(!e||!t)return null;if(t.workspace_role!==me&&"ws:editor"!==t.workspace_role)return null;try{const t=await e.nodes.page.createPage("0",{title:i("welcome.welcomePageTitle"),content:i("welcome.welcomePageContent")});return t?.id?String(t.id):null}catch(n){return k(`${i("errors.failedToCreate")}: ${n}`),null}}();if(e){const e=await t.nodes.listNodeChildren("0");r=e?.nodes||[]}}h(T(r)),N=n||null,k(null);const a=window.location.pathname;a.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/)&&!v()&&r.length>0&&r[0]&&W(r[0].id,!1)}catch(r){k(`${i("errors.failedToLoad")}: ${r}`)}finally{E=!1,b(!1)}}async function W(e,t=!0){const n=l();if(n&&z!==e&&R!==e)try{z=e,b(!0);const i=await n.nodes.getNode(e);j(()=>{g(i.id),_(i)}),R=i.id,k(null);const r=o()?.workspace_id,a=o()?.workspace_name;if(r){const e=Dn(r,a,i.id,i.title);t?window.location.pathname!==e&&window.history.pushState(null,"",e):window.location.pathname!==e&&window.history.replaceState(null,"",e)}const s=[i];let l=i;for(;l.parent_id&&"0"!==l.parent_id;)try{const e=await n.nodes.getNode(l.parent_id);s.unshift(e),l=e}catch{break}return m(s),i}catch(r){return void k(`${i("errors.failedToLoad")}: ${r}`)}finally{z=null,b(!1)}}c(()=>{const e=o();if(!e||!r()||$()||S())return;const t=e.organizations||[];if(0===t.length)return L(!0),void async function(){try{b(!0);const e=D(),t=e?i("onboarding.defaultOrgName",{name:e}):i("onboarding.defaultOrgNameFallback");await P({name:t})}catch(e){k(`${i("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>L(!1));const n=t[0];if(n){if(0===(e.workspaces?.filter(e=>e.organization_id===n.organization_id)||[]).length&&(n.role===fe||n.role===_e))return L(!0),void async function(){try{b(!0);const e=D(),t=e?i("onboarding.defaultWorkspaceName",{name:e}):i("onboarding.defaultWorkspaceNameFallback");await O({name:t})}catch(e){k(`${i("errors.failedToCreate")}: ${e}`)}finally{b(!1)}}().finally(()=>L(!1))}const a=e.workspace_id,s=e.workspace_name;a&&(C(!0),"/"===window.location.pathname&&window.history.replaceState(null,"",Rn(a,s)))}),c(()=>{o()&&B()}),c(()=>{const e=o()?.workspace_id;e&&N!==e&&(R=null)});const U={nodes:u,setNodes:e=>{h(I(e))},selectedNodeId:v,setSelectedNodeId:g,selectedNodeData:p,setSelectedNodeData:_,breadcrumbPath:f,setBreadcrumbPath:m,loading:w,setLoading:b,error:y,setError:k,firstLoginCheckDone:$,setFirstLoginCheckDone:C,switchWorkspace:A,createOrganization:P,createWorkspace:O,loadNodes:B,loadNode:W,fetchNodeChildren:async function(e){const t=l();if(t)try{const n=await t.nodes.listNodeChildren(e),i=n.nodes?.filter(Boolean)||[];h(I(t=>{const n=t=>{for(const r of t){if(r.id===e)return r.children=i,r.has_children=i.length>0,!0;if(r.children&&n(r.children))return!0}return!1};n(t)}))}catch(n){console.error("Failed to fetch children:",n)}},removeNode:e=>{h(I(t=>{const n=t=>{const i=t.findIndex(t=>t.id===e);if(-1!==i)return t.splice(i,1),!0;for(const e of t)if(e.children&&n(e.children))return 0===e.children.length&&(e.has_children=!1),!0;return!1};n(t)}))},updateNodeTitle:(e,t)=>{h(I(n=>{const i=n=>{for(const r of n){if(r.id===e)return r.title=t,!0;if(r.children&&i(r.children))return!0}return!1};i(n)})),m(n=>n.map(n=>n.id===e?{...n,title:t}:n))}};return n(An.Provider,{value:U,get children(){return t.children}})};function Wn(){const e=i(An);if(!e)throw new Error("useWorkspace must be used within a WorkspaceProvider");return e}function Mn(e){return!e.includes("://")&&!e.startsWith("/")}function Un(e,t){if(!t||0===Object.keys(t).length)return e;let n=e.replace(/!\[([^\]]*)\]\(([^/)][^)]*)\)/g,(e,n,i)=>{if(!Mn(i))return e;const r=t[i];return r?`![${n}](${r})`:e});return n=n.replace(/\[([^\]]+)\]\(([^/)][^)]*)\)/g,(e,n,i)=>{if(!Mn(i))return e;const r=t[i];return r?`[${n}](${r})`:e}),n}const Vn=/^\/assets\/[^/]+\/[^/]+\/([^?]+)/;function Fn(e){const t=e.match(Vn);return t&&t[1]?decodeURIComponent(t[1]):null}function qn(e,t){const n={};for(const[r,o]of Object.entries(t||{}))n[o]=r;let i=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,t,i)=>{const r=n[o=i]?n[o]:Fn(o);var o;return r?`![${t}](${r})`:e});return i=i.replace(/\[([^\]]+)\]\(([^)]+)\)/g,(e,t,n)=>{const i=Fn(n);return i?`[${t}](${i})`:e}),i}const Hn=/\[([^\]]*)\]\(\/w\/([^/+]+)(?:\+[^/]*)?\/([A-Za-z0-9]+)(?:\+[^)]*)?\)/g;function Gn(e,t,n){return e&&n&&t&&0!==Object.keys(t).length?e.replace(/\[([^\]]*)\]\((\/w\/([^/+]+)(?:\+[^/]*)?\/([A-Za-z0-9]+)(?:\+[^)]*)?)\)/g,(e,i,r,o,a)=>{if(o!==n)return e;const s=t[a];return void 0!==s?`[${s}](${r})`:e}):e}const Kn=o(),Yn=t=>{const{t:i}=M(),{user:r,wsApi:o}=Nn(),{selectedNodeId:a,selectedNodeData:s,updateNodeTitle:l,setLoading:d,setError:u}=Wn(),[h,v]=e(""),[g,p]=e(""),[_,f]=e(!1),[m,w]=e("idle"),[b,y]=e({}),[k,$]=e(!1),[C,S]=e([]),x=function(e,t){let n=null,i=null;const r=(...r)=>{i=r,null!==n&&clearTimeout(n),n=setTimeout(()=>{n=null,i=null,e(...r)},t)};return r.flush=()=>{if(null!==n&&null!==i){clearTimeout(n);const t=i;n=null,i=null,e(...t)}},r.cancel=()=>{null!==n&&(clearTimeout(n),n=null,i=null)},r.pending=()=>null!==n,r}(async()=>{const e=a(),t=o();if(e&&_()&&t)try{w("saving"),await t.nodes.page.updatePage(e,{title:h(),content:g()}),f(!1),w("saved");const n=r()?.workspace_id,i=r()?.workspace_name;if(n){const t=window.location.pathname,r=Dn(n,i,e,h());t!==r&&window.history.replaceState(null,"",r)}setTimeout(()=>{"saved"===m()&&w("idle")},2e3)}catch(n){u(`${i("errors.autoSaveFailed")}: ${n}`),w("idle")}},2e3);async function I(e){const t=o(),n=r()?.workspace_id;if(!t||!n||!e)return void y({});const i=function(e,t){if(!e||!t)return[];const n=new Set,i=new RegExp(Hn.source,"g");let r;for(;null!==(r=i.exec(e));){const e=r[2],i=r[3];e===t&&i&&!n.has(i)&&n.add(i)}return Array.from(n)}(e,n);if(0!==i.length)try{const e=await t.nodes.getNodeTitles({IDs:i.join(",")});y(e.titles||{})}catch{y({})}else y({})}function j(){v(""),p(""),f(!1),w("idle"),$(!1),S([]),y({})}L(()=>{x.flush()}),c(()=>{const e=s();e?(v(e.title),p(e.content||""),f(!1),w("idle"),$(!1),I(e.content||"")):j()});const T={title:h,setTitle:v,content:g,setContent:p,hasUnsavedChanges:_,setHasUnsavedChanges:f,autoSaveStatus:m,assetUrls:()=>s()?.asset_urls||{},linkedNodeTitles:b,showHistory:k,setShowHistory:$,history:C,loadHistory:async function(e){if(k())return void $(!1);const t=o();if(t)try{d(!0);const n=await t.nodes.history.listNodeVersions(e,{Limit:100});S(n.history?.filter(Boolean)||[]),$(!0)}catch(n){u(`${i("errors.failedToLoad")}: ${n}`)}finally{d(!1)}},loadVersion:async function(e,t){if(!confirm(i("editor.restoreConfirm")||"This will replace current editor content. Continue?"))return;const n=o();if(n)try{d(!0);const i=await n.nodes.history.getNodeVersion(e,t);p(i.content||""),f(!0),$(!1)}catch(r){u(`${i("errors.failedToLoad")}: ${r}`)}finally{d(!1)}},triggerAutoSave:x,flushAutoSave:x.flush,resetEditor:j,handleTitleChange:function(e){v(e);const t=a();t&&l(t,e),f(!0),x()},handleContentChange:function(e){p(e),f(!0),x()}};return n(Kn.Provider,{value:T,get children(){return t.children}})};function Jn(){const e=i(Kn);if(!e)throw new Error("useEditor must be used within an EditorProvider");return e}const Zn=o(),Xn=t=>{const{t:i}=M(),{wsApi:r}=Nn(),{selectedNodeId:o,selectedNodeData:a,loading:s,setLoading:l,setError:d}=Wn(),[u,h]=e([]),[v,g]=e(!1),[p,_]=e([]),[f,m]=e(),[w,b]=e([]),[y,k]=e([]),$="__default__";function C(){h([]),g(!1),_([]),m(void 0),b([]),k([])}function S(e){if(e===f())return;const t=p().find(t=>t.id===e);j(()=>{m(e),t?(b(t.filters||[]),k(t.sorts||[])):(b([]),k([]))});const n=o();n&&x(n)}async function x(e){const t=r();if(t)try{l(!0);const n=w().length>0?JSON.stringify(w()):void 0,i=y().length>0?JSON.stringify(y()):void 0,r=f(),o=r===$?"":r||"",a=(await t.nodes.table.records.listRecords(e,{Offset:0,Limit:50,ViewID:o,Filters:n||"",Sorts:i||""})).records||[];h(a),g(50===a.length)}catch(n){d(`${i("errors.failedToLoad")}: ${n}`)}finally{l(!1)}}c(()=>{const e=a();e?.has_table?(j(()=>{const t=e.views||[];if(t.length>0){_(t);const e=t.find(e=>e.default)||t[0];e&&(m(e.id),b(e.filters||[]),k(e.sorts||[]))}else{const e={id:$,name:i("table.all")||"All",type:"table",default:!0,filters:[],sorts:[],columns:[],groups:[]};_([e]),m($),b([]),k([])}}),x(e.id)):C()});const I={records:u,hasMore:v,views:p,activeViewId:f,activeFilters:w,activeSorts:y,loadRecords:x,loadMoreRecords:async function(){const e=o(),t=r();if(e&&!s()&&t)try{l(!0);const n=u().length,i=w().length>0?JSON.stringify(w()):void 0,r=y().length>0?JSON.stringify(y()):void 0,o=f(),a=o===$?"":o||"",s=(await t.nodes.table.records.listRecords(e,{Offset:n,Limit:50,ViewID:a,Filters:i||"",Sorts:r||""})).records||[];h([...u(),...s]),g(50===s.length)}catch(n){d(`${i("errors.failedToLoad")}: ${n}`)}finally{l(!1)}},addRecord:async function(e){const t=o(),n=r();if(t&&n)try{l(!0),await n.nodes.table.records.createRecord(t,{data:e}),await x(t),d(null)}catch(a){d(`${i("errors.failedToCreate")}: ${a}`)}finally{l(!1)}},updateRecord:async function(e,t){const n=o(),a=r();if(n&&a)try{l(!0),await a.nodes.table.records.updateRecord(n,e,{data:t}),await x(n),d(null)}catch(s){d(`${i("errors.failedToSave")}: ${s}`)}finally{l(!1)}},deleteRecord:async function(e){const t=o(),n=r();if(t&&n&&confirm(i("table.confirmDeleteRecord")||"Delete this record?"))try{l(!0),await n.nodes.table.records.deleteRecord(t,e),await x(t),d(null)}catch(a){d(`${i("errors.failedToDelete")}: ${a}`)}finally{l(!1)}},clearRecords:C,setActiveViewId:S,setFilters:function(e){b(e);const t=o();t&&x(t)},setSorts:function(e){k(e);const t=o();t&&x(t)},createView:async function(e,t){const n=o(),a=r();if(n&&a)try{l(!0);const i=await a.nodes.views.createView(n,{name:e,type:t}),r={id:i.id,name:e,type:t,default:!1,filters:[],sorts:[],columns:[],groups:[]};j(()=>{_([...p(),r]),m(i.id),b([]),k([])})}catch(s){d(`${i("errors.failedToCreate")}: ${s}`)}finally{l(!1)}},updateView:async function(e,t){const n=o(),a=r();if(n&&a)try{l(!0),await a.nodes.views.updateView(n,e,t),_(p().map(n=>n.id===e?{...n,...t}:n)),e===f()&&(t.filters&&b(t.filters),t.sorts&&k(t.sorts),(t.filters||t.sorts)&&await x(n))}catch(s){d(`${i("errors.failedToSave")}: ${s}`)}finally{l(!1)}},deleteView:async function(e){const t=o(),n=r();if(t&&n&&confirm(i("table.confirmDeleteView")||"Delete this view?"))try{l(!0),await n.nodes.views.deleteView(t,e);const i=p().filter(t=>t.id!==e);if(_(i),f()===e){const e=i[0];S(e?e.id:void 0)}}catch(a){d(`${i("errors.failedToDelete")}: ${a}`)}finally{l(!1)}}};return n(Zn.Provider,{value:I,get children(){return t.children}})};function Qn(){const e=i(Zn);if(!e)throw new Error("useRecords must be used within a RecordsProvider");return e}const ei="_container_1uha7_3",ti="_tabs_1uha7_7",ni="_tab_1uha7_7",ii="_active_1uha7_35",ri="_icon_1uha7_41",oi="_name_1uha7_46",ai="_defaultBadge_1uha7_52",si="_addWrapper_1uha7_61",li="_addButton_1uha7_65",di="_dropdown_1uha7_81",ci="_overlay_1uha7_113",ui="_contextMenu_1uha7_119",hi="_deleteAction_1uha7_146";var vi=y("<div data-testid=view-type-menu><button data-testid=view-type-table><span></span></button><button data-testid=view-type-list><span></span></button><button data-testid=view-type-gallery><span></span></button><button data-testid=view-type-board><span>"),gi=y("<div>"),pi=y("<div><div><div><button data-testid=add-view-button>+"),_i=y("<span>"),fi=y("<button><span></span><span>"),mi=y("<div><button>");const wi={table:"‚ò∞",board:"‚ò∑",gallery:"‚ñ¶",list:"‚ò∞",calendar:"üìÖ"};function bi(){const{t:t}=M(),{views:i,activeViewId:r,setActiveViewId:o,createView:a,deleteView:s}=Qn(),[l,d]=e(!1),[c,f]=e(null),[b,y]=e(null),k=e=>{const n=t("table.newView")||"New View";a(n,e),d(!1)},$=()=>{const e=c();e&&s(e.id),f(null),y(null)},C=()=>{d(!1),f(null),y(null)};return S=pi(),x=S.firstChild,I=x.firstChild,j=I.firstChild,u(x,n(_,{get each(){return i()},children:e=>{return i=fi(),a=i.firstChild,s=a.nextSibling,i.$$contextmenu=t=>((e,t)=>{e.preventDefault(),f(t),y({x:e.clientX,y:e.clientY})})(t,e),i.$$click=()=>{return t=e.id,void o(t);var t},u(a,()=>wi[e.type]||"‚ò∞"),u(s,()=>e.name),u(i,n(h,{get when(){return e.default},get children(){var e=_i();return u(e,()=>t("table.defaultView")||"Default"),v(()=>g(e,ai)),e}}),null),v(t=>{var n=ni,o={[`${ii}`]:e.id===r()},l=e.name,d=ri,c=oi;return n!==t.e&&g(i,t.e=n),t.t=w(i,o,t.t),l!==t.a&&m(i,"title",t.a=l),d!==t.o&&g(a,t.o=d),c!==t.i&&g(s,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),i;var i,a,s}}),I),j.$$click=()=>d(!l()),u(I,n(h,{get when(){return l()},get children(){var e=vi(),n=e.firstChild,i=n.firstChild,r=n.nextSibling,o=r.firstChild,a=r.nextSibling,s=a.firstChild,l=a.nextSibling,d=l.firstChild;return n.$$click=()=>k("table"),u(i,()=>wi.table),u(n,()=>t("table.table"),null),r.$$click=()=>k("list"),u(o,()=>wi.list),u(r,()=>t("table.list"),null),a.$$click=()=>k("gallery"),u(s,()=>wi.gallery),u(a,()=>t("table.gallery"),null),l.$$click=()=>k("board"),u(d,()=>wi.board),u(l,()=>t("table.board"),null),v(t=>{var n=di,r=ri,a=ri,l=ri,c=ri;return n!==t.e&&g(e,t.e=n),r!==t.t&&g(i,t.t=r),a!==t.a&&g(o,t.a=a),l!==t.o&&g(s,t.o=l),c!==t.i&&g(d,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}}),null),u(S,n(h,{get when(){return b()},children:e=>n(h,{get when(){return c()},get children(){return[(r=gi(),r.$$click=C,v(()=>g(r,ci)),r),(n=mi(),i=n.firstChild,i.$$click=$,u(i,()=>t("common.delete")),v(t=>{var r=ui,o=`${e().x}px`,a=`${e().y}px`,s=hi;return r!==t.e&&g(n,t.e=r),o!==t.t&&p(n,"left",t.t=o),a!==t.a&&p(n,"top",t.a=a),s!==t.o&&g(i,t.o=s),t},{e:void 0,t:void 0,a:void 0,o:void 0}),n)];var n,i,r}})}),null),u(S,n(h,{get when(){return l()},get children(){var e=gi();return e.$$click=C,v(()=>g(e,ci)),e}}),null),v(e=>{var n=ei,i=ti,r=si,o=li,a=t("table.newView")||"New View";return n!==e.e&&g(S,e.e=n),i!==e.t&&g(x,e.t=i),r!==e.a&&g(I,e.a=r),o!==e.o&&g(j,e.o=o),a!==e.i&&m(j,"title",e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),S;var S,x,I,j}l(["click","contextmenu"]);const yi="_settings_1ivbi_1",ki="_header_1ivbi_7",$i="_backButton_1ivbi_20",Ci="_section_1ivbi_36",Si="_table_1ivbi_45",xi="_roleSelect_1ivbi_63",Ii="_error_1ivbi_69",ji="_success_1ivbi_77",Ti="_tabs_1ivbi_85",Li="_activeTab_1ivbi_107",Ei="_settingsForm_1ivbi_112",Ni="_formItem_1ivbi_119",zi="_saveButton_1ivbi_138",Ri="_hint_1ivbi_157",Di="_inviteSection_1ivbi_163",Pi="_inviteForm_1ivbi_167",Oi="_formGroup_1ivbi_178",Ai="_addRemoteSection_1ivbi_207",Bi="_actions_1ivbi_219",Wi="_smallButton_1ivbi_224",Mi="_deleteButtonSmall_1ivbi_238",Ui="_orgLink_1ivbi_252",Vi="_linkButton_1ivbi_266";var Fi=y("<button>"),qi=y("<div>"),Hi=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Gi=y("<h4>"),Ki=y("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=editor></option><option value=viewer></option></select><button type=submit>"),Yi=y("<section><h3>"),Ji=y("<form><div><label></label><input type=text required></div><button type=submit>"),Zi=y("<section><h3></h3><div><p></p><button> ‚Üí"),Xi=y("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),Qi=y("<section><h3></h3><p>"),er=y("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),tr=y("<p>"),nr=y("<select><option value=admin></option><option value=editor></option><option value=viewer>"),ir=y("<tr><td></td><td></td><td>"),rr=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function or(t){const{t:i}=M(),{user:r,orgApi:o,wsApi:a}=Nn(),[s,l]=e("members"),[d,p]=e([]),[f,w]=e([]),[b,y]=e(null),[k,$]=e(""),[C,S]=e(""),[x,I]=e(""),[j,T]=e("viewer"),[L,E]=e(""),[N,z]=e(""),[R,D]=e(!1),[P,O]=e(null),[A,B]=e(null),W=()=>r()?.workspace_role===me,U=async()=>{const e=o();if(e)try{D(!0),O(null);const t=a();if("members"===s()&&W()){const[n,i]=await Promise.all([e.users.listUsers(),t?t.invitations.listWSInvitations():Promise.resolve({invitations:[]})]);p(n.users?.filter(e=>!!e)||[]),w(i.invitations?.filter(e=>!!e)||[])}if("workspace"===s()&&t){const e=await t.workspaces.getWorkspace();E(e.name),z(e.name)}if("sync"===s()&&W()&&t)try{const e=await t.settings.git.getGitRemote();y(e)}catch{y(null)}}catch(t){O(`${i("errors.failedToLoad")}: ${t}`)}finally{D(!1)}};c(()=>{U()});const V=async e=>{e.preventDefault();const t=a();if(x()&&t)try{D(!0),await t.invitations.createWSInvitation({email:x(),role:j()}),I(""),B(i("success.invitationSent")||"Invitation sent successfully"),U()}catch(n){O(`${i("errors.failedToInvite")}: ${n}`)}finally{D(!1)}},F=async e=>{e.preventDefault();const t=a();if(t)try{D(!0),O(null),B(null),L()!==N()&&L().trim()&&await t.workspaces.updateWorkspace({name:L().trim()}),z(L().trim()),B(i("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(n){O(`${i("errors.failedToSave")}: ${n}`)}finally{D(!1)}},q=async e=>{e.preventDefault();const t=a();if(t)try{D(!0),O(null);const e=await t.settings.git.updateGitRemote({url:k(),token:C(),type:"custom",auth_type:C()?"token":"none"});y(e),B(i("success.remoteAdded")||"Git remote configured"),$(""),S("")}catch(n){O(`${i("errors.failedToAddRemote")}: ${n}`)}finally{D(!1)}},H=async()=>{const e=a();if(e)try{D(!0),O(null),B(null),await e.settings.git.pushGit(),B(i("success.pushSuccessful")||"Push successful"),U()}catch(t){O(`${i("errors.pushFailed")}: ${t}`)}finally{D(!1)}},G=async()=>{if(!confirm(i("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=a();if(e)try{D(!0),O(null),await e.settings.git.deleteGitRemote(),y(null),B(i("success.remoteRemoved")||"Remote removed")}catch(t){O(`${i("errors.failedToRemoveRemote")}: ${t}`)}finally{D(!1)}};return(()=>{var e=er(),o=e.firstChild,c=o.firstChild;c.firstChild;var p=c.nextSibling,w=o.nextSibling,y=w.firstChild,N=y.nextSibling;return c.$$click=()=>t.onBack(),u(c,()=>i("common.back"),null),u(p,()=>i("settings.title")),y.$$click=()=>l("members"),u(y,()=>i("settings.members")),N.$$click=()=>l("workspace"),u(N,()=>i("settings.workspace")),u(w,n(h,{get when(){return W()},get children(){var e=Fi();return e.$$click=()=>l("sync"),u(e,()=>i("settings.gitSync")),v(()=>g(e,"sync"===s()?Li:"")),e}}),null),u(e,n(h,{get when(){return P()},get children(){var e=qi();return u(e,P),v(()=>g(e,Ii)),e}}),null),u(e,n(h,{get when(){return A()},get children(){var e=qi();return u(e,A),v(()=>g(e,ji)),e}}),null),u(e,n(h,{get when(){return"members"===s()},get children(){var e=Yi(),t=e.firstChild;return u(t,()=>i("settings.members")),u(e,n(h,{get when(){return W()},get fallback(){return e=tr(),u(e,()=>i("settings.adminOnlyMembers")),e;var e},get children(){return[(k=Hi(),$=k.firstChild,C=$.firstChild.firstChild,S=C.nextSibling,L=S.nextSibling,E=$.nextSibling,u(C,()=>i("settings.nameColumn")),u(S,()=>i("settings.emailColumn")),u(L,()=>i("settings.roleColumn")),u(E,n(_,{get each(){return d()},children:e=>{return t=ir(),o=t.firstChild,s=o.nextSibling,l=s.nextSibling,u(o,()=>e.name),u(s,()=>e.email),u(l,n(h,{get when(){return e.id!==r()?.id},get fallback(){return e.workspace_role},get children(){var t=nr(),n=t.firstChild,r=n.nextSibling,o=r.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const n=a();if(n)try{D(!0),await n.users.updateWSMemberRole({user_id:e,role:t}),B(i("success.roleUpdated")||"Role updated"),U()}catch(r){O(`${i("errors.failedToUpdateRole")}: ${r}`)}finally{D(!1)}})(e.id,t.target.value)),u(n,()=>i("settings.roleAdmin")),u(r,()=>i("settings.roleEditor")),u(o,()=>i("settings.roleViewer")),v(()=>g(t,xi)),v(()=>t.value=e.workspace_role),t}})),t;var t,o,s,l}})),v(()=>g(k,Si)),k),(e=Ki(),t=e.firstChild,o=t.firstChild,s=o.nextSibling,l=s.firstChild,c=l.nextSibling,p=c.firstChild,w=p.nextSibling,b=w.nextSibling,y=c.nextSibling,t.addEventListener("submit",V),u(o,()=>i("settings.inviteNewMember")),l.$$input=e=>I(e.target.value),c.addEventListener("change",e=>T(e.target.value)),u(p,()=>i("settings.roleAdmin")),u(w,()=>i("settings.roleEditor")),u(b,()=>i("settings.roleViewer")),u(y,()=>i("common.invite")),u(e,n(h,{get when(){return f().length>0},get children(){return[(l=Gi(),u(l,()=>i("settings.pendingInvitations")),l),(e=Hi(),t=e.firstChild,r=t.firstChild.firstChild,o=r.nextSibling,a=o.nextSibling,s=t.nextSibling,u(r,()=>i("settings.emailColumn")),u(o,()=>i("settings.roleColumn")),u(a,()=>i("settings.sentColumn")),u(s,n(_,{get each(){return f()},children:e=>{return t=ir(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,u(n,()=>e.email),u(i,()=>e.role),u(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>g(e,Si)),e)];var e,t,r,o,a,s,l}}),null),v(n=>{var r=Di,o=Pi,a=Oi,d=i("settings.emailPlaceholder")||"Email address",c=R();return r!==n.e&&g(e,n.e=r),o!==n.t&&g(t,n.t=o),a!==n.a&&g(s,n.a=a),d!==n.o&&m(l,"placeholder",n.o=d),c!==n.i&&(y.disabled=n.i=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>l.value=x()),v(()=>c.value=j()),e)];var e,t,o,s,l,c,p,w,b,y,k,$,C,S,L,E}}),null),v(()=>g(e,Ci)),e}}),null),u(e,n(h,{get when(){return"workspace"===s()},get children(){var e=Zi(),r=e.firstChild,o=r.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.firstChild;return u(r,()=>i("settings.workspaceSettings")),u(e,n(h,{get when(){return W()},get fallback(){return e=tr(),u(e,()=>i("settings.adminOnlyWorkspace")),e;var e},get children(){var e=Ji(),t=e.firstChild,n=t.firstChild,r=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",F),u(n,()=>i("settings.workspaceName")),r.$$input=e=>E(e.target.value),u(o,()=>i("settings.saveWorkspaceSettings")),v(n=>{var i=Ei,r=Ni,a=zi,s=R();return i!==n.e&&g(e,n.e=i),r!==n.t&&g(t,n.t=r),a!==n.a&&g(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=L()),e}}),o),u(a,()=>i("settings.orgSettingsHint")),s.$$click=()=>t.onOpenOrgSettings(),u(s,()=>i("settings.openOrgSettings"),l),v(t=>{var n=Ci,i=Ui,r=Vi;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(o,t.t=i),r!==t.a&&g(s,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e}}),null),u(e,n(h,{get when(){return"sync"===s()},get children(){var e=Qi(),t=e.firstChild,r=t.nextSibling;return u(t,()=>i("settings.gitSynchronization")),u(r,()=>i("settings.gitSyncHint")),u(e,n(h,{get when(){return b()},children:e=>{const t=e().last_sync;return n=rr(),r=n.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,c=d.nextSibling,h=c.firstChild,p=h.nextSibling,u(o,()=>i("settings.urlColumn")),u(a,()=>i("settings.lastSyncColumn")),u(s,()=>i("common.actions")),u(l,()=>e().url),u(d,()=>t?new Date(t).toLocaleString():i("settings.never")),h.$$click=H,u(h,()=>i("common.push")),p.$$click=G,u(p,()=>i("common.remove")),v(e=>{var t=Si,i=Bi,r=R(),o=Wi,a=R(),s=Mi;return t!==e.e&&g(n,e.e=t),i!==e.t&&g(c,e.t=i),r!==e.a&&(h.disabled=e.a=r),o!==e.o&&g(h,e.o=o),a!==e.i&&(p.disabled=e.i=a),s!==e.n&&g(p,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),n;var n,r,o,a,s,l,d,c,h,p}}),null),u(e,n(h,{get when(){return!b()},get children(){var e=Xi(),t=e.firstChild,n=t.nextSibling,r=n.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,c=d.nextSibling,h=s.nextSibling;return u(t,()=>i("settings.addNewRemote")),n.addEventListener("submit",q),u(o,()=>i("settings.repositoryUrl")),a.$$input=e=>$(e.target.value),u(l,()=>i("settings.personalAccessToken")),d.$$input=e=>S(e.target.value),u(c,()=>i("settings.tokenHint")),u(h,()=>i("settings.addRemote")),v(t=>{var o=Ai,l=Ei,u=Ni,v=i("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",p=Ni,_=i("settings.tokenPlaceholder")||"ghp_...",f=Ri,w=zi,b=R();return o!==t.e&&g(e,t.e=o),l!==t.t&&g(n,t.t=l),u!==t.a&&g(r,t.a=u),v!==t.o&&m(a,"placeholder",t.o=v),p!==t.i&&g(s,t.i=p),_!==t.n&&m(d,"placeholder",t.n=_),f!==t.s&&g(c,t.s=f),w!==t.h&&g(h,t.h=w),b!==t.r&&(h.disabled=t.r=b),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>a.value=k()),v(()=>d.value=C()),e}}),null),v(t=>{var n=Ci,i=Ri;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(r,t.t=i),t},{e:void 0,t:void 0}),e}}),null),v(t=>{var n=yi,i=ki,r=$i,a=Ti,l="members"===s()?Li:"",d="workspace"===s()?Li:"";return n!==t.e&&g(e,t.e=n),i!==t.t&&g(o,t.t=i),r!==t.a&&g(c,t.a=r),a!==t.o&&g(w,t.o=a),l!==t.i&&g(y,t.i=l),d!==t.n&&g(N,t.n=d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}l(["click","input"]);const ar="_settings_qni6l_1",sr="_header_qni6l_7",lr="_backButton_qni6l_20",dr="_section_qni6l_36",cr="_table_qni6l_45",ur="_roleSelect_qni6l_63",hr="_error_qni6l_69",vr="_success_qni6l_77",gr="_tabs_qni6l_85",pr="_activeTab_qni6l_107",_r="_settingsForm_qni6l_112",fr="_formItem_qni6l_119",mr="_saveButton_qni6l_138",wr="_inviteSection_qni6l_157",br="_inviteForm_qni6l_161",yr="_formGroup_qni6l_172";var kr=y("<div>"),$r=y("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),Cr=y("<h4>"),Sr=y("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=member></option></select><button type=submit>"),xr=y("<section><h3>"),Ir=y("<form><div><label></label><input type=text required></div><button type=submit>"),jr=y("<div><header><button>‚Üê </button><h2></h2></header><div><button></button><button>"),Tr=y("<p>"),Lr=y("<select><option value=owner></option><option value=admin></option><option value=member>"),Er=y("<tr><td></td><td></td><td>");function Nr(t){const{t:i}=M(),{user:r,api:o}=Nn(),[a,s]=e("members"),[l,d]=e([]),[p,f]=e([]),[w,b]=e(""),[y,k]=e("member"),[$,S]=e(""),[x,I]=e(""),[j,T]=e(!1),[L,E]=e(null),[N,z]=e(null),R=C(()=>o().org(t.orgId)),D=C(()=>{const e=r()?.organizations?.find(e=>e.organization_id===t.orgId);return e?.role}),P=C(()=>{const e=D();return e===_e||e===fe}),O=async()=>{const e=R();try{if(T(!0),E(null),"members"===a()&&P()){const[t,n]=await Promise.all([e.users.listUsers(),e.invitations.listOrgInvitations()]);d(t.users?.filter(e=>!!e)||[]),f(n.invitations?.filter(e=>!!e)||[])}if("settings"===a()){const t=await e.organizations.getOrganization();S(t.name),I(t.name)}}catch(t){E(`${i("errors.failedToLoad")}: ${t}`)}finally{T(!1)}};c(()=>{O()});const A=async e=>{e.preventDefault();const t=R();if(w())try{T(!0),await t.invitations.createOrgInvitation({email:w(),role:y()}),b(""),z(i("success.invitationSent")||"Invitation sent successfully"),O()}catch(n){E(`${i("errors.failedToInvite")}: ${n}`)}finally{T(!1)}},B=async e=>{e.preventDefault();const t=R();try{T(!0),E(null),z(null),$()!==x()&&$().trim()&&await t.organizations.updateOrganization({name:$().trim()}),I($().trim()),z(i("success.orgSettingsSaved")||"Organization settings saved")}catch(n){E(`${i("errors.failedToSave")}: ${n}`)}finally{T(!1)}};return(()=>{var e=jr(),o=e.firstChild,d=o.firstChild;d.firstChild;var c=d.nextSibling,f=o.nextSibling,C=f.firstChild,x=C.nextSibling;return d.$$click=()=>t.onBack(),u(d,()=>i("common.back"),null),u(c,()=>i("settings.organizationSettings")),C.$$click=()=>s("members"),u(C,()=>i("settings.members")),x.$$click=()=>s("settings"),u(x,()=>i("settings.settings")),u(e,n(h,{get when(){return L()},get children(){var e=kr();return u(e,L),v(()=>g(e,hr)),e}}),null),u(e,n(h,{get when(){return N()},get children(){var e=kr();return u(e,N),v(()=>g(e,vr)),e}}),null),u(e,n(h,{get when(){return"members"===a()},get children(){var e=xr(),t=e.firstChild;return u(t,()=>i("settings.organizationMembers")),u(e,n(h,{get when(){return P()},get fallback(){return e=Tr(),u(e,()=>i("settings.adminOnlyMembers")),e;var e},get children(){return[(C=$r(),S=C.firstChild,x=S.firstChild.firstChild,I=x.nextSibling,L=I.nextSibling,N=S.nextSibling,u(x,()=>i("settings.nameColumn")),u(I,()=>i("settings.emailColumn")),u(L,()=>i("settings.roleColumn")),u(N,n(_,{get each(){return l()},children:e=>{return t=Er(),o=t.firstChild,a=o.nextSibling,s=a.nextSibling,u(o,()=>e.name),u(a,()=>e.email),u(s,n(h,{get when(){return e.id!==r()?.id},get fallback(){return e.org_role},get children(){var t=Lr(),n=t.firstChild,r=n.nextSibling,o=r.nextSibling;return t.addEventListener("change",t=>(async(e,t)=>{const n=R();try{T(!0),await n.users.updateOrgMemberRole({user_id:e,role:t}),z(i("success.roleUpdated")||"Role updated"),O()}catch(r){E(`${i("errors.failedToUpdateRole")}: ${r}`)}finally{T(!1)}})(e.id,t.target.value)),u(n,()=>i("settings.roleOwner")),u(r,()=>i("settings.roleAdmin")),u(o,()=>i("settings.roleMember")),v(()=>g(t,ur)),v(()=>t.value=e.org_role),t}})),t;var t,o,a,s}})),v(()=>g(C,cr)),C),(e=Sr(),t=e.firstChild,o=t.firstChild,a=o.nextSibling,s=a.firstChild,d=s.nextSibling,c=d.firstChild,f=c.nextSibling,$=d.nextSibling,t.addEventListener("submit",A),u(o,()=>i("settings.inviteNewMember")),s.$$input=e=>b(e.target.value),d.addEventListener("change",e=>k(e.target.value)),u(c,()=>i("settings.roleAdmin")),u(f,()=>i("settings.roleMember")),u($,()=>i("common.invite")),u(e,n(h,{get when(){return p().length>0},get children(){return[(l=Cr(),u(l,()=>i("settings.pendingInvitations")),l),(e=$r(),t=e.firstChild,r=t.firstChild.firstChild,o=r.nextSibling,a=o.nextSibling,s=t.nextSibling,u(r,()=>i("settings.emailColumn")),u(o,()=>i("settings.roleColumn")),u(a,()=>i("settings.sentColumn")),u(s,n(_,{get each(){return p()},children:e=>{return t=Er(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,u(n,()=>e.email),u(i,()=>e.role),u(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),v(()=>g(e,cr)),e)];var e,t,r,o,a,s,l}}),null),v(n=>{var r=wr,o=br,l=yr,d=i("settings.emailPlaceholder")||"Email address",c=j();return r!==n.e&&g(e,n.e=r),o!==n.t&&g(t,n.t=o),l!==n.a&&g(a,n.a=l),d!==n.o&&m(s,"placeholder",n.o=d),c!==n.i&&($.disabled=n.i=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v(()=>s.value=w()),v(()=>d.value=y()),e)];var e,t,o,a,s,d,c,f,$,C,S,x,I,L,N}}),null),v(()=>g(e,dr)),e}}),null),u(e,n(h,{get when(){return"settings"===a()},get children(){var e=xr(),t=e.firstChild;return u(t,()=>i("settings.organizationPreferences")),u(e,n(h,{get when(){return P()},get fallback(){return e=Tr(),u(e,()=>i("settings.adminOnlySettings")),e;var e},get children(){var e=Ir(),t=e.firstChild,n=t.firstChild,r=n.nextSibling,o=t.nextSibling;return e.addEventListener("submit",B),u(n,()=>i("settings.organizationName")),r.$$input=e=>S(e.target.value),u(o,()=>i("common.save")),v(n=>{var i=_r,r=fr,a=mr,s=j();return i!==n.e&&g(e,n.e=i),r!==n.t&&g(t,n.t=r),a!==n.a&&g(o,n.a=a),s!==n.o&&(o.disabled=n.o=s),n},{e:void 0,t:void 0,a:void 0,o:void 0}),v(()=>r.value=$()),e}}),null),v(()=>g(e,dr)),e}}),null),v(t=>{var n=ar,i=sr,r=lr,s=gr,l="members"===a()?pr:"",c="settings"===a()?pr:"";return n!==t.e&&g(e,t.e=n),i!==t.t&&g(o,t.t=i),r!==t.a&&g(d,t.a=r),s!==t.o&&g(f,t.o=s),l!==t.i&&g(C,t.i=l),c!==t.n&&g(x,t.n=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})()}l(["click","input"]);const zr="_profile_179j3_1",Rr="_header_179j3_7",Dr="_backButton_179j3_20",Pr="_userInfoSection_179j3_36",Or="_avatarLarge_179j3_46",Ar="_avatarImageLarge_179j3_58",Br="_initialsLarge_179j3_64",Wr="_userDetails_179j3_70",Mr="_userName_179j3_74",Ur="_userEmail_179j3_80",Vr="_userRole_179j3_85",Fr="_section_179j3_95",qr="_error_179j3_104",Hr="_success_179j3_112",Gr="_settingsForm_179j3_120",Kr="_formItem_179j3_127",Yr="_checkboxLabel_179j3_146",Jr="_saveButton_179j3_159",Zr="_orgList_179j3_178",Xr="_orgItem_179j3_184",Qr="_orgInfo_179j3_194",eo="_orgName_179j3_200",to="_orgNameLink_179j3_204",no="_orgRole_179j3_214",io="_emptyState_179j3_223";var ro=y("<div>"),oo=y("<div><header><button>‚Üê </button><h2>"),ao=y("<span>"),so=y("<section><div></div><div><h3></h3><p>"),lo=y("<section><h3>"),co=y("<div><label><input type=checkbox>"),uo=y("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><button type=submit>"),ho=y("<img referrerpolicy=no-referrer>"),vo=y("<p>"),go=y("<a>"),po=y("<div><div><span>");function _o(t){const{t:i}=M(),{user:r,api:o,wsApi:a}=Nn(),[s,l]=e("light"),[d,p]=e("en"),[f,w]=e(!0),[b,y]=e(!1),[k,$]=e(null),[C,S]=e(null),x=()=>{const e=r(),t=e?.name||e?.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()};c(()=>{const e=r();l(e?.settings?.theme||"light"),p(e?.settings?.language||"en")});c(()=>{(async()=>{const e=r();if(e)try{y(!0),$(null);const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);t&&w(t.settings?.notifications??!0)}catch(t){$(`${i("errors.failedToLoad")}: ${t}`)}finally{y(!1)}})()});const I=async e=>{e.preventDefault();const t=a();try{y(!0),$(null),S(null);const e={theme:s(),language:d()},n=[o().auth.updateUserSettings({settings:e})];if(t){const e={notifications:f()};n.push(t.settings.updateWSMembershipSettings({settings:e}))}await Promise.all(n),S(i("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(n){$(`${i("errors.failedToSave")}: ${n}`)}finally{y(!1)}};return(()=>{var e=oo(),o=e.firstChild,a=o.firstChild;a.firstChild;var c=a.nextSibling;return a.$$click=()=>t.onBack(),u(a,()=>i("common.back"),null),u(c,()=>i("profile.title")),u(e,n(h,{get when(){return k()},get children(){var e=ro();return u(e,k),v(()=>g(e,qr)),e}}),null),u(e,n(h,{get when(){return C()},get children(){var e=ro();return u(e,C),v(()=>g(e,Hr)),e}}),null),u(e,n(h,{get when(){return r()},children:e=>{return[(B=so(),W=B.firstChild,M=W.nextSibling,U=M.firstChild,V=U.nextSibling,u(W,n(h,{get when(){return(()=>{const e=r()?.oauth_identities;if(!e)return null;for(const t of e)if(t.avatar_url)return t.avatar_url;return null})()},get fallback(){return e=ao(),u(e,x),v(()=>g(e,Br)),e;var e},children:t=>{return n=ho(),v(i=>{var r=t(),o=e().name||"User",a=Ar;return r!==i.e&&m(n,"src",i.e=r),o!==i.t&&m(n,"alt",i.t=o),a!==i.a&&g(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),u(U,()=>e().name),u(V,()=>e().email),u(M,n(h,{get when(){return e().workspace_role},get children(){var t=ao();return u(t,()=>e().workspace_role),v(()=>g(t,Vr)),t}}),null),v(e=>{var t=Pr,n=Or,i=Wr,r=Mr,o=Ur;return t!==e.e&&g(B,e.e=t),n!==e.t&&g(W,e.t=n),i!==e.a&&g(M,e.a=i),r!==e.o&&g(U,e.o=r),o!==e.i&&g(V,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),B),(O=lo(),A=O.firstChild,u(A,()=>i("profile.myOrganizations")),u(O,n(h,{get when(){return e().organizations?.length},get fallback(){return e=vo(),u(e,()=>i("profile.noOrganizations")),v(()=>g(e,io)),e;var e},get children(){var i=ro();return u(i,n(_,{get each(){return e().organizations},children:e=>{const i=zn(e.organization_name||"organization"),r=`/o/${e.organization_id}+${i}/settings`,o=e.organization_name||e.organization_id;return a=po(),s=a.firstChild,l=s.firstChild,u(s,n(h,{get when(){return e.role===fe||e.role===_e},get fallback(){return e=ao(),u(e,o),v(()=>g(e,eo)),e;var e},get children(){var n=go();return n.$$click=n=>{n.preventDefault(),t.onOrgSettings(e)},m(n,"href",r),u(n,o),v(()=>g(n,to)),n}}),l),u(l,()=>e.role),v(e=>{var t=Xr,n=Qr,i=no;return t!==e.e&&g(a,e.e=t),n!==e.t&&g(s,e.t=n),i!==e.a&&g(l,e.a=i),e},{e:void 0,t:void 0,a:void 0}),a;var a,s,l}})),v(()=>g(i,Zr)),i}}),null),v(()=>g(O,Fr)),O),(o=uo(),a=o.firstChild,c=a.nextSibling,y=c.firstChild,k=y.firstChild,$=k.nextSibling,C=$.firstChild,S=C.nextSibling,j=S.nextSibling,T=y.nextSibling,L=T.firstChild,E=L.nextSibling,N=E.firstChild,z=N.nextSibling,R=z.nextSibling,D=R.nextSibling,P=T.nextSibling,u(a,()=>i("settings.personalSettings")),c.addEventListener("submit",I),u(k,()=>i("settings.theme")),$.addEventListener("change",e=>l(e.target.value)),u(C,()=>i("settings.themeLight")),u(S,()=>i("settings.themeDark")),u(j,()=>i("settings.themeSystem")),u(L,()=>i("settings.language")),E.addEventListener("change",e=>p(e.target.value)),u(N,()=>i("settings.languageEn")),u(z,()=>i("settings.languageFr")),u(R,()=>i("settings.languageDe")),u(D,()=>i("settings.languageEs")),u(c,n(h,{get when(){return e().workspace_id},get children(){var e=co(),t=e.firstChild,n=t.firstChild;return n.addEventListener("change",e=>w(e.currentTarget.checked)),u(t,()=>i("settings.enableNotifications"),null),v(n=>{var i=Kr,r=Yr;return i!==n.e&&g(e,n.e=i),r!==n.t&&g(t,n.t=r),n},{e:void 0,t:void 0}),v(()=>n.checked=f()),e}}),P),u(P,()=>i("settings.saveChanges")),v(e=>{var t=Fr,n=Gr,i=Kr,r=Kr,a=Jr,s=b();return t!==e.e&&g(o,e.e=t),n!==e.t&&g(c,e.t=n),i!==e.a&&g(y,e.a=i),r!==e.o&&g(T,e.o=r),a!==e.i&&g(P,e.i=a),s!==e.n&&(P.disabled=e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>$.value=s()),v(()=>E.value=d()),o)];var o,a,c,y,k,$,C,S,j,T,L,E,N,z,R,D,P,O,A,B,W,M,U,V}}),null),v(t=>{var n=zr,i=Rr,r=Dr;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(o,t.t=i),r!==t.a&&g(a,t.a=r),t},{e:void 0,t:void 0,a:void 0}),e})()}l(["click"]);const fo="_authContainer_1ksl8_1",mo="_authForm_1ksl8_9",wo="_formGroup_1ksl8_24",bo="_error_1ksl8_62",yo="_toggle_1ksl8_72",ko="_authFooter_1ksl8_87",$o="_oauthSection_1ksl8_104",Co="_divider_1ksl8_108",So="_oauthButtons_1ksl8_127",xo="_oauthIcon_1ksl8_133",Io="_googleButton_1ksl8_140",jo="_microsoftButton_1ksl8_141",To="_githubButton_1ksl8_142",Lo="_oauthButton_1ksl8_127";var Eo=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),No=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),zo=y('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),Ro=y("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),Do=y("<div><div><span></span></div><div>"),Po=y("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),Oo=y("<div>"),Ao=y("<a>");const Bo={[we]:function(){return e=Eo(),v(()=>m(e,"class",xo)),e;var e},[be]:function(){return e=No(),v(()=>m(e,"class",xo)),e;var e},[ye]:function(){return e=zo(),v(()=>m(e,"class",xo)),e;var e}},Wo={[we]:{style:Io,labelKey:"auth.loginWithGoogle"},[be]:{style:jo,labelKey:"auth.loginWithMicrosoft"},[ye]:{style:To,labelKey:"auth.loginWithGitHub"}};const Mo=yn((e,t)=>fetch(e,t));function Uo(i){const{t:r}=M(),[o]=t(()=>Mo.auth.listProviders().then(e=>e.providers)),[a,s]=e(!1),[l,d]=e(""),[c,p]=e(""),[w,b]=e(""),[y,k]=e(null),[$,C]=e(!1),S=async e=>{e.preventDefault(),k(null),C(!0);try{const e=a()?await Mo.auth.register({email:l(),password:c(),name:w()}):await Mo.auth.login({email:l(),password:c()});e.token&&e.user?i.onLogin(e.token,e.user):k("Invalid response from server")}catch(t){k(t instanceof mn?t.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{C(!1)}};return E=Po(),N=E.firstChild,z=N.firstChild,R=z.nextSibling,D=R.firstChild,P=D.nextSibling,O=R.nextSibling,A=O.firstChild,B=A.nextSibling,W=O.nextSibling,U=W.nextSibling,V=U.firstChild,F=U.nextSibling,q=F.firstChild,N.addEventListener("submit",S),u(z,(x=f(()=>!!a()),()=>x()?r("auth.createAccount"):r("auth.loginTitle"))),u(N,(I=f(()=>!!y()),()=>{return I()&&(e=Oo(),u(e,y),v(()=>g(e,bo)),e);var e}),R),u(N,n(h,{get when(){return a()},get children(){var e=Ro(),t=e.firstChild,n=t.nextSibling;return u(t,()=>r("auth.name")),n.$$input=e=>b(e.target.value),v(()=>g(e,wo)),v(()=>n.value=w()),e}}),R),u(D,()=>r("auth.email")),P.$$input=e=>d(e.target.value),u(A,()=>r("auth.password")),B.$$input=e=>p(e.target.value),u(W,(j=f(()=>!!$()),()=>j()?r("auth.pleaseWait"):f(()=>!!a())()?r("auth.register"):r("auth.login"))),u(N,n(h,{get when(){return(o()??[]).length>0},get children(){var e=Do(),t=e.firstChild,i=t.firstChild,a=t.nextSibling;return u(i,()=>r("auth.or")),u(a,n(_,{get each(){return o()},children:e=>{const t=function(e){const t=Wo[e];return t?{style:t.style,label:t.labelKey}:{style:Lo,label:e.charAt(0).toUpperCase()+e.slice(1)}}(e),i=e in Wo,o=Bo[e];return a=Ao(),m(a,"href",`/api/auth/oauth/${e}`),u(a,o&&n(o,{}),null),u(a,()=>i?r(t.label):t.label,null),v(()=>g(a,t.style)),a;var a}})),v(n=>{var i=$o,r=Co,o=So;return i!==n.e&&g(e,n.e=i),r!==n.t&&g(t,n.t=r),o!==n.a&&g(a,n.a=o),n},{e:void 0,t:void 0,a:void 0}),e}}),U),u(U,(T=f(()=>!!a()),()=>T()?r("auth.alreadyHaveAccount"):r("auth.dontHaveAccount")),V),V.$$click=()=>s(!a()),u(V,(L=f(()=>!!a()),()=>L()?r("auth.login"):r("auth.register"))),q.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},u(q,()=>r("app.privacyPolicy")),v(e=>{var t=fo,n=mo,i=wo,r=wo,o=a()?"new-password":"current-password",s=$(),l=yo,d=ko;return t!==e.e&&g(E,e.e=t),n!==e.t&&g(N,e.t=n),i!==e.a&&g(R,e.a=i),r!==e.o&&g(O,e.o=r),o!==e.i&&m(B,"autocomplete",e.i=o),s!==e.n&&(W.disabled=e.n=s),l!==e.s&&g(U,e.s=l),d!==e.h&&g(F,e.h=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),v(()=>P.value=l()),v(()=>B.value=c()),E;var x,I,j,T,L,E,N,z,R,D,P,O,A,B,W,U,V,F,q}l(["input","click"]);const Vo="_container_mfa6v_1",Fo="_content_mfa6v_9",qo="_header_mfa6v_19",Ho="_section_mfa6v_36",Go="_footer_mfa6v_49",Ko="_backButton_mfa6v_57";var Yo=y("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and tables are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function Jo(){return e=Yo(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(l=s.firstChild).$$click=()=>window.history.back(),v(d=>{var c=Vo,u=Fo,h=qo,v=Ho,p=Ho,_=Ho,f=Ho,m=Go,w=Ko;return c!==d.e&&g(e,d.e=c),u!==d.t&&g(t,d.t=u),h!==d.a&&g(n,d.a=h),v!==d.o&&g(i,d.o=v),p!==d.i&&g(r,d.i=p),_!==d.n&&g(o,d.n=_),f!==d.s&&g(a,d.s=f),m!==d.h&&g(s,d.h=m),w!==d.r&&g(l,d.r=w),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,n,i,r,o,a,s,l}l(["click"]);const Zo="_container_mfa6v_1",Xo="_content_mfa6v_9",Qo="_header_mfa6v_19",ea="_section_mfa6v_36",ta="_footer_mfa6v_49",na="_backButton_mfa6v_57";var ia=y("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, data, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the ‚ÄúContent‚Äù) and the trademarks, service marks, and logos contained therein (the ‚ÄúMarks‚Äù) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function ra(){return e=ia(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,(d=l.firstChild).$$click=()=>window.history.back(),v(c=>{var u=Zo,h=Xo,v=Qo,p=ea,_=ea,f=ea,m=ea,w=ea,b=ta,y=na;return u!==c.e&&g(e,c.e=u),h!==c.t&&g(t,c.t=h),v!==c.a&&g(n,c.a=v),p!==c.o&&g(i,c.o=p),_!==c.i&&g(r,c.i=_),f!==c.n&&g(o,c.n=f),m!==c.s&&g(a,c.s=m),w!==c.h&&g(s,c.h=w),b!==c.r&&g(l,c.r=b),y!==c.d&&g(d,c.d=y),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,n,i,r,o,a,s,l,d}l(["click"]);const oa="_banner_172qk_1",aa="_content_172qk_23",sa="_title_172qk_27",la="_message_172qk_32",da="_actions_172qk_37",ca="_installButton_172qk_42",ua="_dismissButton_172qk_56";var ha=y("<div><div><div></div><div></div></div><div><button></button><button>");const va="mddb_pwa_dismissed";function ga(){const{t:t}=M(),[i,r]=e(null),[o,a]=e(!1);S(()=>{if(function(){const e=localStorage.getItem(va);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),r(e),a(!0)},t=()=>{a(!1),r(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),L(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=i();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),r(null)},l=()=>{localStorage.setItem(va,(new Date).toISOString()),a(!1)};return n(h,{get when(){return f(()=>!!o())()&&i()},get children(){var e=ha(),n=e.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,a=o.firstChild,d=a.nextSibling;return u(i,()=>t("pwa.installTitle")),u(r,()=>t("pwa.installMessage")),a.$$click=l,u(a,()=>t("pwa.dismissButton")),d.$$click=s,u(d,()=>t("pwa.installButton")),v(t=>{var s=oa,l=aa,c=sa,u=la,h=da,v=ua,p=ca;return s!==t.e&&g(e,t.e=s),l!==t.t&&g(n,t.t=l),c!==t.a&&g(i,t.a=c),u!==t.o&&g(r,t.o=u),h!==t.i&&g(o,t.i=h),v!==t.n&&g(a,t.n=v),p!==t.s&&g(d,t.s=p),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}})}l(["click"]);const pa="_overlay_v0iwf_1",_a="_modal_v0iwf_11",fa="_header_v0iwf_28",ma="_formGroup_v0iwf_53",wa="_primaryButton_v0iwf_76",ba="_secondaryButton_v0iwf_99",ya="_actions_v0iwf_113",ka="_error_v0iwf_127";var $a=y("<button type=button>"),Ca=y("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Sa=y("<div>");function xa(t){const{t:i}=M(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},p=e=>{t.isFirstOrg||e.target!==e.currentTarget||t.onClose()};return k=Ca(),$=k.firstChild,C=$.firstChild,S=C.firstChild,x=S.nextSibling,I=C.nextSibling,j=I.firstChild,T=j.firstChild,L=T.nextSibling,N=j.nextSibling,z=N.firstChild,k.$$click=p,u(S,(_=f(()=>!!t.isFirstOrg),()=>_()?i("createOrg.firstOrgTitle"):i("createOrg.title"))),u(x,(w=f(()=>!!t.isFirstOrg),()=>w()?i("createOrg.firstOrgDescription"):i("createOrg.description"))),u($,(b=f(()=>!!l()),()=>{return b()&&(e=Sa(),u(e,l),v(()=>g(e,ka)),e);var e}),I),I.addEventListener("submit",c),u(T,()=>i("createOrg.nameLabel")),L.$$input=e=>o(e.target.value),u(N,n(h,{get when(){return!t.isFirstOrg},get children(){var e=$a();return e.$$click=()=>t.onClose(),u(e,()=>i("common.cancel")),v(()=>g(e,ba)),e}}),z),u(z,(y=f(()=>!!a()),()=>y()?i("common.creating"):i("createOrg.create"))),v(e=>{var n=pa,o=_a,s=fa,l=ma,d=i("createOrg.namePlaceholder")||"",c=ya,u=wa,h=!r().trim()||a(),v=t.isFirstOrg?{flex:1}:void 0;return n!==e.e&&g(k,e.e=n),o!==e.t&&g($,e.t=o),s!==e.a&&g(C,e.a=s),l!==e.o&&g(j,e.o=l),d!==e.i&&m(L,"placeholder",e.i=d),c!==e.n&&g(N,e.n=c),u!==e.s&&g(z,e.s=u),h!==e.h&&(z.disabled=e.h=h),e.r=E(z,v,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>L.value=r()),k;var _,w,b,y,k,$,C,S,x,I,j,T,L,N,z}l(["click","input"]);var Ia=y("<button type=button>"),ja=y("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),Ta=y("<div>");function La(t){const{t:i}=M(),[r,o]=e(""),[a,s]=e(!1),[l,d]=e(null),c=async e=>{if(e.preventDefault(),r().trim())try{s(!0),d(null),await t.onCreate({name:r().trim()}),t.onClose()}catch(n){d(String(n))}finally{s(!1)}},p=e=>{t.isFirstWorkspace||e.target!==e.currentTarget||t.onClose()};return k=ja(),$=k.firstChild,C=$.firstChild,S=C.firstChild,x=S.nextSibling,I=C.nextSibling,j=I.firstChild,T=j.firstChild,L=T.nextSibling,N=j.nextSibling,z=N.firstChild,k.$$click=p,u(S,(_=f(()=>!!t.isFirstWorkspace),()=>_()?i("createWorkspace.firstWorkspaceTitle"):i("createWorkspace.title"))),u(x,(w=f(()=>!!t.isFirstWorkspace),()=>w()?i("createWorkspace.firstWorkspaceDescription"):i("createWorkspace.description"))),u($,(b=f(()=>!!l()),()=>{return b()&&(e=Ta(),u(e,l),v(()=>g(e,ka)),e);var e}),I),I.addEventListener("submit",c),u(T,()=>i("createWorkspace.nameLabel")),L.$$input=e=>o(e.target.value),u(N,n(h,{get when(){return!t.isFirstWorkspace},get children(){var e=Ia();return e.$$click=()=>t.onClose(),u(e,()=>i("common.cancel")),v(()=>g(e,ba)),e}}),z),u(z,(y=f(()=>!!a()),()=>y()?i("common.creating"):i("createWorkspace.create"))),v(e=>{var n=pa,o=_a,s=fa,l=ma,d=i("createWorkspace.namePlaceholder")||"",c=ya,u=wa,h=!r().trim()||a(),v=t.isFirstWorkspace?{flex:1}:void 0;return n!==e.e&&g(k,e.e=n),o!==e.t&&g($,e.t=o),s!==e.a&&g(C,e.a=s),l!==e.o&&g(j,e.o=l),d!==e.i&&m(L,"placeholder",e.i=d),c!==e.n&&g(N,e.n=c),u!==e.s&&g(z,e.s=u),h!==e.h&&(z.disabled=e.h=h),e.r=E(z,v,e.r),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v(()=>L.value=r()),k;var _,w,b,y,k,$,C,S,x,I,j,T,L,N,z}l(["click","input"]);const Ea="_overlay_1l8b3_1",Na="_modal_1l8b3_11",za="_header_1l8b3_28",Ra="_error_1l8b3_43",Da="_setupBox_1l8b3_53",Pa="_setupHeader_1l8b3_61",Oa="_setupTitle_1l8b3_70",Aa="_createLink_1l8b3_75",Ba="_setupSteps_1l8b3_93",Wa="_subSteps_1l8b3_109",Ma="_formGroup_1l8b3_119",Ua="_actions_1l8b3_137",Va="_primaryButton_1l8b3_143",Fa="_secondaryButton_1l8b3_166";var qa=y('<div><div><header><h2></h2><p></p></header><div><div><span></span><a href=https://www.notion.so/profile/integrations/form/new-integration target=_blank rel="noopener noreferrer"> &#x2197;</a></div><ol><li><ol><li></li><li></li><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li><li><ol><li></li><li></li></ol></li></ol></div><form><div><label></label><input type=password autofocus></div><div><button type=button></button><button type=submit>'),Ha=y("<div>");function Ga(t){const{t:n}=M(),[i,r]=e(""),[o,a]=e(!1),[s,l]=e(null),d=e=>{"Escape"!==e.key||o()||t.onClose()};S(()=>{document.addEventListener("keydown",d)}),L(()=>{document.removeEventListener("keydown",d)});const c=async e=>{if(e.preventDefault(),i().trim())try{a(!0),l(null),await t.onImport({notionToken:i().trim()}),t.onClose()}catch(n){l(String(n))}finally{a(!1)}},h=e=>{e.target===e.currentTarget&&t.onClose()};return w=qa(),b=w.firstChild,y=b.firstChild,k=y.firstChild,$=k.nextSibling,C=y.nextSibling,x=C.firstChild,I=x.firstChild,j=I.nextSibling,T=j.firstChild,E=x.nextSibling,N=E.firstChild,z=N.firstChild,R=z.firstChild,D=R.nextSibling,P=D.nextSibling,O=P.nextSibling,A=N.nextSibling,B=A.firstChild,W=B.firstChild,U=W.nextSibling,V=A.nextSibling,F=V.firstChild,q=F.firstChild,H=q.nextSibling,G=C.nextSibling,K=G.firstChild,Y=K.firstChild,J=Y.nextSibling,Z=K.nextSibling,X=Z.firstChild,Q=X.nextSibling,w.$$click=h,u(k,()=>n("notionImport.title")),u($,()=>n("notionImport.description")),u(b,(p=f(()=>!!s()),()=>{return p()&&(e=Ha(),u(e,s),v(()=>g(e,Ra)),e);var e}),C),u(I,()=>n("notionImport.setupTitle")),u(j,()=>n("notionImport.createIntegration"),T),u(N,()=>n("notionImport.step1Header"),z),u(R,()=>n("notionImport.step1a")),u(D,()=>n("notionImport.step1b")),u(P,()=>n("notionImport.step1c")),u(O,()=>n("notionImport.step1d")),u(A,()=>n("notionImport.step2Header"),B),u(W,()=>n("notionImport.step2a")),u(U,()=>n("notionImport.step2b")),u(V,()=>n("notionImport.step3Header"),F),u(q,()=>n("notionImport.step3a")),u(H,()=>n("notionImport.step3b")),G.addEventListener("submit",c),u(Y,()=>n("notionImport.notionToken")),J.$$input=e=>r(e.target.value),X.$$click=()=>t.onClose(),u(X,()=>n("common.cancel")),u(Q,(_=f(()=>!!o()),()=>_()?n("notionImport.importing"):n("notionImport.startImport"))),v(e=>{var t=Ea,r=Na,a=za,s=Da,l=Pa,d=Oa,c=Aa,u=Ba,h=Wa,v=Wa,p=Wa,_=Ma,f=n("notionImport.notionTokenPlaceholder")||"",k=Ua,$=Fa,S=Va,T=!i().trim()||o();return t!==e.e&&g(w,e.e=t),r!==e.t&&g(b,e.t=r),a!==e.a&&g(y,e.a=a),s!==e.o&&g(C,e.o=s),l!==e.i&&g(x,e.i=l),d!==e.n&&g(I,e.n=d),c!==e.s&&g(j,e.s=c),u!==e.h&&g(E,e.h=u),h!==e.r&&g(z,e.r=h),v!==e.d&&g(B,e.d=v),p!==e.l&&g(F,e.l=p),_!==e.u&&g(K,e.u=_),f!==e.c&&m(J,"placeholder",e.c=f),k!==e.w&&g(Z,e.w=k),$!==e.m&&g(X,e.m=$),S!==e.f&&g(Q,e.f=S),T!==e.y&&(Q.disabled=e.y=T),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),v(()=>J.value=i()),w;var p,_,w,b,y,k,$,C,x,I,j,T,E,N,z,R,D,P,O,A,B,W,U,V,F,q,H,G,K,Y,J,Z,X,Q}l(["click","input"]);const Ka="_banner_tmw21_1",Ya="_success_tmw21_11",Ja="_error_tmw21_16",Za="_cancelled_tmw21_21",Xa="_icon_tmw21_26",Qa="_content_tmw21_30",es="_message_tmw21_37",ts="_progress_tmw21_41",ns="_stats_tmw21_46",is="_stat_tmw21_46",rs="_statValue_tmw21_58",os="_actions_tmw21_63",as="_cancelButton_tmw21_68",ss="_dismissButton_tmw21_82",ls="_spinner_tmw21_95";var ds=y("<span>&#x21BB;"),cs=y("<span>&#x2713;"),us=y("<span>&#x2717;"),hs=y("<span>&#x26A0;"),vs=y("<span>/<!>: "),gs=y("<span><span></span> "),ps=y("<div>"),_s=y("<span>"),fs=y("<button>"),ms=y("<div><span></span><div><span></span></div><div>");function ws(e){const{t:t}=M(),i=()=>e.status,r=()=>{switch(i().status){case"running":return t("notionImport.importInProgress");case"completed":return t("notionImport.importCompleted");case"failed":return t("notionImport.importFailed");case"cancelled":return t("notionImport.importCancelled");default:return""}},o=()=>{switch(i().status){case"running":return e=ds(),v(()=>g(e,ls)),e;case"completed":return cs();case"failed":return us();case"cancelled":return hs();default:return null}var e},a=()=>["completed","failed","cancelled"].includes(i().status);return s=ms(),l=s.firstChild,d=l.nextSibling,c=d.firstChild,p=d.nextSibling,u(l,o),u(c,r),u(d,n(h,{get when(){return f(()=>"running"===i().status)()&&i().message},get children(){var e=vs(),t=e.firstChild,n=t.nextSibling;return n.nextSibling,u(e,()=>i().progress,t),u(e,()=>i().total,n),u(e,()=>i().message,null),v(()=>g(e,ts)),e}}),null),u(d,n(h,{get when(){return f(()=>!!a())()&&(i().pages||i().databases||i().records)},get children(){var e=ps();return u(e,n(h,{get when(){return i().pages},get children(){var e=gs(),n=e.firstChild;return n.nextSibling,u(n,()=>i().pages),u(e,()=>t("notionImport.pagesImported"),null),v(t=>{var i=is,r=rs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),u(e,n(h,{get when(){return i().databases},get children(){var e=gs(),n=e.firstChild;return n.nextSibling,u(n,()=>i().databases),u(e,()=>t("notionImport.databasesImported"),null),v(t=>{var i=is,r=rs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),u(e,n(h,{get when(){return i().records},get children(){var e=gs(),n=e.firstChild;return n.nextSibling,u(n,()=>i().records),u(e,()=>t("notionImport.recordsImported"),null),v(t=>{var i=is,r=rs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),u(e,n(h,{get when(){return i().assets},get children(){var e=gs(),n=e.firstChild;return n.nextSibling,u(n,()=>i().assets),u(e,()=>t("notionImport.assetsImported"),null),v(t=>{var i=is,r=rs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),u(e,n(h,{get when(){return i().errors},get children(){var e=gs(),n=e.firstChild;return n.nextSibling,u(n,()=>i().errors),u(e,()=>t("notionImport.errorsEncountered"),null),v(t=>{var i=is,r=rs;return i!==t.e&&g(e,t.e=i),r!==t.t&&g(n,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(()=>g(e,ns)),e}}),null),u(d,n(h,{get when(){return f(()=>"failed"===i().status)()&&i().message},get children(){var e=_s();return u(e,()=>i().message),v(()=>g(e,ts)),e}}),null),u(p,n(h,{get when(){return"running"===i().status},get children(){var n=fs();return n.$$click=()=>e.onCancel(),u(n,()=>t("notionImport.cancel")),v(()=>g(n,as)),n}}),null),u(p,n(h,{get when(){return a()},get children(){var n=fs();return n.$$click=()=>e.onDismiss(),u(n,()=>t("notionImport.dismiss")),v(()=>g(n,ss)),n}}),null),v(e=>{var t=(()=>{switch(i().status){case"completed":return`${Ka} ${Ya}`;case"failed":return`${Ka} ${Ja}`;case"cancelled":return`${Ka} ${Za}`;default:return Ka}})(),n=Xa,r=Qa,o=es,a=os;return t!==e.e&&g(s,e.e=t),n!==e.t&&g(l,e.t=n),r!==e.a&&g(d,e.a=r),o!==e.o&&g(c,e.o=o),a!==e.i&&g(p,e.i=a),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),s;var s,l,d,c,p}function bs(e,t){S(()=>{const n=n=>{const i=e();i&&!i.contains(n.target)&&t()};document.addEventListener("mousedown",n),L(()=>{document.removeEventListener("mousedown",n)})})}l(["click"]);const ys="_userMenu_o60yu_1",ks="_avatarButton_o60yu_5",$s="_avatarImage_o60yu_24",Cs="_initials_o60yu_30",Ss="_dropdown_o60yu_37",xs="_userInfo_o60yu_50",Is="_userName_o60yu_57",js="_userEmail_o60yu_63",Ts="_userRole_o60yu_68",Ls="_divider_o60yu_78",Es="_menuItem_o60yu_83";var Ns=y("<span>"),zs=y("<div role=menu><div><span></span><span></span></div><div></div><button role=menuitem></button><button role=menuitem>"),Rs=y("<div><button aria-haspopup=menu>"),Ds=y("<img referrerpolicy=no-referrer>");function Ps(t){const{t:i}=M(),{user:r,logout:o}=Nn(),[a,s]=e(!1);let l;const d=()=>{const e=r();if(!e)return"";const t=e.name||e.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},c=()=>r()?.name||"",p=()=>r()?.email||"",_=()=>r()?.workspace_role;bs(()=>l,()=>s(!1));const f=()=>{s(!1),o()},w=()=>{s(!1),t.onProfile()};return b=Rs(),y=b.firstChild,"function"==typeof l?k(l,b):l=b,y.$$click=()=>s(!a()),u(y,n(h,{get when(){return(()=>{const e=r();if(!e)return null;const t=e.oauth_identities;if(!t)return null;for(const n of t)if(n.avatar_url)return n.avatar_url;return null})()},get fallback(){return e=Ns(),u(e,d),v(()=>g(e,Cs)),e;var e},children:e=>{return t=Ds(),v(n=>{var i=e(),r=c()||"User",o=$s;return i!==n.e&&m(t,"src",n.e=i),r!==n.t&&m(t,"alt",n.t=r),o!==n.a&&g(t,n.a=o),n},{e:void 0,t:void 0,a:void 0}),t;var t}})),u(b,n(h,{get when(){return a()},get children(){var e=zs(),t=e.firstChild,r=t.firstChild,o=r.nextSibling,a=t.nextSibling,s=a.nextSibling,l=s.nextSibling;return u(r,c),u(o,p),u(t,n(h,{get when(){return _()},get children(){var e=Ns();return u(e,_),v(()=>g(e,Ts)),e}}),null),s.$$click=w,u(s,()=>i("userMenu.profile")),l.$$click=f,u(l,()=>i("userMenu.logout")),v(n=>{var i=Ss,d=xs,c=Is,u=js,h=Ls,v=Es,p=Es;return i!==n.e&&g(e,n.e=i),d!==n.t&&g(t,n.t=d),c!==n.a&&g(r,n.a=c),u!==n.o&&g(o,n.o=u),h!==n.i&&g(a,n.i=h),v!==n.n&&g(s,n.n=v),p!==n.s&&g(l,n.s=p),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e}}),null),v(e=>{var t=ys,n=ks,r=c()||p(),o=i("userMenu.profile")||"User menu",s=a();return t!==e.e&&g(b,e.e=t),n!==e.t&&g(y,e.t=n),r!==e.a&&m(y,"title",e.a=r),o!==e.o&&m(y,"aria-label",e.o=o),s!==e.i&&m(y,"aria-expanded",e.i=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),b;var b,y}l(["click"]);const Os="_wsMenu_1kkrz_1",As="_wsButton_1kkrz_5",Bs="_wsName_1kkrz_23",Ws="_chevron_1kkrz_31",Ms="_dropdown_1kkrz_36",Us="_wsList_1kkrz_49",Vs="_orgHeader_1kkrz_54",Fs="_wsItem_1kkrz_65",qs="_active_1kkrz_84",Hs="_wsItemName_1kkrz_88",Gs="_checkmark_1kkrz_94",Ks="_divider_1kkrz_99",Ys="_menuItem_1kkrz_104",Js="_icon_1kkrz_123",Zs="_plusIcon_1kkrz_127";var Xs=y("<div role=menu><div></div><div></div><button role=menuitem><span aria-hidden=true>‚öô</span></button><button role=menuitem><span aria-hidden=true>+</span></button><button role=menuitem><span aria-hidden=true>&#x2B07;"),Qs=y("<div><button aria-haspopup=menu><span></span><span aria-hidden=true>"),el=y("<div>"),tl=y("<span aria-hidden=true>‚úì"),nl=y("<button role=menuitem><span>");function il(t){const{t:i}=M(),{user:r}=Nn(),{switchWorkspace:o}=Wn(),[a,s]=e(!1);let l;const d=C(()=>{const e=r();if(!e)return[];const t=new Map,n=e.organizations||[],i=e.workspaces||[];for(const r of n)t.set(r.organization_id,{orgId:r.organization_id,orgName:r.organization_name||r.organization_id,workspaces:[]});for(const r of i){const e=t.get(r.organization_id);e&&e.workspaces.push(r)}return Array.from(t.values()).filter(e=>e.workspaces.length>0)}),c=()=>r()?.workspace_id||"",p=()=>{const e=r();if(!e)return i("app.workspace");const t=e.workspaces?.find(t=>t.workspace_id===e.workspace_id);return t?.workspace_name||i("app.workspace")};bs(()=>l,()=>s(!1));const f=()=>{s(!1),t.onOpenSettings()},w=()=>{s(!1),t.onCreateWorkspace()},b=()=>{s(!1),t.onImportFromNotion()},y=C(()=>d().length>1);return $=Qs(),S=$.firstChild,x=S.firstChild,I=x.nextSibling,"function"==typeof l?k(l,$):l=$,S.$$click=()=>s(!a()),u(x,p),u(I,()=>a()?"‚ñ≤":"‚ñº"),u($,n(h,{get when(){return a()},get children(){var e=Xs(),r=e.firstChild,a=r.nextSibling,l=a.nextSibling,p=l.firstChild,m=l.nextSibling,k=m.firstChild,$=m.nextSibling,C=$.firstChild;return u(r,n(_,{get each(){return d()},children:e=>[n(h,{get when(){return y()},get children(){var t=el();return u(t,()=>e.orgName),v(()=>g(t,Vs)),t}}),n(_,{get each(){return e.workspaces},children:e=>{return i=nl(),r=i.firstChild,i.$$click=()=>{return n=e.workspace_id,s(!1),t.onSwitchWorkspace?.(),void(n!==c()&&o(n));var n},u(r,()=>e.workspace_name||e.workspace_id),u(i,n(h,{get when(){return e.workspace_id===c()},get children(){var e=tl();return v(()=>g(e,Gs)),e}}),null),v(t=>{var n=`${Fs} ${e.workspace_id===c()?qs:""}`,o=Hs;return n!==t.e&&g(i,t.e=n),o!==t.t&&g(r,t.t=o),t},{e:void 0,t:void 0}),i;var i,r}})]})),l.$$click=f,u(l,()=>i("app.settings"),null),m.$$click=w,u(m,()=>i("createWorkspace.title"),null),$.$$click=b,u($,()=>i("notionImport.title"),null),v(t=>{var n=Ms,i=Us,o=Ks,s=Ys,d=Js,c=Ys,u=Zs,h=Ys,v=Js;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(r,t.t=i),o!==t.a&&g(a,t.a=o),s!==t.o&&g(l,t.o=s),d!==t.i&&g(p,t.i=d),c!==t.n&&g(m,t.n=c),u!==t.s&&g(k,t.s=u),h!==t.h&&g($,t.h=h),v!==t.r&&g(C,t.r=v),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e}}),null),v(e=>{var t=Os,n=As,r=p(),o=i("app.switchWorkspace")||"Switch workspace",s=a(),l=Bs,d=Ws;return t!==e.e&&g($,e.e=t),n!==e.t&&g(S,e.t=n),r!==e.a&&m(S,"title",e.a=r),o!==e.o&&m(S,"aria-label",e.o=o),s!==e.i&&m(S,"aria-expanded",e.i=s),l!==e.n&&g(x,e.n=l),d!==e.s&&g(I,e.s=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),$;var $,S,x,I}l(["click"]);const rl="_errorBoundary_1gyxj_3",ol="_errorMessage_1gyxj_21",al="_errorDetails_1gyxj_27",sl="_retryButton_1gyxj_51";var ll=y("<div role=alert><h2>Something went wrong</h2><p></p><details><summary>Technical details</summary><pre></pre></details><button>Try again");function dl(e){return t=ll(),n=t.firstChild.nextSibling,i=n.nextSibling,r=i.firstChild.nextSibling,o=i.nextSibling,u(n,()=>e.error.message),u(r,()=>e.error.stack),o.$$click=()=>e.reset(),v(e=>{var r=rl,a=ol,s=al,l=sl;return r!==e.e&&g(t,e.e=r),a!==e.t&&g(n,e.t=a),s!==e.a&&g(i,e.a=s),l!==e.o&&g(o,e.o=l),e},{e:void 0,t:void 0,a:void 0,o:void 0}),t;var t,n,i,r,o}const cl=e=>n(N,{fallback:(e,t)=>n(dl,{error:e,reset:t}),get children(){return e.children}});l(["click"]);const ul="_app_2jbij_13",hl="_header_2jbij_19",vl="_headerLeft_2jbij_29",gl="_userInfo_2jbij_37",pl="_container_2jbij_44",_l="_main_2jbij_50",fl="_error_2jbij_58",ml="_editor_2jbij_66",wl="_editorLoading_2jbij_74",bl="_settingsLoading_2jbij_75",yl="_editorHeader_2jbij_80",kl="_editorStatus_2jbij_89",$l="_unsavedIndicator_2jbij_97",Cl="_savingIndicator_2jbij_102",Sl="_savedIndicator_2jbij_107",xl="_titleInput_2jbij_117",Il="_nodeContent_2jbij_127",jl="_tableView_2jbij_134",Tl="_breadcrumbs_2jbij_142",Ll="_breadcrumbItem_2jbij_153",El="_breadcrumbSeparator_2jbij_164",Nl="_historyPanel_2jbij_169",zl="_historyList_2jbij_183",Rl="_historyItem_2jbij_190",Dl="_historyMeta_2jbij_203",Pl="_historyDate_2jbij_211",Ol="_historyHash_2jbij_215",Al="_historyMessage_2jbij_222",Bl="_hamburger_2jbij_230",Wl="_mobileBackdrop_2jbij_241";var Ml=y("<nav>"),Ul=y("<div>"),Vl=y("<div role=alert aria-live=polite>"),Fl=y("<span>‚óè "),ql=y("<span>‚ü≥ "),Hl=y("<span>‚úì "),Gl=y("<li>"),Kl=y("<div><h3></h3><ul>"),Yl=y("<div><div><input type=text><div></div></div><div>"),Jl=y("<div><main>"),Zl=y('<div><header><div><button aria-label="Toggle menu">‚ò∞</button></div><div>'),Xl=y("<span>/"),Ql=y("<span>"),ed=y("<li><div><span></span><span></span></div><div>");const td=R(()=>O(()=>import("./Editor-DRg9WiK9.js"),__vite__mapDeps([0,1,2,3]))),nd=R(()=>O(()=>import("./index-6k7RNfDq.js"),__vite__mapDeps([4,1,5])).then(e=>({default:e.Settings})));function id(){const{t:t,locale:i,setLocale:r}=M(),{user:o,token:a,login:s,wsApi:l,orgApi:d}=Nn(),{nodes:p,selectedNodeId:w,setSelectedNodeId:b,selectedNodeData:y,setSelectedNodeData:k,breadcrumbPath:$,loading:x,setLoading:I,error:T,setError:E,switchWorkspace:N,createOrganization:R,createWorkspace:D,loadNodes:P,loadNode:O,fetchNodeChildren:A,removeNode:B}=Wn(),{title:W,content:U,hasUnsavedChanges:V,autoSaveStatus:F,assetUrls:q,showHistory:H,history:G,loadHistory:K,loadVersion:Y,flushAutoSave:J,handleTitleChange:Z,handleContentChange:X,linkedNodeTitles:Q}=Jn(),{records:ee,hasMore:te,loadMoreRecords:ne,addRecord:ie,updateRecord:re,deleteRecord:oe,views:ae,activeViewId:se}=Qn(),le=C(()=>ae().find(e=>e.id===se())),de=C(()=>le()?.type||"table"),[ce,ue]=e(!1),[he,ve]=e(!1),[pe,_e]=e(null),[fe,me]=e(!1),[we,be]=e(!1),[ye,ke]=e(!1),[$e,Ce]=e(null),[Se,xe]=e(!1),[Ie,je]=e(!1),[Te,Le]=e(!1),[Ee,Ne]=e(!1),[ze,Re]=e(null),[De,Pe]=e(null),[Oe,Ae]=e(null);c(()=>{const e=o(),t=e?.settings?.language;t&&["en","fr","de","es"].includes(t)&&t!==i()&&(r(t),localStorage.setItem("mddb_locale",t))});const Be=async()=>{const e=window.location.pathname,n=function(e){return"/privacy"===e?"privacy":"/terms"===e?"terms":"/profile"===e?"profile":e.startsWith("/settings")?"settings":null}(e);if("privacy"===n)return be(!0),ke(!1),void me(!1);if("terms"===n)return ke(!0),be(!1),void me(!1);if("profile"===n)return window.history.replaceState(null,"",On("user")),Ce({type:"profile"}),me(!1),ue(!1),ve(!1),be(!1),void ke(!1);if("settings"===n){const t=function(e){if("/settings"===e||"/settings/"===e)return{type:"redirect",id:"/settings/user"};if("/settings/user"===e||"/settings/user/"===e)return{type:"profile"};if("/settings/server"===e||"/settings/server/"===e)return{type:"server"};const t=e.match(/^\/settings\/workspace\/([^+/]+)/);if(t){const e="undefined"!=typeof window?window.location.hash.slice(1):"";return{type:"workspace",id:t[1],section:e||void 0}}const n=e.match(/^\/settings\/org\/([^+/]+)/);if(n){const e="undefined"!=typeof window?window.location.hash.slice(1):"";return{type:"org",id:n[1],section:e||void 0}}return null}(e);if(t)return Ce(t),me(!1),ue(!1),ve(!1),be(!1),void ke(!1)}Ce(null),me(!1),be(!1),ke(!1);const i=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(i){const e=i.id,n=o(),r=n?.workspaces?.find(t=>t.workspace_id===e);if(!r){E(t("errors.noAccessToWs")||"You do not have access to this workspace");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",Rn(e,i)),2e3))}const a=On("workspace",e,r.workspace_name);return window.history.replaceState(null,"",a),void Ce({type:"workspace",id:e})}ue(!1);const r=function(e){const t=e.match(/^\/o\/([^+/]+)(?:\+[^/]*)?\/settings\/?$/);return t&&t[1]?{id:t[1]}:null}(e);if(r){const e=r.id,n=o(),i=n?.organizations?.find(t=>t.organization_id===e);if(!i){E(t("errors.noAccessToOrg")||"You do not have access to this organization");const e=n?.workspace_id,i=n?.workspace_name;return void(e&&setTimeout(()=>window.history.replaceState(null,"",Rn(e,i)),2e3))}const a=On("org",e,i.organization_name);return window.history.replaceState(null,"",a),void Ce({type:"org",id:e})}ve(!1),_e(null);const a=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/([a-zA-Z0-9_-]+)(?:\+.*)?$/);return t&&t[1]&&t[2]?{wsId:t[1],nodeId:t[2]}:null}(e);if(a){const e=a.nodeId;return void(e!==w()&&(J(),O(e,!1)))}const s=function(e){const t=e.match(/^\/w\/([^+/]+)(?:\+[^/]*)?\/?$/);return t&&t[1]?{wsId:t[1]}:null}(e);s&&p.length>0&&p[0]?O(p[0].id,!1):(b(null),k(null))};let We;S(()=>{window.addEventListener("popstate",Be),L(()=>window.removeEventListener("popstate",Be))});const Me=async e=>{const t=d();if(!t)return;const n=await t.notion.startImport({notion_token:e.notionToken});var i;await N(n.workspace_id),i=n.workspace_id,Pe(i),We=window.setInterval(async()=>{const e=d();if(e)try{const t=await e.notion.getStatus(i);Re(t),["completed","failed","cancelled"].includes(t.status)&&(window.clearInterval(We),We=void 0,"completed"===t.status&&P(!0))}catch{window.clearInterval(We),We=void 0}},2e3),Re({status:"running",progress:0,total:0})},Ue=async()=>{const e=l(),t=De();if(e&&t)try{await e.notion.cancelImport(),Re(e=>e?{...e,status:"cancelled"}:null)}catch{}},Ve=()=>{We&&(window.clearInterval(We),We=void 0),Re(null),Pe(null)};async function Fe(e="document",n){if(!W().trim())return void E(t("errors.titleRequired")||"Title is required");const i=l();if(i)try{I(!0);const t=n||Oe()||"0";let r;if("table"===e){r=(await i.nodes.table.createTable(t,{title:W(),properties:[{name:"Name",type:"text",required:!1}]})).id}else{r=(await i.nodes.page.createPage(t,{title:W()})).id}await P(!0),O(String(r)),E(null),Ae(null)}catch(r){E(`${t("errors.failedToCreate")}: ${r}`)}finally{I(!1)}}L(()=>{We&&window.clearInterval(We)}),c(()=>{o(),Be()});const qe=e=>{J(),O(e.id),xe(!1)};function He(e,t=p,n=null){const i=t.findIndex(t=>t.id===e);if(-1!==i)return{parent:n,siblings:t,index:i};for(const r of t)if(r.children){const t=He(e,r.children,r);if(t)return t}return null}async function Ge(e){const n=l();if(!n)return;if(!confirm(t("table.confirmDeleteRecord")||"Delete this item?"))return;let i=null;if(e===w()){const t=He(e);if(t){const{parent:e,siblings:n,index:r}=t;e&&"0"!==e.id?i=e.id:r>0?i=n[r-1]?.id??null:n.length>1&&(i=n[1]?.id??null)}}try{I(!0),await n.nodes.deleteNode(e),B(e),e===w()&&(i?O(i):(j(()=>{b(null),k(null)}),await P(!0)))}catch(r){E(`${t("errors.failedToDelete")}: ${r}`)}finally{I(!1)}}async function Ke(e){const n=w(),i=y(),r=l();if(n&&i&&r)try{I(!0);const t=[...i.properties||[],e];await r.nodes.table.updateTable(n,{title:i.title,properties:t}),await O(n,!1),E(null)}catch(o){E(`${t("errors.failedToSave")}: ${o}`)}finally{I(!1)}}return[n(h,{get when(){return!we()},get fallback(){return n(Jo,{})},get children(){return n(h,{get when(){return!ye()},get fallback(){return n(ra,{})},get children(){return n(h,{get when(){return o()},get fallback(){return n(Uo,{onLogin:s})},get children(){var e=Zl(),i=e.firstChild,r=i.firstChild,s=r.firstChild,l=r.nextSibling;return u(e,n(h,{get when(){return ze()},keyed:!0,children:e=>n(ws,{status:e,onCancel:Ue,onDismiss:Ve})}),i),s.$$click=()=>xe(!Se()),u(r,n(il,{onOpenSettings:()=>{const e=o()?.workspace_id,t=o()?.workspace_name;e&&(Ce({type:"workspace",id:e}),ue(!1),b(null),xe(!1),window.history.pushState(null,"",On("workspace",e,t)))},onSwitchWorkspace:()=>{Ce(null),ue(!1),ve(!1),me(!1)},onCreateWorkspace:()=>Le(!0),onImportFromNotion:()=>Ne(!0)}),null),u(r,n(h,{get when(){return w()},get children(){var e=Ml();return u(e,n(_,{get each(){return $()},children:(e,t)=>{return[n(h,{get when(){return t()>0},get children(){var e=Xl();return v(()=>g(e,El)),e}}),(i=Ql(),i.$$click=()=>qe(e),u(i,()=>e.title),v(()=>g(i,Ll)),i)];var i}})),v(()=>g(e,Tl)),e}}),null),u(l,n(Ps,{onProfile:()=>{Ce({type:"profile"}),me(!1),ue(!1),b(null),window.history.pushState(null,"",On("user"))}})),u(e,n(h,{get when(){return fe()},get children(){return n(_o,{onBack:()=>window.history.back(),onOrgSettings:e=>{j(()=>{ve(!0),_e(e.organization_id),me(!1)}),window.history.pushState(null,"",Pn(e.organization_id,e.organization_name))}})}}),null),u(e,n(h,{get when(){return ce()},get children(){return n(or,{onBack:()=>window.history.back(),onOpenOrgSettings:()=>{const e=o(),t=e?.organization_id,n=e?.organizations?.find(e=>e.organization_id===t),i=n?.organization_name;t&&(ve(!0),_e(t),ue(!1),window.history.pushState(null,"",Pn(t,i)))}})}}),null),u(e,n(h,{get when(){return f(()=>!!he())()&&pe()},get children(){return n(Nr,{get orgId(){return pe()},onBack:()=>window.history.back()})}}),null),u(e,n(h,{get when(){return $e()},children:e=>n(z,{get fallback(){return e=Ul(),u(e,()=>t("common.loading")),v(()=>g(e,bl)),e;var e},get children(){return n(nd,{get route(){return e()},onClose:()=>{Ce(null);const e=o()?.workspace_id,t=o()?.workspace_name;e&&window.history.pushState(null,"",Rn(e,t))}})}})}),null),u(e,n(h,{get when(){return f(()=>!(fe()||ce()||he()))()&&!$e()},get children(){var e=Jl(),i=e.firstChild;return u(e,n(h,{get when(){return Se()},get children(){var e=Ul();return e.$$click=()=>xe(!1),v(()=>g(e,Wl)),e}}),i),u(e,n(ge,{get isOpen(){return Se()},get loading(){return x()},nodes:p,get selectedNodeId(){return w()},get ancestorIds(){return $().map(e=>e.id)},onCreatePage:()=>{Ae(null),Fe("document"),xe(!1)},onCreateTable:()=>{Ae(null),Fe("table"),xe(!1)},onCreateChildPage:e=>{Ae(e),Fe("document",e),xe(!1)},onCreateChildTable:e=>{Ae(e),Fe("table",e),xe(!1)},onSelectNode:qe,onCloseMobileSidebar:()=>xe(!1),onFetchChildren:A,onDeleteNode:Ge,onShowHistory:e=>{e!==w()?O(e).then(()=>K(e)):K(e)}}),i),u(i,n(h,{get when(){return T()},fallback:null,get children(){var e=Vl();return u(e,T),v(()=>g(e,fl)),e}}),null),u(i,n(h,{get when(){return w()},get children(){var e=Yl(),i=e.firstChild,r=i.firstChild,s=r.nextSibling,l=i.nextSibling;return r.$$input=e=>Z(e.target.value),u(s,n(h,{get when(){return f(()=>!!V())()&&"idle"===F()},get children(){var e=Fl();return e.firstChild,u(e,()=>t("editor.unsaved"),null),v(()=>g(e,$l)),e}}),null),u(s,n(h,{get when(){return"saving"===F()},get children(){var e=ql();return e.firstChild,u(e,()=>t("common.saving"),null),v(()=>g(e,Cl)),e}}),null),u(s,n(h,{get when(){return"saved"===F()},get children(){var e=Hl();return e.firstChild,u(e,()=>t("common.saved"),null),v(()=>g(e,Sl)),e}}),null),u(e,n(h,{get when(){return H()},get children(){var e=Kl(),i=e.firstChild,r=i.nextSibling;return u(i,()=>t("editor.versionHistory")),u(r,n(_,{get each(){return G()},children:e=>{return t=ed(),n=t.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,t.$$click=()=>{const t=w();t&&Y(t,e.hash)},u(i,()=>new Date(e.timestamp).toLocaleString()),u(r,()=>e.hash.substring(0,7)),u(o,()=>e.message),v(e=>{var a=Rl,s=Dl,l=Pl,d=Ol,c=Al;return a!==e.e&&g(t,e.e=a),s!==e.t&&g(n,e.t=s),l!==e.a&&g(i,e.a=l),d!==e.o&&g(r,e.o=d),c!==e.i&&g(o,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t;var t,n,i,r,o}}),null),u(r,n(h,{get when(){return 0===G().length},get children(){var e=Gl();return u(e,()=>t("editor.noHistory")),v(()=>g(e,Rl)),e}}),null),v(t=>{var n=Nl,i=zl;return n!==t.e&&g(e,t.e=n),i!==t.t&&g(r,t.t=i),t},{e:void 0,t:void 0}),e}}),l),u(l,n(h,{get when(){return y()?.has_page},get children(){return n(z,{get fallback(){return e=Ul(),u(e,()=>t("common.loading")),v(()=>g(e,wl)),e;var e},get children(){return n(td,{get content(){return U()},get nodeId(){return w()??void 0},get assetUrls(){return q()},get linkedNodeTitles(){return Q()},onChange:X,get wsId(){return o()?.workspace_id},getToken:()=>a(),onAssetUploaded:()=>{const e=w();e&&O(e,!1)},onError:E,onNavigateToNode:e=>{J(),O(e)}})}})}}),null),u(l,n(h,{get when(){return y()?.has_table},get children(){var e=Ul();return u(e,n(bi,{}),null),u(e,n(h,{get when(){return"table"===de()},get children(){return n(gt,{get tableId(){return w()||""},get columns(){return y()?.properties||[]},get records(){return ee()},onAddRecord:ie,onUpdateRecord:re,onDeleteRecord:oe,onAddColumn:Ke,onLoadMore:ne,get hasMore(){return te()}})}}),null),u(e,n(h,{get when(){return"list"===de()},get children(){return n(Et,{get records(){return ee()},get columns(){return y()?.properties||[]},onUpdateRecord:re,onDeleteRecord:oe})}}),null),u(e,n(h,{get when(){return"gallery"===de()},get children(){return n(Yt,{get records(){return ee()},get columns(){return y()?.properties||[]},onUpdateRecord:re,onDeleteRecord:oe})}}),null),u(e,n(h,{get when(){return"board"===de()},get children(){return n(fn,{get records(){return ee()},get columns(){return y()?.properties||[]},onUpdateRecord:re,onDeleteRecord:oe})}}),null),v(()=>g(e,jl)),e}}),null),v(n=>{var o=ml,a=yl,d=t("editor.titlePlaceholder")||"Title",c=xl,u=kl,h=Il;return o!==n.e&&g(e,n.e=o),a!==n.t&&g(i,n.t=a),d!==n.a&&m(r,"placeholder",n.a=d),c!==n.o&&g(r,n.o=c),u!==n.i&&g(s,n.i=u),h!==n.n&&g(l,n.n=h),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v(()=>r.value=W()),e}}),null),v(t=>{var n=pl,r=_l;return n!==t.e&&g(e,t.e=n),r!==t.t&&g(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),v(t=>{var n=ul,o=hl,a=vl,d=Bl,c=gl;return n!==t.e&&g(e,t.e=n),o!==t.t&&g(i,t.t=o),a!==t.a&&g(r,t.a=a),d!==t.o&&g(s,t.o=d),c!==t.i&&g(l,t.i=c),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e}})}})}}),n(ga,{}),n(h,{get when(){return Ie()},get children(){return n(xa,{onClose:()=>je(!1),onCreate:R})}}),n(h,{get when(){return Te()},get children(){return n(La,{onClose:()=>Le(!1),onCreate:D,isFirstWorkspace:!0})}}),n(h,{get when(){return Ee()},get children(){return n(Ga,{onClose:()=>Ne(!1),onImport:Me})}})]}function rd(){return n(cl,{get children(){return n(En,{get children(){return n(Bn,{get children(){return n(Yn,{get children(){return n(Xn,{get children(){return n(id,{})}})}})}})}})}})}l(["click","input"]);const od=localStorage.getItem("mddb_locale"),ad=od&&["en","fr","de","es"].includes(od)?od:"en",sd=document.getElementById("app");sd&&D(()=>n(W,{initialLocale:ad,get children(){return n(rd,{})}}),sd);export{fe as O,me as W,Nn as a,Wn as b,Jn as c,bs as d,Gn as e,qn as f,_e as g,Dn as n,Un as r,On as s,M as u,Rn as w};
