import{u as e,c as t,a as n,b as i,d as r,t as o,e as a,r as s,f as l,g as d,i as c,S as u,F as g,h,j as v,m as p,k as _,s as m,l as f,n as b,o as w,M as y,p as $,q as k,v as S,w as C,x,y as z,z as L,A as I,B as T}from"./vendor-CDRZnxVF.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const E={},P=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");i=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in E)return;E[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})};async function O(e){const t=await((e,t,n)=>{const i=e[t];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((e,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./dictionaries/de.ts":()=>P(()=>import("./de-zBptzaKV.js"),[]),"./dictionaries/en.ts":()=>P(()=>import("./en-C77WPnzo.js"),[]),"./dictionaries/es.ts":()=>P(()=>import("./es-BRou2w4e.js"),[]),"./dictionaries/fr.ts":()=>P(()=>import("./fr-BBz6a6Yw.js"),[])}),`./dictionaries/${e}.ts`,3);return l(t.dict)}const D=a(),R=e=>{const[a,l]=t(e.initialLocale||"en"),[d]=n(a,O),c=o(d,s),u=e=>{const t=`errors.${e}`,n=c(t);return n&&n!==t?n:c("errors.unknown")||"An error occurred"},g=i(()=>({locale:a,setLocale:l,t:c,translateError:u}));return r(D.Provider,{get value(){return g()},get children(){return e.children}})};function B(){const t=e(D);if(!t)throw new Error("useI18n must be used within I18nProvider");return t}const A="_app_18n3z_13",j="_header_18n3z_19",N="_headerTitle_18n3z_28",M="_userInfo_18n3z_33",q="_container_18n3z_40",W="_sidebar_18n3z_46",H="_sidebarHeader_18n3z_54",F="_loading_18n3z_87",U="_pageList_18n3z_93",G="_sidebarFooter_18n3z_99",V="_pageItem_18n3z_115",Y="_active_18n3z_126",K="_main_18n3z_131",J="_error_18n3z_139",Z="_welcome_18n3z_147",Q="_createForm_18n3z_163",X="_editor_18n3z_171",ee="_editorHeader_18n3z_177",te="_editorStatus_18n3z_186",ne="_unsavedIndicator_18n3z_194",ie="_savingIndicator_18n3z_199",re="_savedIndicator_18n3z_204",oe="_titleInput_18n3z_214",ae="_editorActions_18n3z_224",se="_createButton_18n3z_230",le="_sidebarActions_18n3z_252",de="_nodeIcon_18n3z_274",ce="_welcomeActions_18n3z_278",ue="_nodeContent_18n3z_284",ge="_editorContent_18n3z_291",he="_tableView_18n3z_298",ve="_tableHeader_18n3z_306",pe="_viewToggle_18n3z_313",_e="_sidebarNodeWrapper_18n3z_334",me="_childList_18n3z_335",fe="_pageTitleText_18n3z_339",be="_expandIcon_18n3z_345",we="_expanded_18n3z_358",ye="_hidden_18n3z_362",$e="_breadcrumbs_18n3z_367",ke="_breadcrumbItem_18n3z_377",Se="_breadcrumbSeparator_18n3z_386",Ce="_contentInput_18n3z_390",xe="_historyPanel_18n3z_406",ze="_historyList_18n3z_420",Le="_historyItem_18n3z_427",Ie="_historyMeta_18n3z_440",Te="_historyDate_18n3z_448",Ee="_historyHash_18n3z_452",Pe="_historyMessage_18n3z_459",Oe="_hamburger_18n3z_467",De="_mobileBackdrop_18n3z_478",Re="_mobileOpen_18n3z_503";var Be=f("<ul>"),Ae=f("<li><div><span>‚ñ∂</span><span></span><span>");function je(e){const[n,i]=t(!0),o=e=>{e.stopPropagation(),i(!n())};return a=Ae(),s=a.firstChild,l=s.firstChild,d=l.nextSibling,f=d.nextSibling,s.$$click=()=>e.onSelect(e.node),l.$$click=o,c(d,()=>"table"===e.node.type?"üìä":"üìÑ"),c(f,()=>e.node.title),c(a,r(u,{get when(){return p(()=>!!n())()&&e.node.children?.length},get children(){var t=Be();return c(t,r(g,{get each(){return e.node.children?.filter(e=>!!e)},children:t=>r(je,{node:t,get selectedId(){return e.selectedId},get onSelect(){return e.onSelect},get depth(){return e.depth+1}})})),h(()=>v(t,me)),t}}),null),h(t=>{var i=_e,r=V,o={[`${Y}`]:e.selectedId===e.node.id},c=12*e.depth+8+"px",u=be,g={[`${we}`]:n(),[`${ye}`]:!e.node.children?.length},h=de,p=fe;return i!==t.e&&v(a,t.e=i),r!==t.t&&v(s,t.t=r),t.a=_(s,o,t.a),c!==t.o&&m(s,"padding-left",t.o=c),u!==t.i&&v(l,t.i=u),t.n=_(l,g,t.n),h!==t.s&&v(d,t.s=h),p!==t.h&&v(f,t.h=p),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),a;var a,s,l,d,f}d(["click"]);var Ne=f("<p>"),Me=f('<aside><div><h2></h2><div><button>‚öô</button><button>+P</button><button>+D</button></div></div><ul></ul><div><a href=/privacy></a><span style="margin:0 0.5rem;color:#ccc">|</span><a href=/terms>');function qe(e){const{t:t}=B();return n=Me(),i=n.firstChild,o=i.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,d=l.nextSibling,_=i.nextSibling,m=_.nextSibling,f=m.firstChild,y=f.nextSibling.nextSibling,c(o,()=>t("app.workspace")),b(s,"click",e.onToggleSettings),b(l,"click",e.onCreatePage),b(d,"click",e.onCreateTable),c(n,r(u,{get when(){return p(()=>!!e.loading)()&&0===e.nodes.length},fallback:null,get children(){var e=Ne();return c(e,()=>t("common.loading")),h(()=>v(e,F)),e}}),_),c(_,r(g,{get each(){return e.nodes},children:t=>r(je,{node:t,get selectedId(){return e.selectedNodeId},get onSelect(){return e.onSelectNode},depth:0})})),f.$$click=t=>{t.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()},c(f,()=>t("app.privacyPolicy")),y.$$click=t=>{t.preventDefault(),window.history.pushState(null,"","/terms"),window.dispatchEvent(new PopStateEvent("popstate")),e.onCloseMobileSidebar()},c(y,()=>t("app.terms")),h(r=>{var o=`${W} ${e.isOpen?Re:""}`,c=H,u=le,g=t("app.settings")||"Workspace Settings",h=t("app.newPage")||"New Page",p=t("app.newTable")||"New Table",f=U,b=G;return o!==r.e&&v(n,r.e=o),c!==r.t&&v(i,r.t=c),u!==r.a&&v(a,r.a=u),g!==r.o&&w(s,"title",r.o=g),h!==r.i&&w(l,"title",r.i=h),p!==r.n&&w(d,"title",r.n=p),f!==r.s&&v(_,r.s=f),b!==r.h&&v(m,r.h=b),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),n;var n,i,o,a,s,l,d,_,m,f,y}d(["click"]);const We="_preview_1jukq_1";var He=f('<div role=region aria-label="Markdown preview">');const Fe=new y({html:!0,linkify:!0,typographer:!0}),Ue=Fe.renderer.rules.image||function(e,t,n,i,r){return r.renderToken(e,t,n)};function Ge(e){return t=He(),h(n=>{var i=We,r=Fe.render(e.content,{orgId:e.orgId});return i!==n.e&&v(t,n.e=i),r!==n.t&&(t.innerHTML=n.t=r),n},{e:void 0,t:void 0}),t;var t}Fe.renderer.rules.image=(e,t,n,i,r)=>{const o=e[t];if(!o)return Ue(e,t,n,i,r);const a=o.attrIndex("src"),s=o.attrs,l=i?.orgId,d=s?.[a];if(d&&l){let e=d[1];if(e.startsWith("assets/")){const t=e.split("/");t.length>=2&&(e=`/assets/${l}/${t.slice(1).join("/")}`,d[1]=e)}}return Ue(e,t,n,i,r)};const Ve="select",Ye="google",Ke="microsoft",Je="_container_1fe2r_1",Ze="_tableWrapper_1fe2r_10",Qe="_table_1fe2r_10",Xe="_headerRow_1fe2r_24",et="_headerCell_1fe2r_32",tt="_row_1fe2r_44",nt="_cell_1fe2r_53",it="_editing_1fe2r_65",rt="_cellContent_1fe2r_70",ot="_editContainer_1fe2r_75",at="_input_1fe2r_81",st="_editActions_1fe2r_94",lt="_saveBtn_1fe2r_99",dt="_cancelBtn_1fe2r_100",ct="_actionsCell_1fe2r_119",ut="_deleteBtn_1fe2r_127",gt="_addBtn_1fe2r_141",ht="_newRow_1fe2r_155",vt="_required_1fe2r_164",pt="_empty_1fe2r_169",_t="_loadMore_1fe2r_176";var mt=f("<input type=checkbox>"),ft=f("<select><option value>--"),bt=f("<option>"),wt=f("<input type=text>"),yt=f("<input type=number>"),$t=f("<input type=date>"),kt=f("<tr><td><button>+"),St=f("<div>"),Ct=f("<div><button>"),xt=f("<div><div><table><thead><tr><th></th></tr></thead><tbody>"),zt=f("<span>*"),Lt=f("<th>"),It=f("<button>‚úï"),Tt=f("<tr><td>"),Et=f("<div><div><button>‚úì</button><button>‚úï"),Pt=f("<td>");function Ot(e){const{t:n}=B(),[i,o]=t(null),[a,s]=t(""),[l,d]=t({}),p=e=>{s(e)},m=()=>{e.onAddRecord&&Object.keys(l()).length>0&&(e.onAddRecord(l()),d({}))},f=(t,n)=>{const i=((t,n)=>{const i=e.columns.find(e=>e.name===n);return i?t.data[i.name]??"":""})(t,n.name);switch(n.type){case"checkbox":return i?"‚úì":"";case"select":case"multi_select":case"number":default:return String(i);case"date":return i?new Date(i).toLocaleDateString():""}},b=(e,t)=>{switch(e.type){case"checkbox":return(l=mt()).addEventListener("change",e=>p(String(e.target.checked))),l.checked="true"===t,h(()=>v(l,at)),l;case Ve:return e.options&&e.options.length>0?((s=ft()).firstChild,s.addEventListener("change",e=>p(e.target.value)),s.value=t,c(s,r(g,{get each(){return e.options},children:e=>{return t=bt(),c(t,()=>e.name),h(()=>t.value=e.id),t;var t}}),null),h(()=>v(s,at)),s):((a=wt()).$$input=e=>p(e.target.value),a.value=t,h(()=>v(a,at)),a);case"number":return(o=yt()).$$input=e=>p(e.target.value),o.value=t,h(()=>v(o,at)),o;case"date":return(i=$t()).$$input=e=>p(e.target.value),i.value=t,h(()=>v(i,at)),i;default:return(n=wt()).$$input=e=>p(e.target.value),n.value=t,h(()=>v(n,at)),n}var n,i,o,a,s,l};return y=xt(),$=y.firstChild,k=$.firstChild,S=k.firstChild,C=S.firstChild,x=C.firstChild,z=S.nextSibling,c(x,()=>n("common.actions")),c(C,r(g,{get each(){return e.columns},children:e=>{return t=Lt(),c(t,()=>e.name,null),c(t,r(u,{get when(){return e.required},get children(){var e=zt();return h(()=>v(e,vt)),e}}),null),h(()=>v(t,et)),t;var t}}),null),c(z,r(g,{get each(){return e.records},children:t=>{return l=Tt(),d=l.firstChild,c(d,r(u,{get when(){return e.onDeleteRecord},get children(){var i=It();return i.$$click=()=>e.onDeleteRecord?.(t.id),h(e=>{var t=ut,r=n("table.deleteRecord")||"Delete record";return t!==e.e&&v(i,e.e=t),r!==e.t&&w(i,"title",e.t=r),e},{e:void 0,t:void 0}),i}})),c(l,r(g,{get each(){return e.columns},children:n=>{const l=()=>i()?.recordId===t.id&&i()?.columnId===n.name;return(d=Pt()).$$click=()=>((t,n)=>{const i=e.columns.find(e=>e.name===n),r=e.records.find(e=>e.id===t)?.data[i?.name??""]??"";o({recordId:t,columnId:n}),s(String(r))})(t.id,n.name),c(d,r(u,{get when(){return l()},get fallback(){return e=St(),c(e,()=>f(t,n)),h(()=>v(e,rt)),e;var e},get children(){var i=Et(),r=i.firstChild,s=r.firstChild,l=s.nextSibling;return c(i,()=>b(n,a()),r),s.$$click=()=>((t,n)=>{const i=e.columns.find(e=>e.name===n);if(!i||!e.onUpdateRecord)return;const r=e.records.find(e=>e.id===t);if(!r)return;const s={...r.data};s[i.name]=a(),e.onUpdateRecord(t,s),o(null)})(t.id,n.name),l.$$click=()=>o(null),h(e=>{var t=ot,n=st,o=lt,a=dt;return t!==e.e&&v(i,e.e=t),n!==e.t&&v(r,e.t=n),o!==e.a&&v(s,e.a=o),a!==e.o&&v(l,e.o=a),e},{e:void 0,t:void 0,a:void 0,o:void 0}),i}})),h(e=>{var t=nt,n={[`${it}`]:l()};return t!==e.e&&v(d,e.e=t),e.t=_(d,n,e.t),e},{e:void 0,t:void 0}),d;var d}}),null),h(e=>{var t=tt,n=ct;return t!==e.e&&v(l,e.e=t),n!==e.t&&v(d,e.t=n),e},{e:void 0,t:void 0}),l;var l,d}}),null),c(z,r(u,{get when(){return e.onAddRecord},get children(){var t=kt(),n=t.firstChild,i=n.firstChild;return i.$$click=m,c(t,r(g,{get each(){return e.columns},children:e=>{return t=Pt(),c(t,()=>b(e,String(l()[e.name]??""))),h(()=>v(t,nt)),t;var t}}),null),h(e=>{var r=ht,o=ct,a=gt;return r!==e.e&&v(t,e.e=r),o!==e.t&&v(n,e.t=o),a!==e.a&&v(i,e.a=a),e},{e:void 0,t:void 0,a:void 0}),t}}),null),c(y,r(u,{get when(){return 0===e.records.length},get children(){var e=St();return c(e,()=>n("table.noRecords")),h(()=>v(e,pt)),e}}),null),c(y,r(u,{get when(){return e.hasMore},get children(){var t=Ct(),i=t.firstChild;return i.$$click=()=>e.onLoadMore?.(),c(i,()=>n("table.loadMore")),h(()=>v(t,_t)),t}}),null),h(e=>{var t=Je,n=Ze,i=Qe,r=Xe,o=et;return t!==e.e&&v(y,e.e=t),n!==e.t&&v($,e.t=n),i!==e.a&&v(k,e.a=i),r!==e.o&&v(C,e.o=r),o!==e.i&&v(x,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),y;var y,$,k,S,C,x,z}d(["input","click"]);const Dt="_grid_sgkl7_1",Rt="_card_sgkl7_8",Bt="_cardHeader_sgkl7_20",At="_deleteBtn_sgkl7_28",jt="_cardBody_sgkl7_40",Nt="_field_sgkl7_46",Mt="_fieldName_sgkl7_51",qt="_fieldValue_sgkl7_58";var Wt=f("<div>"),Ht=f("<div><div><strong></strong><button>‚úï</button></div><div>"),Ft=f("<div><span>:</span><span>");function Ut(e){const{t:t}=B();return n=Wt(),c(n,r(g,{get each(){return e.records},children:n=>{return i=Ht(),o=i.firstChild,a=o.firstChild,s=a.nextSibling,l=o.nextSibling,c(a,()=>String((e.columns[0]?n.data[e.columns[0].name]:null)||t("table.untitled"))),s.$$click=()=>e.onDeleteRecord(n.id),c(l,r(g,{get each(){return e.columns.slice(1,4)},children:e=>{return t=Ft(),i=t.firstChild,r=i.firstChild,o=i.nextSibling,c(i,()=>e.name,r),c(o,()=>String(n.data[e.name]||"-")),h(e=>{var n=Nt,r=Mt,a=qt;return n!==e.e&&v(t,e.e=n),r!==e.t&&v(i,e.t=r),a!==e.a&&v(o,e.a=a),e},{e:void 0,t:void 0,a:void 0}),t;var t,i,r,o}})),h(e=>{var t=Rt,n=Bt,r=At,a=jt;return t!==e.e&&v(i,e.e=t),n!==e.t&&v(o,e.t=n),r!==e.a&&v(s,e.a=r),a!==e.o&&v(l,e.o=a),e},{e:void 0,t:void 0,a:void 0,o:void 0}),i;var i,o,a,s,l}})),h(()=>v(n,Dt)),n;var n}d(["click"]);const Gt={gallery:"_gallery_y4357_1",card:"_card_y4357_8",imageContainer:"_imageContainer_y4357_23",image:"_image_y4357_23",imagePlaceholder:"_imagePlaceholder_y4357_38",cardContent:"_cardContent_y4357_43",cardHeader:"_cardHeader_y4357_47",deleteBtn:"_deleteBtn_y4357_54",cardBody:"_cardBody_y4357_67",field:"_field_y4357_71",fieldName:"_fieldName_y4357_77"};var Vt=f("<div>"),Yt=f("<div><div><div><strong></strong><button>‚úï</button></div><div>"),Kt=f("<img>"),Jt=f("<div><span>:</span><span>");function Zt(e){const{t:t}=B();return n=Vt(),c(n,r(g,{get each(){return e.records},children:n=>{const i=e.columns.find(e=>e.name.toLowerCase().includes("image")||e.name.toLowerCase().includes("cover")||e.name.toLowerCase().includes("url"));return o=Yt(),a=o.firstChild,s=a.firstChild,l=s.firstChild,d=l.nextSibling,p=s.nextSibling,c(o,r(u,{when:i,children:i=>{return o=Vt(),c(o,r(u,{get when(){return n.data[i().name]},get fallback(){return e=Vt(),c(e,()=>t("table.noImage")),h(()=>v(e,Gt.imagePlaceholder)),e;var e},get children(){var t=Kt();return h(r=>{var o=String(n.data[i().name]),a=String((e.columns[0]?n.data[e.columns[0].name]:null)||"Record"),s=Gt.image;return o!==r.e&&w(t,"src",r.e=o),a!==r.t&&w(t,"alt",r.t=a),s!==r.a&&v(t,r.a=s),r},{e:void 0,t:void 0,a:void 0}),t}})),h(()=>v(o,Gt.imageContainer)),o;var o}}),a),c(l,()=>String((e.columns[0]?n.data[e.columns[0].name]:null)||t("table.untitled"))),d.$$click=()=>e.onDeleteRecord(n.id),c(p,r(g,{get each(){return e.columns.slice(1,3)},children:e=>{return t=Jt(),i=t.firstChild,r=i.firstChild,o=i.nextSibling,c(i,()=>e.name,r),c(o,()=>String(n.data[e.name]||"-")),h(e=>{var n=Gt.field,r=Gt.fieldName,a=Gt.fieldValue;return n!==e.e&&v(t,e.e=n),r!==e.t&&v(i,e.t=r),a!==e.a&&v(o,e.a=a),e},{e:void 0,t:void 0,a:void 0}),t;var t,i,r,o}})),h(e=>{var t=Gt.card,n=Gt.cardContent,i=Gt.cardHeader,r=Gt.deleteBtn,l=Gt.cardBody;return t!==e.e&&v(o,e.e=t),n!==e.t&&v(a,e.t=n),i!==e.a&&v(s,e.a=i),r!==e.o&&v(d,e.o=r),l!==e.i&&v(p,e.i=l),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,a,s,l,d,p}})),h(()=>v(n,Gt.gallery)),n;var n}d(["click"]);const Qt="_board_k3jdu_1",Xt="_noGroup_k3jdu_7",en="_columns_k3jdu_16",tn="_column_k3jdu_16",nn="_columnHeader_k3jdu_31",rn="_columnName_k3jdu_38",on="_columnCount_k3jdu_45",an="_cards_k3jdu_53",sn="_card_k3jdu_53",ln="_cardHeader_k3jdu_68",dn="_deleteBtn_k3jdu_80",cn="_cardBody_k3jdu_93",un="_field_k3jdu_97",gn="_fieldName_k3jdu_103",hn="_fieldValue_k3jdu_108";var vn=f("<div>"),pn=f("<div><div><span></span><span></span></div><div>"),_n=f("<div><div><strong></strong><button>‚úï</button></div><div>"),mn=f("<div><span>:</span><span>");function fn(e){const{t:t}=B(),n=()=>e.columns.find(e=>e.type===Ve||"multi_select"===e.type),o=i(()=>{const i=n();if(!i)return[{name:"All Records",records:e.records}];const r={};i.options&&i.options.forEach(e=>{r[e.id]={name:e.name,records:[]}}),r.__none__={name:t("table.noGroup")||"No Group",records:[]},e.records.forEach(e=>{const t=e.data[i.name];t&&"string"==typeof t?(r[t]||(r[t]={name:t,records:[]}),r[t].records.push(e)):r.__none__?.records.push(e)});const o=(i.options||[]).map(e=>e.name);return Object.values(r).filter(e=>e.records.length>0||o.includes(e.name))});return a=vn(),c(a,r(u,{get when(){return n()},get fallback(){return e=vn(),c(e,()=>t("table.addSelectColumn")),h(()=>v(e,Xt)),e;var e},get children(){var i=vn();return c(i,r(g,{get each(){return o()},children:i=>{return o=pn(),a=o.firstChild,s=a.firstChild,l=s.nextSibling,d=a.nextSibling,c(s,()=>i.name),c(l,()=>i.records.length),c(d,r(g,{get each(){return i.records},children:i=>{return o=_n(),a=o.firstChild,s=a.firstChild,l=s.nextSibling,d=a.nextSibling,c(s,()=>String((e.columns[0]?i.data[e.columns[0].name]:null)||t("table.untitled"))),l.$$click=()=>e.onDeleteRecord(i.id),c(d,r(g,{get each(){return e.columns.slice(1,4).filter(e=>e.name!==n()?.name)},children:e=>{return t=mn(),n=t.firstChild,r=n.firstChild,o=n.nextSibling,c(n,()=>e.name,r),c(o,()=>String(i.data[e.name]||"-")),h(e=>{var i=un,r=gn,a=hn;return i!==e.e&&v(t,e.e=i),r!==e.t&&v(n,e.t=r),a!==e.a&&v(o,e.a=a),e},{e:void 0,t:void 0,a:void 0}),t;var t,n,r,o}})),h(e=>{var t=sn,n=ln,i=dn,r=cn;return t!==e.e&&v(o,e.e=t),n!==e.t&&v(a,e.t=n),i!==e.a&&v(l,e.a=i),r!==e.o&&v(d,e.o=r),e},{e:void 0,t:void 0,a:void 0,o:void 0}),o;var o,a,s,l,d}})),h(e=>{var t=tn,n=nn,i=rn,r=on,c=an;return t!==e.e&&v(o,e.e=t),n!==e.t&&v(a,e.t=n),i!==e.a&&v(s,e.a=i),r!==e.o&&v(l,e.o=r),c!==e.i&&v(d,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),o;var o,a,s,l,d}})),h(()=>v(i,en)),i}})),h(()=>v(a,Qt)),a;var a}d(["click"]);class bn extends Error{constructor(e,t){super(t.error.message),this.status=e,this.response=t,this.name="APIError"}}async function wn(e,t){const n=await e(t);if(!n.ok){const e=await n.json();throw new bn(n.status,e)}return n.json()}async function yn(e,t,n){const i={method:"POST"};n&&(i.headers={"Content-Type":"application/json"},i.body=JSON.stringify(n));const r=await e(t,i);if(!r.ok){const e=await r.json();throw new bn(r.status,e)}return r.json()}function $n(e){return{admin:{organizations:{list:()=>wn(e,"/api/admin/organizations")},stats:{get:()=>wn(e,"/api/admin/stats")},users:{list:()=>wn(e,"/api/admin/users")}},auth:{invitations:{acceptOrgInvitation:t=>yn(e,"/api/auth/invitations/org/accept",t),acceptWSInvitation:t=>yn(e,"/api/auth/invitations/ws/accept",t)},me:{get:()=>wn(e,"/api/auth/me")},providers:{list:()=>wn(e,"/api/auth/providers")},sessions:{list:()=>wn(e,"/api/auth/sessions"),revokeAllSessions:()=>yn(e,"/api/auth/sessions/revoke-all"),revokeSession:t=>yn(e,"/api/auth/sessions/revoke",t)},settings:{update:t=>yn(e,"/api/auth/settings",t)},login:t=>yn(e,"/api/auth/login",t),logout:()=>yn(e,"/api/auth/logout"),register:t=>yn(e,"/api/auth/register",t),switchOrg:t=>yn(e,"/api/auth/switch-org",t),switchWorkspace:t=>yn(e,"/api/auth/switch-workspace",t)},health:{get:()=>wn(e,"/api/health")},organizations:{create:t=>yn(e,"/api/organizations",t)},org:t=>({invitations:{create:n=>yn(e,`/api/organizations/${t}/invitations`,n),list:()=>wn(e,`/api/organizations/${t}/invitations`)},organizations:{get:()=>wn(e,`/api/organizations/${t}`),update:n=>yn(e,`/api/organizations/${t}`,n)},settings:{update:n=>yn(e,`/api/organizations/${t}/settings`,n)},users:{role:{update:n=>yn(e,`/api/organizations/${t}/users/role`,n)},list:()=>wn(e,`/api/organizations/${t}/users`)}}),ws:t=>({invitations:{create:n=>yn(e,`/api/workspaces/${t}/invitations`,n),list:()=>wn(e,`/api/workspaces/${t}/invitations`)},nodes:{create:n=>yn(e,`/api/workspaces/${t}/nodes`,n),get:n=>wn(e,`/api/workspaces/${t}/nodes/${n}`),list:()=>wn(e,`/api/workspaces/${t}/nodes`)},pages:{assets:{delete:(n,i)=>yn(e,`/api/workspaces/${t}/pages/${n}/assets/${i}/delete`),list:n=>wn(e,`/api/workspaces/${t}/pages/${n}/assets`)},history:{get:(n,i)=>wn(e,`/api/workspaces/${t}/pages/${n}/history/${i}`),async list(n,i){const r=new URLSearchParams;i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/pages/${n}/history`+(r.toString()?`?${r}`:"");return wn(e,o)}},create:n=>yn(e,`/api/workspaces/${t}/pages`,n),delete:n=>yn(e,`/api/workspaces/${t}/pages/${n}/delete`),get:n=>wn(e,`/api/workspaces/${t}/pages/${n}`),list:()=>wn(e,`/api/workspaces/${t}/pages`),update:(n,i)=>yn(e,`/api/workspaces/${t}/pages/${n}`,i)},settings:{git:{delete:()=>yn(e,`/api/workspaces/${t}/settings/git/delete`),get:()=>wn(e,`/api/workspaces/${t}/settings/git`),pushGit:()=>yn(e,`/api/workspaces/${t}/settings/git/push`),update:n=>yn(e,`/api/workspaces/${t}/settings/git`,n)},membership:{update:n=>yn(e,`/api/workspaces/${t}/settings/membership`,n)}},tables:{records:{create:(n,i)=>yn(e,`/api/workspaces/${t}/tables/${n}/records`,i),delete:(n,i)=>yn(e,`/api/workspaces/${t}/tables/${n}/records/${i}/delete`),get:(n,i)=>wn(e,`/api/workspaces/${t}/tables/${n}/records/${i}`),async list(n,i){const r=new URLSearchParams;i.Offset&&r.set("offset",String(i.Offset)),i.Limit&&r.set("limit",String(i.Limit));const o=`/api/workspaces/${t}/tables/${n}/records`+(r.toString()?`?${r}`:"");return wn(e,o)},update:(n,i,r)=>yn(e,`/api/workspaces/${t}/tables/${n}/records/${i}`,r)},create:n=>yn(e,`/api/workspaces/${t}/tables`,n),delete:n=>yn(e,`/api/workspaces/${t}/tables/${n}/delete`),get:n=>wn(e,`/api/workspaces/${t}/tables/${n}`),list:()=>wn(e,`/api/workspaces/${t}/tables`),update:(n,i)=>yn(e,`/api/workspaces/${t}/tables/${n}`,i)},users:{update:n=>yn(e,`/api/workspaces/${t}/users/role`,n)},search:n=>yn(e,`/api/workspaces/${t}/search`,n)})}}const kn=3,Sn=1e3,Cn=3e4;function xn(e){return 429===e||e>=500&&e<600}function zn(e){if(!e)return null;const t=parseInt(e,10);if(!isNaN(t))return 1e3*t;const n=Date.parse(e);return isNaN(n)?null:Math.max(0,n-Date.now())}function Ln(e,t){if(null!==t)return Math.min(t,Cn);const n=Sn*Math.pow(2,e);return Math.min(n,Cn)}function In(e,t){return n=async(n,i)=>{const r=e(),o={...i?.headers};r&&(o.Authorization=`Bearer ${r}`);const a=await fetch(n,{...i,headers:o});return 401===a.status&&t&&t(),a},async(e,t)=>{let i=0;for(;;){const r=await n(e,t);if(!xn(r.status)||i>=kn)return r;const o=Ln(i,zn(r.headers.get("Retry-After")));await new Promise(e=>setTimeout(e,o)),i++}};var n}function Tn(e,t){return $n(In(e,t))}const En="_settings_i6mpl_1",Pn="_header_i6mpl_7",On="_closeButton_i6mpl_16",Dn="_section_i6mpl_28",Rn="_table_i6mpl_37",Bn="_roleSelect_i6mpl_55",An="_error_i6mpl_61",jn="_success_i6mpl_69",Nn="_tabs_i6mpl_77",Mn="_activeTab_i6mpl_99",qn="_settingsForm_i6mpl_104",Wn="_formItem_i6mpl_111",Hn="_checkboxLabel_i6mpl_130",Fn="_saveButton_i6mpl_143",Un="_hint_i6mpl_162",Gn="_inviteSection_i6mpl_168",Vn="_inviteForm_i6mpl_172",Yn="_formGroup_i6mpl_183",Kn="_addRemoteSection_i6mpl_212",Jn="_actions_i6mpl_224",Zn="_smallButton_i6mpl_229",Qn="_deleteButtonSmall_i6mpl_243";var Xn=f("<button>"),ei=f("<div>"),ti=f("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),ni=f("<h4>"),ii=f("<div><form><h4></h4><div><input type=email required><select><option value=admin></option><option value=editor></option><option value=viewer></option></select><button type=submit>"),ri=f("<section><h3>"),oi=f("<section><h3></h3><form><div><label></label><select><option value=light></option><option value=dark></option><option value=system></option></select></div><div><label></label><select><option value=en></option><option value=fr></option><option value=de></option><option value=es></option></select></div><div><label><input type=checkbox></label></div><button type=submit>"),ai=f("<form><div><label></label><input type=text required></div><div><label><input type=checkbox></label></div><div><label></label><input type=text><p></p></div><button type=submit>"),si=f("<div><h4></h4><form><div><label></label><input type=url required></div><div><label></label><input type=password><p></p></div><button type=submit>"),li=f("<section><h3></h3><p>"),di=f("<div><header><h2></h2><button>&times;</button></header><div><button></button><button></button><button>"),ci=f("<p>"),ui=f("<select><option value=admin></option><option value=editor></option><option value=viewer>"),gi=f("<tr><td></td><td></td><td>"),hi=f("<table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td><button></button><button>");function vi(e){const{t:n}=B(),[o,a]=t("members"),[s,l]=t([]),[d,p]=t([]),[_,m]=t(null),[f,b]=t(""),[y,k]=t(""),[S,C]=t(""),[x,z]=t("viewer"),[L,I]=t("light"),[T,E]=t("en"),[P,O]=t(!0);$(()=>{I(e.user.settings?.theme||"light"),E(e.user.settings?.language||"en")});const[D,R]=t(""),[A,j]=t(""),[N,M]=t(!1),[q,W]=t(""),[H,F]=t(!1),[U,G]=t(null),[V,Y]=t(null),K=i(()=>Tn(()=>e.token)),J=i(()=>{const t=e.user.organization_id;return t?K().org(t):null}),Z=i(()=>{const t=e.user.workspace_id;return t?K().ws(t):null}),Q=async()=>{const t=J();if(t)try{F(!0),G(null);const n=Z();if("members"===o()&&"admin"===e.user.workspace_role){const[e,i]=await Promise.all([t.users.list(),n?n.invitations.list():Promise.resolve({invitations:[]})]);l(e.users?.filter(e=>!!e)||[]),p(i.invitations?.filter(e=>!!e)||[])}if("workspace"===o()){const e=await t.organizations.get();R(e.name),j(e.name),M(!1),W(e.settings?.allowed_email_domains?.join(", ")||"")}if("sync"===o()&&"admin"===e.user.workspace_role&&n)try{const e=await n.settings.git.get();m(e)}catch{m(null)}const i=e.user.workspaces?.find(t=>t.workspace_id===e.user.workspace_id);i&&O(i.settings?.notifications??!0)}catch(i){G(`${n("errors.failedToLoad")}: ${i}`)}finally{F(!1)}};$(()=>{Q()});const X=async e=>{e.preventDefault();const t=Z();if(S()&&t)try{F(!0),await t.invitations.create({email:S(),role:x()}),C(""),Y(n("success.invitationSent")||"Invitation sent successfully"),Q()}catch(i){G(`${n("errors.failedToInvite")}: ${i}`)}finally{F(!1)}},ee=async e=>{e.preventDefault();const t=Z();if(t)try{F(!0),G(null),Y(null);const e={theme:L(),language:T()},i={notifications:P()};await Promise.all([K().auth.settings.update({settings:e}),t.settings.membership.update({settings:i})]),Y(n("success.personalSettingsSaved")||"Personal settings saved successfully")}catch(i){G(`${n("errors.failedToSave")}: ${i}`)}finally{F(!1)}},te=async e=>{e.preventDefault();const t=J();if(t)try{F(!0),G(null),Y(null);const e={allowed_email_domains:q()?q().split(",").map(e=>e.trim()):[],require_sso:!1,default_workspace_quotas:{max_pages:1e3,max_storage_mb:1024,max_records_per_table:1e4,max_asset_size_mb:50}},i=[t.settings.update({settings:e})];D()!==A()&&D().trim()&&i.push(t.organizations.update({name:D().trim()})),await Promise.all(i),j(D().trim()),Y(n("success.workspaceSettingsSaved")||"Workspace settings saved successfully")}catch(i){G(`${n("errors.failedToSave")}: ${i}`)}finally{F(!1)}},ne=async e=>{e.preventDefault();const t=Z();if(t)try{F(!0),G(null);const e=await t.settings.git.update({url:f(),token:y(),type:"custom",auth_type:y()?"token":"none"});m(e),Y(n("success.remoteAdded")||"Git remote configured"),b(""),k("")}catch(i){G(`${n("errors.failedToAddRemote")}: ${i}`)}finally{F(!1)}},ie=async()=>{const e=Z();if(e)try{F(!0),G(null),Y(null),await e.settings.git.pushGit(),Y(n("success.pushSuccessful")||"Push successful"),Q()}catch(t){G(`${n("errors.pushFailed")}: ${t}`)}finally{F(!1)}},re=async()=>{if(!confirm(n("settings.confirmRemoveRemote")||"Are you sure you want to remove this remote?"))return;const e=Z();if(e)try{F(!0),G(null),await e.settings.git.delete(),m(null),Y(n("success.remoteRemoved")||"Remote removed")}catch(t){G(`${n("errors.failedToRemoveRemote")}: ${t}`)}finally{F(!1)}};return oe=di(),ae=oe.firstChild,se=ae.firstChild,le=se.nextSibling,de=ae.nextSibling,ce=de.firstChild,ue=ce.nextSibling,ge=ue.nextSibling,c(se,()=>n("settings.title")),le.$$click=()=>e.onClose(),ce.$$click=()=>a("members"),c(ce,()=>n("settings.members")),ue.$$click=()=>a("personal"),c(ue,()=>n("settings.personal")),ge.$$click=()=>a("workspace"),c(ge,()=>n("settings.workspace")),c(de,r(u,{get when(){return"admin"===e.user.workspace_role},get children(){var e=Xn();return e.$$click=()=>a("sync"),c(e,()=>n("settings.gitSync")),h(()=>v(e,"sync"===o()?Mn:"")),e}}),null),c(oe,r(u,{get when(){return U()},get children(){var e=ei();return c(e,U),h(()=>v(e,An)),e}}),null),c(oe,r(u,{get when(){return V()},get children(){var e=ei();return c(e,V),h(()=>v(e,jn)),e}}),null),c(oe,r(u,{get when(){return"members"===o()},get children(){var t=ri(),i=t.firstChild;return c(i,()=>n("settings.members")),c(t,r(u,{get when(){return"admin"===e.user.workspace_role},get fallback(){return e=ci(),c(e,()=>n("settings.adminOnlyMembers")),e;var e},get children(){return[(y=ti(),$=y.firstChild,k=$.firstChild.firstChild,L=k.nextSibling,I=L.nextSibling,T=$.nextSibling,c(k,()=>n("settings.nameColumn")),c(L,()=>n("settings.emailColumn")),c(I,()=>n("settings.roleColumn")),c(T,r(g,{get each(){return s()},children:t=>{return i=gi(),o=i.firstChild,a=o.nextSibling,s=a.nextSibling,c(o,()=>t.name),c(a,()=>t.email),c(s,r(u,{get when(){return t.id!==e.user.id},get fallback(){return t.workspace_role},get children(){var e=ui(),i=e.firstChild,r=i.nextSibling,o=r.nextSibling;return e.addEventListener("change",e=>(async(e,t)=>{const i=Z();if(i)try{F(!0),await i.users.update({user_id:e,role:t}),Y(n("success.roleUpdated")||"Role updated"),Q()}catch(r){G(`${n("errors.failedToUpdateRole")}: ${r}`)}finally{F(!1)}})(t.id,e.target.value)),c(i,()=>n("settings.roleAdmin")),c(r,()=>n("settings.roleEditor")),c(o,()=>n("settings.roleViewer")),h(()=>v(e,Bn)),h(()=>e.value=t.workspace_role),e}})),i;var i,o,a,s}})),h(()=>v(y,Rn)),y),(t=ii(),i=t.firstChild,o=i.firstChild,a=o.nextSibling,l=a.firstChild,p=l.nextSibling,_=p.firstChild,m=_.nextSibling,f=m.nextSibling,b=p.nextSibling,i.addEventListener("submit",X),c(o,()=>n("settings.inviteNewMember")),l.$$input=e=>C(e.target.value),p.addEventListener("change",e=>z(e.target.value)),c(_,()=>n("settings.roleAdmin")),c(m,()=>n("settings.roleEditor")),c(f,()=>n("settings.roleViewer")),c(b,()=>n("common.invite")),c(t,r(u,{get when(){return d().length>0},get children(){return[(l=ni(),c(l,()=>n("settings.pendingInvitations")),l),(e=ti(),t=e.firstChild,i=t.firstChild.firstChild,o=i.nextSibling,a=o.nextSibling,s=t.nextSibling,c(i,()=>n("settings.emailColumn")),c(o,()=>n("settings.roleColumn")),c(a,()=>n("settings.sentColumn")),c(s,r(g,{get each(){return d()},children:e=>{return t=gi(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,c(n,()=>e.email),c(i,()=>e.role),c(r,()=>new Date(e.created).toLocaleDateString()),t;var t,n,i,r}})),h(()=>v(e,Rn)),e)];var e,t,i,o,a,s,l}}),null),h(e=>{var r=Gn,o=Vn,s=Yn,d=n("settings.emailPlaceholder")||"Email address",c=H();return r!==e.e&&v(t,e.e=r),o!==e.t&&v(i,e.t=o),s!==e.a&&v(a,e.a=s),d!==e.o&&w(l,"placeholder",e.o=d),c!==e.i&&(b.disabled=e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),h(()=>l.value=S()),h(()=>p.value=x()),t)];var t,i,o,a,l,p,_,m,f,b,y,$,k,L,I,T}}),null),h(()=>v(t,Dn)),t}}),null),c(oe,r(u,{get when(){return"personal"===o()},get children(){var e=oi(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,d=l.nextSibling,u=r.nextSibling,g=u.firstChild,p=g.nextSibling,_=p.firstChild,m=_.nextSibling,f=m.nextSibling,b=f.nextSibling,w=u.nextSibling,y=w.firstChild,$=y.firstChild,k=w.nextSibling;return c(t,()=>n("settings.personalSettings")),i.addEventListener("submit",ee),c(o,()=>n("settings.theme")),a.addEventListener("change",e=>I(e.target.value)),c(s,()=>n("settings.themeLight")),c(l,()=>n("settings.themeDark")),c(d,()=>n("settings.themeSystem")),c(g,()=>n("settings.language")),p.addEventListener("change",e=>E(e.target.value)),c(_,()=>n("settings.languageEn")),c(m,()=>n("settings.languageFr")),c(f,()=>n("settings.languageDe")),c(b,()=>n("settings.languageEs")),$.addEventListener("change",e=>O(e.currentTarget.checked)),c(y,()=>n("settings.enableNotifications"),null),c(k,()=>n("settings.saveChanges")),h(t=>{var n=Dn,o=qn,a=Wn,s=Wn,l=Wn,d=Hn,c=Fn,g=H();return n!==t.e&&v(e,t.e=n),o!==t.t&&v(i,t.t=o),a!==t.a&&v(r,t.a=a),s!==t.o&&v(u,t.o=s),l!==t.i&&v(w,t.i=l),d!==t.n&&v(y,t.n=d),c!==t.s&&v(k,t.s=c),g!==t.h&&(k.disabled=t.h=g),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),h(()=>a.value=L()),h(()=>p.value=T()),h(()=>$.checked=P()),e}}),null),c(oe,r(u,{get when(){return"workspace"===o()},get children(){var t=ri(),i=t.firstChild;return c(i,()=>n("settings.workspaceSettings")),c(t,r(u,{get when(){return"admin"===e.user.workspace_role},get fallback(){return e=ci(),c(e,()=>n("settings.adminOnlyWorkspace")),e;var e},get children(){var e=ai(),t=e.firstChild,i=t.firstChild,r=i.nextSibling,o=t.nextSibling,a=o.firstChild,s=a.firstChild,l=o.nextSibling,d=l.firstChild,u=d.nextSibling,g=u.nextSibling,p=l.nextSibling;return e.addEventListener("submit",te),c(i,()=>n("settings.organizationName")),r.$$input=e=>R(e.target.value),s.addEventListener("change",e=>M(e.currentTarget.checked)),c(a,()=>n("settings.allowPublicAccess"),null),c(d,()=>n("settings.allowedDomains")),u.$$input=e=>W(e.target.value),c(g,()=>n("settings.allowedDomainsHint")),c(p,()=>n("settings.saveWorkspaceSettings")),h(i=>{var r=qn,s=Wn,d=Wn,c=Hn,h=Wn,_=n("settings.allowedDomainsPlaceholder")||"example.com, company.org",m=Un,f=Fn,b=H();return r!==i.e&&v(e,i.e=r),s!==i.t&&v(t,i.t=s),d!==i.a&&v(o,i.a=d),c!==i.o&&v(a,i.o=c),h!==i.i&&v(l,i.i=h),_!==i.n&&w(u,"placeholder",i.n=_),m!==i.s&&v(g,i.s=m),f!==i.h&&v(p,i.h=f),b!==i.r&&(p.disabled=i.r=b),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),h(()=>r.value=D()),h(()=>s.checked=N()),h(()=>u.value=q()),e}}),null),h(()=>v(t,Dn)),t}}),null),c(oe,r(u,{get when(){return"sync"===o()},get children(){var e=li(),t=e.firstChild,i=t.nextSibling;return c(t,()=>n("settings.gitSynchronization")),c(i,()=>n("settings.gitSyncHint")),c(e,r(u,{get when(){return _()},children:e=>{const t=e().last_sync;return i=hi(),r=i.firstChild,o=r.firstChild.firstChild,a=o.nextSibling,s=a.nextSibling,l=r.nextSibling.firstChild.firstChild,d=l.nextSibling,u=d.nextSibling,g=u.firstChild,p=g.nextSibling,c(o,()=>n("settings.urlColumn")),c(a,()=>n("settings.lastSyncColumn")),c(s,()=>n("common.actions")),c(l,()=>e().url),c(d,()=>t?new Date(t).toLocaleString():n("settings.never")),g.$$click=ie,c(g,()=>n("common.push")),p.$$click=re,c(p,()=>n("common.remove")),h(e=>{var t=Rn,n=Jn,r=H(),o=Zn,a=H(),s=Qn;return t!==e.e&&v(i,e.e=t),n!==e.t&&v(u,e.t=n),r!==e.a&&(g.disabled=e.a=r),o!==e.o&&v(g,e.o=o),a!==e.i&&(p.disabled=e.i=a),s!==e.n&&v(p,e.n=s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),i;var i,r,o,a,s,l,d,u,g,p}}),null),c(e,r(u,{get when(){return!_()},get children(){var e=si(),t=e.firstChild,i=t.nextSibling,r=i.firstChild,o=r.firstChild,a=o.nextSibling,s=r.nextSibling,l=s.firstChild,d=l.nextSibling,u=d.nextSibling,g=s.nextSibling;return c(t,()=>n("settings.addNewRemote")),i.addEventListener("submit",ne),c(o,()=>n("settings.repositoryUrl")),a.$$input=e=>b(e.target.value),c(l,()=>n("settings.personalAccessToken")),d.$$input=e=>k(e.target.value),c(u,()=>n("settings.tokenHint")),c(g,()=>n("settings.addRemote")),h(t=>{var o=Kn,l=qn,c=Wn,h=n("settings.repositoryUrlPlaceholder")||"https://github.com/user/repo.git",p=Wn,_=n("settings.tokenPlaceholder")||"ghp_...",m=Un,f=Fn,b=H();return o!==t.e&&v(e,t.e=o),l!==t.t&&v(i,t.t=l),c!==t.a&&v(r,t.a=c),h!==t.o&&w(a,"placeholder",t.o=h),p!==t.i&&v(s,t.i=p),_!==t.n&&w(d,"placeholder",t.n=_),m!==t.s&&v(u,t.s=m),f!==t.h&&v(g,t.h=f),b!==t.r&&(g.disabled=t.r=b),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),h(()=>a.value=f()),h(()=>d.value=y()),e}}),null),h(t=>{var n=Dn,r=Un;return n!==t.e&&v(e,t.e=n),r!==t.t&&v(i,t.t=r),t},{e:void 0,t:void 0}),e}}),null),h(e=>{var t=En,n=Pn,i=On,r=Nn,a="members"===o()?Mn:"",s="personal"===o()?Mn:"",l="workspace"===o()?Mn:"";return t!==e.e&&v(oe,e.e=t),n!==e.t&&v(ae,e.t=n),i!==e.a&&v(le,e.a=i),r!==e.o&&v(de,e.o=r),a!==e.i&&v(ce,e.i=a),s!==e.n&&v(ue,e.n=s),l!==e.s&&v(ge,e.s=l),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),oe;var oe,ae,se,le,de,ce,ue,ge}d(["click","input"]);const pi="_overlay_v0iwf_1",_i="_modal_v0iwf_11",mi="_header_v0iwf_28",fi="_content_v0iwf_43",bi="_step_v0iwf_47",wi="_formGroup_v0iwf_53",yi="_primaryButton_v0iwf_76",$i="_secondaryButton_v0iwf_99",ki="_actions_v0iwf_113",Si="_error_v0iwf_127",Ci="_gitForm_v0iwf_137";var xi=f("<div>"),zi=f("<div><div><header><h2></h2><p></p></header><div><div><h3></h3><p></p><form><div><label></label><input type=url></div><div><label></label><input type=password></div><div><button type=button></button><button type=submit>");function Li(e){const{t:n}=B(),[o,a]=t(!1),[s,l]=t(null),[d,g]=t(""),[_,m]=t(""),f=i(()=>Tn(()=>e.token)),b=i(()=>{const t=e.user.workspace_id;return t?f().ws(t):null}),y=()=>{e.onComplete()},$=async t=>{t.preventDefault();const n=b();if(n)try{a(!0),l(null),await n.settings.git.update({url:d(),token:_(),type:"custom",auth_type:_()?"token":"none"}),e.onComplete()}catch(i){l("Git setup failed: "+i),a(!1)}};return S=zi(),C=S.firstChild,x=C.firstChild,z=x.firstChild,L=z.nextSibling,I=x.nextSibling,T=I.firstChild,E=T.firstChild,P=E.nextSibling,O=P.nextSibling,D=O.firstChild,R=D.firstChild,A=R.nextSibling,j=D.nextSibling,N=j.firstChild,M=N.nextSibling,q=j.nextSibling,W=q.firstChild,H=W.nextSibling,c(z,()=>n("onboarding.welcome")),c(L,()=>n("onboarding.letsGetStarted")),c(C,r(u,{get when(){return s()},get children(){var e=xi();return c(e,s),h(()=>v(e,Si)),e}}),I),c(E,()=>n("onboarding.advancedSyncTitle")),c(P,()=>n("onboarding.advancedSyncHint")),O.addEventListener("submit",$),c(R,()=>n("onboarding.repoUrl")),A.$$input=e=>g(e.target.value),c(N,()=>n("onboarding.patLabel")),M.$$input=e=>m(e.target.value),W.$$click=y,c(W,()=>n("onboarding.skipForNow")),c(H,(k=p(()=>!!o()),()=>k()?n("common.saving"):n("onboarding.setupAndFinish"))),h(e=>{var t=pi,i=_i,r=mi,a=fi,s=bi,l=Ci,c=wi,u=n("onboarding.repoUrlPlaceholder")||"https://github.com/user/repo.git",g=wi,h=n("onboarding.patPlaceholder")||"ghp_...",p=ki,_=$i,m=o(),f=yi,b=!d()||o();return t!==e.e&&v(S,e.e=t),i!==e.t&&v(C,e.t=i),r!==e.a&&v(x,e.a=r),a!==e.o&&v(I,e.o=a),s!==e.i&&v(T,e.i=s),l!==e.n&&v(O,e.n=l),c!==e.s&&v(D,e.s=c),u!==e.h&&w(A,"placeholder",e.h=u),g!==e.r&&v(j,e.r=g),h!==e.d&&w(M,"placeholder",e.d=h),p!==e.l&&v(q,e.l=p),_!==e.u&&v(W,e.u=_),m!==e.c&&(W.disabled=e.c=m),f!==e.w&&v(H,e.w=f),b!==e.m&&(H.disabled=e.m=b),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),h(()=>A.value=d()),h(()=>M.value=_()),S;var k,S,C,x,z,L,I,T,E,P,O,D,R,A,j,N,M,q,W,H}d(["input","click"]);const Ii="_authContainer_10t3t_1",Ti="_authForm_10t3t_9",Ei="_formGroup_10t3t_24",Pi="_error_10t3t_62",Oi="_toggle_10t3t_72",Di="_authFooter_10t3t_87",Ri="_oauthSection_10t3t_104",Bi="_divider_10t3t_108",Ai="_oauthButtons_10t3t_127",ji="_googleButton_10t3t_133",Ni="_microsoftButton_10t3t_134",Mi="_oauthButton_10t3t_127";var qi=f("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),Wi=f("<div><div><span></span></div><div>"),Hi=f("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p><button type=button></button></p><div><a href=/privacy>"),Fi=f("<div>"),Ui=f("<a>");const Gi={[Ye]:{style:ji,labelKey:"auth.loginWithGoogle"},[Ke]:{style:Ni,labelKey:"auth.loginWithMicrosoft"}};const Vi=$n((e,t)=>fetch(e,t));function Yi(e){const{t:i}=B(),[o]=n(()=>Vi.auth.providers.list().then(e=>e.providers)),[a,s]=t(!1),[l,d]=t(""),[_,m]=t(""),[f,b]=t(""),[y,$]=t(null),[k,S]=t(!1),C=async t=>{t.preventDefault(),$(null),S(!0);try{const t=a()?await Vi.auth.register({email:l(),password:_(),name:f()}):await Vi.auth.login({email:l(),password:_()});t.token&&t.user?e.onLogin(t.token,t.user):$("Invalid response from server")}catch(n){$(n instanceof bn?n.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{S(!1)}};return E=Hi(),P=E.firstChild,O=P.firstChild,D=O.nextSibling,R=D.firstChild,A=R.nextSibling,j=D.nextSibling,N=j.firstChild,M=N.nextSibling,q=j.nextSibling,W=q.nextSibling,H=W.firstChild,F=W.nextSibling,U=F.firstChild,P.addEventListener("submit",C),c(O,(x=p(()=>!!a()),()=>x()?i("auth.createAccount"):i("auth.loginTitle"))),c(P,(z=p(()=>!!y()),()=>{return z()&&(e=Fi(),c(e,y),h(()=>v(e,Pi)),e);var e}),D),c(P,r(u,{get when(){return a()},get children(){var e=qi(),t=e.firstChild,n=t.nextSibling;return c(t,()=>i("auth.name")),n.$$input=e=>b(e.target.value),h(()=>v(e,Ei)),h(()=>n.value=f()),e}}),D),c(R,()=>i("auth.email")),A.$$input=e=>d(e.target.value),c(N,()=>i("auth.password")),M.$$input=e=>m(e.target.value),c(q,(L=p(()=>!!k()),()=>L()?i("auth.pleaseWait"):p(()=>!!a())()?i("auth.register"):i("auth.login"))),c(P,r(u,{get when(){return(o()??[]).length>0},get children(){var e=Wi(),t=e.firstChild,n=t.firstChild,a=t.nextSibling;return c(n,()=>i("auth.or")),c(a,r(g,{get each(){return o()},children:e=>{const t=function(e){const t=Gi[e];return t?{style:t.style,label:t.labelKey}:{style:Mi,label:e.charAt(0).toUpperCase()+e.slice(1)}}(e),n=e in Gi;return r=Ui(),w(r,"href",`/api/auth/oauth/${e}`),c(r,()=>n?i(t.label):t.label),h(()=>v(r,t.style)),r;var r}})),h(n=>{var i=Ri,r=Bi,o=Ai;return i!==n.e&&v(e,n.e=i),r!==n.t&&v(t,n.t=r),o!==n.a&&v(a,n.a=o),n},{e:void 0,t:void 0,a:void 0}),e}}),W),c(W,(I=p(()=>!!a()),()=>I()?i("auth.alreadyHaveAccount"):i("auth.dontHaveAccount")),H),H.$$click=()=>s(!a()),c(H,(T=p(()=>!!a()),()=>T()?i("auth.login"):i("auth.register"))),U.$$click=e=>{e.preventDefault(),window.history.pushState(null,"","/privacy"),window.dispatchEvent(new PopStateEvent("popstate"))},c(U,()=>i("app.privacyPolicy")),h(e=>{var t=Ii,n=Ti,i=Ei,r=Ei,o=a()?"new-password":"current-password",s=k(),l=Oi,d=Di;return t!==e.e&&v(E,e.e=t),n!==e.t&&v(P,e.t=n),i!==e.a&&v(D,e.a=i),r!==e.o&&v(j,e.o=r),o!==e.i&&w(M,"autocomplete",e.i=o),s!==e.n&&(q.disabled=e.n=s),l!==e.s&&v(W,e.s=l),d!==e.h&&v(F,e.h=d),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),h(()=>A.value=l()),h(()=>M.value=_()),E;var x,z,L,I,T,E,P,O,D,R,A,j,N,M,q,W,H,F,U}d(["input","click"]);const Ki="_container_mfa6v_1",Ji="_content_mfa6v_9",Zi="_header_mfa6v_19",Qi="_section_mfa6v_36",Xi="_footer_mfa6v_49",er="_backButton_mfa6v_57";var tr=f("<div><div><header><h1>Privacy Policy</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Introduction</h2><p>Welcome to mddb. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about our policy, or our practices with regards to your personal information, please contact us.</p></section><section><h2>2. Information We Collect</h2><p>We collect personal information that you voluntarily provide to us when registering at the mddb Express interest in obtaining information about us or our products and services, when participating in activities on the mddb or otherwise contacting us.</p><p>The personal information that we collect depends on the context of your interactions with us and the mddb, the choices you make and the products and features you use.</p></section><section><h2>3. How We Use Your Information</h2><p>We use personal information collected via our mddb for a variety of business purposes described below. We process your personal information for these purposes in reliance on our legitimate business interests, in order to enter into or perform a contract with you, with your consent, and/or for compliance with our legal obligations.</p></section><section><h2>4. Your Data, Your Control</h2><p>mddb is designed to be local-first and markdown-based. Your documents and tables are stored in the location you specify. If you use a hosted version, the provider has access to your data.</p></section><footer><button>Go Back");function nr(){return e=tr(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,(l=s.firstChild).$$click=()=>window.history.back(),h(d=>{var c=Ki,u=Ji,g=Zi,h=Qi,p=Qi,_=Qi,m=Qi,f=Xi,b=er;return c!==d.e&&v(e,d.e=c),u!==d.t&&v(t,d.t=u),g!==d.a&&v(n,d.a=g),h!==d.o&&v(i,d.o=h),p!==d.i&&v(r,d.i=p),_!==d.n&&v(o,d.n=_),m!==d.s&&v(a,d.s=m),f!==d.h&&v(s,d.h=f),b!==d.r&&v(l,d.r=b),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e;var e,t,n,i,r,o,a,s,l}d(["click"]);const ir="_container_mfa6v_1",rr="_content_mfa6v_9",or="_header_mfa6v_19",ar="_section_mfa6v_36",sr="_footer_mfa6v_49",lr="_backButton_mfa6v_57";var dr=f("<div><div><header><h1>Terms of Service</h1><p>Last updated: January 18, 2026</p></header><section><h2>1. Agreement to Terms</h2><p>By accessing our service, you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use our service.</p></section><section><h2>2. Intellectual Property Rights</h2><p>Unless otherwise indicated, the Site is our proprietary property and all source code, data, functionality, software, website designs, audio, video, text, photographs, and graphics on the Site (collectively, the ‚ÄúContent‚Äù) and the trademarks, service marks, and logos contained therein (the ‚ÄúMarks‚Äù) are owned or controlled by us or licensed to us.</p></section><section><h2>3. User Representations</h2><p>By using the Site, you represent and warrant that: (1) all registration information you submit will be true, accurate, current, and complete; (2) you will maintain the accuracy of such information and promptly update such registration information as necessary.</p></section><section><h2>4. Prohibited Activities</h2><p>You may not access or use the Site for any purpose other than that for which we make the Site available. The Site may not be used in connection with any commercial endeavors except those that are specifically endorsed or approved by us.</p></section><section><h2>5. Limitation of Liability</h2><p>In no event will we or our directors, employees, or agents be liable to you or any third party for any direct, indirect, consequential, exemplary, incidental, special, or punitive damages, including lost profit, lost revenue, loss of data, or other damages arising from your use of the site.</p></section><footer><button>Go Back");function cr(){return e=dr(),t=e.firstChild,n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.nextSibling,a=o.nextSibling,s=a.nextSibling,l=s.nextSibling,(d=l.firstChild).$$click=()=>window.history.back(),h(c=>{var u=ir,g=rr,h=or,p=ar,_=ar,m=ar,f=ar,b=ar,w=sr,y=lr;return u!==c.e&&v(e,c.e=u),g!==c.t&&v(t,c.t=g),h!==c.a&&v(n,c.a=h),p!==c.o&&v(i,c.o=p),_!==c.i&&v(r,c.i=_),m!==c.n&&v(o,c.n=m),f!==c.s&&v(a,c.s=f),b!==c.h&&v(s,c.h=b),w!==c.r&&v(l,c.r=w),y!==c.d&&v(d,c.d=y),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),e;var e,t,n,i,r,o,a,s,l,d}d(["click"]);const ur="_banner_172qk_1",gr="_content_172qk_23",hr="_title_172qk_27",vr="_message_172qk_32",pr="_actions_172qk_37",_r="_installButton_172qk_42",mr="_dismissButton_172qk_56";var fr=f("<div><div><div></div><div></div></div><div><button></button><button>");const br="mddb_pwa_dismissed";function wr(){const{t:e}=B(),[n,i]=t(null),[o,a]=t(!1);k(()=>{if(function(){const e=localStorage.getItem(br);if(!e)return!1;const t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<30}())return;const e=e=>{e.preventDefault(),i(e),a(!0)},t=()=>{a(!1),i(null)};window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),S(()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)})});const s=async()=>{const e=n();if(!e)return;await e.prompt();const{outcome:t}=await e.userChoice;"accepted"===t&&a(!1),i(null)},l=()=>{localStorage.setItem(br,(new Date).toISOString()),a(!1)};return r(u,{get when(){return p(()=>!!o())()&&n()},get children(){var t=fr(),n=t.firstChild,i=n.firstChild,r=i.nextSibling,o=n.nextSibling,a=o.firstChild,d=a.nextSibling;return c(i,()=>e("pwa.installTitle")),c(r,()=>e("pwa.installMessage")),a.$$click=l,c(a,()=>e("pwa.dismissButton")),d.$$click=s,c(d,()=>e("pwa.installButton")),h(e=>{var s=ur,l=gr,c=hr,u=vr,g=pr,h=mr,p=_r;return s!==e.e&&v(t,e.e=s),l!==e.t&&v(n,e.t=l),c!==e.a&&v(i,e.a=c),u!==e.o&&v(r,e.o=u),g!==e.i&&v(o,e.i=g),h!==e.n&&v(a,e.n=h),p!==e.s&&v(d,e.s=p),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}})}d(["click"]);var yr=f("<button type=button>"),$r=f("<div><div><header><h2></h2><p></p></header><form><div><label></label><input type=text autofocus></div><div><button type=submit>"),kr=f("<div>");function Sr(e){const{t:n}=B(),[i,o]=t(""),[a,s]=t(!1),[l,d]=t(null),g=async t=>{if(t.preventDefault(),i().trim())try{s(!0),d(null),await e.onCreate({name:i().trim(),welcomePageTitle:n("createOrg.welcomeTitle")||"Welcome",welcomePageContent:n("createOrg.welcomeContent")||"# Welcome\n\nYour new workspace."}),e.onClose()}catch(r){d(String(r))}finally{s(!1)}},_=t=>{e.isFirstOrg||t.target!==t.currentTarget||e.onClose()};return k=$r(),S=k.firstChild,x=S.firstChild,z=x.firstChild,L=z.nextSibling,I=x.nextSibling,T=I.firstChild,E=T.firstChild,P=E.nextSibling,O=T.nextSibling,D=O.firstChild,k.$$click=_,c(z,(m=p(()=>!!e.isFirstOrg),()=>m()?n("createOrg.firstOrgTitle"):n("createOrg.title"))),c(L,(f=p(()=>!!e.isFirstOrg),()=>f()?n("createOrg.firstOrgDescription"):n("createOrg.description"))),c(S,(y=p(()=>!!l()),()=>{return y()&&(e=kr(),c(e,l),h(()=>v(e,Si)),e);var e}),I),I.addEventListener("submit",g),c(E,()=>n("createOrg.nameLabel")),P.$$input=e=>o(e.target.value),c(O,r(u,{get when(){return!e.isFirstOrg},get children(){var t=yr();return b(t,"click",e.onClose),c(t,()=>n("common.cancel")),h(()=>v(t,$i)),t}}),D),c(D,($=p(()=>!!a()),()=>$()?n("common.creating"):n("createOrg.create"))),h(t=>{var r=pi,o=_i,s=mi,l=wi,d=n("createOrg.namePlaceholder")||"",c=ki,u=yi,g=!i().trim()||a(),h=e.isFirstOrg?{flex:1}:void 0;return r!==t.e&&v(k,t.e=r),o!==t.t&&v(S,t.t=o),s!==t.a&&v(x,t.a=s),l!==t.o&&v(T,t.o=l),d!==t.i&&w(P,"placeholder",t.i=d),c!==t.n&&v(O,t.n=c),u!==t.s&&v(D,t.s=u),g!==t.h&&(D.disabled=t.h=g),t.r=C(D,h,t.r),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),h(()=>P.value=i()),k;var m,f,y,$,k,S,x,z,L,I,T,E,P,O,D}d(["click","input"]);const Cr="_userMenu_o60yu_1",xr="_avatarButton_o60yu_5",zr="_avatarImage_o60yu_24",Lr="_initials_o60yu_30",Ir="_dropdown_o60yu_37",Tr="_userInfo_o60yu_50",Er="_userName_o60yu_57",Pr="_userEmail_o60yu_63",Or="_userRole_o60yu_68",Dr="_divider_o60yu_78",Rr="_menuItem_o60yu_83";var Br=f("<span>"),Ar=f("<div><div><span></span><span></span></div><div></div><button>"),jr=f("<div><button>"),Nr=f("<img referrerpolicy=no-referrer>");function Mr(e){const{t:n}=B(),[i,o]=t(!1);let a;const s=()=>{const t=e.user.name||e.user.email||"",n=t.split(/[\s@]+/);return n.length>=2&&n[0]&&n[1]?((n[0][0]||"")+(n[1][0]||"")).toUpperCase():t.slice(0,2).toUpperCase()},l=e=>{a&&!a.contains(e.target)&&o(!1)};k(()=>{document.addEventListener("mousedown",l),S(()=>{document.removeEventListener("mousedown",l)})});const d=()=>{o(!1),e.onLogout()};return g=jr(),p=g.firstChild,"function"==typeof a?x(a,g):a=g,p.$$click=()=>o(!i()),c(p,r(u,{get when(){return(()=>{const t=e.user.oauth_identities;if(!t)return null;for(const e of t)if(e.avatar_url)return e.avatar_url;return null})()},get fallback(){return e=Br(),c(e,s),h(()=>v(e,Lr)),e;var e},children:t=>{return n=Nr(),h(i=>{var r=t(),o=e.user.name||"User",a=zr;return r!==i.e&&w(n,"src",i.e=r),o!==i.t&&w(n,"alt",i.t=o),a!==i.a&&v(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),n;var n}})),c(g,r(u,{get when(){return i()},get children(){var t=Ar(),i=t.firstChild,o=i.firstChild,a=o.nextSibling,s=i.nextSibling,l=s.nextSibling;return c(o,()=>e.user.name),c(a,()=>e.user.email),c(i,r(u,{get when(){return e.user.workspace_role},get children(){var t=Br();return c(t,()=>e.user.workspace_role),h(()=>v(t,Or)),t}}),null),l.$$click=d,c(l,()=>n("userMenu.logout")),h(e=>{var n=Ir,r=Tr,d=Er,c=Pr,u=Dr,g=Rr;return n!==e.e&&v(t,e.e=n),r!==e.t&&v(i,e.t=r),d!==e.a&&v(o,e.a=d),c!==e.o&&v(a,e.o=c),u!==e.i&&v(s,e.i=u),g!==e.n&&v(l,e.n=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),t}}),null),h(t=>{var n=Cr,i=xr,r=e.user.name||e.user.email;return n!==t.e&&v(g,t.e=n),i!==t.t&&v(p,t.t=i),r!==t.a&&w(p,"title",t.a=r),t},{e:void 0,t:void 0,a:void 0}),g;var g,p}d(["click"]);const qr="_orgMenu_bblo4_1",Wr="_orgButton_bblo4_5",Hr="_orgName_bblo4_23",Fr="_chevron_bblo4_31",Ur="_dropdown_bblo4_36",Gr="_orgList_bblo4_49",Vr="_orgItem_bblo4_54",Yr="_active_bblo4_73",Kr="_orgItemName_bblo4_77",Jr="_checkmark_bblo4_83",Zr="_divider_bblo4_88",Qr="_createOrgItem_bblo4_93",Xr="_plusIcon_bblo4_112";var eo=f("<div><div></div><div></div><button><span>+"),to=f("<div><button><span></span><span>"),no=f("<span>‚úì"),io=f("<button><span>");function ro(e){const{t:n}=B(),[i,o]=t(!1);let a;const s=()=>{const t=e.memberships.find(t=>t.organization_id===e.currentOrgId);return t?.organization_name||n("app.myOrg")},l=e=>{a&&!a.contains(e.target)&&o(!1)};k(()=>{document.addEventListener("mousedown",l),S(()=>{document.removeEventListener("mousedown",l)})});const d=()=>{o(!1),e.onCreateOrg()};return p=to(),_=p.firstChild,m=_.firstChild,f=m.nextSibling,"function"==typeof a?x(a,p):a=p,_.$$click=()=>o(!i()),c(m,s),c(f,()=>i()?"‚ñ≤":"‚ñº"),c(p,r(u,{get when(){return i()},get children(){var t=eo(),i=t.firstChild,a=i.nextSibling,s=a.nextSibling,l=s.firstChild;return c(i,r(g,{get each(){return e.memberships},children:t=>{return n=io(),i=n.firstChild,n.$$click=()=>{return n=t.organization_id,o(!1),void(n!==e.currentOrgId&&e.onSwitchOrg(n));var n},c(i,()=>t.organization_name||t.organization_id),c(n,r(u,{get when(){return t.organization_id===e.currentOrgId},get children(){var e=no();return h(()=>v(e,Jr)),e}}),null),h(r=>{var o=`${Vr} ${t.organization_id===e.currentOrgId?Yr:""}`,a=Kr;return o!==r.e&&v(n,r.e=o),a!==r.t&&v(i,r.t=a),r},{e:void 0,t:void 0}),n;var n,i}})),s.$$click=d,c(s,()=>n("createOrg.title"),null),h(e=>{var n=Ur,r=Gr,o=Zr,d=Qr,c=Xr;return n!==e.e&&v(t,e.e=n),r!==e.t&&v(i,e.t=r),o!==e.a&&v(a,e.a=o),d!==e.o&&v(s,e.o=d),c!==e.i&&v(l,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t}}),null),h(e=>{var t=qr,n=Wr,i=s(),r=Hr,o=Fr;return t!==e.e&&v(p,e.e=t),n!==e.t&&v(_,e.t=n),i!==e.a&&w(_,"title",e.a=i),r!==e.o&&v(m,e.o=r),o!==e.i&&v(f,e.i=o),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),p;var p,_,m,f}d(["click"]);var oo=f("<div>"),ao=f("<nav>"),so=f("<span>‚óè "),lo=f("<span>‚ü≥ "),co=f("<span>‚úì "),uo=f("<li>"),go=f("<div><h3></h3><ul>"),ho=f("<div><textarea>"),vo=f("<div><div><h3></h3><div><button></button><button></button><button></button><button>"),po=f("<div><div><input type=text><div></div><div><button></button><button></button><button></button></div></div><div>"),_o=f('<div><header><div><button aria-label="Toggle menu">‚ò∞</button><h1></h1></div><div></div></header><div><main>'),mo=f("<span>/"),fo=f("<span>"),bo=f("<div><h2></h2><p></p><div><input type=text><div><button></button><button>"),wo=f("<li><div><span></span><span></span></div><div>");const yo=e=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-");function $o(){const{t:e,locale:n,setLocale:o}=B(),[a,s]=t(null),[l,d]=t(localStorage.getItem("mddb_token")),[m,f]=z([]),[b,y]=t([]),[C,x]=t(null),[T,E]=t(!1),[P,O]=t(!1),[D,R]=t(!1),[W,H]=t("table"),[F,U]=t(""),[G,V]=t(""),[le,de]=t(!1),[_e,me]=t(null),[fe,be]=t(!1),[we,ye]=t("idle"),[Re,Be]=t(!1),[Ae,je]=t(!1),[Ne,Me]=t(!1),[We,He]=t(!1),[Fe,Ue]=t([]),[Ve,Ye]=t(!1),Ke=async()=>{const e=l();if(e)try{const t=Tn(()=>e,()=>{});await t.auth.logout()}catch{}localStorage.removeItem("mddb_token"),d(null),s(null),window.history.pushState(null,"","/")},Je=i(()=>Tn(()=>l(),Ke)),Ze=i(()=>{const e=a()?.workspace_id;return e?Je().ws(e):null}),Qe=(e,t)=>{localStorage.setItem("mddb_token",e),d(e),s(t)};async function Xe(t,n=!0){try{de(!0);const e=await Je().auth.switchOrg({org_id:t});if(!e.user)throw new Error("No user data returned");Qe(e.token,e.user),x(null),n&&window.history.pushState(null,"","/"),await rt()}catch(i){throw me(i instanceof bn?`${e("errors.failedToSwitch")}: ${i.message}`:`${e("errors.failedToSwitch")}: ${i}`),i}finally{de(!1)}}async function et(e){const t=await Je().organizations.create({name:e.name,welcome_page_title:e.welcomePageTitle,welcome_page_content:e.welcomePageContent});await Xe(t.id),je(!0)}const tt=function(e,t){let n=null;return(...i)=>{null!==n&&clearTimeout(n),n=setTimeout(()=>{e(...i),n=null},t)}}(async()=>{const t=C(),n=Ze();if(t&&fe()&&n)try{ye("saving"),await n.pages.update(t,{title:F(),content:G()}),be(!1),ye("saved");const e=yo(F()),i=a()?.workspace_id,r=a()?.workspace_name;if(i){const n=window.location.pathname,o=`/${i}+${yo(r||"workspace")}/${t}${e?"+"+e:""}`;n!==o&&window.history.replaceState(null,"",o)}setTimeout(()=>{"saved"===we()&&ye("idle")},2e3)}catch(i){me(`${e("errors.autoSaveFailed")}: ${i}`),ye("idle")}},2e3);$(()=>{const e=a(),t=e?.settings?.language;t&&["en","fr","de","es"].includes(t)&&t!==n()&&(o(t),localStorage.setItem("mddb_locale",t))}),k(()=>{const e=new URLSearchParams(window.location.search).get("token");e&&(localStorage.setItem("mddb_token",e),d(e),window.history.replaceState({},document.title,window.location.pathname))});let nt=!1;$(()=>{const e=l(),t=a();!e||t||nt||(nt=!0,(async()=>{try{const e=await Je().auth.me.get();s(e)}catch(e){console.error("Failed to load user",e),e instanceof bn&&401===e.status&&(localStorage.removeItem("mddb_token"),d(null))}finally{nt=!1}})())});const it=async()=>{const t=window.location.pathname;if("/privacy"===t)return O(!0),void R(!1);if("/terms"===t)return R(!0),void O(!1);O(!1),R(!1);const n=t.match(/^\/([^+/]+)(?:\+[^/]*)?\/([a-zA-Z0-9_-]+)(?:\+.*)?$/);if(n&&n[1]&&n[2]){const t=n[1],i=n[2];if(a()&&a()?.workspace_id!==t)try{const n=a()?.workspaces?.some(e=>e.workspace_id===t);if(!n)return void me(e("errors.noAccessToWs")||"You do not have access to this workspace");await async function(t,n=!0){try{de(!0);const e=await Je().auth.switchWorkspace({ws_id:t});if(!e.user)throw new Error("No user data returned");Qe(e.token,e.user),x(null),n&&window.history.pushState(null,"","/"),await rt()}catch(i){throw me(i instanceof bn?`${e("errors.failedToSwitch")}: ${i.message}`:`${e("errors.failedToSwitch")}: ${i}`),i}finally{de(!1)}}(t,!1)}catch{return}return void(i!==C()&&ot(i,!1))}x(null),U(""),V("")};async function rt(){const t=Ze();if(t)try{de(!0);const e=await t.nodes.list();f(I(e.nodes?.filter(Boolean)||[])),me(null)}catch(n){me(`${e("errors.failedToLoad")}: ${n}`)}finally{de(!1)}}async function ot(t,n=!0){const i=Ze();if(i)try{de(!0),He(!1);const e=await i.nodes.get(t);x(e.id),U(e.title),V(e.content||""),be(!1),ye("idle"),me(null);const r=yo(e.title),o=a()?.workspace_id,s=a()?.workspace_name;if(o){const t=`/${o}+${yo(s||"workspace")}/${e.id}${r?"+"+r:""}`;n?window.location.pathname!==t&&window.history.pushState(null,"",t):window.location.pathname!==t&&window.history.replaceState(null,"",t)}if("table"===e.type||"hybrid"===e.type){const e=(await i.tables.records.list(t,{Offset:0,Limit:50})).records||[];y(e),Ye(50===e.length)}else y([]),Ye(!1)}catch(r){me(`${e("errors.failedToLoad")}: ${r}`)}finally{de(!1)}}async function at(t="document"){if(!F().trim())return void me(e("errors.titleRequired")||"Title is required");const n=Ze();if(n)try{de(!0);const e=await n.nodes.create({title:F(),type:t});await rt(),ot(e.id),U(""),V(""),be(!1),ye("idle"),me(null)}catch(i){me(`${e("errors.failedToCreate")}: ${i}`)}finally{de(!1)}}async function st(){const t=C(),n=Ze();if(t&&n)try{de(!0),await n.pages.update(t,{title:F(),content:G()}),await rt(),be(!1),ye("idle"),me(null);const e=yo(F()),i=window.location.pathname,r=a()?.organization_id;if(r){const n=`/${r}/${t}${e?"+"+e:""}`;i!==n&&window.history.replaceState(null,"",n)}}catch(i){me(`${e("errors.failedToSave")}: ${i}`)}finally{de(!1)}}async function lt(){const t=C(),n=Ze();if(t&&n&&confirm(e("table.confirmDeleteRecord")||"Delete this record?"))try{de(!0),await n.pages.delete(t),await rt(),x(null),U(""),V(""),be(!1),ye("idle"),me(null),window.history.pushState(null,"","/")}catch(i){me(`${e("errors.failedToDelete")}: ${i}`)}finally{de(!1)}}k(()=>{window.addEventListener("popstate",it),S(()=>window.removeEventListener("popstate",it))}),$(()=>{a()?(rt(),it()):it()});const dt=e=>{ot(e.id),Me(!1)},ct=e=>{if(!e)return;const t=n=>{for(const i of n){if(i.id===e)return i;if(i.children){const e=t(i.children.filter(e=>!!e));if(e)return e}}};return t(m)};async function ut(t){const n=C(),i=Ze();if(n&&i)try{de(!0),await i.tables.records.create(n,{data:t}),ot(n),me(null)}catch(r){me(`${e("errors.failedToCreate")}: ${r}`)}finally{de(!1)}}async function gt(t){const n=C(),i=Ze();if(n&&i&&confirm(e("table.confirmDeleteRecord")||"Delete this record?"))try{de(!0),await i.tables.records.delete(n,t),ot(n),me(null)}catch(r){me(`${e("errors.failedToDelete")}: ${r}`)}finally{de(!1)}}async function ht(){const t=C(),n=Ze();if(t&&!le()&&n)try{de(!0);const e=b().length,i=(await n.tables.records.list(t,{Offset:e,Limit:50})).records||[];y([...b(),...i]),Ye(50===i.length)}catch(i){me(`${e("errors.failedToLoad")}: ${i}`)}finally{de(!1)}}return[r(u,{get when(){return!P()},get fallback(){return r(nr,{})},get children(){return r(u,{get when(){return!D()},get fallback(){return r(cr,{})},get children(){return r(u,{get when(){return a()},get fallback(){return r(Yi,{onLogin:Qe})},get children(){return[r(u,{get when(){return 0===(a()?.organizations?.length??0)},get children(){return r(Sr,{isFirstOrg:!0,onClose:()=>{},onCreate:et})}}),r(u,{get when(){return Ae()},get children(){return r(Li,{get user(){return a()},get token(){return l()},onComplete:()=>je(!1)})}}),(t=_o(),n=t.firstChild,i=n.firstChild,o=i.firstChild,s=o.nextSibling,d=i.nextSibling,y=n.nextSibling,$=y.firstChild,o.$$click=()=>Me(!Ne()),c(s,()=>e("app.title")),c(d,r(u,{get when(){return(a()?.organizations?.length??0)>0},get children(){return r(ro,{get memberships(){return a()?.organizations||[]},get currentOrgId(){return a()?.organization_id||""},onSwitchOrg:e=>Xe(e),onCreateOrg:()=>Be(!0)})}}),null),c(d,r(Mr,{get user(){return a()},onLogout:Ke}),null),c(y,r(u,{get when(){return Ne()},get children(){var e=oo();return e.$$click=()=>Me(!1),h(()=>v(e,De)),e}}),$),c(y,r(qe,{get isOpen(){return Ne()},get loading(){return le()},nodes:m,get selectedNodeId(){return C()},onToggleSettings:()=>{E(!0),x(null),Me(!1)},onCreatePage:()=>{E(!1),at("document"),Me(!1)},onCreateTable:()=>{E(!1),at("table"),Me(!1)},onSelectNode:dt,onCloseMobileSidebar:()=>Me(!1)}),$),c($,r(u,{get when(){return p(()=>!(!T()||!a()))()&&l()},get children(){return r(vi,{get user(){return a()},get token(){return l()},onClose:()=>E(!1)})}}),null),c($,r(u,{get when(){return!T()},get children(){return[r(u,{get when(){return C()},get children(){var e=ao();return c(e,r(g,{get each(){return(e=>{if(!e)return[];const t=[],n=(e,i)=>{for(const r of e){if(r.id===i)return t.push(r),!0;if(r.children&&n(r.children.filter(e=>!!e),i))return t.unshift(r),!0}return!1};return n(m,e),t})(C())},children:(e,t)=>{return[r(u,{get when(){return t()>0},get children(){var e=mo();return h(()=>v(e,Se)),e}}),(n=fo(),n.$$click=()=>dt(e),c(n,()=>e.title),h(()=>v(n,ke)),n)];var n}})),h(()=>v(e,$e)),e}}),r(u,{get when(){return _e()},fallback:null,get children(){var e=oo();return c(e,_e),h(()=>v(e,J)),e}}),r(u,{get when(){return C()},get fallback(){return t=bo(),n=t.firstChild,i=n.nextSibling,r=i.nextSibling,o=r.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling,c(n,()=>e("welcome.title")),c(i,()=>e("welcome.subtitle")),o.$$input=e=>U(e.target.value),s.$$click=()=>at("document"),c(s,()=>e("welcome.createPage")),l.$$click=()=>at("table"),c(l,()=>e("welcome.createTable")),h(n=>{var i=Z,d=Q,c=e("editor.titlePlaceholder")||"Title",u=oe,g=ce,h=se,p=se;return i!==n.e&&v(t,n.e=i),d!==n.t&&v(r,n.t=d),c!==n.a&&w(o,"placeholder",n.a=c),u!==n.o&&v(o,n.o=u),g!==n.i&&v(a,n.i=g),h!==n.n&&v(s,n.n=h),p!==n.s&&v(l,n.s=p),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),h(()=>o.value=F()),t;var t,n,i,r,o,a,s,l},get children(){var t,n,i=po(),o=i.firstChild,s=o.firstChild,l=s.nextSibling,d=l.nextSibling,m=d.firstChild,y=m.nextSibling,$=y.nextSibling,k=o.nextSibling;return s.$$input=e=>{U(e.target.value);const t=C();var n,i;t&&(n=t,i=e.target.value,f(L(e=>{const t=e=>{for(const r of e){if(r.id===n)return r.title=i,!0;if(r.children&&t(r.children))return!0}return!1};t(e)}))),be(!0),tt()},c(l,r(u,{get when(){return fe()},get children(){var t=so();return t.firstChild,c(t,()=>e("editor.unsaved"),null),h(()=>v(t,ne)),t}}),null),c(l,r(u,{get when(){return"saving"===we()},get children(){var t=lo();return t.firstChild,c(t,()=>e("common.saving"),null),h(()=>v(t,ie)),t}}),null),c(l,r(u,{get when(){return"saved"===we()},get children(){var t=co();return t.firstChild,c(t,()=>e("common.saved"),null),h(()=>v(t,re)),t}}),null),m.$$click=()=>{const t=C();t&&async function(t){if(We())return void He(!1);const n=Ze();if(n)try{de(!0);const e=await n.pages.history.list(t,{Limit:100});Ue(e.history?.filter(Boolean)||[]),He(!0)}catch(i){me(`${e("errors.failedToLoad")}: ${i}`)}finally{de(!1)}}(t)},c(m,(t=p(()=>!!We()),()=>t()?e("editor.hideHistory"):e("editor.history"))),y.$$click=st,c(y,(n=p(()=>!!le()),()=>n()?e("common.saving"):e("common.save"))),$.$$click=lt,c($,()=>e("common.delete")),c(i,r(u,{get when(){return We()},get children(){var t=go(),n=t.firstChild,i=n.nextSibling;return c(n,()=>e("editor.versionHistory")),c(i,r(g,{get each(){return Fe()},children:t=>{return n=wo(),i=n.firstChild,r=i.firstChild,o=r.nextSibling,a=i.nextSibling,n.$$click=()=>{const n=C();n&&async function(t,n){if(!confirm(e("editor.restoreConfirm")||"This will replace current editor content. Continue?"))return;const i=Ze();if(i)try{de(!0);const e=await i.pages.history.get(t,n);V(e.content||""),be(!0),He(!1)}catch(r){me(`${e("errors.failedToLoad")}: ${r}`)}finally{de(!1)}}(n,t.hash)},c(r,()=>new Date(t.timestamp).toLocaleString()),c(o,()=>t.hash.substring(0,7)),c(a,()=>t.message),h(e=>{var t=Le,s=Ie,l=Te,d=Ee,c=Pe;return t!==e.e&&v(n,e.e=t),s!==e.t&&v(i,e.t=s),l!==e.a&&v(r,e.a=l),d!==e.o&&v(o,e.o=d),c!==e.i&&v(a,e.i=c),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),n;var n,i,r,o,a}}),null),c(i,r(u,{get when(){return 0===Fe().length},get children(){var t=uo();return c(t,()=>e("editor.noHistory")),h(()=>v(t,Le)),t}}),null),h(e=>{var n=xe,r=ze;return n!==e.e&&v(t,e.e=n),r!==e.t&&v(i,e.t=r),e},{e:void 0,t:void 0}),t}}),k),c(k,r(u,{get when(){return"table"!==ct(C())?.type},get children(){var t=ho(),n=t.firstChild;return n.$$input=e=>{V(e.target.value),be(!0),tt()},c(t,r(Ge,{get content(){return G()},get orgId(){return a()?.organization_id}}),null),h(i=>{var r=ge,o=e("editor.contentPlaceholder")||"Write your content in markdown...",a=Ce;return r!==i.e&&v(t,i.e=r),o!==i.t&&w(n,"placeholder",i.t=o),a!==i.a&&v(n,i.a=a),i},{e:void 0,t:void 0,a:void 0}),h(()=>n.value=G()),t}}),null),c(k,r(u,{get when(){return"document"!==ct(C())?.type},get children(){var t=vo(),n=t.firstChild,i=n.firstChild,o=i.nextSibling,a=o.firstChild,s=a.nextSibling,l=s.nextSibling,d=l.nextSibling;return c(i,()=>e("table.records")),a.$$click=()=>H("table"),c(a,()=>e("table.table")),s.$$click=()=>H("grid"),c(s,()=>e("table.grid")),l.$$click=()=>H("gallery"),c(l,()=>e("table.gallery")),d.$$click=()=>H("board"),c(d,()=>e("table.board")),c(t,r(u,{get when(){return"table"===W()},get children(){return r(Ot,{get tableId(){return C()||""},get columns(){return ct(C())?.properties||[]},get records(){return b()},onAddRecord:ut,onDeleteRecord:gt,onLoadMore:ht,get hasMore(){return Ve()}})}}),null),c(t,r(u,{get when(){return"grid"===W()},get children(){return r(Ut,{get records(){return b()},get columns(){return ct(C())?.properties||[]},onDeleteRecord:gt})}}),null),c(t,r(u,{get when(){return"gallery"===W()},get children(){return r(Zt,{get records(){return b()},get columns(){return ct(C())?.properties||[]},onDeleteRecord:gt})}}),null),c(t,r(u,{get when(){return"board"===W()},get children(){return r(fn,{get records(){return b()},get columns(){return ct(C())?.properties||[]},onDeleteRecord:gt})}}),null),h(e=>{var i=he,r=ve,c=pe,u={[`${Y}`]:"table"===W()},g={[`${Y}`]:"grid"===W()},h={[`${Y}`]:"gallery"===W()},p={[`${Y}`]:"board"===W()};return i!==e.e&&v(t,e.e=i),r!==e.t&&v(n,e.t=r),c!==e.a&&v(o,e.a=c),e.o=_(a,u,e.o),e.i=_(s,g,e.i),e.n=_(l,h,e.n),e.s=_(d,p,e.s),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t}}),null),h(t=>{var n=X,r=ee,a=e("editor.titlePlaceholder")||"Title",c=oe,u=te,g=ae,h=le(),p=le(),_=le(),f=ue;return n!==t.e&&v(i,t.e=n),r!==t.t&&v(o,t.t=r),a!==t.a&&w(s,"placeholder",t.a=a),c!==t.o&&v(s,t.o=c),u!==t.i&&v(l,t.i=u),g!==t.n&&v(d,t.n=g),h!==t.s&&(m.disabled=t.s=h),p!==t.h&&(y.disabled=t.h=p),_!==t.r&&($.disabled=t.r=_),f!==t.d&&v(k,t.d=f),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),h(()=>s.value=F()),i}})]}}),null),h(e=>{var r=A,a=j,s=N,l=Oe,c=M,u=q,g=K;return r!==e.e&&v(t,e.e=r),a!==e.t&&v(n,e.t=a),s!==e.a&&v(i,e.a=s),l!==e.o&&v(o,e.o=l),c!==e.i&&v(d,e.i=c),u!==e.n&&v(y,e.n=u),g!==e.s&&v($,e.s=g),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),t)];var t,n,i,o,s,d,y,$}})}})}}),r(wr,{}),r(u,{get when(){return Re()},get children(){return r(Sr,{onClose:()=>Be(!1),onCreate:et})}})]}d(["click","input"]);const ko=localStorage.getItem("mddb_locale"),So=ko&&["en","fr","de","es"].includes(ko)?ko:"en",Co=document.getElementById("app");Co&&T(()=>r(R,{initialLocale:So,get children(){return r($o,{})}}),Co);
