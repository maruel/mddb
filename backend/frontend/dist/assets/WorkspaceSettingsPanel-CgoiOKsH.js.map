{"version":3,"file":"WorkspaceSettingsPanel-CgoiOKsH.js","sources":["../../../../frontend/src/components/settings/WorkspaceSettingsPanel.tsx"],"sourcesContent":["// Workspace settings panel for managing workspace members, settings, and git sync.\n\nimport { createSignal, createEffect, Show } from 'solid-js';\nimport { useNavigate, useLocation } from '@solidjs/router';\nimport { useAuth } from '../../contexts';\nimport { useI18n } from '../../i18n';\nimport {\n  WSRoleAdmin,\n  type UserResponse,\n  type WSInvitationResponse,\n  type WorkspaceRole,\n  type GitRemoteResponse,\n} from '@sdk/types.gen';\nimport MembersTable from './MembersTable';\nimport InviteForm from './InviteForm';\nimport styles from './WorkspaceSettingsPanel.module.css';\n\ninterface WorkspaceSettingsPanelProps {\n  wsId: string;\n  section?: string;\n  onNavigateToOrgSettings: (orgId: string, orgName: string) => void;\n}\n\ntype Tab = 'members' | 'settings' | 'sync';\n\nexport default function WorkspaceSettingsPanel(props: WorkspaceSettingsPanelProps) {\n  const { t } = useI18n();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { user, orgApi, wsApi } = useAuth();\n\n  // Determine initial tab from section prop\n  const getInitialTab = (): Tab => {\n    if (props.section === 'settings') return 'settings';\n    if (props.section === 'sync') return 'sync';\n    return 'members';\n  };\n\n  const [activeTab, setActiveTab] = createSignal<Tab>(getInitialTab());\n  const [members, setMembers] = createSignal<UserResponse[]>([]);\n  const [invitations, setInvitations] = createSignal<WSInvitationResponse[]>([]);\n\n  // Git Remote state\n  const [gitRemote, setGitRemote] = createSignal<GitRemoteResponse | null>(null);\n  const [newRemoteURL, setNewRemoteURL] = createSignal('');\n  const [newRemoteToken, setNewRemoteToken] = createSignal('');\n\n  // Workspace Settings states\n  const [wsName, setWsName] = createSignal('');\n  const [originalWsName, setOriginalWsName] = createSignal('');\n\n  // Workspace Quotas\n  const [maxPages, setMaxPages] = createSignal(0);\n  const [maxStorageBytes, setMaxStorageBytes] = createSignal(0);\n  const [maxRecordsPerTable, setMaxRecordsPerTable] = createSignal(0);\n  const [maxAssetSizeBytes, setMaxAssetSizeBytes] = createSignal(0);\n\n  const [loading, setLoading] = createSignal(false);\n  const [error, setError] = createSignal<string | null>(null);\n  const [success, setSuccess] = createSignal<string | null>(null);\n\n  const isAdmin = () => user()?.workspace_role === WSRoleAdmin;\n\n  // Update URL hash when tab changes\n  const handleTabChange = (tab: Tab) => {\n    setActiveTab(tab);\n    const newHash = tab === 'members' ? '' : `#${tab}`;\n    navigate(location.pathname + newHash, { replace: true });\n  };\n\n  const loadData = async () => {\n    const org = orgApi();\n    if (!org) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n\n      const ws = wsApi();\n      if (activeTab() === 'members' && isAdmin()) {\n        const [membersData, invsData] = await Promise.all([\n          org.users.listUsers(),\n          ws ? ws.invitations.listWSInvitations() : Promise.resolve({ invitations: [] }),\n        ]);\n        setMembers(membersData.users?.filter((u): u is UserResponse => !!u) || []);\n        setInvitations(invsData.invitations?.filter((i): i is WSInvitationResponse => !!i) || []);\n      }\n\n      if (activeTab() === 'settings' && ws) {\n        const wsData = await ws.workspaces.getWorkspace();\n        setWsName(wsData.name);\n        setOriginalWsName(wsData.name);\n        // Load quotas\n        setMaxPages(wsData.quotas.max_pages);\n        setMaxStorageBytes(wsData.quotas.max_storage_bytes);\n        setMaxRecordsPerTable(wsData.quotas.max_records_per_table);\n        setMaxAssetSizeBytes(wsData.quotas.max_asset_size_bytes);\n      }\n\n      if (activeTab() === 'sync' && isAdmin() && ws) {\n        try {\n          const remoteData = await ws.settings.git.getGitRemote();\n          setGitRemote(remoteData);\n        } catch {\n          setGitRemote(null);\n        }\n      }\n    } catch (err) {\n      setError(`${t('errors.failedToLoad')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  createEffect(() => {\n    loadData();\n  });\n\n  // Update tab when section prop changes\n  createEffect(() => {\n    const section = props.section;\n    if (section === 'settings') setActiveTab('settings');\n    else if (section === 'sync') setActiveTab('sync');\n    else if (section === 'members' || !section) setActiveTab('members');\n  });\n\n  const handleInvite = async (email: string, role: string) => {\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      await ws.invitations.createWSInvitation({ email, role: role as 'admin' | 'editor' | 'viewer' });\n      setSuccess(t('success.invitationSent') || 'Invitation sent successfully');\n      loadData();\n    } catch (err) {\n      setError(`${t('errors.failedToInvite')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUpdateRole = async (userId: string, role: string) => {\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      await ws.users.updateWSMemberRole({ user_id: userId, role: role as WorkspaceRole });\n      setSuccess(t('success.roleUpdated') || 'Role updated');\n      loadData();\n    } catch (err) {\n      setError(`${t('errors.failedToUpdateRole')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const saveWorkspaceSettings = async (e: Event) => {\n    e.preventDefault();\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      setSuccess(null);\n\n      // Update name if changed\n      if (wsName() !== originalWsName() && wsName().trim()) {\n        await ws.workspaces.updateWorkspace({ name: wsName().trim() });\n        setOriginalWsName(wsName().trim());\n      }\n\n      // Update quotas\n      await ws.workspaces.updateWorkspace({\n        quotas: {\n          max_pages: maxPages(),\n          max_storage_bytes: maxStorageBytes(),\n          max_records_per_table: maxRecordsPerTable(),\n          max_asset_size_bytes: maxAssetSizeBytes(),\n        },\n      });\n\n      setSuccess(t('success.workspaceSettingsSaved') || 'Workspace settings saved successfully');\n    } catch (err) {\n      setError(`${t('errors.failedToSave')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddOrUpdateRemote = async (e: Event) => {\n    e.preventDefault();\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      const remoteData = await ws.settings.git.updateGitRemote({\n        url: newRemoteURL(),\n        token: newRemoteToken(),\n        type: 'custom',\n        auth_type: newRemoteToken() ? 'token' : 'none',\n      });\n      setGitRemote(remoteData);\n      setSuccess(t('success.remoteAdded') || 'Git remote configured');\n      setNewRemoteURL('');\n      setNewRemoteToken('');\n    } catch (err) {\n      setError(`${t('errors.failedToAddRemote')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePush = async () => {\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      setSuccess(null);\n      await ws.settings.git.pushGit();\n      setSuccess(t('success.pushSuccessful') || 'Push successful');\n      loadData();\n    } catch (err) {\n      setError(`${t('errors.pushFailed')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDeleteRemote = async () => {\n    if (!confirm(t('settings.confirmRemoveRemote') || 'Are you sure you want to remove this remote?')) return;\n\n    const ws = wsApi();\n    if (!ws) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      await ws.settings.git.deleteGitRemote();\n      setGitRemote(null);\n      setSuccess(t('success.remoteRemoved') || 'Remote removed');\n    } catch (err) {\n      setError(`${t('errors.failedToRemoveRemote')}: ${err}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const wsRoleOptions = [\n    { value: 'admin', label: t('settings.roleAdmin') },\n    { value: 'editor', label: t('settings.roleEditor') },\n    { value: 'viewer', label: t('settings.roleViewer') },\n  ];\n\n  const pendingInvitations = () =>\n    invitations().map((inv) => ({\n      email: inv.email,\n      role: inv.role,\n      created: inv.created,\n    }));\n\n  return (\n    <div class={styles.panel}>\n      <div class={styles.tabs}>\n        <button class={activeTab() === 'members' ? styles.activeTab : ''} onClick={() => handleTabChange('members')}>\n          {t('settings.members')}\n        </button>\n        <button class={activeTab() === 'settings' ? styles.activeTab : ''} onClick={() => handleTabChange('settings')}>\n          {t('settings.workspace')}\n        </button>\n        <Show when={isAdmin()}>\n          <button class={activeTab() === 'sync' ? styles.activeTab : ''} onClick={() => handleTabChange('sync')}>\n            {t('settings.gitSync')}\n          </button>\n        </Show>\n      </div>\n\n      <Show when={error()}>\n        <div class={styles.error}>{error()}</div>\n      </Show>\n      <Show when={success()}>\n        <div class={styles.success}>{success()}</div>\n      </Show>\n\n      <Show when={activeTab() === 'members'}>\n        <section class={styles.section}>\n          <h3>{t('settings.members')}</h3>\n          <Show when={isAdmin()} fallback={<p>{t('settings.adminOnlyMembers')}</p>}>\n            <MembersTable\n              members={members()}\n              currentUserId={user()?.id || ''}\n              roleOptions={wsRoleOptions}\n              roleField=\"workspace_role\"\n              onUpdateRole={handleUpdateRole}\n              loading={loading()}\n            />\n            <InviteForm\n              roleOptions={wsRoleOptions}\n              defaultRole=\"viewer\"\n              pendingInvitations={pendingInvitations()}\n              onInvite={handleInvite}\n              loading={loading()}\n            />\n          </Show>\n        </section>\n      </Show>\n\n      <Show when={activeTab() === 'settings'}>\n        <section class={styles.section}>\n          <h3>{t('settings.workspaceSettings')}</h3>\n          <Show when={isAdmin()} fallback={<p>{t('settings.adminOnlyWorkspace')}</p>}>\n            <form onSubmit={saveWorkspaceSettings} class={styles.settingsForm}>\n              <div class={styles.formItem}>\n                <label>{t('settings.workspaceName')}</label>\n                <input type=\"text\" value={wsName()} onInput={(e) => setWsName(e.target.value)} required />\n              </div>\n\n              <h4>{t('settings.workspaceQuotas')}</h4>\n              <div class={styles.formGrid}>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxPages')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxPages()}\n                    onInput={(e) => setMaxPages(parseInt(e.target.value) || 1)}\n                    min=\"1\"\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxStorageBytes')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxStorageBytes()}\n                    onInput={(e) => setMaxStorageBytes(parseInt(e.target.value) || 1)}\n                    min=\"1\"\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxRecordsPerTable')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxRecordsPerTable()}\n                    onInput={(e) => setMaxRecordsPerTable(parseInt(e.target.value) || 1)}\n                    min=\"1\"\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.maxAssetSizeBytes')}</label>\n                  <input\n                    type=\"number\"\n                    value={maxAssetSizeBytes()}\n                    onInput={(e) => setMaxAssetSizeBytes(parseInt(e.target.value) || 1)}\n                    min=\"1\"\n                  />\n                </div>\n              </div>\n\n              <button type=\"submit\" class={styles.saveButton} disabled={loading()}>\n                {t('settings.saveWorkspaceSettings')}\n              </button>\n            </form>\n          </Show>\n\n          <div class={styles.orgLink}>\n            <p>{t('settings.orgSettingsHint')}</p>\n            <button\n              onClick={() => {\n                const u = user();\n                const orgId = u?.organization_id;\n                const orgMembership = u?.organizations?.find((m) => m.organization_id === orgId);\n                const orgName = orgMembership?.organization_name || '';\n                if (orgId) {\n                  props.onNavigateToOrgSettings(orgId, orgName);\n                }\n              }}\n              class={styles.linkButton}\n            >\n              {t('settings.openOrgSettings')} â†’\n            </button>\n          </div>\n        </section>\n      </Show>\n\n      <Show when={activeTab() === 'sync'}>\n        <section class={styles.section}>\n          <h3>{t('settings.gitSynchronization')}</h3>\n          <p class={styles.hint}>{t('settings.gitSyncHint')}</p>\n\n          <Show when={gitRemote()}>\n            {(remote) => {\n              const lastSync = remote().last_sync;\n              return (\n                <table class={styles.table}>\n                  <thead>\n                    <tr>\n                      <th>{t('settings.urlColumn')}</th>\n                      <th>{t('settings.lastSyncColumn')}</th>\n                      <th>{t('common.actions')}</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td>{remote().url}</td>\n                      <td>{lastSync ? new Date(lastSync).toLocaleString() : t('settings.never')}</td>\n                      <td class={styles.actions}>\n                        <button onClick={handlePush} disabled={loading()} class={styles.smallButton}>\n                          {t('common.push')}\n                        </button>\n                        <button onClick={handleDeleteRemote} disabled={loading()} class={styles.deleteButtonSmall}>\n                          {t('common.remove')}\n                        </button>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              );\n            }}\n          </Show>\n\n          <Show when={!gitRemote()}>\n            <div class={styles.addRemoteSection}>\n              <h4>{t('settings.addNewRemote')}</h4>\n              <form onSubmit={handleAddOrUpdateRemote} class={styles.settingsForm}>\n                <div class={styles.formItem}>\n                  <label>{t('settings.repositoryUrl')}</label>\n                  <input\n                    type=\"url\"\n                    value={newRemoteURL()}\n                    onInput={(e) => setNewRemoteURL(e.target.value)}\n                    placeholder={t('settings.repositoryUrlPlaceholder') || 'https://github.com/user/repo.git'}\n                    required\n                  />\n                </div>\n                <div class={styles.formItem}>\n                  <label>{t('settings.personalAccessToken')}</label>\n                  <input\n                    type=\"password\"\n                    value={newRemoteToken()}\n                    onInput={(e) => setNewRemoteToken(e.target.value)}\n                    placeholder={t('settings.tokenPlaceholder') || 'ghp_...'}\n                  />\n                  <p class={styles.hint}>{t('settings.tokenHint')}</p>\n                </div>\n                <button type=\"submit\" class={styles.saveButton} disabled={loading()}>\n                  {t('settings.addRemote')}\n                </button>\n              </form>\n            </div>\n          </Show>\n        </section>\n      </Show>\n    </div>\n  );\n}\n"],"names":["WorkspaceSettingsPanel","props","t","useI18n","navigate","useNavigate","location","useLocation","user","orgApi","wsApi","useAuth","activeTab","setActiveTab","createSignal","section","members","setMembers","invitations","setInvitations","gitRemote","setGitRemote","newRemoteURL","setNewRemoteURL","newRemoteToken","setNewRemoteToken","wsName","setWsName","originalWsName","setOriginalWsName","maxPages","setMaxPages","maxStorageBytes","setMaxStorageBytes","maxRecordsPerTable","setMaxRecordsPerTable","maxAssetSizeBytes","setMaxAssetSizeBytes","loading","setLoading","error","setError","success","setSuccess","isAdmin","workspace_role","WSRoleAdmin","handleTabChange","tab","newHash","pathname","replace","loadData","async","org","ws","membersData","invsData","Promise","all","users","listUsers","listWSInvitations","resolve","filter","u","i","wsData","workspaces","getWorkspace","name","quotas","max_pages","max_storage_bytes","max_records_per_table","max_asset_size_bytes","remoteData","settings","git","getGitRemote","err","createEffect","handleInvite","email","role","createWSInvitation","handleUpdateRole","userId","updateWSMemberRole","user_id","saveWorkspaceSettings","e","preventDefault","trim","updateWorkspace","handleAddOrUpdateRemote","updateGitRemote","url","token","type","auth_type","handlePush","pushGit","handleDeleteRemote","confirm","deleteGitRemote","wsRoleOptions","value","label","_el$","_tmpl$8","_el$2","firstChild","_el$3","_el$4","nextSibling","$$click","_$insert","_$createComponent","Show","when","children","_el$5","_tmpl$","_$effect","_$className","styles","_el$6","_tmpl$2","_el$7","_el$8","_tmpl$3","_el$9","fallback","_el$47","_tmpl$9","MembersTable","currentUserId","id","roleOptions","roleField","onUpdateRole","InviteForm","defaultRole","pendingInvitations","map","inv","created","onInvite","_el$0","_tmpl$5","_el$1","_el$29","_el$30","_el$31","_el$32","_el$48","_el$10","_tmpl$4","_el$11","_el$12","_el$13","_el$14","_el$15","_el$16","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","_el$23","_el$24","_el$25","_el$26","_el$27","_el$28","addEventListener","$$input","target","parseInt","_p$","_v$","_v$2","_v$3","_v$4","_v$5","_v$6","_v$7","_v$8","_v$9","a","o","n","s","h","r","disabled","undefined","orgId","organization_id","orgMembership","organizations","find","m","orgName","organization_name","onNavigateToOrgSettings","_v$0","_v$1","_v$10","_el$33","_tmpl$7","_el$34","_el$35","remote","lastSync","last_sync","_el$49","_tmpl$0","_el$50","_el$52","_el$53","_el$54","_el$57","_el$58","_el$59","_el$60","_el$61","Date","toLocaleString","_v$26","_v$27","_v$28","_v$29","_v$30","_v$31","_el$36","_tmpl$6","_el$37","_el$38","_el$39","_el$40","_el$41","_el$42","_el$43","_el$44","_el$45","_el$46","_v$11","_v$12","_v$13","_v$14","_v$15","_v$16","_v$17","_v$18","_v$19","_$setAttribute","_v$20","_v$21","_v$22","_v$23","_v$24","_v$25","_$delegateEvents"],"mappings":"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"}