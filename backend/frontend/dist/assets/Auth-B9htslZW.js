import{a as t,g as e,c as a,s as i,y as r,v as l,w as n,d as o,F as s,B as u,S as d,ab as h,x as c,q as p}from"./vendor-DudX5Zyp.js";import{u as v,O as g,a as w,b as f,A as _,c as m}from"./index-Bs5Rbtnk.js";import"./editor-vendor-C_rEih6H.js";const b="_authContainer_dcxwu_1",x="_authForm_dcxwu_9",y="_formGroup_dcxwu_24",C="_error_dcxwu_62",B="_toggle_dcxwu_72",A="_authFooter_dcxwu_87",F="_divider_dcxwu_104",M="_oauthButtons_dcxwu_124",S="_oauthIcon_dcxwu_130",$="_googleButton_dcxwu_137",z="_microsoftButton_dcxwu_138",V="_githubButton_dcxwu_139",H="_oauthButton_dcxwu_124";var k=c('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#4285F4 d="M23.745 12.27c0-.79-.07-1.54-.19-2.27h-11.3v4.51h6.47c-.29 1.48-1.14 2.73-2.4 3.58v3h3.86c2.26-2.09 3.56-5.17 3.56-8.82z"></path><path fill=#34A853 d="M12.255 24c3.24 0 5.95-1.08 7.93-2.91l-3.86-3c-1.08.72-2.45 1.16-4.07 1.16-3.13 0-5.78-2.11-6.73-4.96h-3.98v3.09C3.515 21.3 7.565 24 12.255 24z"></path><path fill=#FBBC05 d="M5.525 14.29c-.25-.72-.38-1.49-.38-2.29s.14-1.57.38-2.29V6.62h-3.98a11.86 11.86 0 000 10.76l3.98-3.09z"></path><path fill=#EA4335 d="M12.255 4.75c1.77 0 3.35.61 4.6 1.8l3.42-3.42C18.205 1.19 15.495 0 12.255 0c-4.69 0-8.74 2.7-10.71 6.62l3.98 3.09c.95-2.85 3.6-4.96 6.73-4.96z">'),q=c('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=#F25022 d="M0 0v11.408h11.408V0z"></path><path fill=#00A4EF d="M12.594 0v11.408H24V0z"></path><path fill=#7FBA00 d="M0 12.594V24h11.408V12.594z"></path><path fill=#FFB900 d="M12.594 12.594V24H24V12.594z">'),K=c('<svg viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path fill=currentColor d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">'),W=c("<div>"),j=c("<div><span>"),E=c("<div><label for=name></label><input id=name name=name type=text required autocomplete=name>"),G=c("<div><form><h2></h2><div><label for=email></label><input id=email name=email type=email required autocomplete=email></div><div><label for=password></label><input id=password name=password type=password required></div><button type=submit></button><p> <button type=button></button></p><div>"),O=c("<a target=_self>");const P={[g]:function(){return t=k(),l(()=>u(t,"class",S)),t;var t},[f]:function(){return t=q(),l(()=>u(t,"class",S)),t;var t},[w]:function(){return t=K(),l(()=>u(t,"class",S)),t;var t}},I={[g]:{style:$,labelKey:"auth.loginWithGoogle"},[f]:{style:z,labelKey:"auth.loginWithMicrosoft"},[w]:{style:V,labelKey:"auth.loginWithGitHub"}};const L=m((t,e)=>fetch(t,e));function D(c){const{t:p}=v(),[m]=t(()=>L.auth.listProviders().then(t=>t.providers)),S=e(()=>{const t=m()??[],e=[g,w,f];return[...t].sort((t,a)=>{let i=e.indexOf(t),r=e.indexOf(a);return-1===i&&(i=e.length),-1===r&&(r=e.length),i-r})}),[$,z]=a(!1),[V,k]=a(""),[q,K]=a(""),[D,T]=a(""),[U,J]=a(null),[N,Q]=a(!1),R=async t=>{t.preventDefault(),J(null),Q(!0);try{const t=$()?await L.auth.register({email:V(),password:q(),name:D()}):await L.auth.login({email:V(),password:q()});t.token&&t.user?c.onLogin(t.token,t.user):J("Invalid response from server")}catch(e){J(e instanceof _?e.response.error?.message||"Authentication failed":"An error occurred. Please try again.")}finally{Q(!1)}};return at=G(),it=at.firstChild,rt=it.firstChild,lt=rt.nextSibling,nt=lt.firstChild,ot=nt.nextSibling,st=lt.nextSibling,ut=st.firstChild,dt=ut.nextSibling,ht=st.nextSibling,ct=ht.nextSibling,pt=ct.firstChild,vt=pt.nextSibling,gt=ct.nextSibling,it.addEventListener("submit",R),i(rt,(X=r(()=>!!$()),()=>X()?p("auth.createAccount"):p("auth.loginTitle"))),i(it,(Y=r(()=>!!U()),()=>{return Y()&&(t=W(),i(t,U),l(()=>n(t,C)),t);var t}),lt),i(it,o(d,{get when(){return S().length>0},get children(){return[(a=W(),i(a,o(s,{get each(){return S()},children:t=>{const e=function(t){const e=I[t];return e?{style:e.style,label:e.labelKey}:{style:H,label:t.charAt(0).toUpperCase()+t.slice(1)}}(t),a=t in I,r=P[t];return s=O(),u(s,"href",`/api/v1/auth/oauth/${t}`),i(s,r&&o(r,{}),null),i(s,()=>a?p(e.label):e.label,null),l(()=>n(s,e.style)),s;var s}})),l(()=>n(a,M)),a),(t=j(),e=t.firstChild,i(e,()=>p("auth.or")),l(()=>n(t,F)),t)];var t,e,a}}),lt),i(it,o(d,{get when(){return $()},get children(){var t=E(),e=t.firstChild,a=e.nextSibling;return i(e,()=>p("auth.name")),a.$$input=t=>T(t.target.value),l(()=>n(t,y)),l(()=>a.value=D()),t}}),lt),i(nt,()=>p("auth.email")),ot.$$input=t=>k(t.target.value),i(ut,()=>p("auth.password")),dt.$$input=t=>K(t.target.value),i(ht,(Z=r(()=>!!N()),()=>Z()?p("auth.pleaseWait"):r(()=>!!$())()?p("auth.register"):p("auth.login"))),i(ct,(tt=r(()=>!!$()),()=>tt()?p("auth.alreadyHaveAccount"):p("auth.dontHaveAccount")),pt),vt.$$click=()=>z(!$()),i(vt,(et=r(()=>!!$()),()=>et()?p("auth.login"):p("auth.register"))),i(gt,o(h,{href:"/privacy",get children(){return p("app.privacyPolicy")}})),l(t=>{var e=b,a=x,i=y,r=y,l=$()?"new-password":"current-password",o=N(),s=B,d=A;return e!==t.e&&n(at,t.e=e),a!==t.t&&n(it,t.t=a),i!==t.a&&n(lt,t.a=i),r!==t.o&&n(st,t.o=r),l!==t.i&&u(dt,"autocomplete",t.i=l),o!==t.n&&(ht.disabled=t.n=o),s!==t.s&&n(ct,t.s=s),d!==t.h&&n(gt,t.h=d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),l(()=>ot.value=V()),l(()=>dt.value=q()),at;var X,Y,Z,tt,et,at,it,rt,lt,nt,ot,st,ut,dt,ht,ct,pt,vt,gt}p(["input","click"]);export{D as default};
